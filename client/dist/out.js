!function r(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,a,o)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(t,n,r){var h,c,s,l,x,b,w,M,T,S,E,A,d,f,L,R,C,P,u,p,m,g,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let O=o(t("three"));function e(e){O.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function G(){var n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}function j(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=h.MSFT_TEXTURE_DDS,this.ddsLoader=e}function v(e){this.name=h.KHR_LIGHTS_PUNCTUAL;e=e.extensions&&e.extensions[h.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=e.lights||[]}function y(){this.name=h.KHR_MATERIALS_UNLIT}function _(){this.name=h.KHR_MATERIALS_CLEARCOAT}function V(e){this.name=h.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,s);if(this.header={magic:O.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==c)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var n=new DataView(e,s),r=0;r<n.byteLength;){var i,a=n.getUint32(r,!0),o=(r+=4,n.getUint32(r,!0));r+=4,o===l.JSON?(i=new Uint8Array(e,s+r,a),this.content=O.LoaderUtils.decodeText(i)):o===l.BIN&&(this.body=e.slice(i=s+r,i+a)),r+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function D(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=h.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function N(){this.name=h.KHR_TEXTURE_TRANSFORM}function I(e){O.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var n=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),a=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),s={specular:{value:(new O.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var t in s)e.uniforms[t]=s[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),e.fragmentShader=e.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_pars_fragment>",n),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_pars_fragment>",r),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",i),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",a),e.fragmentShader=e.fragmentShader.replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){(s.glossinessMap.value=e)?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function W(){return{name:h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return I},extendParams:function(e,t,n){var r,t=t.extensions[this.name],i=(e.color=new O.Color(1,1,1),e.opacity=1,[]);return Array.isArray(t.diffuseFactor)&&(r=t.diffuseFactor,e.color.fromArray(r),e.opacity=r[3]),void 0!==t.diffuseTexture&&i.push(n.assignTexture(e,"map",t.diffuseTexture)),e.emissive=new O.Color(0,0,0),e.glossiness=void 0!==t.glossinessFactor?t.glossinessFactor:1,e.specular=new O.Color(1,1,1),Array.isArray(t.specularFactor)&&e.specular.fromArray(t.specularFactor),void 0!==t.specularGlossinessTexture&&(r=t.specularGlossinessTexture,i.push(n.assignTexture(e,"glossinessMap",r)),i.push(n.assignTexture(e,"specularMap",r))),Promise.all(i)},createMaterial:function(e){var t=new I(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=O.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function q(){this.name=h.KHR_MESH_QUANTIZATION}function k(e,t,n,r){O.Interpolant.call(this,e,t,n,r)}function B(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function F(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function U(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function z(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function H(e,t,n){this.json=e||{},this.extensions=t||{},this.options=n||{},this.cache=new G,this.primitiveCache={},this.textureLoader=new O.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new O.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function X(h,d,f){var e,t=d.attributes,n=[];for(e in t){var r=R[e]||e.toLowerCase();r in h.attributes||n.push(((e,t)=>f.getDependency("accessor",e).then(function(e){h.setAttribute(t,e)}))(t[e],r))}void 0===d.indices||h.index||(i=f.getDependency("accessor",d.indices).then(function(e){h.setIndex(e)}),n.push(i)),U(h,d);var i=h,a=d,o=f,s=a.attributes,l=new O.Box3;if(void 0!==s.POSITION){var u=(_=o.json.accessors[s.POSITION]).min,c=_.max;if(void 0===u||void 0===c)console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");else{l.set(new O.Vector3(u[0],u[1],u[2]),new O.Vector3(c[0],c[1],c[2]));var p=a.targets;if(void 0!==p){for(var m=new O.Vector3,g=new O.Vector3,v=0,y=p.length;v<y;v++){var _,x=p[v];void 0!==x.POSITION&&(u=(_=o.json.accessors[x.POSITION]).min,c=_.max,void 0!==u&&void 0!==c?(g.setX(Math.max(Math.abs(u[0]),Math.abs(c[0]))),g.setY(Math.max(Math.abs(u[1]),Math.abs(c[1]))),g.setZ(Math.max(Math.abs(u[2]),Math.abs(c[2]))),m.max(g)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}l.expandByVector(m)}i.boundingBox=l;s=new O.Sphere;l.getCenter(s.center),s.radius=l.min.distanceTo(l.max)/2,i.boundingSphere=s}}return Promise.all(n).then(function(){if(void 0===d.targets)return h;for(var n=h,e=d.targets,t=f,r=!1,i=!1,a=0,o=e.length;a<o&&(void 0!==(c=e[a]).POSITION&&(r=!0),void 0!==c.NORMAL&&(i=!0),!r||!i);a++);if(!r&&!i)return Promise.resolve(n);for(var s=[],l=[],a=0,o=e.length;a<o;a++){var u,c=e[a];r&&(u=void 0!==c.POSITION?t.getDependency("accessor",c.POSITION):n.attributes.position,s.push(u)),i&&(u=void 0!==c.NORMAL?t.getDependency("accessor",c.NORMAL):n.attributes.normal,l.push(u))}return Promise.all([Promise.all(s),Promise.all(l)]).then(function(e){var t=e[0],e=e[1];return r&&(n.morphAttributes.position=t),i&&(n.morphAttributes.normal=e),n.morphTargetsRelative=!0,n})})}function Y(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(t===O.TriangleFanDrawMode)for(a=1;a<=o;a++)s.push(n.getX(0)),s.push(n.getX(a)),s.push(n.getX(a+1));else for(a=0;a<o;a++)a%2==0?(s.push(n.getX(a)),s.push(n.getX(a+1)),s.push(n.getX(a+2))):(s.push(n.getX(a+2)),s.push(n.getX(a+1)),s.push(n.getX(a)));s.length/3!=o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");t=e.clone();return t.setIndex(s),t}O.GLTFLoader=(e.prototype=Object.assign(Object.create(O.Loader.prototype),{constructor:e,load:function(t,n,e,r){function i(e){r?r(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)}var a=this,o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:O.LoaderUtils.extractUrlBase(t),s=(a.manager.itemStart(t),new O.FileLoader(a.manager));s.setPath(this.path),s.setResponseType("arraybuffer"),"use-credentials"===a.crossOrigin&&s.setWithCredentials(!0),s.load(t,function(e){try{a.parse(e,o,function(e){n(e),a.manager.itemEnd(t)},i)}catch(e){i(e)}},e,i)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,n,r){var i,a={};if("string"==typeof e)i=e;else if(O.LoaderUtils.decodeText(new Uint8Array(e,0,4))===c){try{a[h.KHR_BINARY_GLTF]=new V(e)}catch(e){return void(r&&r(e))}i=a[h.KHR_BINARY_GLTF].content}else i=O.LoaderUtils.decodeText(new Uint8Array(e));var o=JSON.parse(i);if(void 0===o.asset||o.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(o.extensionsUsed)for(var s=0;s<o.extensionsUsed.length;++s){var l=o.extensionsUsed[s],u=o.extensionsRequired||[];switch(l){case h.KHR_LIGHTS_PUNCTUAL:a[l]=new v(o);break;case h.KHR_MATERIALS_CLEARCOAT:a[l]=new _;break;case h.KHR_MATERIALS_UNLIT:a[l]=new y;break;case h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[l]=new W;break;case h.KHR_DRACO_MESH_COMPRESSION:a[l]=new D(o,this.dracoLoader);break;case h.MSFT_TEXTURE_DDS:a[l]=new j(this.ddsLoader);break;case h.KHR_TEXTURE_TRANSFORM:a[l]=new N;break;case h.KHR_MESH_QUANTIZATION:a[l]=new q;break;default:0<=u.indexOf(l)&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}new H(o,a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(n,r)}}}),h={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"},v.prototype.loadLight=function(e){var t,n=this.lightDefs[e],r=new O.Color(16777215),i=(void 0!==n.color&&r.fromArray(n.color),void 0!==n.range?n.range:0);switch(n.type){case"directional":(t=new O.DirectionalLight(r)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new O.PointLight(r)).distance=i;break;case"spot":(t=new O.SpotLight(r)).distance=i,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},y.prototype.getMaterialType=function(){return O.MeshBasicMaterial},y.prototype.extendParams=function(e,t,n){var r,i=[],t=(e.color=new O.Color(1,1,1),e.opacity=1,t.pbrMetallicRoughness);return t&&(Array.isArray(t.baseColorFactor)&&(r=t.baseColorFactor,e.color.fromArray(r),e.opacity=r[3]),void 0!==t.baseColorTexture)&&i.push(n.assignTexture(e,"map",t.baseColorTexture)),Promise.all(i)},_.prototype.getMaterialType=function(){return O.MeshPhysicalMaterial},_.prototype.extendParams=function(e,t,n){var r=[],t=t.extensions[this.name];return void 0!==t.clearcoatFactor&&(e.clearcoat=t.clearcoatFactor),void 0!==t.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",t.clearcoatTexture)),void 0!==t.clearcoatRoughnessFactor&&(e.clearcoatRoughness=t.clearcoatRoughnessFactor),void 0!==t.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",t.clearcoatRoughnessTexture)),void 0!==t.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",t.clearcoatNormalTexture)),void 0!==t.clearcoatNormalTexture.scale)&&(n=t.clearcoatNormalTexture.scale,e.clearcoatNormalScale=new O.Vector2(n,n)),Promise.all(r)},c="glTF",s=12,l={JSON:1313821514,BIN:5130562},D.prototype.decodePrimitive=function(e,t){var n,r=this.json,i=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},l={},u={};for(n in o){var c=R[n]||n.toLowerCase();s[c]=o[n]}for(n in e.attributes){var h,d,c=R[n]||n.toLowerCase();void 0!==o[n]&&(h=r.accessors[e.attributes[n]],d=A[h.componentType],u[c]=d,l[c]=!0===h.normalized)}return t.getDependency("bufferView",a).then(function(e){return new Promise(function(r){i.decodeDracoFile(e,function(e){for(var t in e.attributes){var n=e.attributes[t],t=l[t];void 0!==t&&(n.normalized=t)}r(e)},s,u)})})},N.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},((I.prototype=Object.create(O.MeshStandardMaterial.prototype)).constructor=I).prototype.copy=function(e){return O.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},((k.prototype=Object.create(O.Interpolant.prototype)).constructor=k).prototype.beforeStart_=k.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t},k.prototype.afterEnd_=k.prototype.copySampleValue_,k.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,r=(n-t)/u,n=r*r,t=n*r,c=e*l,h=c-l,d=-2*t+3*n,f=t-n,p=1-d,m=f-n+r,g=0;g!==o;g++){var v=a[h+g+o],y=a[h+g+s]*u,_=a[c+g+o],x=a[c+g]*u;i[g]=p*v+m*y+d*_+f*x}return i},x=0,b=1,w=2,M=3,T=4,S=5,E=6,A={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},d={9728:O.NearestFilter,9729:O.LinearFilter,9984:O.NearestMipmapNearestFilter,9985:O.LinearMipmapNearestFilter,9986:O.NearestMipmapLinearFilter,9987:O.LinearMipmapLinearFilter},f={33071:O.ClampToEdgeWrapping,33648:O.MirroredRepeatWrapping,10497:O.RepeatWrapping},L={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},R={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},C={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},P={CUBICSPLINE:void 0,LINEAR:O.InterpolateLinear,STEP:O.InterpolateDiscrete},u="OPAQUE",p="MASK",m="BLEND",g={"image/png":O.RGBAFormat,"image/jpeg":O.RGBFormat},H.prototype.parse=function(t,e){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(e){e={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};F(i,e,r),U(e,r),t(e)}).catch(e)},H.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},a=0,o=t.length;a<o;a++)for(var s=t[a].joints,l=0,u=s.length;l<u;l++)e[s[l]].isBone=!0;for(var c=0,h=e.length;c<h;c++){var d=e[c];void 0!==d.mesh&&(void 0===r[d.mesh]&&(r[d.mesh]=i[d.mesh]=0),r[d.mesh]++,void 0!==d.skin)&&(n[d.mesh].isSkinnedMesh=!0)}this.json.meshReferences=r,this.json.meshUses=i},H.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[h.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},H.prototype.getDependencies=function(n){var r,e,t=this.cache.get(n);return t||(e=(r=this).json[n+("mesh"===n?"es":"s")]||[],t=Promise.all(e.map(function(e,t){return r.getDependency(n,t)})),this.cache.add(n,t)),t},H.prototype.loadBuffer=function(e){var n,r=this.json.buffers[e],i=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");return void 0===r.uri&&0===e?Promise.resolve(this.extensions[h.KHR_BINARY_GLTF].body):(n=this.options,new Promise(function(e,t){i.load(B(r.uri,n.path),e,void 0,function(){t(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})}))},H.prototype.loadBufferView=function(e){var r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(e){var t=r.byteLength||0,n=r.byteOffset||0;return e.slice(n,n+t)})},H.prototype.loadAccessor=function(e){var y=this,_=this.json,x=this.json.accessors[e];return void 0===x.bufferView&&void 0===x.sparse?Promise.resolve(null):((e=[]).push(void 0!==x.bufferView?this.getDependency("bufferView",x.bufferView):null),void 0!==x.sparse&&(e.push(this.getDependency("bufferView",x.sparse.indices.bufferView)),e.push(this.getDependency("bufferView",x.sparse.values.bufferView))),Promise.all(e).then(function(e){var t,n=e[0],r=L[x.type],i=A[x.componentType],a=i.BYTES_PER_ELEMENT,o=x.byteOffset||0,s=void 0!==x.bufferView?_.bufferViews[x.bufferView].byteStride:void 0,l=!0===x.normalized,u=s&&s!==a*r?(c=Math.floor(o/s),h="InterleavedBuffer:"+x.bufferView+":"+x.componentType+":"+c+":"+x.count,(d=y.cache.get(h))||(t=new i(n,c*s,x.count*s/a),d=new O.InterleavedBuffer(t,s/a),y.cache.add(h,d)),new O.InterleavedBufferAttribute(d,r,o%s/a,l)):(t=null===n?new i(x.count*r):new i(n,o,x.count*r),new O.BufferAttribute(t,r,l));if(void 0!==x.sparse){var c=A[x.sparse.indices.componentType],h=x.sparse.indices.byteOffset||0,d=x.sparse.values.byteOffset||0,f=new c(e[1],h,x.sparse.count*L.SCALAR),p=new i(e[2],d,x.sparse.count*r);null!==n&&(u=new O.BufferAttribute(u.array.slice(),u.itemSize,u.normalized));for(var m=0,g=f.length;m<g;m++){var v=f[m];if(u.setX(v,p[m*r]),2<=r&&u.setY(v,p[m*r+1]),3<=r&&u.setZ(v,p[m*r+2]),4<=r&&u.setW(v,p[m*r+3]),5<=r)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return u}))},H.prototype.loadTexture=function(e){var t=this,n=this.json,i=this.options,a=this.textureLoader,r=self.URL||self.webkitURL,o=n.textures[e],s=o.extensions||{},l=s[h.MSFT_TEXTURE_DDS]?n.images[s[h.MSFT_TEXTURE_DDS].source]:n.images[o.source],u=l.uri,c=!1;return void 0!==l.bufferView&&(u=t.getDependency("bufferView",l.bufferView).then(function(e){c=!0;e=new Blob([e],{type:l.mimeType});return u=r.createObjectURL(e)})),Promise.resolve(u).then(function(n){var r=(r=i.manager.getHandler(n))||(s[h.MSFT_TEXTURE_DDS]?t.extensions[h.MSFT_TEXTURE_DDS].ddsLoader:a);return new Promise(function(e,t){r.load(B(n,i.path),e,void 0,t)})}).then(function(e){!0===c&&r.revokeObjectURL(u),e.flipY=!1,o.name&&(e.name=o.name),l.mimeType in g&&(e.format=g[l.mimeType]);var t=(n.samplers||{})[o.sampler]||{};return e.magFilter=d[t.magFilter]||O.LinearFilter,e.minFilter=d[t.minFilter]||O.LinearMipmapLinearFilter,e.wrapS=f[t.wrapS]||O.RepeatWrapping,e.wrapT=f[t.wrapT]||O.RepeatWrapping,e})},H.prototype.assignTexture=function(n,r,i){var a=this;return this.getDependency("texture",i.index).then(function(e){if(!e.isCompressedTexture)switch(r){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":e.format=O.RGBFormat}var t;void 0===i.texCoord||0==i.texCoord||"aoMap"===r&&1==i.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+r+" not yet supported."),a.extensions[h.KHR_TEXTURE_TRANSFORM]&&(t=void 0!==i.extensions?i.extensions[h.KHR_TEXTURE_TRANSFORM]:void 0)&&(e=a.extensions[h.KHR_TEXTURE_TRANSFORM].extendTexture(e,t)),n[r]=e})},H.prototype.assignFinalMaterial=function(e){var t,n,r=e.geometry,i=e.material,a=void 0!==r.attributes.tangent,o=void 0!==r.attributes.color,s=void 0===r.attributes.normal,l=!0===e.isSkinnedMesh,u=0<Object.keys(r.morphAttributes).length,c=u&&void 0!==r.morphAttributes.normal;e.isPoints?(t="PointsMaterial:"+i.uuid,(n=this.cache.get(t))||(n=new O.PointsMaterial,O.Material.prototype.copy.call(n,i),n.color.copy(i.color),n.map=i.map,n.sizeAttenuation=!1,this.cache.add(t,n)),i=n):e.isLine&&(t="LineBasicMaterial:"+i.uuid,(n=this.cache.get(t))||(n=new O.LineBasicMaterial,O.Material.prototype.copy.call(n,i),n.color.copy(i.color),this.cache.add(t,n)),i=n),(a||o||s||l||u)&&(t="ClonedMaterial:"+i.uuid+":",i.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),l&&(t+="skinning:"),a&&(t+="vertex-tangents:"),o&&(t+="vertex-colors:"),s&&(t+="flat-shading:"),u&&(t+="morph-targets:"),c&&(t+="morph-normals:"),(n=this.cache.get(t))||(n=i.clone(),l&&(n.skinning=!0),a&&(n.vertexTangents=!0),o&&(n.vertexColors=!0),s&&(n.flatShading=!0),u&&(n.morphTargets=!0),c&&(n.morphNormals=!0),this.cache.add(t,n)),i=n),i.aoMap&&void 0===r.attributes.uv2&&void 0!==r.attributes.uv&&r.setAttribute("uv2",r.attributes.uv),i.normalScale&&!a&&(i.normalScale.y=-i.normalScale.y),i.clearcoatNormalScale&&!a&&(i.clearcoatNormalScale.y=-i.clearcoatNormalScale.y),e.material=i},H.prototype.loadMaterial=function(e){var t,n,r=this,i=this.json,a=this.extensions,o=i.materials[e],s={},i=o.extensions||{},e=[],l=(i[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]?(n=a[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS],t=n.getMaterialType(),e.push(n.extendParams(s,o,r))):i[h.KHR_MATERIALS_UNLIT]?(n=a[h.KHR_MATERIALS_UNLIT],t=n.getMaterialType(),e.push(n.extendParams(s,o,r))):(t=O.MeshStandardMaterial,n=o.pbrMetallicRoughness||{},s.color=new O.Color(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)&&(l=n.baseColorFactor,s.color.fromArray(l),s.opacity=l[3]),void 0!==n.baseColorTexture&&e.push(r.assignTexture(s,"map",n.baseColorTexture)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(e.push(r.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),e.push(r.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture)))),!0===o.doubleSided&&(s.side=O.DoubleSide),o.alphaMode||u);return l===m?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===p&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==O.MeshBasicMaterial&&(e.push(r.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new O.Vector2(1,1),void 0!==o.normalTexture.scale)&&s.normalScale.set(o.normalTexture.scale,o.normalTexture.scale),void 0!==o.occlusionTexture&&t!==O.MeshBasicMaterial&&(e.push(r.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength)&&(s.aoMapIntensity=o.occlusionTexture.strength),void 0!==o.emissiveFactor&&t!==O.MeshBasicMaterial&&(s.emissive=(new O.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&t!==O.MeshBasicMaterial&&e.push(r.assignTexture(s,"emissiveMap",o.emissiveTexture)),i[h.KHR_MATERIALS_CLEARCOAT]&&(n=a[h.KHR_MATERIALS_CLEARCOAT],t=n.getMaterialType(),e.push(n.extendParams(s,{extensions:i},r))),Promise.all(e).then(function(){var e=t===I?a[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s);return o.name&&(e.name=o.name),e.map&&(e.map.encoding=O.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=O.sRGBEncoding),U(e,o),o.extensions&&F(a,e,o),e})},H.prototype.loadGeometries=function(e){var n=this,r=this.extensions,t=this.primitiveCache;for(var i=[],a=0,o=e.length;a<o;a++){var s=e[a],l=(u=void 0,u=(u=(l=s).extensions&&l.extensions[h.KHR_DRACO_MESH_COMPRESSION])?"draco:"+u.bufferView+":"+u.indices+":"+z(u.attributes):l.indices+":"+z(l.attributes)+":"+l.mode),u=t[l];u?i.push(u.promise):(u=s.extensions&&s.extensions[h.KHR_DRACO_MESH_COMPRESSION]?(t=>r[h.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,n).then(function(e){return X(e,t,n)}))(s):X(new O.BufferGeometry,s,n),t[l]={primitive:s,promise:u},i.push(u))}return Promise.all(i)},H.prototype.loadMesh=function(g){for(var v=this,y=this.json.meshes[g],_=y.primitives,e=[],t=0,n=_.length;t<n;t++){var r=void 0===_[t].material?(void 0===(r=this.cache).DefaultMaterial&&(r.DefaultMaterial=new O.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:O.FrontSide})),r.DefaultMaterial):this.getDependency("material",_[t].material);e.push(r)}return e.push(v.loadGeometries(_)),Promise.all(e).then(function(e){for(var t=e.slice(0,e.length-1),n=e[e.length-1],r=[],i=0,a=n.length;i<a;i++){var o,s=n[i],l=_[i],u=t[i];if(l.mode===T||l.mode===S||l.mode===E||void 0===l.mode)!0!==(o=new(!0===y.isSkinnedMesh?O.SkinnedMesh:O.Mesh)(s,u)).isSkinnedMesh||o.geometry.attributes.skinWeight.normalized||o.normalizeSkinWeights(),l.mode===S?o.geometry=Y(o.geometry,O.TriangleStripDrawMode):l.mode===E&&(o.geometry=Y(o.geometry,O.TriangleFanDrawMode));else if(l.mode===b)o=new O.LineSegments(s,u);else if(l.mode===M)o=new O.Line(s,u);else if(l.mode===w)o=new O.LineLoop(s,u);else{if(l.mode!==x)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+l.mode);o=new O.Points(s,u)}if(0<Object.keys(o.geometry.morphAttributes).length){p=f=d=h=c=void 0;var c=o,h=y;if(c.updateMorphTargets(),void 0!==h.weights)for(var d=0,f=h.weights.length;d<f;d++)c.morphTargetInfluences[d]=h.weights[d];if(h.extras&&Array.isArray(h.extras.targetNames)){var p=h.extras.targetNames;if(c.morphTargetInfluences.length===p.length){c.morphTargetDictionary={};for(d=0,f=p.length;d<f;d++)c.morphTargetDictionary[p[d]]=d}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}o.name=y.name||"mesh_"+g,1<n.length&&(o.name+="_"+i),U(o,y),v.assignFinalMaterial(o),r.push(o)}if(1===r.length)return r[0];for(var m=new O.Group,i=0,a=r.length;i<a;i++)m.add(r[i]);return m})},H.prototype.loadCamera=function(e){var t,e=this.json.cameras[e],n=e[e.type];if(n)return"perspective"===e.type?t=new O.PerspectiveCamera(O.MathUtils.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===e.type&&(t=new O.OrthographicCamera(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),e.name&&(t.name=e.name),U(t,e),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},H.prototype.loadSkin=function(e){var e=this.json.skins[e],t={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(t):this.getDependency("accessor",e.inverseBindMatrices).then(function(e){return t.inverseBindMatrices=e,t})},H.prototype.loadAnimation=function(T){for(var S=this.json.animations[T],e=[],t=[],n=[],r=[],i=[],a=0,o=S.channels.length;a<o;a++){var s=S.channels[a],l=S.samplers[s.sampler],s=s.target,u=void 0!==s.node?s.node:s.id,c=void 0!==S.parameters?S.parameters[l.input]:l.input,h=void 0!==S.parameters?S.parameters[l.output]:l.output;e.push(this.getDependency("node",u)),t.push(this.getDependency("accessor",c)),n.push(this.getDependency("accessor",h)),r.push(l),i.push(s)}return Promise.all([Promise.all(e),Promise.all(t),Promise.all(n),Promise.all(r),Promise.all(i)]).then(function(e){for(var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=[],s=0,l=t.length;s<l;s++){var u,c=t[s],h=n[s],d=r[s],f=i[s],p=a[s];if(void 0!==c){switch(c.updateMatrix(),c.matrixAutoUpdate=!0,C[p.path]){case C.weights:u=O.NumberKeyframeTrack;break;case C.rotation:u=O.QuaternionKeyframeTrack;break;default:u=O.VectorKeyframeTrack}var m,g=c.name||c.uuid,v=void 0!==f.interpolation?P[f.interpolation]:O.InterpolateLinear,y=[],_=(C[p.path]===C.weights?c.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&y.push(e.name||e.uuid)}):y.push(g),d.array);if(d.normalized){if(_.constructor===Int8Array)m=1/127;else if(_.constructor===Uint8Array)m=1/255;else if(_.constructor==Int16Array)m=1/32767;else{if(_.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");m=1/65535}for(var x=new Float32Array(_.length),b=0,w=_.length;b<w;b++)x[b]=_[b]*m;_=x}for(b=0,w=y.length;b<w;b++){var M=new u(y[b]+"."+C[p.path],h.array,_,v);"CUBICSPLINE"===f.interpolation&&(M.createInterpolant=function(e){return new k(this.times,this.values,this.getValueSize()/3,e)},M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),o.push(M)}}}e=S.name||"animation_"+T;return new O.AnimationClip(e,void 0,o)})},H.prototype.loadNode=function(e){var t=this.json,a=this.extensions,n=this,r=t.meshReferences,i=t.meshUses,o=t.nodes[e];return t=[],void 0!==o.mesh&&t.push(n.getDependency("mesh",o.mesh).then(function(e){var t,n;return 1<r[o.mesh]?(t=i[o.mesh]++,(n=e.clone()).name+="_instance_"+t):n=e,void 0!==o.weights&&n.traverse(function(e){if(e.isMesh)for(var t=0,n=o.weights.length;t<n;t++)e.morphTargetInfluences[t]=o.weights[t]}),n})),void 0!==o.camera&&t.push(n.getDependency("camera",o.camera)),o.extensions&&o.extensions[h.KHR_LIGHTS_PUNCTUAL]&&void 0!==o.extensions[h.KHR_LIGHTS_PUNCTUAL].light&&t.push(n.getDependency("light",o.extensions[h.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t).then(function(e){var t,n=!0===o.isBone?new O.Bone:1<e.length?new O.Group:1===e.length?e[0]:new O.Object3D;if(n!==e[0])for(var r=0,i=e.length;r<i;r++)n.add(e[r]);return o.name&&(n.userData.name=o.name,n.name=O.PropertyBinding.sanitizeNodeName(o.name)),U(n,o),o.extensions&&F(a,n,o),void 0!==o.matrix?((t=new O.Matrix4).fromArray(o.matrix),n.applyMatrix4(t)):(void 0!==o.translation&&n.position.fromArray(o.translation),void 0!==o.rotation&&n.quaternion.fromArray(o.rotation),void 0!==o.scale&&n.scale.fromArray(o.scale)),n})},H.prototype.loadScene=function(e){for(var t=this.json,n=this.extensions,e=this.json.scenes[e],r=new O.Group,i=(e.name&&(r.name=e.name),U(r,e),e.extensions&&F(n,r,e),e.nodes||[]),a=[],o=0,s=i.length;o<s;o++)a.push(function o(e,s,l,u){var c=l.nodes[e];return u.getDependency("node",e).then(function(e){var s;return void 0===c.skin?e:u.getDependency("skin",c.skin).then(function(e){for(var t=[],n=0,r=(s=e).joints.length;n<r;n++)t.push(u.getDependency("node",s.joints[n]));return Promise.all(t)}).then(function(o){return e.traverse(function(e){if(e.isMesh){for(var t=[],n=[],r=0,i=o.length;r<i;r++){var a=o[r];a?(t.push(a),a=new O.Matrix4,void 0!==s.inverseBindMatrices&&a.fromArray(s.inverseBindMatrices.array,16*r),n.push(a)):console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',s.joints[r])}e.bind(new O.Skeleton(t,n),e.matrixWorld)}}),e})}).then(function(e){s.add(e);var t=[];if(c.children)for(var n=c.children,r=0,i=n.length;r<i;r++){var a=n[r];t.push(o(a,e,l,u))}return Promise.all(t)})}(i[o],r,t,this));return Promise.all(a).then(function(){return r})},e)},{three:52}],2:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,o,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{a(l.next(e))}catch(e){t(e)}}function i(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}a((l=l.apply(e,o||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let l=a(e("./spotify-interface")),u=a(e("./data")),c=s(e("./ui"));a=s(e("./resource-manager"));let h=e("./helpers"),d=s(e("./audio")),f=["user-top-read","user-read-private","user-read-email","user-top-read","user-library-modify","playlist-modify-public","playlist-modify-private","ugc-image-upload"];class p{constructor(){this.ui=new c.default(this),this.playlistDescription="",this.alreadyAskedForRecommendations=!1,this.requestedPlaylistLength=120,p.audio=new d.default(this.ui),this.ui.Login=this.Login.bind(this),p.resourceManager.loadResourceByPath(HTMLImageElement,"assets/spritesheet.png"),this.spotifyInterface=new l.SpotifyInterface({ClientID:"c5a5170f00bf40e2a89be3510402947c",RedirectURI:"http://localhost:8888/dist",Scopes:f}),this.spotifyInterface.NameSet=this.ui.nameSet.bind(this.ui),this.spotifyInterface.OnDataListeners.push(this.OnUserData.bind(this)),this.spotifyInterface.OnErrorListeners.push(this.OnSpotifyInterfaceError.bind(this))}getProfile(){return o(this,void 0,void 0,function*(){this.spotifyInterface.Authorized&&this.spotifyInterface.GetUserProfile()})}get authorized(){return this.spotifyInterface.Authorized}Login(){this.spotifyInterface.Authorized?this.spotifyInterface.GetUserProfile():this.spotifyInterface.GetAuthorization()}CreatePlaylist(){this.createPlaylistDescription()}createPlaylistDescription(){var e=["liquid sparkle.<br /><br />","something explosive.<br /><br />","liquid lightning.<br /><br />","liquid passion.<br /><br />","liquid mortality.<br /><br />","liquid alchemy.<br /><br />"][u.mcqQuestions[4].options.indexOf(u.mcqQuestions[4].answer)],t=["at the beach, ","against the city skyline, ","out in the countryside, ","in the park, "][u.mcqQuestions[0].options.indexOf(u.mcqQuestions[0].answer)],n=["you're the star of a circus.","Gojira.","a cheeky Leprechaun.","you're in 'that scene' in Eyes Wide Shut.","you're in your prime","a thug of a snowman. Respect the drip."][u.mcqQuestions[2].options.indexOf(u.mcqQuestions[2].answer)],r="",i="",a="",e=(u.sliderQuestions.forEach(e=>{switch(e.params){case l.QueryParameters.Danceability:r=e.answer<=10?"Kick back and chill ":e.answer<=33?"Get that toe tappin' ":e.answer<=66?"Shake that thang ":"Raise the roof ";break;case l.QueryParameters.Energy:i=e.answer<=10?"with low key tunes ":e.answer<=33?"to easy listening tunes ":e.answer<=66?"to feel-good tunes ":"with heavy-hitter bangers ";break;case l.QueryParameters.Valence:a=e.answer<=10?"filled with all the right feels.":e.answer<=33?"that'll get you unwinding.":e.answer<=66?"that hit just right.":"that'll have you feeling like "+n;break;case l.QueryParameters.Speechiness:}}),"Here's your special brew, with a dash of "+e+r+t+i+a);this.playlistDescription=r+i+a,this.ui.setEndFrameCopy(e)}generatePlaylist(){return o(this,void 0,void 0,function*(){if(void 0!==this.profile&&void 0!==this.topArtists&&void 0!==this.topTracks){this.profile.DisplayName;for(var n=[],r=0;r<u.sliderQuestions.length;r++){var i=u.sliderQuestions[r];i.params===l.QueryParameters.PlaylistLength?this.requestedPlaylistLength=i.answer:n.push({parameter:l.QueryParameters[i.params],value:i.answer})}let t=[],e=(this.topArtists.map(e=>e.Genres.forEach(e=>t.push(e))),h.shuffle(t),0==(t=t.slice(0,3)).length&&t.push("pop","alternative"),this.topTracks.map(e=>e.Id));h.shuffle(e),e=e.slice(0,2),this.spotifyInterface.GetRecommendations({QueryParameters:n,Count:100,SeedGenres:t,SeedTrackIDs:e})}})}OnUserData(e,t){switch(e){case l.DataType.UserProfile:this.profile=t,this.spotifyInterface.GetTopArtists(),this.spotifyInterface.GetTopTracks();break;case l.DataType.Recommendations:var n=t;if(0!=n.length||this.alreadyAskedForRecommendations){var r=60*this.requestedPlaylistLength;let e=0,t=0;for(e=0;e<n.length&&t<r;e++)t+=n[e].Length/1e3;var i=n.map(e=>e.Uri).slice(0,e);void 0!==this.profile&&this.spotifyInterface.CreatePlaylist({UserId:this.profile.id,TrackUris:i,Name:"The Sound of Nectaron",Description:this.playlistDescription,Public:!1,Image:{Width:100,Height:100,Url:"https://thesoundofnectaron.com/assets/albumCover.jpg"}})}else if(this.alreadyAskedForRecommendations=!0,void 0!==this.topArtists&&0!=this.topArtists.length){for(var a=[],o=0;o<u.sliderQuestions.length;o++){var s=u.sliderQuestions[o];s.params===l.QueryParameters.PlaylistLength?this.requestedPlaylistLength=s.answer:a.push({parameter:l.QueryParameters[s.params],value:s.answer})}i=this.topArtists.map(e=>e.Id).slice(0,5);this.spotifyInterface.GetRecommendations({QueryParameters:a,Count:100,SeedArtistIDs:i})}break;case l.DataType.TopTracks:this.topTracks=t;break;case l.DataType.TopArtists:this.topArtists=t;break;case l.DataType.PlaylistCreated:this.playlistCreated=t,this.ui.playlistCreated(this.playlistCreated.ShareLink)}}OnSpotifyInterfaceError(e,t){console.log(e.toString()),console.log(t)}}(n.default=p).resourceManager=new a.default;new p},{"./audio":3,"./data":4,"./helpers":6,"./resource-manager":10,"./spotify-interface":13,"./ui":14}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});let r=e("howler");n.default=class{constructor(e){this.volume=.3,this.audioCount=5,this.muted=!1,this.ambientLoopSound=new r.Howl({src:["assets/sounds/ambient_loop.mp3"],volume:this.volume,loop:!0}),this.ambientLoopSound.on("load",e.incrementLoader.bind(e)),this.quickfireSound=new r.Howl({src:["assets/sounds/round_3.mp3"],volume:this.volume}),this.quickfireSound.on("load",e.incrementLoader.bind(e)),this.clickSound=new r.Howl({src:["assets/sounds/click_1.mp3"],volume:this.volume}),this.clickSound.on("load",e.incrementLoader.bind(e)),this.selectedSound=new r.Howl({src:["assets/sounds/click_2.mp3"],volume:this.volume}),this.selectedSound.on("load",e.incrementLoader.bind(e)),this.rejectedSound=new r.Howl({src:["assets/sounds/click_3.mp3"],volume:this.volume}),this.rejectedSound.on("load",e.incrementLoader.bind(e))}playAmbient(){this.ambientLoopSound.playing()||(this.muted&&this.ambientLoopSound.volume(0),this.ambientLoopSound.play())}playRound3(){this.ambientLoopSound.playing()&&this.ambientLoopSound.fade(.5,0,.2),this.muted&&this.quickfireSound.volume(0),this.quickfireSound.play(),this.quickfireSound.on("end",this.playAmbient.bind(this))}playClick(){this.muted||this.clickSound.playing()||this.clickSound.play()}playSelectedSound(){this.muted||this.selectedSound.playing()||this.selectedSound.play()}playRejectedSound(){this.muted||this.rejectedSound.playing()||this.rejectedSound.play()}mute(){this.ambientLoopSound.playing()&&this.ambientLoopSound.volume(0),this.quickfireSound.playing()&&this.quickfireSound.volume(0)}unmute(){this.ambientLoopSound.playing()&&this.ambientLoopSound.volume(this.volume),this.quickfireSound.playing()&&this.quickfireSound.volume(this.volume)}}},{howler:50}],4:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=(Object.defineProperty(n,"__esModule",{value:!0}),n.preloadList=n.qfQuestions=n.mcqQuestions=n.sliderQuestions=n.ROUNDS=n.QuestionType=n.CONTRAST=n.COLORS_THREE=n.COLORS=void 0,a(e("./spotify-interface"))),a=a(e("three"));n.COLORS={beige:"#FCF1DB",orange:"#FF1900",purple:"#88009D",blue:"#00C1F5",yellow:"#FFE700",white:"#FFFFFF"},n.COLORS_THREE={"#FCF1DB":new a.Color(16576987),"#FF1900":new a.Color(16719872),"#88009D":new a.Color(8913053),"#00C1F5":new a.Color(49653),"#FFE700":new a.Color(16770816)},n.CONTRAST={"#FCF1DB":n.COLORS.purple,"#FF2000":n.COLORS.purple,FF1900:n.COLORS.orange,"#00C1F5":n.COLORS.yellow,"#FFE700":n.COLORS.purple},(e=n.QuestionType||(n.QuestionType={}))[e.Slider=0]="Slider",e[e.MultiChoice=1]="MultiChoice",e[e.QuickFire=2]="QuickFire",n.ROUNDS=[{round:1,color:n.COLORS.orange,waveColor:"orange",numberColor:n.COLORS.yellow,btnColor:n.COLORS.purple,text:"Light? dark? Hazies? Lagers? There's a science to it. Slide the dial to show what you're in to..."},{round:2,color:n.COLORS.purple,waveColor:"purple",numberColor:n.COLORS.yellow,btnColor:n.COLORS.orange,text:"It's time to imbue some of your personality into this thing. What makes you, you?"},{round:3,color:n.COLORS.blue,waveColor:"blue",numberColor:n.COLORS.purple,btnColor:n.COLORS.purple,text:"OK, for this part switch off your brain. Don't think. Just follow your instinct."}],n.sliderQuestions=[{params:o.QueryParameters.Valence,question:"What brew style are you after?",minTextValue:"Light",maxTextValue:"Dark",startValue:0,min:0,max:1,answer:0},{params:o.QueryParameters.Speechiness,question:"How bitter would you like your brew?",minTextValue:"0 IBU",maxTextValue:"100 IBU",startValue:50,min:.1,max:.4,answer:0},{params:o.QueryParameters.Energy,question:"What mouthfeel would you like?",minTextValue:"Sharp",maxTextValue:"Round",startValue:50,min:0,max:1,answer:0},{params:o.QueryParameters.PlaylistLength,question:"How long would you like to boil for?",minTextValue:"0 min",maxTextValue:"120 min",startValue:50,min:120,max:240,answer:0},{params:o.QueryParameters.Danceability,question:"How strong are the beer goggles on this one??",minTextValue:"Weak",maxTextValue:"Strong",startValue:0,min:.2,max:.8,answer:0}],n.mcqQuestions=[{question:"Where is your Nectaron brew enjoyed?",id:"bg",options:["beach_skyline","city_skyline","mountains_skyline","park_skyline"],answer:""},{question:"Choose your brewer",id:"brewer",options:["brewer_computer","brewer_cool_dude","brewer_cool_girl","brewer_handyman","brewer_witch","brewer_wrestler"],answer:""},{question:"Choose your drinking buddy",id:"buddy",options:["drinking_buddy_clown","drinking_buddy_dinosaur","drinking_buddy_leprechaun","drinking_buddy_masquerade","drinking_buddy_robot","drinking_buddy_snowman"],answer:""},{question:"Perfect pairing?",id:"pairing",options:["beer_pairing_burger","beer_pairing_chilli","beer_pairing_orange","beer_pairing_pineapple","beer_pairing_pizza","beer_pairing_sushi"],answer:""},{question:"Ingredient X?",id:"ingredientX",options:["ingredient_x_diamond","ingredient_x_dynamite","ingredient_x_lightning","ingredient_x_lips","ingredient_x_poison","ingredient_x_skull"],answer:""}],n.qfQuestions=[{question:"Pineapple belongs on pizza?",answered:!1,answer:!1},{question:"British version of The Office is better than the American?",answered:!1,answer:!1},{question:"New Zealand invented the pavlova?",answered:!1,answer:!1},{question:"Do you remember Ben Lummis?",answered:!1,answer:!1},{question:"Rollerblading is cooler than roller skating?",answered:!1,answer:!1},{question:"Do you talk to yourself in the mirror?",answered:!1,answer:!1},{question:"Take your shoes off in the house?",answered:!1,answer:!1},{question:"You should always finish your plate?",answered:!1,answer:!1},{question:"Never kiss on a first date?",answered:!1,answer:!1},{question:"BK is better than McDonald's?",answered:!1,answer:!1},{question:"Kevin Hart is funnier than Dave Chappelle?",answered:!1,answer:!1},{question:"An eye for an eye?",answered:!1,answer:!1},{question:"Who Wants to Be a Millionaire is better than The Chase?",answered:!1,answer:!1},{question:"Paddington 2 is better than the Paddington 1?",answered:!1,answer:!1},{question:"Freedom doesn't exist?",answered:!1,answer:!1},{question:"The Big Bang Theory is better than Modern Family?",answered:!1,answer:!1},{question:"Apple is better than Samsung?",answered:!1,answer:!1},{question:"Biggie & 2Pac are still alive?",answered:!1,answer:!1},{question:"In a marriage, everything becomes 50% off?",answered:!1,answer:!1},{question:"Last GoT episode was horseshit?",answered:!1,answer:!1},{question:"The Room is a bonafide cinematic masterpiece?",answered:!1,answer:!1},{question:"You should clap along to the Friends intro?",answered:!1,answer:!1},{question:"The Rock is greater than Stone Cold?",answered:!1,answer:!1},{question:"Street Fighter over Tekken?",answered:!1,answer:!1},{question:"Socks and sandals are only for school kids?",answered:!1,answer:!1},{question:"Pants shouldn't ride higher than your belly button?",answered:!1,answer:!1},{question:"Front door over back door?",answered:!1,answer:!1},{question:"New York Times over The Guardian?",answered:!1,answer:!1},{question:"East Coast over West Coast?",answered:!1,answer:!1},{question:"Mountains over lakes?",answered:!1,answer:!1},{question:"Aliens exist?",answered:!1,answer:!1},{question:"Mona Lisa is overrated?",answered:!1,answer:!1},{question:"Paper straws are better than plastic straws?",answered:!1,answer:!1},{question:"I'll have the usual?",answered:!1,answer:!1},{question:"Beer in a can over a bottle?",answered:!1,answer:!1},{question:"Ketchup should be left in the fridge?",answered:!1,answer:!1},{question:"Hazys over lagers?",answered:!1,answer:!1},{question:"German beer over American beer?",answered:!1,answer:!1},{question:"You wash your legs in the shower?",answered:!1,answer:!1},{question:"Brew bar over micro pub?",answered:!1,answer:!1}],n.preloadList=["waves/wave-orange.svg","waves/wave-purple.svg","shared/faqDesktop.png","shared/meetNectaron.svg","shared/NectaronSmall.svg","round1/pineapple_bunsen_burner.png","round1/q3_round.png","round1/q3_sharp.png","round1/q5_0.png","round1/q5_1.png","round1/q5_2.png","round1/q5_3.png","round1/q5_4.png","round2/can.png","round2/q1/beach_skyline_can.png","round2/q1/beach_skyline.png","round2/q1/city_skyline_can.png","round2/q1/city_skyline.png","round2/q1/mountains_skyline_can.png","round2/q1/mountains_skyline.png","round2/q1/park_skyline_can.png","round2/q1/park_skyline.png","round2/q2/brewer_computer_can.png","round2/q2/brewer_computer.png","round2/q2/brewer_cool_dude_can.png","round2/q2/brewer_cool_dude.png","round2/q2/brewer_cool_girl_can.png","round2/q2/brewer_cool_girl.png","round2/q2/brewer_handyman_can.png","round2/q2/brewer_handyman.png","round2/q2/brewer_witch_can.png","round2/q2/brewer_witch.png","round2/q2/brewer_wrestler_can.png","round2/q2/brewer_wrestler.png","round2/q3/drinking_buddy_clown_can.png","round2/q3/drinking_buddy_clown.png","round2/q3/drinking_buddy_dinosaur_can.png","round2/q3/drinking_buddy_dinosaur.png","round2/q3/drinking_buddy_leprechaun_can.png","round2/q3/drinking_buddy_leprechaun.png","round2/q3/drinking_buddy_masquerade_can.png","round2/q3/drinking_buddy_masquerade.png","round2/q3/drinking_buddy_robot_can.png","round2/q3/drinking_buddy_robot.png","round2/q3/drinking_buddy_snowman_can.png","round2/q3/drinking_buddy_snowman.png","round2/q4/beer_pairing_burger_can.png","round2/q4/beer_pairing_burger.png","round2/q4/beer_pairing_chilli_can.png","round2/q4/beer_pairing_chilli.png","round2/q4/beer_pairing_orange_can.png","round2/q4/beer_pairing_orange.png","round2/q4/beer_pairing_pineapple_can.png","round2/q4/beer_pairing_pineapple.png","round2/q4/beer_pairing_pizza_can.png","round2/q4/beer_pairing_pizza.png","round2/q4/beer_pairing_sushi_can.png","round2/q4/beer_pairing_sushi.png","round2/q5/ingredient_x_diamond_can.png","round2/q5/ingredient_x_diamond.png","round2/q5/ingredient_x_dynamite_can.png","round2/q5/ingredient_x_lightning_can.png","round2/q5/ingredient_x_lightning.png","round2/q5/ingredient_x_lips_can.png","round2/q5/ingredient_x_lips.png","round2/q5/ingredient_x_poison_can.png","round2/q5/ingredient_x_poison.png","round2/q5/ingredient_x_skull_can.png","round2/q5/ingredient_x_skull.png","album.png","albumCover.jpg","spritesheet.png"]},{"./spotify-interface":13,three:52}],5:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let u=a(e("three"));a=o(e("simplex-noise"));let c=new a.default;n.default=class{constructor(){this.frameResized=!0,this.maxFlames=1e3,this.spawnRate=1e3,this.flames=[],this.currentAspect=1,this.currentSpeed=1,this.tempVector=new u.Vector3,this.tempMatrix=new u.Matrix3,this.shouldRun=!1,this.clock=new u.Clock,this.scene=new u.Scene,this.renderer=new u.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera=new u.OrthographicCamera(-1,1,1,-1,0,1),this.camera.position.z=0,this.buffer=new Float32Array(18*this.maxFlames),this.ageBuffer=new Float32Array(6*this.maxFlames),this.geo=new u.BufferGeometry;var t=new Float32Array(12*this.maxFlames);for(let e=0;e<this.maxFlames;e++)t[12*e+0]=0,t[12*e+1]=0,t[12*e+2]=0,t[12*e+3]=1,t[12*e+4]=1,t[12*e+5]=1,t[12*e+6]=0,t[12*e+7]=0,t[12*e+8]=1,t[12*e+9]=1,t[12*e+10]=1,t[12*e+11]=0;this.geo.setAttribute("position",new u.Float32BufferAttribute(this.buffer,3)),this.geo.setAttribute("uv",new u.Float32BufferAttribute(t,2)),this.geo.setAttribute("age",new u.Float32BufferAttribute(this.ageBuffer,1)),this.material=new u.ShaderMaterial({vertexShader:`

    attribute float age;

    varying vec2 vUv;
    varying float vAge;

    void main() {
        vUv = uv;
        vAge = age;
        gl_Position = projectionMatrix * viewMatrix * vec4(position, 1.0);
    }
`,fragmentShader:`

    const float spriteDim = 5.0;

    uniform sampler2D flameTexture;

    varying vec2 vUv;
    varying float vAge;

    #define TINT vec3(186.0 / 255.0, 64.0 / 255.0, 0.0 / 255.0)

    void main() {
        float index = floor(vAge * spriteDim * spriteDim);
        float x = mod(index, spriteDim) / spriteDim;
        float y = 1.0 - floor(index / spriteDim) / spriteDim;
        vec2 spriteUvs = vUv * (1.0 / spriteDim) + vec2(x, y);
        vec4 texCol = texture2D(flameTexture, spriteUvs);
        vec3 color = mix(texCol.rgb, texCol.rgb * TINT, vAge);
        gl_FragColor = vec4(color, texCol.a);
        //gl_FragColor = vec4(index / spriteDim / spriteDim, 0.0, 0.0, 1.0);
        // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
    }
`,uniforms:{flameTexture:{value:void 0}},side:u.DoubleSide,transparent:!0,depthWrite:!1});for(let e=0;e<this.maxFlames;e++){var n=new s;this.flames.push(n)}this.mesh=new u.Mesh(this.geo,this.material),this.mesh.frustumCulled=!1,this.scene.add(this.mesh),this.clock.start(),this.currentRendererSize=new u.Vector2(window.innerWidth,window.innerHeight),this.lastScreenSize=new u.Vector2,window.addEventListener("resize",()=>{this.frameResized=!0}),this.resize(window.innerWidth,window.innerHeight),this.update()}get domElement(){return this.renderer.domElement}onInitResources(e){e=e.getResourceByPath(HTMLImageElement,"assets/spritesheet.png"),e=new u.Texture(e);e.format=u.RGBAFormat,e.wrapS=u.ClampToEdgeWrapping,e.wrapT=u.ClampToEdgeWrapping,e.magFilter=u.LinearFilter,e.minFilter=u.LinearFilter,e.needsUpdate=!0,this.material.uniforms.flameTexture.value=e}setSpeed(e){this.currentSpeed=e}run(){this.shouldRun=!0}update(){var e,t;requestAnimationFrame(this.update.bind(this)),this.shouldRun&&(e=this.clock.getDelta(),e=Math.min(e,.2),t=this.clock.getElapsedTime(),this.updateParticles(t,e),this.updateGeometry(t,e),this.checkResize(),this.renderer.render(this.scene,this.camera))}updateParticles(n,r){this.flames.forEach((e,t)=>{e.update(n,r)});var e=this.spawnRate*Math.min(1,this.currentAspect),t=Math.floor(e*n%this.maxFlames),i=t-Math.floor(e*(n-r)%this.maxFlames);for(let e=0;e<i;e++){var a,o,s,l=this.flames[e+t];void 0!==l&&l.dead&&(s=2*Math.random()-1,this.tempVector.set(s*this.currentAspect,-1.5,0),a=.5*Math.random()+.5,o=.75*Math.random()+.375,s=1+.5*c.noise2D(2*s,n),l.birth(this.tempVector,a,o,this.currentSpeed*s))}}checkResize(){var e,t;this.frameResized&&(this.frameResized=!1,e=this.renderer.domElement.clientWidth,t=this.renderer.domElement.clientHeight,this.lastScreenSize.x===e&&this.lastScreenSize.y===t||(this.resize(e,t),this.lastScreenSize.set(e,t)))}resize(e,t){this.renderer.setSize(.5*e,.5*t),this.renderer.getDrawingBufferSize(this.currentRendererSize),this.currentAspect=e/t,this.camera.left=-this.currentAspect,this.camera.right=this.currentAspect,this.camera.updateProjectionMatrix()}updateGeometry(t,e){var n=this.flames.length,r=this.buffer,i=this.ageBuffer;let a=0;for(let e=0;e<n;e++){var o,s,l=this.flames[e];l.dead||(o=2*(.5*c.noise2D(l.id,t)+.5)*Math.PI,this.tempMatrix.elements[0]=this.tempMatrix.elements[4]=Math.cos(o),this.tempMatrix.elements[3]=-Math.sin(o),this.tempMatrix.elements[1]=Math.sin(o),this.tempMatrix.elements[8]=1,o=18*(a+=1),s=6*a,this.tempVector.set(-l.scale,-l.scale,0),this.tempVector.applyMatrix3(this.tempMatrix),r[0+o]=l.position.x+this.tempVector.x,r[1+o]=l.position.y+this.tempVector.y,r[2+o]=0,this.tempVector.set(-l.scale,l.scale,0),this.tempVector.applyMatrix3(this.tempMatrix),r[3+o]=l.position.x+this.tempVector.x,r[4+o]=l.position.y+this.tempVector.y,r[5+o]=0,this.tempVector.set(l.scale,l.scale,0),this.tempVector.applyMatrix3(this.tempMatrix),r[6+o]=l.position.x+this.tempVector.x,r[7+o]=l.position.y+this.tempVector.y,r[8+o]=0,this.tempVector.set(-l.scale,-l.scale,0),this.tempVector.applyMatrix3(this.tempMatrix),r[9+o]=l.position.x+this.tempVector.x,r[10+o]=l.position.y+this.tempVector.y,r[11+o]=0,this.tempVector.set(l.scale,l.scale,0),this.tempVector.applyMatrix3(this.tempMatrix),r[12+o]=l.position.x+this.tempVector.x,r[13+o]=l.position.y+this.tempVector.y,r[14+o]=0,this.tempVector.set(l.scale,-l.scale,0),this.tempVector.applyMatrix3(this.tempMatrix),r[15+o]=l.position.x+this.tempVector.x,r[16+o]=l.position.y+this.tempVector.y,i[(r[17+o]=0)+s]=l.normalisedAge,i[1+s]=l.normalisedAge,i[2+s]=l.normalisedAge,i[3+s]=l.normalisedAge,i[4+s]=l.normalisedAge,i[5+s]=l.normalisedAge)}this.geo.attributes.position instanceof u.BufferAttribute&&(this.geo.attributes.position.copyArray(this.buffer),this.geo.attributes.position.needsUpdate=!0),this.geo.attributes.age instanceof u.BufferAttribute&&(this.geo.attributes.age.copyArray(this.ageBuffer),this.geo.attributes.age.needsUpdate=!0),this.geo.setDrawRange(0,6*a)}destroy(){this.shouldRun=!1,this.material.dispose(),this.geo.dispose(),this.flames=[],this.renderer.dispose()}};class s{constructor(){this._position=new u.Vector3,this._id=0,this.speed=0,this._life=0,this._age=0,this._scale=0,this._id=s.currentID++}get id(){return this._id}birth(e,t,n,r){this._position.copy(e),this._life=t,this._scale=n,this._age=0,this.speed=r}update(e,t){this._age+=t,this.dead||(this._position.y+=this.speed*t,this._position.x+=c.noise3D(2*this.position.y,2*this.position.x,e)*t*this.speed*.25)}get position(){return this._position}get dead(){return.99999<=this.normalisedAge}get age(){return this._age}get scale(){return this._scale*(1-this.normalisedAge)}get normalisedAge(){return Math.min(this._age/this._life,1)}}s.currentID=0},{"simplex-noise":51,three:52}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.rgb=n.findColorBetween=n.convertHexToRgb=n.shuffle=n.roundTo=n.getRandomInt=n.getRandom=n.pxToInt=n.px=n.getStyle=n.findAll=n.elList=n.find=n.el=n.elByID=void 0,n.elByID=function(e){return document.getElementById(e)},n.el=function(e){return document.querySelector(e)},n.find=function(e,t){return e.querySelector(t)},n.elList=function(e){var t=[];return document.querySelectorAll(e).forEach(e=>{t.push(e)}),t},n.findAll=function(e,t){var n=[];return e.querySelectorAll(t).forEach(e=>{n.push(e)}),n},n.getStyle=function(e,t){return window.getComputedStyle(e).getPropertyValue(t)},n.px=function(e){return e.toString()+"px"},n.pxToInt=function(e){return parseInt(e.replace(/[^\d-]/g,""))},n.getRandom=function(e,t){return Math.random()*(t-e)+e},n.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},n.roundTo=function(e,t){return void 0===t&&(t=0),t=Math.pow(10,t),e=parseFloat((e*t).toFixed(11)),Math.round(e)/t},n.shuffle=function(t){for(let e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}},n.convertHexToRgb=function(e){return e=e.replace(/#/,"").match(/.{1,2}/g),{r:parseInt(e[0],16),g:parseInt(e[1],16),b:parseInt(e[2],16)}},n.findColorBetween=function(e,t,n){return{r:Math.round(e.r+(t.r-e.r)*n/100),g:Math.round(e.g+(t.g-e.g)*n/100),b:Math.round(e.b+(t.b-e.b)*n/100)}},n.rgb=function(e){return"rgb("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+")"}},{}],7:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let s=a(e("./helpers")),l=a(e("./data")),u=e("d3"),c=e("gsap"),h=o(e("./app"));n.default=class{constructor(e){this.landingPageEl=s.elByID("landing"),this.loopingAnimations=[],this.btnActive=!1,this.onLoginPressed=()=>{},this.UI=e,s.find(this.landingPageEl,".next-btn").addEventListener("click",this.startLevels.bind(this))}startLevels(){console.log("startLevels"),this.UI.startLevels()}login(){this.btnActive&&(h.default.audio.playClick(),this.loopingAnimations.forEach(e=>{e.kill()}),this.loopingAnimations=[],this.UI.transitionOut(),this.UI.hideWaves(0),setTimeout(this.onLoginPressed.bind(this),500))}show(){var e=s.find(this.landingPageEl,".logo-wrapper-large"),t=s.find(this.landingPageEl,".logo-wrapper-mobile"),e="block"==s.getStyle(e,"display")?e:t,t=s.findAll(e,".logo-head-fill"),e=s.findAll(e,".logo-fill"),n=s.elByID("hop"),r=s.find(this.landingPageEl,".subheading"),i=s.find(this.landingPageEl,"#start-btn");this.UI.setVisibleElements([this.landingPageEl]),this.UI.setBgColor(l.COLORS.purple),this.UI.setVisibleElements([this.landingPageEl,n]),this.UI.toggleFrameColors(l.COLORS.beige,!0),this.UI.showWaves(0),this.landingPageEl.style.display="block",c.TweenMax.fromTo(n,1,{display:"none",scale:.95,alpha:0},{display:"block",scale:1,alpha:.9,ease:u.easeSinIn}),this.loopingAnimations.push(c.TweenMax.to(n,2,{scale:.99,ease:"linear",delay:1,repeat:-1,yoyo:!0})),c.TweenMax.from(e,1,{alpha:0,scale:0,transformOrigin:"center",delay:1.5,stagger:{each:.04,from:"random"}}),c.TweenMax.from(t,1,{alpha:0,scale:0,rotation:-45,y:-200,delay:1.5,stagger:{each:.1}}),c.TweenMax.from(r,.5,{alpha:0,y:5,delay:3}),c.TweenMax.from(i,.5,{alpha:0,scale:.9,delay:4}),this.loopingAnimations.push(c.TweenMax.to(i,1,{scale:.9,ease:"linear",delay:4.5,repeat:-1,yoyo:!0})),this.btnActive=!0}}},{"./app":2,"./data":4,"./helpers":6,d3:46,gsap:49}],8:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let s=a(e("./helpers")),l=e("./data"),u=e("gsap"),c=e("d3"),h=o(e("./app"));n.default=class{constructor(){this.el=s.elByID("mc-q"),this.questionIdx=0,this.time=.3,this.questionElement=s.find(this.el,".question"),this.optionEl=s.find(this.el,".mc-options"),this.optionEls=s.findAll(this.optionEl,"li"),this.canGraphicEls=[],this.interactable=!0,this.loopingAnimations=[],this.initiated=!1,this.isComplete=!1,this.roundComplete=e=>{},l.mcqQuestions.forEach(e=>{this.canGraphicEls.push(s.find(this.el,"#"+e.id))}),this.optionEls.forEach(e=>{e.addEventListener("mouseover",()=>{u.TweenMax.to(e,.1,{scale:1.1,zIndex:50})}),e.addEventListener("mouseleave",()=>{u.TweenMax.to(e,.1,{scale:1,zIndex:1})}),e.addEventListener("click",this.optionSelected.bind(this))}),window.onresize=this.onResize.bind(this),this.onResize()}onResize(){var e,t;this.isComplete||this.currentQuestion&&(e=this.optionEl.getBoundingClientRect().width,this.optionEl.style.height=s.px(e/this.currentQuestion.options.length),t=s.px((e-20)/this.currentQuestion.options.length),this.optionEls.forEach(e=>{e.style.width=t}))}getImgPath(e){var t;return"url(./assets/round2/q"+(this.questionIdx+1).toString()+"/"+((null==(t=this.currentQuestion)?void 0:t.options[e])+".png)")}getCanPath(e){return e.replace(".png","_can.png")}set(){var e;this.currentQuestion=l.mcqQuestions[this.questionIdx],this.questionElement.innerHTML=this.currentQuestion.question;for(var t=0;t<this.currentQuestion.options.length;t++)this.optionEls[t].style.backgroundImage=this.getImgPath(t),this.optionEls[t].setAttribute("data",null==(e=this.currentQuestion)?void 0:e.options[t]);this.show()}show(){if(this.currentQuestion){var e=0;this.initiated||(e=1,this.initiated=!0,u.TweenMax.fromTo(s.find(this.el,"#can"),2*this.time,{x:window.innerWidth,alpha:0},{alpha:1,x:0,delay:e})),this.interactable=!0,this.el.style.display="block",this.onResize(),u.TweenMax.fromTo([this.questionElement,this.optionEl],this.time,{alpha:0,x:-20},{alpha:1,x:0,delay:e});for(var t=0;t<this.currentQuestion.options.length;t++)this.optionEls[t].style.display="inline-block";for(t=0;t<this.currentQuestion.options.length;t++)u.TweenMax.fromTo(this.optionEls[t],this.time,{alpha:0},{alpha:1,delay:e+.1*t}),640<window.innerWidth?this.loopingAnimations.push(u.TweenMax.fromTo(this.optionEls[t],.5,{y:-30},{y:30,repeat:-1,yoyo:!0,delay:e+.1*t,ease:c.easeCubicIn})):this.loopingAnimations.push(u.TweenMax.fromTo(this.optionEls[t],.5,{y:-10},{y:10,repeat:-1,yoyo:!0,delay:e+.1*t,ease:c.easeCubicIn}));this.onResize()}}hide(){this.loopingAnimations.forEach(e=>{e.kill()}),this.loopingAnimations=[],u.TweenMax.to([this.questionElement,this.optionEl],this.time,{alpha:0,x:20,onComplete:()=>{this.getNextQuestion()}})}optionSelected(e){var t;this.interactable&&(h.default.audio.playSelectedSound(),t=e.srcElement.style.backgroundImage,e=e.srcElement.getAttribute("data"),l.mcqQuestions[this.questionIdx].answer=e,gtag("event","answer retrieved",{event_category:"mcq",event_label:e}),this.canGraphicEls[this.questionIdx].style.backgroundImage=this.getCanPath(t),u.TweenMax.to(this.canGraphicEls[this.questionIdx],this.time,{alpha:1}),this.interactable=!1,this.hide())}getNextQuestion(){this.optionEls.forEach(e=>{e.style.display="none"}),this.questionIdx<l.mcqQuestions.length-1?(this.questionIdx++,this.set()):(1024<window.innerWidth?(u.TweenMax.to(s.find(this.el,".text-column"),0,{width:"0"}),u.TweenMax.to(s.find(this.el,".content-column"),2*this.time,{left:"calc(-25% - 50px)"})):u.TweenMax.to(s.find(this.el,".content-column"),2*this.time,{scale:1.5}),setTimeout(this.finished.bind(this),1e3))}finished(){this.roundComplete(this.el)}}},{"./app":2,"./data":4,"./helpers":6,d3:46,gsap:49}],9:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let s=e("./data"),l=a(e("./helpers")),u=e("gsap"),c=o(e("./app"));n.default=class{constructor(){this.el=l.elByID("quickfire-q"),this.questionIdx=0,this.questions=s.qfQuestions,this.questionsUnanswered=[],this.questionsAsked=[],this.delay=.7,this.time=.3,this.questionEl=l.find(this.el," .question"),this.timerEl=l.find(this.el,"#timer"),this.timerCount=10,this.timerActive=!0,this.active=!1,this.initiated=!1,this.isComplete=!1,this.roundComplete=e=>{};for(var e=0;e<this.questions.length;e++)this.questionsUnanswered.push(this.questions[e]);this.updateTimerElements(),this.getNextQuestion(),l.find(this.el,"#answer-wrapper li:first-child").addEventListener("click",this.yea.bind(this)),l.find(this.el,"#answer-wrapper li:last-child").addEventListener("click",this.nah.bind(this))}set(){this.active=!0;var e=this.initiated?0:this.delay;this.initiated=!0,this.questionEl.innerHTML=this.questionsAsked[this.questionsAsked.length-1].question,this.el.style.display="block",u.TweenMax.fromTo(this.questionEl,.6,{alpha:0,x:-50},{alpha:1,x:0,delay:e}),u.TweenMax.fromTo("#answer-wrapper li",.6,{alpha:0,y:50},{alpha:1,y:0,stagger:.1,delay:e}),u.TweenMax.fromTo(l.find(this.el,"#timer-wrapper"),.6,{alpha:0,x:200},{alpha:1,x:0,delay:e,onComplete:()=>{setTimeout(this.updateTimer.bind(this),1e3)}})}getNextQuestion(){var e;this.questionsUnanswered.length?(e=l.getRandomInt(0,this.questionsUnanswered.length-1),this.questionsAsked.push(this.questionsUnanswered[e]),this.questionsUnanswered.splice(e,1),this.hideQuestion()):(this.hideQuestion(),this.timerActive=!1,this.roundComplete(this.el))}showQuestion(){this.active=!0,this.questionEl.innerHTML=this.questionsAsked[this.questionsAsked.length-1].question,u.TweenMax.fromTo(this.questionEl,.2,{alpha:0,x:-50},{alpha:1,x:0}),u.TweenMax.fromTo("#answer-wrapper li",.2,{alpha:0,y:50},{alpha:1,y:0,stagger:.05})}hideQuestion(){u.TweenMax.to(this.questionEl,.2,{alpha:0,x:50}),u.TweenMax.to("#answer-wrapper li",.2,{alpha:0,y:50,stagger:.05,onComplete:this.showQuestion.bind(this)})}updateTimer(){this.timerActive&&(this.timerCount--,0<=this.timerCount?(this.updateTimerElements(),setTimeout(this.updateTimer.bind(this),1e3)):(this.active=!1,this.roundComplete(this.el)))}updateTimerElements(){var e=this.timerCount.toString();this.timerEl.innerHTML=e,this.timerCount<6?this.timerEl.style.color=s.COLORS.orange:this.timerCount<15&&(this.timerEl.style.color=s.COLORS.yellow)}yea(e){this.active&&(c.default.audio.playSelectedSound(),this.answerRetrieved(!0))}nah(e){this.active&&(c.default.audio.playRejectedSound(),this.answerRetrieved(!1))}answerRetrieved(e){var t=this.questionsAsked[this.questionsAsked.length-1].question+" - "+e.toString();gtag("event","answer retrieved",{event_category:"quickfire",event_label:t}),this.questionsAsked[this.questionsAsked.length-1].answered=!0,this.questionsAsked[this.questionsAsked.length-1].answer=e,this.getNextQuestion()}}},{"./app":2,"./data":4,"./helpers":6,gsap:49}],10:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.GLTFAsset=void 0;let o=a(e("three"));a=a(e("./GLTFLoader"));console.debug(a,o.GLTFLoader);class s{constructor(e){this.resource=e}}n.GLTFAsset=s;n.default=class{constructor(){this.resourceStore=new Map,this.gltfLoader=new o.GLTFLoader}getResourcesOfType(e){return[]}getResourceByPath(e,t){t=this.resourceStore.get(t);if(t instanceof e)return t}loadResourceByPath(r,i,a){return r===HTMLImageElement?new Promise((t,n)=>{let r=new Image;r.onload=e=>{this.resourceStore.set(null!=a?a:i,r),t()},r.onerror=e=>{n(e)},r.src=i}):r===s?new Promise((t,n)=>{this.gltfLoader.load(i,e=>{e=new r(e);this.resourceStore.set(null!=a?a:i,e),t(e)},()=>{},e=>{n(e)})}):new Promise((e,t)=>{t()})}}},{"./GLTFLoader":1,three:52}],11:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let s=a(e("./helpers")),l=a(e("./data")),u=o(e("./slider-q")),c=o(e("./mc-q")),h=o(e("./quickfire-q")),d=e("gsap");a=e("gsap/dist/DrawSVGPlugin");let f=e("d3");var p=o(e("gsap"));let m=o(e("./app"));p.default.registerPlugin(a.DrawSVGPlugin);n.default=class{constructor(e){this.questionGroups=[],this.roundPageEl=s.elByID("round-name"),this.descriptionEl=s.find(this.roundPageEl,".description"),this.roundNumberListEls=s.findAll(this.roundPageEl,".numbers li"),this.roundNameListEls=s.findAll(this.roundPageEl,".round-name-text li"),this.roundNumberPaths=s.findAll(this.roundPageEl,".number"),this.btnEl=s.find(this.roundPageEl,".next-btn"),this.fruitEl=s.find(this.roundPageEl,".fruit-whole"),this.currentRoundIdx=0,this.loopingAnimations=[],this.btnActive=!1,this.UI=e,s.el("body").style.backgroundColor=l.COLORS.orange,this.slider=new u.default,this.mcq=new c.default,this.qfq=new h.default,this.questionGroups=[this.slider,this.mcq,this.qfq],this.questionGroups.forEach(e=>{e.roundComplete=this.roundComplete.bind(this)}),this.currentQuestionGroup=this.slider,this.btnEl.addEventListener("click",this.next.bind(this))}showRound(e){for(var t=l.ROUNDS[this.currentRoundIdx],t=(this.UI.setBgColor(t.color),this.UI.toggleFrameColors(l.COLORS.beige,!0),this.UI.toggleWaveColor(t.waveColor),this.UI.showWaves(e),s.find(this.descriptionEl,"p").innerHTML=t.text,s.find(this.btnEl,".next-btn-round").style.fill=t.btnColor,3==this.currentRoundIdx&&(this.roundNumberPaths[0].style.stroke=l.COLORS.purple),this.roundPageEl.style.display="block",this.roundPageEl.style.opacity="1",[this.roundNumberListEls[0],this.roundNumberListEls[this.currentRoundIdx+1],this.roundNameListEls[this.currentRoundIdx]]),t=(d.TweenMax.fromTo(t,0,{display:"none"},{display:"inline-block"}),[this.roundNumberPaths[0],this.roundNumberPaths[this.currentRoundIdx+1]]),n=(d.TweenMax.fromTo(t,2,{display:"none",drawSVG:"0"},{display:"block",drawSVG:"100%",ease:f.easeCircleInOut,delay:e}),s.findAll(this.roundPageEl,".round path")),r=0;r<n.length;r++){var i=s.getRandom(-300,300),a=s.getRandom(-500,0),o=s.getRandom(-180,180);d.TweenMax.fromTo(n[r],1,{alpha:0,scale:0,x:i,y:a,rotation:o},{alpha:1,scale:1,x:0,y:0,rotation:0,delay:2*e+.1*r})}d.TweenMax.fromTo(this.roundNameListEls[this.currentRoundIdx],.5,{alpha:0,x:-50},{alpha:1,x:0,delay:2*e+1}),d.TweenMax.fromTo(s.find(this.roundPageEl,".description-wrapper"),1,{alpha:0,y:50},{alpha:1,y:0,delay:2*e+1}),this.UI.isMobileSize&&!this.UI.smallLogoVisible&&(d.TweenMax.fromTo(this.UI.smallLogoEl,.5,{opacity:0,y:-100},{opacity:1,y:0}),this.UI.smallLogoVisible=!0),d.TweenMax.fromTo(this.fruitEl,1,{y:-window.innerHeight,rotate:90},{y:0,rotate:0,delay:2*e+.5}),this.loopingAnimations.push(d.TweenMax.to(this.fruitEl,1,{y:5,repeat:-1,ease:"linear",yoyo:!0,delay:2*e+1.5})),d.TweenMax.fromTo(this.btnEl,.5,{alpha:0,scale:.9,display:"none"},{alpha:1,scale:1,display:"block",ease:"linear",delay:2*e+2.5}),this.loopingAnimations.push(d.TweenMax.to(this.btnEl,1,{scale:.9,ease:"linear",delay:2*e+3,repeat:-1,yoyo:!0})),this.btnActive=!0}showQuestion(){this.UI.setBgColor(l.COLORS.beige),this.UI.toggleFrameColors(l.COLORS.purple,!0),this.UI.hideWaves(0),this.UI.transitionOut()}next(){var e;this.btnActive&&(e="start round "+(this.currentRoundIdx+1).toString(),gtag("event","interaction",{event_category:"button click",event_label:e}),m.default.audio.playClick(),0==this.currentRoundIdx?m.default.audio.playAmbient():2==this.currentRoundIdx&&m.default.audio.playRound3(),this.btnActive=!1,this.loopingAnimations.forEach(e=>{e.kill()}),e=this.questionGroups[this.currentRoundIdx],this.UI.setVisibleElements([this.roundPageEl]),this.showQuestion(),e.set())}roundComplete(e){this.UI.setVisibleElements([e]),this.roundNumberListEls.forEach(e=>{e.style.display="none"}),this.roundNameListEls.forEach(e=>{e.style.display="none"}),this.currentRoundIdx<2?(this.currentRoundIdx++,this.UI.transitionOut(),this.showRound(1)):(this.UI.transitionOut(),this.UI.prepareNewEndFrame())}}},{"./app":2,"./data":4,"./helpers":6,"./mc-q":8,"./quickfire-q":9,"./slider-q":12,d3:46,gsap:49,"gsap/dist/DrawSVGPlugin":48}],12:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let s=a(e("./helpers")),l=e("gsap"),u=e("./data"),c=e("gsap/dist/Draggable");a=o(e("gsap"));let h=o(e("./fire")),d=o(e("./app"));a.default.registerPlugin(c.Draggable);n.default=class{constructor(){this.el=s.elByID("slider-q"),this.questionIdx=0,this.questions=u.sliderQuestions,this.delay=.7,this.time=.3,this.questionElement=s.find(this.el,".question"),this.minValueLabel=s.find(this.el,"#min-value-label"),this.maxValueLabel=s.find(this.el,"#max-value-label"),this.sliderContainerEl=s.find(this.el,".slide-container"),this.sliderThumbEl=s.find(this.el," .slider-thumb"),this.sliderLineEl=s.find(this.el,".slider-line"),this.maxValue=100,this.sliderValue=0,this.previousValue=0,this.midValue=50,this.imgs=[],this.imgEl=s.find(this.el,".slider-q1"),this.count=0,this.loopingAnimations=[],this.draggableOffset=0,this.draggableCurrentPos=0,this.draggableWidth=0,this.draggableMax=0,this.draggableMin=0,this.sliderColor1=s.convertHexToRgb("88009D"),this.sliderColor2=s.convertHexToRgb("FF1900"),this.initiated=!1,this.isComplete=!1,this.colorWipeEl=s.elByID("color-wipe"),this.color1=s.convertHexToRgb("FCF1DB"),this.color2=s.convertHexToRgb("281333"),this.imgs2=[],this.moon=s.find(this.el,".moon-center"),this.sweetFruitOffset=0,this.fruitDefaultHeight=0,this.busenFillEl=s.find(this.el,".bunsen-fill"),this.bunsencolor1=s.convertHexToRgb("88009D"),this.bunsencolor2=s.convertHexToRgb("FF1900"),this.fireOn=!1,this.roundComplete=e=>{},this.showCurrentQuestion=this.showQ1.bind(this),this.callbackCurrentQuestion=this.callbackQ1.bind(this),window.addEventListener("resize",this.onResize.bind(this)),c.Draggable.create(".slider-thumb",{type:"x",edgeResistance:1,bounds:".slide-container",inertia:!1,onDragStart:this.sliderInit.bind(this),onDrag:this.sliderChange.bind(this),onDragEnd:this.sliderValueSet.bind(this)})}sliderInit(e){this.sliderValue<50?this.draggableOffset=e.x:this.draggableOffset=e.x-.5*this.draggableWidth}sliderResize(){this.draggableWidth=this.sliderLineEl.getBoundingClientRect().width,this.draggableMax=this.draggableWidth,this.draggableMin=0}sliderChange(e){null==e.x?this.draggableCurrentPos=e.touches[0].pageX:this.draggableCurrentPos=e.x;var e=Math.round((this.draggableCurrentPos-this.draggableOffset)/this.draggableMax*100);0<=e&&e<=100&&(this.sliderValue=e,e=s.rgb(s.findColorBetween(this.sliderColor1,this.sliderColor2,this.sliderValue)),this.sliderThumbEl.style.borderBottomColor=e,this.callbackCurrentQuestion(this.sliderValue))}setSliderValue(e){this.sliderValue=e;var t=s.rgb(s.findColorBetween(this.sliderColor1,this.sliderColor2,this.sliderValue)),t=(this.sliderThumbEl.style.borderBottomColor=t,e/100*this.draggableWidth);l.TweenMax.to(this.sliderThumbEl,0,{x:t})}sliderValueSet(e){d.default.audio.playSelectedSound();var t=u.sliderQuestions[this.questionIdx],t=(t.max-t.min)/100*this.sliderValue+t.min,t=(u.sliderQuestions[this.questionIdx].answer=s.roundTo(t,2),u.sliderQuestions[this.questionIdx].question+" - "+this.sliderValue.toString());gtag("event","answer retrieved",{event_category:"slider",event_label:t}),this.getNextQuestion()}toggleFullWidth(){s.find(this.el,".col-wrapper.text-column").classList.toggle("full-width"),this.el.classList.toggle("wide")}orangeLeft(){this.sliderContainerEl.className=this.sliderContainerEl.className.replace(" orange-right",""),this.sliderContainerEl.classList.toggle("orange-left"),this.sliderColor1=s.convertHexToRgb("FF1900"),this.sliderColor2=s.convertHexToRgb("88009D")}orangeRight(){this.sliderContainerEl.className=this.sliderContainerEl.className.replace(" orange-left",""),this.sliderContainerEl.classList.toggle("orange-right"),this.sliderColor1=s.convertHexToRgb("88009D"),this.sliderColor2=s.convertHexToRgb("FF1900")}onResize(e){switch(this.sliderResize(),this.setSliderValue(this.sliderValue),this.questionIdx){case 0:break;case 1:this.imgs[0].style.removeProperty("height"),this.imgs[0].style.removeProperty("top"),this.imgs[1].style.removeProperty("height"),this.fruitDefaultHeight=this.imgs[0].getBoundingClientRect().height,this.scaleFruit()}}set(){var e;this.questionIdx<this.questions.length&&(e=u.sliderQuestions[this.questionIdx],this.questionElement.innerHTML=e.question,this.minValueLabel.innerHTML=e.minTextValue.toString(),this.maxValueLabel.innerHTML=e.maxTextValue.toString(),this.setSliderValue(e.startValue),this.show(),this.showCurrentQuestion())}show(){var e=this.initiated?.3:this.delay;this.initiated=!0,this.el.style.display="block",this.draggableWidth<1&&this.sliderResize(),this.imgEl.style.display="block",l.TweenMax.fromTo(this.questionElement,this.time,{alpha:0,x:-20},{alpha:1,x:0,delay:e}),l.TweenMax.to(this.sliderThumbEl,this.time,{alpha:0}),l.TweenMax.fromTo(this.sliderLineEl,this.time,{scaleX:0,transformOrigin:"right"},{scaleX:1,delay:e,onComplete:()=>{this.sliderResize(),this.setSliderValue(this.sliderValue),l.TweenMax.fromTo(this.sliderThumbEl,this.time,{alpha:0,y:20},{alpha:1,y:0})}}),l.TweenMax.fromTo([this.minValueLabel,this.maxValueLabel],this.time,{alpha:0,y:-20},{alpha:1,y:0,delay:e})}showQ1(){this.count=5;var e=s.find(this.el,".sun-rays"),t=s.findAll(e,".line"),n=s.findAll(e,"polygon.star");this.orangeLeft(),s.find(this.el,".col-wrapper.content-column").style.display="none",this.setSliderValue(0),this.imgs=t,this.imgs2=n,s.shuffle(t),this.toggleFullWidth(),l.TweenMax.fromTo(this.colorWipeEl,.2,{display:"none",alpha:0},{display:"block",alpha:1,delay:this.delay}),this.colorWipeEl.style.backgroundColor=s.rgb(this.color1),l.TweenMax.fromTo(e,this.time,{alpha:0},{alpha:1,delay:this.delay,ease:"linear"});for(var r=0;r<t.length;r++)this.loopingAnimations.push(l.TweenMax.fromTo(t[r],.3,{fill:u.COLORS.yellow},{fill:u.COLORS.white,repeat:-1,yoyo:!0,ease:"linear",delay:.05*r}));for(r=0;r<n.length;r++)this.loopingAnimations.push(l.TweenMax.fromTo(n[r],.1,{fill:u.COLORS.white},{fill:u.COLORS.purple,repeat:-1,yoyo:!0,ease:"linear",delay:.1*r}));this.loopingAnimations.push(l.TweenMax.to(e,2,{scale:1.2,repeat:-1,yoyo:!0,ease:"linear"}))}callbackQ1(e){var t=s.rgb(s.findColorBetween(this.color1,this.color2,this.sliderValue)),t=(this.colorWipeEl.style.backgroundColor=t,this.sliderValue/this.maxValue),n=360*t;l.TweenMax.to(this.imgEl,0,{rotation:n});var r=(r=1-t-t)<0?0:r;this.imgs.forEach(e=>{e.style.opacity=r.toString()});var i=(i=t-(1-t))<0?0:i;this.imgs2.forEach(e=>{e.style.opacity=i.toString()}),this.moon.style.opacity=t.toString()}showQ2(){var e=s.find(this.el,".slider-q2");this.imgs=s.findAll(e,"li img"),this.orangeRight(),this.setSliderValue(50),s.find(this.el,".col-wrapper.content-column").style.display="block",this.fruitDefaultHeight=this.imgs[0].getBoundingClientRect().height,this.toggleFullWidth(),l.TweenMax.fromTo(this.imgs,.3,{alpha:0},{alpha:1}),l.TweenMax.fromTo(s.find(e,"li:first-child"),.8,{y:-100},{y:0}),l.TweenMax.fromTo(s.find(e,"li:last-child"),.8,{y:100},{y:0}),this.loopingAnimations.push(l.TweenMax.to(this.imgs[0],.5,{y:-20,repeat:-1,yoyo:!0,delay:.8})),this.loopingAnimations.push(l.TweenMax.to(this.imgs[1],.5,{y:20,repeat:-1,yoyo:!0,delay:.8}))}callbackQ2(e){this.scaleFruit()}scaleFruit(){this.sliderValue>this.midValue||!(this.sliderValue<this.midValue)&&this.previousValue>this.midValue?this.scaleBitter():this.scaleSweet()}scaleBitter(){this.imgs[1].style.height=s.px(5*(this.sliderValue-this.midValue)+this.fruitDefaultHeight),this.previousValue=this.sliderValue}scaleSweet(){this.imgs[0].style.height=s.px(5*(this.midValue-this.sliderValue)+this.fruitDefaultHeight),this.sweetFruitOffset=0-5*(this.midValue-this.sliderValue),this.imgs[0].style.top=s.px(this.sweetFruitOffset),this.previousValue=this.sliderValue}showQ3(){var e=this.imgEl;e.style.display="block",this.count=10,this.imgs=[],s.find(this.el,".col-wrapper.content-column").style.display="none",this.toggleFullWidth();for(var t=1;t<this.count+1;t++){var n=document.createElement("li"),r=n;this.imgs.push(r),e.appendChild(n),r.className=t<=this.count/2?"sharp":"round",l.TweenMax.to(r,0,{transformStyle:"preserve-3d"})}this.q3Resize();var i=this.imgs;s.shuffle(i);for(var a=0;a<i.length;a++)this.loopingAnimations.push(l.TweenMax.fromTo(i[a],3.5,{y:window.innerHeight/2,rotationY:-10},{y:1.5*-window.innerHeight,x:s.getRandom(-300,300),ease:"linear",repeat:-1,repeatDelay:0,delay:.3*a}))}callbackQ3(e){for(var t=Math.round(this.sliderValue/this.maxValue*10),n=this.count-t,r=0;r<this.count;r++)this.imgs[r].className=r<n?"sharp":"round"}q3Resize(){for(var e=this.imgEl.getBoundingClientRect().width,t=0;t<this.count;t++)this.imgs[t].style.left=s.px(e/this.count*t)}showQ4(){this.fire=new h.default,this.fire.onInitResources(d.default.resourceManager),this.fireOn=!0;var e=document.getElementById("canvas-container-background"),e=(null!==e&&(e.style.zIndex="5",e.append(this.fire.domElement),this.fire.domElement.id="graphics-canvas"),this.fire.run(),null!=(e=this.fire)&&e.setSpeed(1),this.toggleFullWidth(),s.find(this.el,".col-wrapper.content-column").style.display="block",s.find(this.el,".slider-q4")),t=(this.imgs=s.findAll(e,"#bubbles li"),s.rgb(s.findColorBetween(this.bunsencolor1,this.bunsencolor2,this.sliderValue)));this.busenFillEl.style.fill=t,l.TweenMax.fromTo(e,.5,{display:"none",alpha:0,x:window.innerWidth/2},{display:"block",alpha:1,x:0})}callbackQ4(e){null!=(t=this.fire)&&t.setSpeed(e/50);var t=s.rgb(s.findColorBetween(this.bunsencolor1,this.bunsencolor2,this.sliderValue));this.busenFillEl.style.fill=t}showQ5(){this.count=5,l.TweenMax.to(this.imgEl,0,{perspective:800}),l.TweenMax.fromTo(".slider-q5 li:first-child",.5,{alpha:0,rotationX:90},{alpha:1,rotationX:0,transformOrigin:"bottom"});for(var e=1;e<this.count+1;e++)this.imgs.push(s.el(".slider-q5 li:nth-child("+e.toString()+")"));for(e=0;e<this.imgs.length;e++)this.loopingAnimations.push(l.TweenMax.fromTo(this.imgs[e],1.5,{rotate:5,transformOrigin:"50% 100%"},{rotate:-10,transformOrigin:"50% 100%",repeat:-1,yoyo:!0,delay:.1*e}))}callbackQ5(e){var t=this.sliderValue/25,t=Math.ceil(t),n=(25*(t=t<1?1:t)-this.sliderValue)/25;this.imgs[t-1].style.opacity="1",this.imgs[t].style.opacity=(1-n).toString();for(var r=t+1;r<this.imgs.length;r++)this.imgs[r].style.opacity="0";n=Math.ceil(this.sliderValue/20);s.el("body").style.webkitFilter="blur("+n.toString()+"px)"}getNextQuestion(){var e=[this.showQ1.bind(this),this.showQ2.bind(this),this.showQ3.bind(this),this.showQ4.bind(this),this.showQ5.bind(this)],t=[this.callbackQ1.bind(this),this.callbackQ2.bind(this),this.callbackQ3.bind(this),this.callbackQ4.bind(this),this.callbackQ5.bind(this)];this.loopingAnimations.forEach(e=>{e.kill()}),this.questionIdx<this.questions.length-1?(this.questionIdx++,this.imgs=[],this.imgEl=s.find(this.el,".slider-q"+(this.questionIdx+1).toString()),this.count=0,this.loopingAnimations=[],this.showCurrentQuestion=e[this.questionIdx],this.callbackCurrentQuestion=t[this.questionIdx],this.fireOn&&this.fire&&(l.TweenMax.to(this.fire.domElement,.5,{alpha:0,display:"none",onComplete:()=>{var e;null!=(e=this.fire)&&e.destroy(),this.fire=void 0,s.elByID("canvas-container-background").style.display="none"}}),this.fireOn=!1),this.hide()):(this.isComplete=!0,this.hide(),this.roundComplete(this.el))}hide(){l.TweenMax.to(".slider-q"+this.questionIdx.toString(),this.time,{alpha:0,scale:1.1,display:"none",onComplete:()=>{s.el("body").style.webkitFilter="blur(0px)",this.isComplete||this.set()}}),l.TweenMax.to(this.questionElement,this.time,{alpha:0,x:-20}),l.TweenMax.to(this.sliderLineEl,this.time,{scaleX:0,transformOrigin:"right"}),l.TweenMax.to([this.minValueLabel,this.maxValueLabel],this.time,{alpha:0,y:-20}),l.TweenMax.to(this.sliderThumbEl,this.time,{alpha:0,y:20}),"block"==this.colorWipeEl.style.display&&l.TweenMax.to(this.colorWipeEl,this.time,{width:0,transformOrigin:"left",display:"none"})}}},{"./app":2,"./data":4,"./fire":5,"./helpers":6,gsap:49,"gsap/dist/Draggable":47}],13:[function(e,t,n){var o,s,r;Object.defineProperty(n,"__esModule",{value:!0}),n.SpotifyInterface=n.ErrorType=n.DataType=n.QueryParameters=void 0,(r=n.QueryParameters||(n.QueryParameters={}))[r.Energy=0]="Energy",r[r.Speechiness=1]="Speechiness",r[r.Valence=2]="Valence",r[r.Danceability=3]="Danceability",r[r.PlaylistLength=4]="PlaylistLength",(r=o=n.DataType||(n.DataType={}))[r.TopArtists=0]="TopArtists",r[r.TopTracks=1]="TopTracks",r[r.Recommendations=2]="Recommendations",r[r.UserProfile=3]="UserProfile",r[r.PlaylistCreated=4]="PlaylistCreated",(r=s=n.ErrorType||(n.ErrorType={}))[r.NoAuthToken=0]="NoAuthToken",r[r.StatusError=1]="StatusError",r[r.JsonParseError=2]="JsonParseError";class l{constructor(e){this.OnAuthorisedListeners=[],this.OnDataListeners=[],this.OnErrorListeners=[],this.PlaylistUrlCreated=e=>{},this.NameSet=e=>{},this.sessionAuthorised=!1,this.playlistUrl="",this.params=e,this.token=window.location.hash.substr(1).split("&")[0].split("=")[1],history.pushState(null,"",window.location.href.split("#")[0])}get Authorized(){return void 0!==this.token}GetAuthorization(){var e,t;void 0===this.token?(e=this.params.Scopes.join(" "),(t=new URL(l.AUTHORIZATION_ADDRESS)).searchParams.append("client_id",this.params.ClientID),t.searchParams.append("redirect_uri",this.params.RedirectURI),t.searchParams.append("scope",e),t.searchParams.append("response_type","token"),t.searchParams.append("show_dialog","false"),window.location.href=t.href):this.OnAuthorisedListeners.forEach(e=>{e()})}BuildAuthToken(){if(void 0!==this.token)return"Bearer "+this.token}GetUserProfile(){var e=this.BuildAuthToken();void 0===e?this.OnErrorListeners.forEach(e=>{e(s.NoAuthToken)}):fetch(l.USER_PROFILE_ADDRESS,{headers:{Authorization:e}}).then(t=>{t.ok?t.json().then(e=>{var t=e.images;let n=[],r=(null!==t&&t.forEach(e=>{n.push(e.url)}),{DisplayName:e.display_name,Uri:e.uri,id:e.id,images:n});this.NameSet(r.DisplayName),this.OnDataListeners.forEach(e=>{e(o.UserProfile,r)})}).catch(e=>{this.OnErrorListeners.forEach(e=>{e(s.JsonParseError)})}):this.OnErrorListeners.forEach(e=>{e(s.StatusError,{code:t.status,text:t.statusText})})}).catch(e=>{console.log(e)})}GetTopArtists(){var e=this.BuildAuthToken();void 0===e?this.OnErrorListeners.forEach(e=>{e(s.NoAuthToken)}):(e={headers:{Authorization:e}},fetch(l.TOP_ARTISTS_ADDRESS,e).then(t=>{t.ok?t.json().then(e=>{e=e.items;if(null!==e){let t=[];e.forEach(e=>{t.push({Name:e.name,Id:e.id,Uri:e.uri,Genres:e.genres})}),this.OnDataListeners.forEach(e=>{e(o.TopArtists,t)})}}).catch(e=>{this.OnErrorListeners.forEach(e=>{e(s.JsonParseError)})}):this.OnErrorListeners.forEach(e=>{e(s.StatusError,{code:t.status,text:t.statusText})})}).catch(e=>{console.log(e)}))}GetTopTracks(){var e=this.BuildAuthToken();void 0===e?this.OnErrorListeners.forEach(e=>{e(s.NoAuthToken)}):(e={headers:{Authorization:e}},fetch(l.TOP_TRACKS_ADDRESS,e).then(t=>{t.ok?t.json().then(e=>{e=e.items;if(void 0!==e){let n=[];e.forEach(e=>{let t=[];e.artists.forEach(e=>{t.push({Name:e.name,Id:e.id,Uri:e.uri,Genres:e.genres})}),n.push({Name:e.name,Id:e.id,Uri:e.uri,Artists:t,Length:e.duration_ms})}),this.OnDataListeners.forEach(e=>{e(o.TopTracks,n)})}else this.OnErrorListeners.forEach(e=>{e(s.JsonParseError)})}).catch(t=>{this.OnErrorListeners.forEach(e=>{e(s.JsonParseError,t)})}):this.OnErrorListeners.forEach(e=>{e(s.StatusError,{code:t.status,text:t.statusText})})}).catch(e=>{console.log(e)}))}GetRecommendations(r){var e=this.BuildAuthToken();if(void 0===e)this.OnErrorListeners.forEach(e=>{e(s.NoAuthToken)});else{let n=new URL(l.RECOMMENDATIONS_ADDRESS),t=0;if(r.SeedGenres){let e=r.SeedGenres;e=e.slice(0,5-t),t+=e.length;var i=e.join(",");n.searchParams.append("seed_genres",i)}if(r.SeedTrackIDs){let e=r.SeedTrackIDs;e=e.slice(0,5-t),t+=e.length;i=e.join(",");n.searchParams.append("seed_tracks",i)}if(r.SeedArtistIDs){let e=r.SeedArtistIDs;e=e.slice(0,5-t),t+=e.length;i=e.join(",");n.searchParams.append("seed_artists",i)}r.Count&&n.searchParams.append("limit",r.Count.toString()),r.QueryParameters&&r.QueryParameters.forEach(e=>{let t=e.parameter;t.startsWith("target_")||(t="target_"+t),n.searchParams.append(t,e.value.toString())}),fetch(n.href,{headers:{Authorization:e}}).then(t=>{t.ok?t.json().then(e=>{e=e.tracks;if(null!=e){let n=[];e.forEach(e=>{let t=[];e.artists.forEach(e=>{t.push({Name:e.name,Id:e.id,Uri:e.uri,Genres:e.genres})}),n.push({Name:e.name,Id:e.id,Uri:e.uri,Artists:t,Length:e.duration_ms})}),this.OnDataListeners.forEach(e=>{e(o.Recommendations,n)})}}).catch(t=>{this.OnErrorListeners.forEach(e=>{e(s.JsonParseError,t)})}):this.OnErrorListeners.forEach(e=>{e(s.StatusError,{code:t.status,text:t.statusText})})}).catch(e=>{console.log(e)})}}CreatePlaylist(i){let e,a=this.BuildAuthToken();var t,n;void 0===a?this.OnErrorListeners.forEach(e=>{e(s.NoAuthToken)}):(t={name:i.Name,description:i.Description,public:null!=(e=i.Public)&&e},t={headers:{Authorization:a,"Content-Type":"application/json"},body:JSON.stringify(t),method:"POST"},n=new URL(l.PLAYLIST_CREATION_ADDRESS.replace("{user_id}",i.UserId)),fetch(n.href,t).then(t=>{t.ok?t.json().then(n=>{let r=n.id;var e=new URL(l.PLAYLIST_UPDATE_ADDRESS.replace("{playlist_id}",r)),t=i.TrackUris.map(e=>e.startsWith("spotify:track:")?e:"spotify:track:"+e).join(","),t=(e.searchParams.append("uris",t),{headers:{Authorization:a},method:"POST"});fetch(e.href,t).then(t=>{t.ok?this.OnDataListeners.forEach(e=>{void 0!==i.Image&&this.SetPlaylistImage(r,i.Image.Url),e(o.PlaylistCreated,{ShareLink:n.external_urls.spotify})}):this.OnErrorListeners.forEach(e=>{e(s.StatusError,{code:t.status,text:t.statusText})})}).catch(e=>{console.log(e)})}).catch(t=>{this.OnErrorListeners.forEach(e=>{e(s.JsonParseError,t)})}):this.OnErrorListeners.forEach(e=>{e(s.StatusError,{code:t.status,text:t.statusText})})}).catch(e=>{console.log(e)}))}SetPlaylistImage(i,e){let a=new Image;a.onload=e=>{let t=this.imgToBase64(a);var n,r;void 0!==t&&(t=t.replace(/^data:image.+;base64,/,""),void 0!==(n=this.BuildAuthToken()))&&(n={headers:{Authorization:n,"Content-Type":"image/jpeg"},body:t,method:"PUT"},r=new URL(l.PLAYLIST_UPDATE_IMAGE_ADDRESS.replace("{playlist_id}",i)),fetch(r.href,n).then(e=>{}).catch(e=>{console.log(e)}))},a.src=e}arrayBufferToBase64(e){var t="";return[].slice.call(new Uint8Array(e)).forEach(e=>t+=String.fromCharCode(e)),window.btoa(t)}imgToBase64(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(null!==n)return t.width=e.width,t.height=e.height,e.crossOrigin="anonymous",n.drawImage(e,0,0),t.toDataURL()}}(n.SpotifyInterface=l).AUTHORIZATION_ADDRESS="https://accounts.spotify.com/authorize",l.USER_PROFILE_ADDRESS="https://api.spotify.com/v1/me",l.TOP_ARTISTS_ADDRESS="https://api.spotify.com/v1/me/top/artists",l.TOP_TRACKS_ADDRESS="https://api.spotify.com/v1/me/top/tracks",l.RECOMMENDATIONS_ADDRESS="https://api.spotify.com/v1/recommendations",l.PLAYLIST_CREATION_ADDRESS="https://api.spotify.com/v1/users/{user_id}/playlists",l.PLAYLIST_UPDATE_ADDRESS="https://api.spotify.com/v1/playlists/{playlist_id}/tracks",l.PLAYLIST_UPDATE_IMAGE_ADDRESS="https://api.spotify.com/v1/playlists/{playlist_id}/images"},{}],14:[function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,o,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{a(l.next(e))}catch(e){t(e)}}function i(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}a((l=l.apply(e,o||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let l=a(e("./data")),u=a(e("./helpers")),c=e("gsap"),h=s(e("./app")),d=s(e("./landing")),f=s(e("./rounds")),p=e("d3");n.default=class{constructor(e){this.ASSET_URL="./assets/",this.frameEl=u.elByID("frame-letters"),this.frameLetterFill=u.findAll(this.frameEl,".logo-letter-fill"),this.currentFrameColor=l.COLORS.beige,this.wavesTopEl=u.elByID("waves-top"),this.wavesBottomEl=u.elByID("waves-bottom"),this.currentWaveColor="purple",this.loopingWaveAnimantions=[],this.endFrameEl=u.elByID("end-frame"),this.navWrapperEl=u.elByID("nav-wrapper"),this.navEl=u.elByID("nav"),this.burgerEl=u.elByID("burger"),this.smallLogoEl=u.elByID("headerSmall"),this.smallLogoVisible=!1,this.popupPageEl=u.elByID("popupPage"),this.popupPageVisible=!1,this.currentPage="",this.elementsToHide=[],this.loaderEl=u.elByID("loader"),this.assetCount=0,this.assetsLoaded=0,this.navVisible=!1,this.frameVisible=!1,this.degTopEl=u.elByID("deg-top"),this.degBottomEl=u.elByID("deg-bottom"),this.soundDesktop=u.elByID("sound-controller-desktop"),this.soundMobile=u.elByID("sound-controller-mobile"),this.loopingAnimations=[],this.inPageLoopingAnimations=[],this.nope=!1,this.name="Your",this.isMobileSize=!1,this.Login=()=>{},this.app=e,"block"==u.getStyle(u.el("#shit-browser-alert"),"display")&&(this.nope=!0),document.addEventListener("DOMContentLoaded",this.init.bind(this),!1)}init(){this.nope||(window.addEventListener("resize",this.onResize.bind(this)),this.isMobileSize=1<this.burgerEl.getBoundingClientRect().width,this.burgerEl.addEventListener("click",this.mobileMenuClicked.bind(this)),u.findAll(this.navWrapperEl,"li").forEach(e=>{e.addEventListener("click",this.navClicked.bind(this))}),u.find(this.popupPageEl,".close-btn").addEventListener("click",this.closePage.bind(this)),u.find(this.endFrameEl,"#brew-again").addEventListener("click",e=>{location.reload()}),this.soundDesktop.addEventListener("click",this.toggleSound.bind(this)),this.soundMobile.addEventListener("click",this.toggleSound.bind(this)),this.app.authorized?this.startLevels():(this.LANDING=new d.default(this),this.LANDING.onLoginPressed=this.Login.bind(this),this.loaderInit()))}startLevels(){this.frameVisible=!0,this.frameEl.classList.toggle("visible"),u.elList(".hide-top").forEach(e=>{e.classList.toggle("visible")}),u.elList(".hide-bottom").forEach(e=>{e.classList.toggle("visible")}),this.transitionOut(),this.ROUNDS=new f.default(this),this.ROUNDS.showRound(1),this.onResize()}showLoader(){c.TweenMax.fromTo(this.loaderEl,.5,{display:"none",alpha:0},{display:"block",alpha:1}),c.TweenMax.to(u.find(this.loaderEl,".purple-loader"),0,{alpha:1})}hideLoader(){c.TweenMax.to(this.loaderEl,.5,{display:"none",alpha:0}),c.TweenMax.to(u.find(this.loaderEl,".purple-loader"),.3,{alpha:0})}loaderInit(){this.loadImages(l.preloadList),this.showLoader(),this.loaderEl.style.display="block"}loadImages(e){return o(this,void 0,void 0,function*(){this.assetCount=e.length+h.default.audio.audioCount,e.forEach(e=>{var t=new Image;t.onload=this.incrementLoader.bind(this),t.src=this.ASSET_URL+e})})}incrementLoader(){var e;this.app.authorized||(this.assetsLoaded++,this.assetsLoaded==this.assetCount&&(this.hideLoader(),null!=(e=this.LANDING)&&e.show(),this.onResize()))}setVisibleElements(e){e.forEach(e=>{this.elementsToHide.push(e)})}transitionOut(){c.TweenMax.to(this.elementsToHide,.5,{alpha:0,scale:.95,display:"none",onComplete:this.clearHiddenElements.bind(this)})}clearHiddenElements(){this.elementsToHide=[]}setBgColor(e){u.el("body").style.backgroundColor=e}onResize(){var e;this.nope||(e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh",e+"px"),this.checkMobileSize(),window.innerWidth<=768?this.frameVisible&&(this.frameOut(),this.frameVisible=!1):this.frameVisible||(this.frameIn(),this.frameVisible=!0))}checkMobileSize(){var e=1<this.burgerEl.getBoundingClientRect().width;e!=this.isMobileSize?this.isMobileSize?this.changeToDesktop():(this.isMobileSize=e,this.changeToMobile()):this.isMobileSize||(c.TweenMax.to(".hide-top",.5,{y:0}),c.TweenMax.to(".hide-bottom",.5,{y:0})),this.isMobileSize=e}changeToDesktop(){this.smallLogoVisible&&(c.TweenMax.to(this.smallLogoEl,.5,{opacity:0,y:-100}),this.smallLogoVisible=!1),this.navVisible=!1,this.navWrapperEl.removeAttribute("style"),c.TweenMax.to(this.navWrapperEl,.5,{y:0}),this.toggleFrameColors(this.currentFrameColor,!1)}changeToMobile(){this.navWrapperEl.removeAttribute("style"),u.findAll(this.navWrapperEl,"*").forEach(e=>{e.removeAttribute("style")}),this.ROUNDS&&(c.TweenMax.fromTo(this.smallLogoEl,.5,{opacity:0,y:-100},{opacity:1,y:0}),this.smallLogoVisible=!0),this.currentPage.length&&(this.burgerEl.classList.toggle("opened"),this.toggleFrameColors(l.COLORS.purple,!1))}frameIn(){c.TweenMax.fromTo(u.findAll(this.frameEl,"li.top"),.5,{display:"none",y:-100},{y:0,display:"block"}),c.TweenMax.fromTo(u.findAll(this.frameEl,"li.left.middle"),.5,{display:"none",x:-100},{x:0,display:"block"}),c.TweenMax.fromTo(u.findAll(this.frameEl,"li.right.middle"),.5,{display:"none",x:100},{x:0,display:"block"}),c.TweenMax.fromTo(u.findAll(this.frameEl,"li.bottom"),.5,{display:"none",y:100},{y:0,display:"block"}),this.isMobileSize||(c.TweenMax.to(".hide-top",.5,{y:0}),c.TweenMax.to(".hide-bottom",.5,{y:0}))}frameOut(){c.TweenMax.fromTo(u.findAll(this.frameEl,"li.top"),.5,{display:"block",y:-0},{y:-100,display:"none"}),c.TweenMax.fromTo(u.findAll(this.frameEl,"li.left.middle"),.5,{display:"block",x:-0},{x:-100,display:"none"}),c.TweenMax.fromTo(u.findAll(this.frameEl,"li.right.middle"),.5,{display:"block",x:0},{x:100,display:"none"}),c.TweenMax.fromTo(u.findAll(this.frameEl,"li.bottom"),.5,{display:"block",y:0},{y:100,display:"none"})}toggleFrameColors(t,e){this.frameLetterFill.forEach(e=>{e.style.fill=t}),this.isMobileSize?(u.findAll(this.navWrapperEl,"*").forEach(e=>{e.removeAttribute("style")}),this.setMobileNavColor(t)):(u.findAll(this.navWrapperEl,"*").forEach(e=>{e.style.color=t}),[this.degTopEl,this.degBottomEl].forEach(e=>{e.style.color=t}),u.find(this.soundDesktop,".speaker-fill").style.fill=t,u.find(this.soundDesktop,".mute-fill").style.fill=t),e&&(this.currentFrameColor=t)}mobileMenuClicked(){this.navVisible?(this.setMobileNavColor(this.currentFrameColor),this.fadeOut(this.navWrapperEl),this.navVisible=!1):this.popupPageVisible?this.closePage():(this.setMobileNavColor(l.COLORS.purple),this.fadeIn(this.navWrapperEl),this.showMobileNavElements(),this.navVisible=!0),this.burgerEl.classList.toggle("opened")}navClicked(e){e=e.srcElement.getAttribute("data");e&&null!=e&&0<e.length&&this.togglePage(e)}togglePage(e){var t,n=u.find(this.popupPageEl,"#"+e);this.popupPageVisible?this.currentPage!=e&&(u.find(this.popupPageEl,".wrapper").scrollTop=0,t=u.find(this.popupPageEl,"#"+this.currentPage),this.isMobileSize?(this.slideUpOut(t),this.slideUpIn(n)):(this.fadeOut(t),this.fadeIn(n,.3)),this.currentPage=e):(this.currentPage=e,this.isMobileSize?(this.hidemobileNavElements(),this.toggleNavWrapperColor(l.COLORS.beige),this.setMobileNavColor(l.COLORS.orange),this.fadeIn(this.popupPageEl,.3),this.slideUpIn(n)):(this.toggleFrameColors(l.COLORS.orange,!1),this.slideIn(this.popupPageEl),this.fadeIn(n,.3)),this.popupPageVisible=!0,this.navVisible=!1)}closePage(){this.isMobileSize?(this.slideUpOut(u.find(this.popupPageEl,"#"+this.currentPage)),this.fadeOut(this.popupPageEl),this.fadeOut(this.navWrapperEl),this.navVisible=!1,this.toggleNavWrapperColor(l.COLORS.orange,.5),this.setMobileNavColor(this.currentFrameColor)):(this.toggleFrameColors(this.currentFrameColor,!1),this.slideOut(this.popupPageEl),this.fadeOut(u.find(this.popupPageEl,"#"+this.currentPage))),this.popupPageVisible=!1,this.currentPage=""}slideIn(e){c.TweenMax.fromTo(e,.5,{display:"none",x:-window.innerWidth,opacity:0},{display:"block",x:0,opacity:1})}slideOut(e){c.TweenMax.to(e,.5,{display:"none",x:-window.innerWidth,opacity:0})}slideUpIn(e){c.TweenMax.fromTo(e,.5,{display:"none",y:50,opacity:0},{display:"block",y:0,opacity:1,delay:.2})}slideUpOut(e){c.TweenMax.fromTo(e,.5,{display:"block",y:0,opacity:1},{display:"none",y:-50,opacity:0})}fadeIn(e,t){t=t||0;c.TweenMax.fromTo(e,.3,{display:"none",opacity:0},{display:"block",opacity:1,delay:t})}fadeOut(e,t){c.TweenMax.to(e,.3,{display:"none",opacity:0})}showMobileNavElements(){c.TweenMax.fromTo(u.findAll(this.navEl,"li"),.5,{alpha:0,y:50},{alpha:1,y:0,delay:.2,stagger:{each:.1}})}hidemobileNavElements(){c.TweenMax.fromTo(u.findAll(this.navEl,"li"),.3,{alpha:1,y:0},{alpha:0,y:-50,stagger:{each:.05}})}toggleNavWrapperColor(e,t){t=t||0;c.TweenMax.to(this.navWrapperEl,.5,{backgroundColor:e,delay:t})}setMobileNavColor(t){u.findAll(this.burgerEl,"li").forEach(e=>{e.style.backgroundColor=t}),null==this.LANDING&&u.findAll(this.smallLogoEl,".logo-small-fill").forEach(e=>{e.style.fill=t})}showWaves(e){c.TweenMax.fromTo([this.wavesTopEl,this.wavesBottomEl],3,{display:"none",alpha:0},{display:"block",alpha:.95,ease:"linear",delay:e}),c.TweenMax.fromTo(this.wavesBottomEl,3,{y:200},{y:0,ease:"linear",delay:e}),c.TweenMax.fromTo(this.wavesTopEl,3,{y:-200},{y:0,ease:"linear",delay:e});var e=u.findAll(this.wavesTopEl,".wave."+this.currentWaveColor),t=u.findAll(this.wavesBottomEl,".wave."+this.currentWaveColor),n=(n=[]).concat(e,t);c.TweenMax.to(n,0,{x:0,y:0}),this.loopingWaveAnimantions.push(c.TweenMax.to([e[0],t[0]],7,{x:-1600,repeat:-1,ease:"linear"})),this.loopingWaveAnimantions.push(c.TweenMax.to([e[1],t[1]],7,{x:-1600,repeat:-1,delay:.5,ease:"linear"})),this.loopingWaveAnimantions.push(c.TweenMax.to([e[0],t[0]],7,{y:50,repeat:-1,delay:1,ease:p.easeBounce,yoyo:!0})),this.loopingWaveAnimantions.push(c.TweenMax.to([e[1],t[1]],7,{y:25,repeat:-1,ease:p.easeBounce,yoyo:!0}))}hideWaves(e){c.TweenMax.to([this.wavesTopEl,this.wavesBottomEl],1,{display:"none",alpha:0,ease:"linear",onComplete:()=>{this.loopingWaveAnimantions.forEach(e=>{e.kill()}),this.loopingWaveAnimantions=[]}}),c.TweenMax.to(this.wavesBottomEl,1,{y:500,ease:"linear"}),c.TweenMax.to(this.wavesTopEl,1,{y:-500,ease:"linear"})}toggleWaveColor(e){c.TweenMax.fromTo(u.findAll(this.wavesTopEl,"."+this.currentWaveColor),1,{alpha:1,display:"block"},{alpha:0,display:"none"}),c.TweenMax.fromTo(u.findAll(this.wavesBottomEl,"."+this.currentWaveColor),1,{alpha:1,display:"block"},{alpha:0,display:"none"}),c.TweenMax.fromTo(u.findAll(this.wavesTopEl,"."+e),1,{alpha:0,display:"none"},{alpha:1,display:"block"}),c.TweenMax.fromTo(u.findAll(this.wavesBottomEl,"."+e),1,{alpha:0,display:"none"},{alpha:1,display:"block"}),this.currentWaveColor=e}prepareEndFrame(){this.setBgColor(l.COLORS.purple),this.showLoader(),this.app.CreatePlaylist()}prepareNewEndFrame(){this.setBgColor(l.COLORS.purple),this.app.CreatePlaylist(),this.showEndFrame()}playlistCreated(e){var t=e.split("/"),t=t[t.length-1],e=(u.el("#listen-link").href=e,u.el("#embed"));e.src="https://open.spotify.com/embed/playlist/"+t,e.onload=()=>{this.showEndFrame()}}nameSet(e){this.name=e.split(" ")[0],u.elByID("playlist-title").innerHTML=this.name+"'s Playlist"}setEndFrameCopy(e){u.find(this.endFrameEl,"#playlist-desc").innerHTML=e+"<br /><br /><strong>This used to create a playlist on Spotify, but Spotify hates developers nowadays. Workaround coming soon.</strong>"}showEndFrame(){this.endFrameEl.style.display="block";let e=u.find(this.endFrameEl,".hop-wrapper img"),t=u.find(this.endFrameEl,"#brew-again");u.find(this.endFrameEl,"#listen");this.hideLoader(),this.toggleFrameColors(l.COLORS.beige,!0),this.toggleWaveColor("purple"),this.showWaves(0),c.TweenMax.fromTo(e,.5,{alpha:0,scale:.8},{alpha:1,scale:1,delay:1}),c.TweenMax.to(e,4,{y:20,repeat:-1,yoyo:!0,ease:"linear"}),c.TweenMax.fromTo(u.find(this.endFrameEl,"#playlist-title"),.5,{alpha:0,y:50},{alpha:1,y:0,delay:1.2}),c.TweenMax.fromTo(u.find(this.endFrameEl,"#playlist-desc"),.5,{alpha:0,y:50},{alpha:1,y:0,delay:1.4}),c.TweenMax.fromTo([t],.3,{alpha:0,y:50},{alpha:1,y:0,delay:2.2,stagger:.1,onComplete:()=>{t.className+=" active"}}),c.TweenMax.fromTo(u.find(this.endFrameEl,".subscribe-btn"),2,{alpha:0},{alpha:1,delay:3})}toggleSound(){h.default.audio.muted?(u.find(this.soundDesktop,".mute").style.display="none",u.find(this.soundMobile,".mute").style.display="none",h.default.audio.unmute(),h.default.audio.muted=!1):(u.find(this.soundDesktop,".mute").style.display="inline-block",u.find(this.soundMobile,".mute").style.display="inline-block",h.default.audio.mute(),h.default.audio.muted=!0)}}},{"./app":2,"./data":4,"./helpers":6,"./landing":7,"./rounds":11,d3:46,gsap:49}],15:[function(e,t,n){var r,i;r=this,i=function(e){function s(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function t(a){var n;return 1===a.length&&(n=a,a=function(e,t){return s(n(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;a(e[i],t)<0?n=1+i:r=i}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;0<a(e[i],t)?r=i:n=1+i}return n}}}var n=t(s),m=n.right,n=n.left;function c(e,t){return[e,t]}function u(e){return null===e?NaN:+e}function r(e,t){var n,r,i=e.length,a=0,o=-1,s=0,l=0;if(null==t)for(;++o<i;)isNaN(n=u(e[o]))||(l+=(r=n-s)*(n-(s+=r/++a)));else for(;++o<i;)isNaN(n=u(t(e[o],o,e)))||(l+=(r=n-s)*(n-(s+=r/++a)));if(1<a)return l/(a-1)}function i(e,t){e=r(e,t);return e&&Math.sqrt(e)}function a(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n<=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(n<r&&(r=n),i<n)&&(i=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n<=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(n<r&&(r=n),i<n)&&(i=n);return[r,i]}var o=Array.prototype,l=o.slice,h=o.map;function g(e){return function(){return e}}function v(e){return e}function y(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}var d=Math.sqrt(50),f=Math.sqrt(10),p=Math.sqrt(2);function _(e,t,n){t=(t-e)/Math.max(0,n),e=Math.floor(Math.log(t)/Math.LN10),n=t/Math.pow(10,e);return 0<=e?(d<=n?10:f<=n?5:p<=n?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(d<=n?10:f<=n?5:p<=n?2:1)}function x(e,t,n){var n=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),n=n/r;return d<=n?r*=10:f<=n?r*=5:p<=n&&(r*=2),t<e?-r:r}function b(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function w(e,t,n){var r,i;if(null==n&&(n=u),r=e.length)return(t=+t)<=0||r<2?+n(e[0],0,e):1<=t?+n(e[r-1],r-1,e):(r=(r-1)*t,(i=+n(e[t=Math.floor(r)],t,e))+(+n(e[t+1],t+1,e)-i)*(r-t))}function M(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n<=n)for(r=n;++a<i;)null!=(n=e[a])&&n<r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n<=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n<r&&(r=n);return r}function T(e){if(!(i=e.length))return[];for(var t=-1,n=M(e,S),r=new Array(n);++t<n;)for(var i,a=-1,o=r[t]=new Array(i);++a<i;)o[a]=e[a][t];return r}function S(e){return e.length}e.bisect=m,e.bisectRight=m,e.bisectLeft=n,e.ascending=s,e.bisector=t,e.cross=function(e,t,n){var r,i,a,o,s=e.length,l=t.length,u=new Array(s*l);for(null==n&&(n=c),r=a=0;r<s;++r)for(o=e[r],i=0;i<l;++i,++a)u[a]=n(o,t[i]);return u},e.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},e.deviation=i,e.extent=a,e.histogram=function(){var d=v,f=a,p=b;function t(e){for(var t,n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=d(e[i],i,e);for(var a=f(r),o=a[0],s=a[1],l=p(r,o,s),u=(Array.isArray(l)||(l=x(o,s,l),l=y(Math.ceil(o/l)*l,s,l)),l.length);l[0]<=o;)l.shift(),--u;for(;l[u-1]>s;)l.pop(),--u;var c,h=new Array(u+1);for(i=0;i<=u;++i)(c=h[i]=[]).x0=0<i?l[i-1]:o,c.x1=i<u?l[i]:s;for(i=0;i<n;++i)o<=(t=r[i])&&t<=s&&h[m(l,t,0,u)].push(e[i]);return h}return t.value=function(e){return arguments.length?(d="function"==typeof e?e:g(e),t):d},t.domain=function(e){return arguments.length?(f="function"==typeof e?e:g([e[0],e[1]]),t):f},t.thresholds=function(e){return arguments.length?(p="function"==typeof e?e:Array.isArray(e)?g(l.call(e)):g(e),t):p},t},e.thresholdFreedmanDiaconis=function(e,t,n){return e=h.call(e,u).sort(s),Math.ceil((n-t)/(2*(w(e,.75)-w(e,.25))*Math.pow(e.length,-1/3)))},e.thresholdScott=function(e,t,n){return Math.ceil((n-t)/(3.5*i(e)*Math.pow(e.length,-1/3)))},e.thresholdSturges=b,e.max=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n<=n)for(r=n;++a<i;)null!=(n=e[a])&&r<n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n<=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r<n&&(r=n);return r},e.mean=function(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=u(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=u(t(e[a],a,e)))?--i:o+=n;if(i)return o/i},e.median=function(e,t){var n,r=e.length,i=-1,a=[];if(null==t)for(;++i<r;)isNaN(n=u(e[i]))||a.push(n);else for(;++i<r;)isNaN(n=u(t(e[i],i,e)))||a.push(n);return w(a.sort(s),.5)},e.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--o]=r[t];return n},e.min=M,e.pairs=function(e,t){null==t&&(t=c);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return a},e.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},e.quantile=w,e.range=y,e.scan=function(e,t){if(n=e.length){var n,r,i=0,a=0,o=e[a];for(null==t&&(t=s);++i<n;)(t(r=e[i],o)<0||0!==t(o,o))&&(o=r,a=i);return 0===t(o,o)?a:void 0}},e.shuffle=function(e,t,n){for(var r,i,a=(null==n?e.length:n)-(t=null==t?0:+t);a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},e.sum=function(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a},e.ticks=function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&0<n)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=_(e,t,n))||!isFinite(o))return[];if(0<o)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;return r&&a.reverse(),a},e.tickIncrement=_,e.tickStep=x,e.transpose=T,e.variance=r,e.zip=function(){return T(arguments)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],16:[function(e,t,n){var r,i;r=this,i=function(e){var n=Array.prototype.slice;function T(e){return e}var S=1,E=2,A=3,L=4,R=1e-6;function r(e){return"translate("+(e+.5)+",0)"}function i(e){return"translate(0,"+(e+.5)+")"}function C(t){return function(e){return+t(e)}}function P(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}function O(){return!this.__axis}function t(f,p){var m=[],g=null,v=null,y=6,_=6,x=3,b=f===S||f===L?-1:1,w=f===L||f===E?"x":"y",M=f===S||f===A?r:i;function t(e){var t=null==g?p.ticks?p.ticks.apply(p,m):p.domain():g,n=null==v?p.tickFormat?p.tickFormat.apply(p,m):T:v,r=Math.max(y,0)+x,i=p.range(),a=+i[0]+.5,i=+i[i.length-1]+.5,o=(p.bandwidth?P:C)(p.copy()),s=e.selection?e.selection():e,l=s.selectAll(".domain").data([null]),u=(t=s.selectAll(".tick").data(t,p).order()).exit(),c=t.enter().append("g").attr("class","tick"),h=t.select("line"),d=t.select("text"),l=l.merge(l.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),t=t.merge(c),h=h.merge(c.append("line").attr("stroke","currentColor").attr(w+"2",b*y)),d=d.merge(c.append("text").attr("fill","currentColor").attr(w,b*r).attr("dy",f===S?"0em":f===A?"0.71em":"0.32em"));e!==s&&(l=l.transition(e),t=t.transition(e),h=h.transition(e),d=d.transition(e),u=u.transition(e).attr("opacity",R).attr("transform",function(e){return isFinite(e=o(e))?M(e):this.getAttribute("transform")}),c.attr("opacity",R).attr("transform",function(e){var t=this.parentNode.__axis;return M(t&&isFinite(t=t(e))?t:o(e))})),u.remove(),l.attr("d",f===L||f==E?_?"M"+b*_+","+a+"H0.5V"+i+"H"+b*_:"M0.5,"+a+"V"+i:_?"M"+a+","+b*_+"V0.5H"+i+"V"+b*_:"M"+a+",0.5H"+i),t.attr("opacity",1).attr("transform",function(e){return M(o(e))}),h.attr(w+"2",b*y),d.attr(w,b*r).text(n),s.filter(O).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",f===E?"start":f===L?"end":"middle"),s.each(function(){this.__axis=o})}return t.scale=function(e){return arguments.length?(p=e,t):p},t.ticks=function(){return m=n.call(arguments),t},t.tickArguments=function(e){return arguments.length?(m=null==e?[]:n.call(e),t):m.slice()},t.tickValues=function(e){return arguments.length?(g=null==e?null:n.call(e),t):g&&g.slice()},t.tickFormat=function(e){return arguments.length?(v=e,t):v},t.tickSize=function(e){return arguments.length?(y=_=+e,t):y},t.tickSizeInner=function(e){return arguments.length?(y=+e,t):y},t.tickSizeOuter=function(e){return arguments.length?(_=+e,t):_},t.tickPadding=function(e){return arguments.length?(x=+e,t):x},t}e.axisTop=function(e){return t(S,e)},e.axisRight=function(e){return t(E,e)},e.axisBottom=function(e){return t(A,e)},e.axisLeft=function(e){return t(L,e)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],17:[function(e,t,n){var r,i;r=this,i=function(e,h,j,d,V,W){function f(e){return function(){return e}}function p(e,t,n){this.target=e,this.type=t,this.selection=n}function q(){V.event.stopImmediatePropagation()}function X(){V.event.preventDefault(),V.event.stopImmediatePropagation()}var Y={name:"drag"},Z={name:"space"},Q={name:"handle"},J={name:"center"};function t(e){return[+e[0],+e[1]]}function m(e){return[t(e[0]),t(e[1])]}var K={name:"x",handles:["w","e"].map(g),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},$={name:"y",handles:["n","s"].map(g),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},n={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(g),input:function(e){return null==e?null:m(e)},output:function(e){return e}},ee={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},te={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ne={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},re={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ie={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function g(e){return{type:e}}function v(){return!V.event.ctrlKey&&!V.event.button}function y(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function _(){return navigator.maxTouchPoints||"ontouchstart"in this}function ae(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function r(B){var F,t=y,U=v,n=_,z=!0,r=h.dispatch("start","brush","end"),i=6;function a(e){var t=e.property("__brush",c).selectAll(".overlay").data([g("overlay")]),t=(t.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ee.overlay).merge(t).each(function(){var e=ae(this).extent;V.select(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([g("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ee.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges"),e.selectAll(".handle").data(B.handles,function(e){return e.type}));t.exit().remove(),t.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return ee[e.type]}),e.each(H).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(n).on("touchstart.brush",s).on("touchmove.brush",l).on("touchend.brush touchcancel.brush",u).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function H(){var e=V.select(this),t=ae(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-i/2:t[0][0]-i/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-i/2:t[0][1]-i/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+i:i}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+i:i})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function G(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new o(e,t,n):r}function o(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function s(){var t,n,r,i,a,o,e,s,l,u,c,h,d,f,p,m,g,v,y,_,x,b,w,M,T,S,E,A,L,R,C,P,O,D;function I(){var e=E(t);!M||T||S||(Math.abs(e[0]-L[0])>Math.abs(e[1]-L[1])?S=!0:T=!0),L=e,w=!0,X(),N()}function N(){var e;switch(x=L[0]-A[0],b=L[1]-A[1],r){case Z:case Y:i&&(x=Math.max(l-u,Math.min(p-m,x)),c=u+x,g=m+x),a&&(b=Math.max(h-d,Math.min(v-y,b)),f=d+b,_=y+b);break;case Q:i<0?(x=Math.max(l-u,Math.min(p-u,x)),c=u+x,g=m):0<i&&(x=Math.max(l-m,Math.min(p-m,x)),c=u,g=m+x),a<0?(b=Math.max(h-d,Math.min(v-d,b)),f=d+b,_=y):0<a&&(b=Math.max(h-y,Math.min(v-y,b)),f=d,_=y+b);break;case J:i&&(c=Math.max(l,Math.min(p,u-x*i)),g=Math.max(l,Math.min(p,m+x*i))),a&&(f=Math.max(h,Math.min(v,d-b*a)),_=Math.max(h,Math.min(v,y+b*a)))}g<c&&(i*=-1,e=u,u=m,m=e,e=c,c=g,g=e,n in te)&&O.attr("cursor",ee[n=te[n]]),_<f&&(a*=-1,e=d,d=y,y=e,e=f,f=_,_=e,n in ne)&&O.attr("cursor",ee[n=ne[n]]),o.selection&&(s=o.selection),T&&(c=s[0][0],g=s[1][0]),S&&(f=s[0][1],_=s[1][1]),s[0][0]===c&&s[0][1]===f&&s[1][0]===g&&s[1][1]===_||(o.selection=[[c,f],[g,_]],H.call(t),R.brush())}function k(){if(q(),V.event.touches){if(V.event.touches.length)return;F&&clearTimeout(F),F=setTimeout(function(){F=null},500)}else j.dragEnable(V.event.view,w),D.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var e;P.attr("pointer-events","all"),O.attr("cursor",ee.overlay),o.selection&&(s=o.selection),(e=s)[0][0]!==e[1][0]&&e[0][1]!==e[1][1]||(o.selection=null,H.call(t)),R.end()}F&&!V.event.touches||U.apply(this,arguments)&&(t=this,n=V.event.target.__data__.type,r="selection"===(z&&V.event.metaKey?n="overlay":n)?Y:z&&V.event.altKey?J:Q,i=B===$?null:re[n],a=B===K?null:ie[n],e=(o=ae(t)).extent,s=o.selection,l=e[0][0],h=e[0][1],p=e[1][0],v=e[1][1],b=x=0,M=i&&a&&z&&V.event.shiftKey,E=V.event.touches?(C=V.event.changedTouches[0].identifier,function(e){return V.touch(e,V.event.touches,C)}):V.mouse,A=E(t),L=A,R=G(t,arguments,!0).beforestart(),"overlay"===n?(s&&(w=!0),o.selection=s=[[u=B===$?l:A[0],d=B===K?h:A[1]],[m=B===$?p:u,y=B===K?v:d]]):(u=s[0][0],d=s[0][1],m=s[1][0],y=s[1][1]),c=u,f=d,g=m,_=y,P=V.select(t).attr("pointer-events","none"),O=P.selectAll(".overlay").attr("cursor",ee[n]),V.event.touches?(R.moved=I,R.ended=k):(D=V.select(V.event.view).on("mousemove.brush",I,!0).on("mouseup.brush",k,!0),z&&D.on("keydown.brush",function(){switch(V.event.keyCode){case 16:M=i&&a;break;case 18:r===Q&&(i&&(m=g-x*i,u=c+x*i),a&&(y=_-b*a,d=f+b*a),r=J,N());break;case 32:r!==Q&&r!==J||(i<0?m=g-x:0<i&&(u=c-x),a<0?y=_-b:0<a&&(d=f-b),r=Z,O.attr("cursor",ee.selection),N());break;default:return}X()},!0).on("keyup.brush",function(){switch(V.event.keyCode){case 16:M&&(T=S=M=!1,N());break;case 18:r===J&&(i<0?m=g:0<i&&(u=c),a<0?y=_:0<a&&(d=f),r=Q,N());break;case 32:r===Z&&(r=V.event.altKey?(i&&(m=g-x*i,u=c+x*i),a&&(y=_-b*a,d=f+b*a),J):(i<0?m=g:0<i&&(u=c),a<0?y=_:0<a&&(d=f),Q),O.attr("cursor",ee[n]),N());break;default:return}X()},!0),j.dragDisable(V.event.view)),q(),W.interrupt(t),H.call(t),R.start())}function l(){G(this,arguments).moved()}function u(){G(this,arguments).ended()}function c(){var e=this.__brush||{selection:null};return e.extent=m(t.apply(this,arguments)),e.dim=B,e}return a.move=function(e,s){e.selection?e.on("start.brush",function(){G(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){G(this,arguments).end()}).tween("brush",function(){var t=this,n=t.__brush,r=G(t,arguments),e=n.selection,i=B.input("function"==typeof s?s.apply(this,arguments):s,n.extent),a=d.interpolate(e,i);function o(e){n.selection=1===e&&null===i?null:a(e),H.call(t),r.brush()}return null!==e&&null!==i?o:o(1)}):e.each(function(){var e=this,t=arguments,n=e.__brush,r=B.input("function"==typeof s?s.apply(e,t):s,n.extent),t=G(e,t).beforestart();W.interrupt(e),n.selection=null===r?null:r,H.call(e),t.start().brush().end()})},a.clear=function(e){a.move(e,null)},o.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){V.customEvent(new p(a,e,B.output(this.state.selection)),r.apply,r,[e,this.that,this.args])}},a.extent=function(e){return arguments.length?(t="function"==typeof e?e:f(m(e)),a):t},a.filter=function(e){return arguments.length?(U="function"==typeof e?e:f(!!e),a):U},a.touchable=function(e){return arguments.length?(n="function"==typeof e?e:f(!!e),a):n},a.handleSize=function(e){return arguments.length?(i=+e,a):i},a.keyModifiers=function(e){return arguments.length?(z=!!e,a):z},a.on=function(){var e=r.on.apply(r,arguments);return e===r?a:e},a}e.brush=function(){return r(n)},e.brushSelection=function(e){return(e=e.__brush)?e.dim.output(e.selection):null},e.brushX=function(){return r(K)},e.brushY=function(){return r($)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dispatch"),e("d3-drag"),e("d3-interpolate"),e("d3-selection"),e("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-dispatch":22,"d3-drag":23,"d3-interpolate":31,"d3-selection":38,"d3-transition":43}],18:[function(e,t,n){var r,i;r=this,i=function(e,S,m){var g=Math.cos,v=Math.sin,t=Math.PI,y=t/2,E=2*t,A=Math.max;var _=Array.prototype.slice;function n(e){return function(){return e}}function r(e){return e.source}function i(e){return e.target}function a(e){return e.radius}function o(e){return e.startAngle}function s(e){return e.endAngle}e.chord=function(){var b=0,w=null,M=null,T=null;function t(r){for(var e,t,n,i,a=r.length,o=[],s=S.range(a),l=[],u=[],c=u.groups=new Array(a),h=new Array(a*a),d=0,f=-1;++f<a;){for(e=0,i=-1;++i<a;)e+=r[f][i];o.push(e),l.push(S.range(a)),d+=e}for(w&&s.sort(function(e,t){return w(o[e],o[t])}),M&&l.forEach(function(e,n){e.sort(function(e,t){return M(r[n][e],r[n][t])})}),n=(d=A(0,E-b*a)/d)?b:E/a,e=0,f=-1;++f<a;){for(t=e,i=-1;++i<a;){var p=s[f],m=l[p][i],g=r[p][m],v=e,y=e+=g*d;h[m*a+p]={index:p,subindex:m,startAngle:v,endAngle:y,value:g}}c[p]={index:p,startAngle:t,endAngle:e,value:o[p]},e+=n}for(f=-1;++f<a;)for(i=f-1;++i<a;){var _=h[i*a+f],x=h[f*a+i];(_.value||x.value)&&u.push(_.value<x.value?{source:x,target:_}:{source:_,target:x})}return T?u.sort(T):u}return t.padAngle=function(e){return arguments.length?(b=A(0,e),t):b},t.sortGroups=function(e){return arguments.length?(w=e,t):w},t.sortSubgroups=function(e){return arguments.length?(M=e,t):M},t.sortChords=function(e){return arguments.length?(null==e?T=null:(n=e,(T=function(e,t){return n(e.source.value+e.target.value,t.source.value+t.target.value)})._=e),t):T&&T._;var n},t},e.ribbon=function(){var u=r,c=i,h=a,d=o,f=s,p=null;function t(){var e,t=_.call(arguments),n=u.apply(this,t),r=c.apply(this,t),n=+h.apply(this,(t[0]=n,t)),i=d.apply(this,t)-y,a=f.apply(this,t)-y,o=n*g(i),s=n*v(i),r=+h.apply(this,(t[0]=r,t)),l=d.apply(this,t)-y,t=f.apply(this,t)-y;if((p=p||(e=m.path())).moveTo(o,s),p.arc(0,0,n,i,a),i==l&&a==t||(p.quadraticCurveTo(0,0,r*g(l),r*v(l)),p.arc(0,0,r,l,t)),p.quadraticCurveTo(0,0,o,s),p.closePath(),e)return p=null,e+""||null}return t.radius=function(e){return arguments.length?(h="function"==typeof e?e:n(+e),t):h},t.startAngle=function(e){return arguments.length?(d="function"==typeof e?e:n(+e),t):d},t.endAngle=function(e){return arguments.length?(f="function"==typeof e?e:n(+e),t):f},t.source=function(e){return arguments.length?(u=e,t):u},t.target=function(e){return arguments.length?(c=e,t):c},t.context=function(e){return arguments.length?(p=null==e?null:e,t):p},t},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-array"),e("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-path"],i):i(r.d3=r.d3||{},r.d3,r.d3)},{"d3-array":15,"d3-path":32}],19:[function(e,t,n){var r,i;r=this,i=function(e){var n="$";function s(){}function g(e,t){var n=new s;if(e instanceof s)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function r(){return{}}function i(e,t,n){e[t]=n}function a(){return g()}function l(e,t,n){e.set(t,n)}function o(){}s.prototype=g.prototype={constructor:s,has:function(e){return n+e in this},get:function(e){return this[n+e]},set:function(e,t){return this[n+e]=t,this},remove:function(e){e=n+e;return e in this&&delete this[e]},clear:function(){for(var e in this)e[0]===n&&delete this[e]},keys:function(){var e,t=[];for(e in this)e[0]===n&&t.push(e.slice(1));return t},values:function(){var e,t=[];for(e in this)e[0]===n&&t.push(this[e]);return t},entries:function(){var e,t=[];for(e in this)e[0]===n&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var e,t=0;for(e in this)e[0]===n&&++t;return t},empty:function(){for(var e in this)if(e[0]===n)return!1;return!0},each:function(e){for(var t in this)t[0]===n&&e(this[t],t.slice(1),this)}};var t=g.prototype;function u(e,t){var n=new o;if(e instanceof o)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}o.prototype=u.prototype={constructor:o,has:t.has,add:function(e){return this[n+(e+="")]=e,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each},e.nest=function(){var d,f,t,p=[],o=[];function m(e,n,r,i){if(n>=p.length)return null!=d&&e.sort(d),null!=f?f(e):e;for(var t,a,o,s=-1,l=e.length,u=p[n++],c=g(),h=r();++s<l;)(o=c.get(t=u(a=e[s])+""))?o.push(a):c.set(t,[a]);return c.each(function(e,t){i(h,t,m(e,n,r,i))}),h}return t={object:function(e){return m(e,0,r,i)},map:function(e){return m(e,0,a,l)},entries:function(e){return function n(e,r){var i,a;return++r>p.length?e:(a=o[r-1],null!=f&&r>=p.length?i=e.entries():(i=[],e.each(function(e,t){i.push({key:t,values:n(e,r)})})),null!=a?i.sort(function(e,t){return a(e.key,t.key)}):i)}(m(e,0,a,l),0)},key:function(e){return p.push(e),t},sortKeys:function(e){return o[p.length-1]=e,t},sortValues:function(e){return d=e,t},rollup:function(e){return f=e,t}}},e.set=u,e.map=g,e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},e.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},e.entries=function(e){var t,n=[];for(t in e)n.push({key:t,value:e[t]});return n},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],20:[function(e,t,n){var r,i;r=this,i=function(e){function t(e,t,n){(e.prototype=t.prototype=n).constructor=e}function n(e,t){var n,r=Object.create(e.prototype);for(n in t)r[n]=t[n];return r}function u(){}var r=1/.7,i="\\s*([+-]?\\d+)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",k=/^#([0-9a-f]{3,8})$/,B=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),F=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),U=new RegExp("^rgba\\("+[i,i,i,a]+"\\)$"),z=new RegExp("^rgba\\("+[o,o,o,a]+"\\)$"),H=new RegExp("^hsl\\("+[a,o,o]+"\\)$"),G=new RegExp("^hsla\\("+[a,o,o,a]+"\\)$"),s={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function l(){return this.rgb().formatHex()}function c(){return this.rgb().formatRgb()}function h(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=k.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?d(t):3===n?new g(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?f(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?f(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=B.exec(e))?new g(t[1],t[2],t[3],1):(t=F.exec(e))?new g(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=U.exec(e))?f(t[1],t[2],t[3],t[4]):(t=z.exec(e))?f(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=H.exec(e))?x(t[1],t[2]/100,t[3]/100,1):(t=G.exec(e))?x(t[1],t[2]/100,t[3]/100,t[4]):s.hasOwnProperty(e)?d(s[e]):"transparent"===e?new g(NaN,NaN,NaN,0):null}function d(e){return new g(e>>16&255,e>>8&255,255&e,1)}function f(e,t,n,r){return new g(e=r<=0?t=n=NaN:e,t,n,r)}function p(e){return(e=e instanceof u?e:h(e))?new g((e=e.rgb()).r,e.g,e.b,e.opacity):new g}function m(e,t,n,r){return 1===arguments.length?p(e):new g(e,t,n,null==r?1:r)}function g(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function v(){return"#"+_(this.r)+_(this.g)+_(this.b)}function y(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function _(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function x(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new w(e,t,n,r)}function b(e){var t,n,r,i,a,o,s,l;return e instanceof w?new w(e.h,e.s,e.l,e.opacity):(e=e instanceof u?e:h(e))?e instanceof w?e:(t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=NaN,l=((a=Math.max(t,n,r))+i)/2,(s=a-i)?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=0<l&&l<1?0:o,new w(o,s,l,e.opacity)):new w}function j(e,t,n,r){return 1===arguments.length?b(e):new w(e,t,n,null==r?1:r)}function w(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function M(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t(u,h,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:function(){return b(this).formatHsl()},formatRgb:c,toString:c}),t(g,m,n(u,{brighter:function(e){return e=null==e?r:Math.pow(r,e),new g(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new g(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:v,formatHex:v,formatRgb:y,toString:y})),t(w,j,n(u,{brighter:function(e){return e=null==e?r:Math.pow(r,e),new w(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new w(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,t=n+(n<.5?n:1-n)*t,n=2*n-t;return new g(M(240<=e?e-240:120+e,n,t),M(e,n,t),M(e<120?240+e:e-120,n,t),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var V=Math.PI/180,W=180/Math.PI,q=.96422,X=1,Y=.82521,Z=4/29,T=6/29,Q=3*T*T,J=T*T*T;function K(e){var t,n,r,i,a,o;return e instanceof S?new S(e.l,e.a,e.b,e.opacity):e instanceof C?ne(e):(i=E((.2225045*(t=R((e=e instanceof g?e:p(e)).r))+.7168786*(n=R(e.g))+.0606169*(r=R(e.b)))/X),t===n&&n===r?a=o=i:(a=E((.4360747*t+.3850649*n+.1430804*r)/q),o=E((.0139322*t+.0971045*n+.7141733*r)/Y)),new S(116*i-16,500*(a-i),200*(i-o),e.opacity))}function $(e,t,n,r){return 1===arguments.length?K(e):new S(e,t,n,null==r?1:r)}function S(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function E(e){return J<e?Math.pow(e,1/3):e/Q+Z}function A(e){return T<e?e*e*e:Q*(e-Z)}function L(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function R(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ee(e){var t;return e instanceof C?new C(e.h,e.c,e.l,e.opacity):0===(e=e instanceof S?e:K(e)).a&&0===e.b?new C(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity):new C((t=Math.atan2(e.b,e.a)*W)<0?360+t:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function te(e,t,n,r){return 1===arguments.length?ee(e):new C(e,t,n,null==r?1:r)}function C(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ne(e){var t;return isNaN(e.h)?new S(e.l,0,0,e.opacity):(t=e.h*V,new S(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity))}t(S,$,n(u,{brighter:function(e){return new S(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new S(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new g(L(3.1338561*(t=q*A(t))-1.6168667*(e=X*A(e))-.4906146*(n=Y*A(n))),L(-.9787684*t+1.9161415*e+.033454*n),L(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),t(C,te,n(u,{brighter:function(e){return new C(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new C(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return ne(this).rgb()}}));var P=1.78277,O=-.29227,D=-.90649,N=1.97294,re=N*D,ie=N*P,ae=P*O- -.14861*D;function oe(e,t,n,r){return 1===arguments.length?(i=e)instanceof I?new I(i.h,i.s,i.l,i.opacity):(a=(i=i instanceof g?i:p(i)).r/255,o=i.g/255,l=i.b/255,l=(N*(o-(a=(ae*l+re*a-ie*o)/(ae+re-ie)))-O*(o=l-a))/D,new I((l=(s=Math.sqrt(l*l+o*o)/(N*a*(1-a)))?Math.atan2(l,o)*W-120:NaN)<0?l+360:l,s,a,i.opacity)):new I(e,t,n,null==r?1:r);var i,a,o,s,l}function I(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}t(I,oe,n(u,{brighter:function(e){return e=null==e?r:Math.pow(r,e),new I(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new I(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*V,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),e=Math.sin(e);return new g(255*(t+n*(-.14861*r+P*e)),255*(t+n*(O*r+D*e)),255*(t+N*r*n),this.opacity)}})),e.color=h,e.cubehelix=oe,e.gray=function(e,t){return new S(e,0,0,null==t?1:t)},e.hcl=te,e.hsl=j,e.lab=$,e.lch=function(e,t,n,r){return 1===arguments.length?ee(e):new C(n,t,e,null==r?1:r)},e.rgb=m,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],21:[function(e,t,n){var r,i;r=this,i=function(e,x){var b=Array.prototype.slice;function o(e,t){return e-t}function w(e){return function(){return e}}function M(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=((e,t)=>{for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,s=o-1;a<o;s=a++){var l=e[a],u=l[0],c=l[1],h=e[s],d=h[0],f=h[1];if(((e,t,n)=>((e,t,n)=>(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1]))(e,t,n)&&((e,t,n)=>e<=t&&t<=n||n<=t&&t<=e)(e[e=+(e[0]===t[0])],n[e],t[e]))(l,h,t))return 0;r<c!=r<f&&n<(d-u)*(r-c)/(f-c)+u&&(i=-i)}return i})(e,t[r]))return n;return 0}function r(){}var T=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function y(){var g=1,v=1,i=x.thresholdSturges,y=t;function n(t){var e,n,r=i(t);return(r=Array.isArray(r)?r.slice().sort(o):(e=(n=x.extent(t))[0],r=x.tickStep(e,n=n[1],r),x.range(Math.floor(e/r)*r,Math.floor(n/r)*r,r))).map(function(e){return a(t,e)})}function a(t,n){var o,s,e,r,i,a,l=[],u=[],c=t,h=n,d=function(e){y(e,t,n),0<(e=>{for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r})(e)?l.push([e]):u.push(e)},f=new Array,p=new Array;for(o=s=-1,r=c[0]>=h,T[r<<1].forEach(m);++o<g-1;)e=r,r=c[o+1]>=h,T[e|r<<1].forEach(m);for(T[r<<0].forEach(m);++s<v-1;){for(o=-1,r=c[s*g+g]>=h,T[r<<1|(i=h<=c[s*g])<<2].forEach(m);++o<g-1;)e=r,r=c[s*g+g+o+1]>=h,a=i,T[e|r<<1|(i=h<=c[s*g+o+1])<<2|a<<3].forEach(m);T[r|i<<3].forEach(m)}for(o=-1,i=c[s*g]>=h,T[i<<2].forEach(m);++o<g-1;)a=i,i=c[s*g+o+1]>=h,T[i<<2|a<<3].forEach(m);function m(e){var t,n,r=[e[0][0]+o,e[0][1]+s],e=[e[1][0]+o,e[1][1]+s],i=_(r),a=_(e);(t=p[i])?(n=f[a])?(delete p[t.end],delete f[n.start],t===n?(t.ring.push(e),d(t.ring)):f[t.start]=p[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete p[t.end],t.ring.push(e),p[t.end=a]=t):(t=f[a])?(n=p[i])?(delete f[t.start],delete p[n.end],t===n?(t.ring.push(e),d(t.ring)):f[n.start]=p[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete f[t.start],t.ring.unshift(r),f[t.start=i]=t):f[i]=p[a]={start:i,end:a,ring:[r,e]}}return T[i<<3].forEach(m),u.forEach(function(e){for(var t,n=0,r=l.length;n<r;++n)if(-1!==M((t=l[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:n,coordinates:l}}function _(e){return 2*e[0]+e[1]*(g+1)*4}function t(e,s,l){e.forEach(function(e){var t,n=e[0],r=e[1],i=0|n,a=0|r,o=s[a*g+i];0<n&&n<g&&i===n&&(t=s[a*g+i-1],e[0]=n+(l-t)/(o-t)-.5),0<r&&r<v&&a===r&&(t=s[(a-1)*g+i],e[1]=r+(l-t)/(o-t)-.5)})}return n.contour=a,n.size=function(e){if(!arguments.length)return[g,v];var t=Math.ceil(e[0]),e=Math.ceil(e[1]);if(0<t&&0<e)return g=t,v=e,n;throw new Error("invalid size")},n.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:Array.isArray(e)?w(b.call(e)):w(e),n):i},n.smooth=function(e){return arguments.length?(y=e?t:r,n):y===t},n}function _(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=e.data[s+o*r]),n<=s&&(a<=s&&(l-=e.data[s-a+o*r]),t.data[s-n+o*r]=l/Math.min(s+1,r-1+a-s,a))}function S(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=e.data[o+s*r]),n<=s&&(a<=s&&(l-=e.data[o+(s-a)*r]),t.data[o+(s-n)*r]=l/Math.min(s+1,i-1+a-s,a))}function E(e){return e[0]}function A(e){return e[1]}function L(){return 1}e.contours=y,e.contourDensity=function(){var o=E,s=A,l=L,n=960,r=500,i=20,u=2,c=3*i,h=n+2*c>>u,d=r+2*c>>u,f=w(20);function t(e){var a=new Float32Array(h*d),t=new Float32Array(h*d),e=(e.forEach(function(e,t,n){var r=+o(e,t,n)+c>>u,i=+s(e,t,n)+c>>u,e=+l(e,t,n);0<=r&&r<h&&0<=i&&i<d&&(a[r+i*h]+=e)}),_({width:h,height:d,data:a},{width:h,height:d,data:t},i>>u),S({width:h,height:d,data:t},{width:h,height:d,data:a},i>>u),_({width:h,height:d,data:a},{width:h,height:d,data:t},i>>u),S({width:h,height:d,data:t},{width:h,height:d,data:a},i>>u),_({width:h,height:d,data:a},{width:h,height:d,data:t},i>>u),S({width:h,height:d,data:t},{width:h,height:d,data:a},i>>u),f(a));return Array.isArray(e)||(t=x.max(a),e=x.tickStep(0,t,e),(e=x.range(0,Math.floor(t/e)*e,e)).shift()),y().thresholds(e).size([h,d])(a).map(p)}function p(e){return e.value*=Math.pow(2,-2*u),e.coordinates.forEach(a),e}function a(e){e.forEach(m)}function m(e){e.forEach(g)}function g(e){e[0]=e[0]*Math.pow(2,u)-c,e[1]=e[1]*Math.pow(2,u)-c}function v(){return h=n+2*(c=3*i)>>u,d=r+2*c>>u,t}return t.x=function(e){return arguments.length?(o="function"==typeof e?e:w(+e),t):o},t.y=function(e){return arguments.length?(s="function"==typeof e?e:w(+e),t):s},t.weight=function(e){return arguments.length?(l="function"==typeof e?e:w(+e),t):l},t.size=function(e){if(!arguments.length)return[n,r];var t=Math.ceil(e[0]),e=Math.ceil(e[1]);if(0<=t)return n=t,r=e,v();throw new Error("invalid size")},t.cellSize=function(e){if(!arguments.length)return 1<<u;if(1<=(e=+e))return u=Math.floor(Math.log(e)/Math.LN2),v();throw new Error("invalid cell size")},t.thresholds=function(e){return arguments.length?(f="function"==typeof e?e:Array.isArray(e)?w(b.call(e)):w(e),t):f},t.bandwidth=function(e){if(!arguments.length)return Math.sqrt(i*(i+1));if(0<=(e=+e))return i=Math.round((Math.sqrt(4*e*e+1)-1)/2),v();throw new Error("invalid bandwidth")},t},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)},{"d3-array":15}],22:[function(e,t,n){var r,i;r=this,i=function(e){var a={value:function(){}};function t(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new i(r)}function i(e){this._=e}function l(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=a,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}i.prototype=t.prototype={constructor:i,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=a[o]).type)i[n]=l(i[n],e.name,t);else if(null==t)for(n in i)i[n]=l(i[n],e.name,null);return this}for(;++o<s;)if(n=(n=(e=a[o]).type)&&((e,t)=>{for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value})(i[n],e.name))return n},copy:function(){var e,t={},n=this._;for(e in n)t[e]=n[e].slice();return new i(t)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}},e.dispatch=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],23:[function(e,t,n){var r,i;r=this,i=function(e,b,w){function M(){w.event.stopImmediatePropagation()}function T(){w.event.preventDefault(),w.event.stopImmediatePropagation()}function S(e){var t=e.document.documentElement,e=w.select(e).on("dragstart.drag",T,!0);"onselectstart"in t?e.on("selectstart.drag",T,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function E(e,t){var n=e.document.documentElement,r=w.select(e).on("dragstart.drag",null);t&&(r.on("click.drag",T,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function A(e){return function(){return e}}function L(e,t,n,r,i,a,o,s,l,u){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=u}function R(){return!w.event.ctrlKey&&!w.event.button}function C(){return this.parentNode}function P(e){return null==e?{x:w.event.x,y:w.event.y}:e}function O(){return navigator.maxTouchPoints||"ontouchstart"in this}L.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},e.drag=function(){var n,r,i,a,o=R,s=C,t=P,l=O,p={},m=b.dispatch("start","drag","end"),g=0,u=0;function v(e){e.on("mousedown.drag",c).filter(l).on("touchstart.drag",f).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e;!a&&o.apply(this,arguments)&&(e=x("mouse",s.apply(this,arguments),w.mouse,this,arguments))&&(w.select(w.event.view).on("mousemove.drag",h,!0).on("mouseup.drag",d,!0),S(w.event.view),M(),i=!1,n=w.event.clientX,r=w.event.clientY,e("start"))}function h(){var e,t;T(),i||(e=w.event.clientX-n,t=w.event.clientY-r,i=u<e*e+t*t),p.mouse("drag")}function d(){w.select(w.event.view).on("mousemove.drag mouseup.drag",null),E(w.event.view,i),T(),p.mouse("end")}function f(){if(o.apply(this,arguments))for(var e,t=w.event.changedTouches,n=s.apply(this,arguments),r=t.length,i=0;i<r;++i)(e=x(t[i].identifier,n,w.touch,this,arguments))&&(M(),e("start"))}function y(){for(var e,t=w.event.changedTouches,n=t.length,r=0;r<n;++r)(e=p[t[r].identifier])&&(T(),e("drag"))}function _(){var e,t,n=w.event.changedTouches,r=n.length;for(a&&clearTimeout(a),a=setTimeout(function(){a=null},500),e=0;e<r;++e)(t=p[n[e].identifier])&&(M(),t("end"))}function x(i,a,o,s,l){var u,c,h,d=o(a,i),f=m.copy();if(w.customEvent(new L(v,"beforestart",u,i,g,d[0],d[1],0,0,f),function(){return null!=(w.event.subject=u=t.apply(s,l))&&(c=u.x-d[0]||0,h=u.y-d[1]||0,!0)}))return function e(t){var n,r=d;switch(t){case"start":p[i]=e,n=g++;break;case"end":delete p[i],--g;case"drag":d=o(a,i),n=g}w.customEvent(new L(v,t,u,i,n,d[0]+c,d[1]+h,d[0]-r[0],d[1]-r[1],f),f.apply,f,[t,s,l])}}return v.filter=function(e){return arguments.length?(o="function"==typeof e?e:A(!!e),v):o},v.container=function(e){return arguments.length?(s="function"==typeof e?e:A(e),v):s},v.subject=function(e){return arguments.length?(t="function"==typeof e?e:A(e),v):t},v.touchable=function(e){return arguments.length?(l="function"==typeof e?e:A(!!e),v):l},v.on=function(){var e=m.on.apply(m,arguments);return e===m?v:e},v.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,v):Math.sqrt(u)},v},e.dragDisable=S,e.dragEnable=E,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dispatch"),e("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3)},{"d3-dispatch":22,"d3-selection":38}],24:[function(e,t,n){var r,i;r=this,i=function(e){var d={},f={};function l(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function s(e){var n=Object.create(null),r=[];return e.forEach(function(e){for(var t in e)t in n||r.push(n[t]=t)}),r}function o(e,t){var e=e+"",n=e.length;return n<t?new Array(t-n+1).join(0)+e:e}function u(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+o(-t,6):9999<t?"+"+o(t,6):o(t,4))+"-"+o(e.getUTCMonth()+1,2)+"-"+o(e.getUTCDate(),2)+(a?"T"+o(n,2)+":"+o(r,2)+":"+o(i,2)+"."+o(a,3)+"Z":i?"T"+o(n,2)+":"+o(r,2)+":"+o(i,2)+"Z":r||n?"T"+o(n,2)+":"+o(r,2)+"Z":"")}function t(r){var t=new RegExp('["'+r+"\n\r]"),h=r.charCodeAt(0);function n(r,e){var t,n=[],i=r.length,a=0,o=0,s=i<=0,l=!1;function u(){if(s)return f;if(l)return l=!1,d;var e,t,n=a;if(34===r.charCodeAt(n)){for(;a++<i&&34!==r.charCodeAt(a)||34===r.charCodeAt(++a););return(e=a)>=i?s=!0:10===(t=r.charCodeAt(a++))?l=!0:13===t&&(l=!0,10===r.charCodeAt(a))&&++a,r.slice(n+1,e-1).replace(/""/g,'"')}for(;a<i;){if(10===(t=r.charCodeAt(e=a++)))l=!0;else if(13===t)l=!0,10===r.charCodeAt(a)&&++a;else if(t!==h)continue;return r.slice(n,e)}return s=!0,r.slice(n,i)}for(10===r.charCodeAt(i-1)&&--i,13===r.charCodeAt(i-1)&&--i;(t=u())!==f;){for(var c=[];t!==d&&t!==f;)c.push(t),t=u();e&&null==(c=e(c,o++))||n.push(c)}return n}function i(e,n){return e.map(function(t){return n.map(function(e){return o(t[e])}).join(r)})}function a(e){return e.map(o).join(r)}function o(e){return null==e?"":e instanceof Date?u(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,a){var o,s;return(e=n(e,function(e,t){if(o)return o(e,t-1);var n,r,i;s=e,o=a?(r=a,i=l(n=e),function(e,t){return r(i(e),t,n)}):l(e)})).columns=s||[],e},parseRows:n,format:function(e,t){return[(t=null==t?s(e):t).map(o).join(r)].concat(i(e,t)).join("\n")},formatBody:function(e,t){return i(e,t=null==t?s(e):t).join("\n")},formatRows:function(e){return e.map(a).join("\n")},formatRow:a,formatValue:o}}var n=t(","),r=n.parse,i=n.parseRows,a=n.format,c=n.formatBody,h=n.formatRows,p=n.formatRow,n=n.formatValue,m=t("\t"),g=m.parse,v=m.parseRows,y=m.format,_=m.formatBody,x=m.formatRows,b=m.formatRow,m=m.formatValue;var w=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();e.autoType=function(e){for(var t in e){var n,r,i=e[t].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;w&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;e[t]=i}return e},e.csvFormat=a,e.csvFormatBody=c,e.csvFormatRow=p,e.csvFormatRows=h,e.csvFormatValue=n,e.csvParse=r,e.csvParseRows=i,e.dsvFormat=t,e.tsvFormat=y,e.tsvFormatBody=_,e.tsvFormatRow=b,e.tsvFormatRows=x,e.tsvFormatValue=m,e.tsvParse=g,e.tsvParseRows=v,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],25:[function(e,t,n){var r,i;r=this,i=function(e){function t(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function n(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var r=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),i=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),a=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),o=Math.PI,s=o/2;function l(e){return(1-Math.cos(o*e))/2}function u(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function c(e){return((e*=2)<=1?u(1-e):2-u(e-1))/2}function h(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var d=7.5625;function f(e){return(e=+e)<4/11?d*e*e:e<8/11?d*(e-=6/11)*e+.75:e<10/11?d*(e-=9/11)*e+.9375:d*(e-=21/22)*e+63/64}var p=1.70158,m=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(p),g=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(p),p=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(p),v=2*Math.PI,y=function t(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=v);function e(e){return n*u(- --e)*Math.sin((i-e)/r)}return e.amplitude=function(e){return t(e,r*v)},e.period=function(e){return t(n,e)},e}(1,.3),_=function t(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=v);function e(e){return 1-n*u(e=+e)*Math.sin((e+i)/r)}return e.amplitude=function(e){return t(e,r*v)},e.period=function(e){return t(n,e)},e}(1,.3),x=function t(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=v);function e(e){return((e=2*e-1)<0?n*u(-e)*Math.sin((i-e)/r):2-n*u(e)*Math.sin((i+e)/r))/2}return e.amplitude=function(e){return t(e,r*v)},e.period=function(e){return t(n,e)},e}(1,.3);e.easeBack=p,e.easeBackIn=m,e.easeBackInOut=p,e.easeBackOut=g,e.easeBounce=f,e.easeBounceIn=function(e){return 1-f(1-e)},e.easeBounceInOut=function(e){return((e*=2)<=1?1-f(1-e):f(e-1)+1)/2},e.easeBounceOut=f,e.easeCircle=h,e.easeCircleIn=function(e){return 1-Math.sqrt(1-e*e)},e.easeCircleInOut=h,e.easeCircleOut=function(e){return Math.sqrt(1- --e*e)},e.easeCubic=n,e.easeCubicIn=function(e){return e*e*e},e.easeCubicInOut=n,e.easeCubicOut=function(e){return--e*e*e+1},e.easeElastic=_,e.easeElasticIn=y,e.easeElasticInOut=x,e.easeElasticOut=_,e.easeExp=c,e.easeExpIn=function(e){return u(1-+e)},e.easeExpInOut=c,e.easeExpOut=function(e){return 1-u(e)},e.easeLinear=function(e){return+e},e.easePoly=a,e.easePolyIn=r,e.easePolyInOut=a,e.easePolyOut=i,e.easeQuad=t,e.easeQuadIn=function(e){return e*e},e.easeQuadInOut=t,e.easeQuadOut=function(e){return e*(2-e)},e.easeSin=l,e.easeSinIn=function(e){return 1==+e?1:1-Math.cos(e*s)},e.easeSinInOut=l,e.easeSinOut=function(e){return Math.sin(e*s)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],26:[function(e,t,n){var r,i;r=this,i=function(e,a){function n(e){if(e.ok)return e.blob();throw new Error(e.status+" "+e.statusText)}function r(e){if(e.ok)return e.arrayBuffer();throw new Error(e.status+" "+e.statusText)}function i(e){if(e.ok)return e.text();throw new Error(e.status+" "+e.statusText)}function o(e,t){return fetch(e,t).then(i)}function t(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=void 0),o(e,t).then(function(e){return r(e,n)})}}var s=t(a.csvParse),l=t(a.tsvParse);function u(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function c(n){return function(e,t){return o(e,t).then(function(e){return(new DOMParser).parseFromString(e,n)})}}var h=c("application/xml"),d=c("text/html"),f=c("image/svg+xml");e.blob=function(e,t){return fetch(e,t).then(n)},e.buffer=function(e,t){return fetch(e,t).then(r)},e.csv=s,e.dsv=function(e,t,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=a.dsvFormat(e);return o(t,n).then(function(e){return i.parse(e,r)})},e.html=d,e.image=function(i,a){return new Promise(function(e,t){var n,r=new Image;for(n in a)r[n]=a[n];r.onerror=t,r.onload=function(){e(r)},r.src=i})},e.json=function(e,t){return fetch(e,t).then(u)},e.svg=f,e.text=o,e.tsv=l,e.xml=h,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dsv")):"function"==typeof define&&define.amd?define(["exports","d3-dsv"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-dsv":24}],27:[function(e,t,n){var r,i;r=this,i=function(e,m,g,p,v){function y(e){return function(){return e}}function _(){return 1e-6*(Math.random()-.5)}function x(e){return e.x+e.vx}function b(e){return e.y+e.vy}function w(e){return e.index}function M(e,t){e=e.get(t);if(e)return e;throw new Error("missing: "+t)}function s(e){return e.x}function T(e){return e.y}var S=Math.PI*(3-Math.sqrt(5));e.forceCenter=function(a,o){var s;function t(){for(var e,t=s.length,n=0,r=0,i=0;i<t;++i)n+=(e=s[i]).x,r+=e.y;for(n=n/t-a,r=r/t-o,i=0;i<t;++i)(e=s[i]).x-=n,e.y-=r}return null==a&&(a=0),null==o&&(o=0),t.initialize=function(e){s=e},t.x=function(e){return arguments.length?(a=+e,t):a},t.y=function(e){return arguments.length?(o=+e,t):o},t},e.forceCollide=function(r){var a,o,d=1,f=1;function t(){for(var e,t,s,l,u,c,h,n=a.length,r=0;r<f;++r)for(t=m.quadtree(a,x,b).visitAfter(p),e=0;e<n;++e)s=a[e],c=o[s.index],h=c*c,l=s.x+s.vx,u=s.y+s.vy,t.visit(i);function i(e,t,n,r,i){var a=e.data,e=e.r,o=c+e;if(!a)return l+o<t||r<l-o||u+o<n||i<u-o;a.index>s.index&&(n=(t=l-a.x-a.vx)*t+(r=u-a.y-a.vy)*r)<o*o&&(0===t&&(n+=(t=_())*t),0===r&&(n+=(r=_())*r),n=(o-(n=Math.sqrt(n)))/n*d,s.vx+=(t*=n)*(o=(e*=e)/(h+e)),s.vy+=(r*=n)*o,a.vx-=t*(o=1-o),a.vy-=r*o)}}function p(e){if(e.data)return e.r=o[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function n(){if(a){var e,t,n=a.length;for(o=new Array(n),e=0;e<n;++e)t=a[e],o[t.index]=+r(t,e,a)}}return"function"!=typeof r&&(r=y(null==r?1:+r)),t.initialize=function(e){a=e,n()},t.iterations=function(e){return arguments.length?(f=+e,t):f},t.strength=function(e){return arguments.length?(d=+e,t):d},t.radius=function(e){return arguments.length?(r="function"==typeof e?e:y(+e),n(),t):r},t},e.forceLink=function(u){var c,h,a,o,d,s=w,n=function(e){return 1/Math.min(o[e.source.index],o[e.target.index])},r=y(30),f=1;function t(e){for(var t=0,n=u.length;t<f;++t)for(var r,i,a,o,s,l=0;l<n;++l)r=(i=u[l]).source,a=(i=i.target).x+i.vx-r.x-r.vx||_(),o=i.y+i.vy-r.y-r.vy||_(),a*=s=((s=Math.sqrt(a*a+o*o))-h[l])/s*e*c[l],o*=s,i.vx-=a*(s=d[l]),i.vy-=o*s,r.vx+=a*(s=1-s),r.vy+=o*s}function i(){if(a){var e,t=a.length,n=u.length,r=g.map(a,s),i=0;for(o=new Array(t);i<n;++i)(e=u[i]).index=i,"object"!=typeof e.source&&(e.source=M(r,e.source)),"object"!=typeof e.target&&(e.target=M(r,e.target)),o[e.source.index]=(o[e.source.index]||0)+1,o[e.target.index]=(o[e.target.index]||0)+1;for(i=0,d=new Array(n);i<n;++i)e=u[i],d[i]=o[e.source.index]/(o[e.source.index]+o[e.target.index]);c=new Array(n),l(),h=new Array(n),p()}}function l(){if(a)for(var e=0,t=u.length;e<t;++e)c[e]=+n(u[e],e,u)}function p(){if(a)for(var e=0,t=u.length;e<t;++e)h[e]=+r(u[e],e,u)}return null==u&&(u=[]),t.initialize=function(e){a=e,i()},t.links=function(e){return arguments.length?(u=e,i(),t):u},t.id=function(e){return arguments.length?(s=e,t):s},t.iterations=function(e){return arguments.length?(f=+e,t):f},t.strength=function(e){return arguments.length?(n="function"==typeof e?e:y(+e),l(),t):n},t.distance=function(e){return arguments.length?(r="function"==typeof e?e:y(+e),p(),t):r},t},e.forceManyBody=function(){var i,l,u,c,r=y(-30),h=1,d=1/0,f=.81;function t(e){var t,n=i.length,r=m.quadtree(i,s,T).visitAfter(a);for(u=e,t=0;t<n;++t)l=i[t],r.visit(o)}function n(){if(i){var e,t,n=i.length;for(c=new Array(n),e=0;e<n;++e)t=i[e],c[t.index]=+r(t,e,i)}}function a(e){var t,n,r,i,a,o=0,s=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else for((t=e).x=t.data.x,t.y=t.data.y;o+=c[t.data.index],t=t.next;);e.value=o}function o(e,t,n,r){if(!e.value)return!0;var i=e.x-l.x,a=e.y-l.y,o=r-t,s=i*i+a*a;if(o*o/f<s)return s<d&&(0===i&&(s+=(i=_())*i),0===a&&(s+=(a=_())*a),s<h&&(s=Math.sqrt(h*s)),l.vx+=i*e.value*u/s,l.vy+=a*e.value*u/s),!0;if(!(e.length||d<=s))for((e.data!==l||e.next)&&(0===i&&(s+=(i=_())*i),0===a&&(s+=(a=_())*a),s<h)&&(s=Math.sqrt(h*s));e.data!==l&&(o=c[e.data.index]*u/s,l.vx+=i*o,l.vy+=a*o),e=e.next;);}return t.initialize=function(e){i=e,n()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:y(+e),n(),t):r},t.distanceMin=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t.distanceMax=function(e){return arguments.length?(d=e*e,t):Math.sqrt(d)},t.theta=function(e){return arguments.length?(f=e*e,t):Math.sqrt(f)},t},e.forceRadial=function(n,s,l){var u,c,h,r=y(.1);function t(e){for(var t=0,n=u.length;t<n;++t){var r=u[t],i=r.x-s||1e-6,a=r.y-l||1e-6,o=Math.sqrt(i*i+a*a),o=(h[t]-o)*c[t]*e/o;r.vx+=i*o,r.vy+=a*o}}function i(){if(u){var e,t=u.length;for(c=new Array(t),h=new Array(t),e=0;e<t;++e)h[e]=+n(u[e],e,u),c[e]=isNaN(h[e])?0:+r(u[e],e,u)}}return"function"!=typeof n&&(n=y(+n)),null==s&&(s=0),null==l&&(l=0),t.initialize=function(e){u=e,i()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:y(+e),i(),t):r},t.radius=function(e){return arguments.length?(n="function"==typeof e?e:y(+e),i(),t):n},t.x=function(e){return arguments.length?(s=+e,t):s},t.y=function(e){return arguments.length?(l=+e,t):l},t},e.forceSimulation=function(l){var a,o=1,t=.001,s=1-Math.pow(t,1/300),u=0,c=.6,h=g.map(),e=v.timer(r),n=p.dispatch("tick","end");function r(){i(),n.call("tick",a),o<t&&(e.stop(),n.call("end",a))}function i(e){var t,n,r=l.length;void 0===e&&(e=1);for(var i=0;i<e;++i)for(o+=(u-o)*s,h.each(function(e){e(o)}),t=0;t<r;++t)null==(n=l[t]).fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0);return a}function d(){for(var e,t,n,r=0,i=l.length;r<i;++r)(n=l[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),(isNaN(n.x)||isNaN(n.y))&&(e=10*Math.sqrt(r),t=r*S,n.x=e*Math.cos(t),n.y=e*Math.sin(t)),(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}function f(e){return e.initialize&&e.initialize(l),e}return null==l&&(l=[]),d(),a={tick:i,restart:function(){return e.restart(r),a},stop:function(){return e.stop(),a},nodes:function(e){return arguments.length?(l=e,d(),h.each(f),a):l},alpha:function(e){return arguments.length?(o=+e,a):o},alphaMin:function(e){return arguments.length?(t=+e,a):t},alphaDecay:function(e){return arguments.length?(s=+e,a):+s},alphaTarget:function(e){return arguments.length?(u=+e,a):u},velocityDecay:function(e){return arguments.length?(c=1-e,a):1-c},force:function(e,t){return 1<arguments.length?(null==t?h.remove(e):h.set(e,f(t)),a):h.get(e)},find:function(e,t,n){var r,i,a,o=0,s=l.length;for(null==n?n=1/0:n*=n,o=0;o<s;++o)(r=(r=e-(i=l[o]).x)*r+(r=t-i.y)*r)<n&&(a=i,n=r);return a},on:function(e,t){return 1<arguments.length?(n.on(e,t),a):n.on(e)}}},e.forceX=function(n){var i,a,o,r=y(.1);function t(e){for(var t,n=0,r=i.length;n<r;++n)(t=i[n]).vx+=(o[n]-t.x)*a[n]*e}function s(){if(i){var e,t=i.length;for(a=new Array(t),o=new Array(t),e=0;e<t;++e)a[e]=isNaN(o[e]=+n(i[e],e,i))?0:+r(i[e],e,i)}}return"function"!=typeof n&&(n=y(null==n?0:+n)),t.initialize=function(e){i=e,s()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:y(+e),s(),t):r},t.x=function(e){return arguments.length?(n="function"==typeof e?e:y(+e),s(),t):n},t},e.forceY=function(n){var i,a,o,r=y(.1);function t(e){for(var t,n=0,r=i.length;n<r;++n)(t=i[n]).vy+=(o[n]-t.y)*a[n]*e}function s(){if(i){var e,t=i.length;for(a=new Array(t),o=new Array(t),e=0;e<t;++e)a[e]=isNaN(o[e]=+n(i[e],e,i))?0:+r(i[e],e,i)}}return"function"!=typeof n&&(n=y(null==n?0:+n)),t.initialize=function(e){i=e,s()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:y(+e),s(),t):r},t.y=function(e){return arguments.length?(n="function"==typeof e?e:y(+e),s(),t):n},t},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)},{"d3-collection":19,"d3-dispatch":22,"d3-quadtree":34,"d3-timer":42}],28:[function(e,t,n){var r,i;r=this,i=function(t){function a(e,t){var n;return(t=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0?null:[1<(n=e.slice(0,t)).length?n[0]+n.slice(2):n,+e.slice(t+1)]}function u(e){return(e=a(Math.abs(e)))?e[1]:NaN}var A,n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function L(e){var t;if(t=n.exec(e))return new r({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]});throw new Error("invalid format: "+e)}function r(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function i(e,t){var n,t=a(e,t);return t?(n=t[0],(t=t[1])<0?"0."+new Array(-t).join("0")+n:n.length>t+1?n.slice(0,t+1)+"."+n.slice(t+1):n+new Array(t-n.length+2).join("0")):e+""}L.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var R={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return 1e21<=Math.abs(e=Math.round(e))?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return i(100*e,t)},r:i,s:function(e,t){var n,r,i=a(e,t);return i?(n=i[0],(i=(i=i[1])-(A=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1)===(r=n.length)?n:r<i?n+new Array(i-r+1).join("0"):0<i?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+a(e,Math.max(0,t+i-1))[0]):e+""},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function c(e){return e}var o,h=Array.prototype.map,C=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function s(e){var t,s,l,w=void 0===e.grouping||void 0===e.thousands?c:(s=h.call(e.grouping,Number),l=e.thousands+"",function(e,t){for(var n=e.length,r=[],i=0,a=s[0],o=0;0<n&&0<a&&(t<o+a+1&&(a=Math.max(1,t-o)),r.push(e.substring(n-=a,n+a)),!((o+=a+1)>t));)a=s[i=(i+1)%s.length];return r.reverse().join(l)}),r=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",M=void 0===e.decimal?".":e.decimal+"",T=void 0===e.numerals?c:(t=h.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}),a=void 0===e.percent?"%":e.percent+"",S=void 0===e.minus?"-":e.minus+"",E=void 0===e.nan?"NaN":e.nan+"";function o(e){var u=(e=L(e)).fill,c=e.align,h=e.sign,t=e.symbol,d=e.zero,f=e.width,p=e.comma,m=e.precision,g=e.trim,v=e.type,y=("n"===v?(p=!0,v="g"):R[v]||(void 0===m&&(m=12),g=!0,v="g"),(d||"0"===u&&"="===c)&&(d=!0,u="0",c="="),"$"===t?r:"#"===t&&/[boxX]/.test(v)?"0"+v.toLowerCase():""),_="$"===t?i:/[%p]/.test(v)?a:"",x=R[v],b=/[defgprs%]/.test(v);function n(e){var t,n,r,i=y,a=_;if("c"===v)a=x(e)+a,e="";else{var o=(e=+e)<0||1/e<0;if(e=isNaN(e)?E:x(Math.abs(e),m),g&&(e=(e=>{e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;0<i&&(i=0)}return 0<i?e.slice(0,i)+e.slice(t+1):e})(e)),i=((o=o&&0==+e&&"+"!==h?!1:o)?"("===h?h:S:"-"===h||"("===h?"":h)+i,a=("s"===v?C[8+A/3]:"")+a+(o&&"("===h?")":""),b)for(t=-1,n=e.length;++t<n;)if((r=e.charCodeAt(t))<48||57<r){a=(46===r?M+e.slice(t+1):e.slice(t))+a,e=e.slice(0,t);break}}p&&!d&&(e=w(e,1/0));var s=i.length+e.length+a.length,l=s<f?new Array(f-s+1).join(u):"";switch(p&&d&&(e=w(l+e,l.length?f-a.length:1/0),l=""),c){case"<":e=i+e+a+l;break;case"=":e=i+l+e+a;break;case"^":e=l.slice(0,s=l.length>>1)+i+e+a+l.slice(s);break;default:e=l+i+e+a}return T(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),n.toString=function(){return e+""},n}return{format:o,formatPrefix:function(e,t){var n=o(((e=L(e)).type="f",e)),e=3*Math.max(-8,Math.min(8,Math.floor(u(t)/3))),r=Math.pow(10,-e),i=C[8+e/3];return function(e){return n(r*e)+i}}}}function e(e){return o=s(e),t.format=o.format,t.formatPrefix=o.formatPrefix,o}e({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),t.FormatSpecifier=r,t.formatDefaultLocale=e,t.formatLocale=s,t.formatSpecifier=L,t.precisionFixed=function(e){return Math.max(0,-u(Math.abs(e)))},t.precisionPrefix=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(u(t)/3)))-u(Math.abs(e)))},t.precisionRound=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,u(t)-u(e))+1},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r="undefined"!=typeof globalThis?globalThis:r||self).d3=r.d3||{})},{}],29:[function(e,t,n){var r,i;r=this,i=function(e,T){function t(){return new M}function M(){this.reset()}M.prototype={constructor:M,reset:function(){this.s=this.t=0},add:function(e){F(S,e,this.t),F(this,S.s,this.s),this.s?this.t+=S.t:this.s=S.t},valueOf:function(){return this.s}};var S=new M;function F(e,t,n){var r=e.s=t+n,i=r-t;e.t=t-(r-i)+(n-i)}var C=1e-6,U=1e-12,E=Math.PI,A=E/2,z=E/4,L=2*E,P=180/E,O=E/180,D=Math.abs,H=Math.atan,N=Math.atan2,R=Math.cos,G=Math.ceil,j=Math.exp,V=Math.log,W=Math.pow,I=Math.sin,u=Math.sign||function(e){return 0<e?1:e<0?-1:0},k=Math.sqrt,q=Math.tan;function X(e){return 1<e?0:e<-1?E:Math.acos(e)}function B(e){return 1<e?A:e<-1?-A:Math.asin(e)}function Y(e){return(e=I(e/2))*e}function n(){}function Z(e,t){e&&J.hasOwnProperty(e.type)&&J[e.type](e,t)}var Q={Feature:function(e,t){Z(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Z(n[r].geometry,t)}},J={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){K(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)K(n[r],t,0)},Polygon:function(e,t){$(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Z(n[r],t)}};function K(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function $(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)K(e[n],t,1);t.polygonEnd()}function l(e,t){e&&Q.hasOwnProperty(e.type)?Q[e.type](e,t):Z(e,t)}var ee,te,ne,re,ie,ae=t(),oe=t(),r={point:n,lineStart:n,lineEnd:n,polygonStart:function(){ae.reset(),r.lineStart=se,r.lineEnd=le},polygonEnd:function(){var e=+ae;oe.add(e<0?L+e:e),this.lineStart=this.lineEnd=this.point=n},sphere:function(){oe.add(L)}};function se(){r.point=ue}function le(){ce(ee,te)}function ue(e,t){r.point=ce,ee=e,te=t,ne=e*=O,re=R(t=(t*=O)/2+z),ie=I(t)}function ce(e,t){var n=(e*=O)-ne,r=0<=n?1:-1,n=r*n,i=R(t=(t*=O)/2+z),t=I(t),a=ie*t,o=re*i+a*R(n),a=a*r*I(n);ae.add(N(a,o)),ne=e,re=i,ie=t}function he(e){return[N(e[1],e[0]),B(e[2])]}function de(e){var t=e[0],e=e[1],n=R(e);return[n*R(t),n*I(t),I(e)]}function fe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pe(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function me(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ge(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ve(e){var t=k(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var c,h,d,f,ye,_e,xe,be,p,m,we,Me,Te,Se,Ee,Ae,Le,Re,Ce,Pe,Oe,De,Ne,g,v,y,Ie=t(),_={point:ke,lineStart:Fe,lineEnd:Ue,polygonStart:function(){_.point=ze,_.lineStart=He,_.lineEnd=Ge,Ie.reset(),r.polygonStart()},polygonEnd:function(){r.polygonEnd(),_.point=ke,_.lineStart=Fe,_.lineEnd=Ue,ae<0?(c=-(d=180),h=-(f=90)):C<Ie?f=90:Ie<-C&&(h=-90),m[0]=c,m[1]=d},sphere:function(){c=-(d=180),h=-(f=90)}};function ke(e,t){p.push(m=[c=e,d=e]),t<h&&(h=t),f<t&&(f=t)}function Be(e,t){var n,r,i,a,o,s=de([e*O,t*O]);be?(n=pe(be,s),ve(n=pe([n[1],-n[0],0],n)),n=he(n),o=e-ye,i=n[0]*P*(r=0<o?1:-1),(o=180<D(o))^(r*ye<i&&i<r*e)?(a=n[1]*P,f<a&&(f=a)):o^(r*ye<(i=(360+i)%360-180)&&i<r*e)?(a=-n[1]*P)<h&&(h=a):(t<h&&(h=t),f<t&&(f=t)),o?e<ye?x(c,e)>x(c,d)&&(d=e):x(e,d)>x(c,d)&&(c=e):c<=d?(e<c&&(c=e),d<e&&(d=e)):ye<e?x(c,e)>x(c,d)&&(d=e):x(e,d)>x(c,d)&&(c=e)):p.push(m=[c=e,d=e]),t<h&&(h=t),f<t&&(f=t),be=s,ye=e}function Fe(){_.point=Be}function Ue(){m[0]=c,m[1]=d,_.point=ke,be=null}function ze(e,t){var n;be?(n=e-ye,Ie.add(180<D(n)?n+(0<n?360:-360):n)):(_e=e,xe=t),r.point(e,t),Be(e,t)}function He(){r.lineStart()}function Ge(){ze(_e,xe),r.lineEnd(),D(Ie)>C&&(c=-(d=180)),m[0]=c,m[1]=d,be=null}function x(e,t){return(t-=e)<0?t+360:t}function je(e,t){return e[0]-t[0]}function Ve(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var i={sphere:n,point:We,lineStart:Xe,lineEnd:Qe,polygonStart:function(){i.lineStart=Je,i.lineEnd=Ke},polygonEnd:function(){i.lineStart=Xe,i.lineEnd=Qe}};function We(e,t){e*=O;var n=R(t*=O);qe(n*R(e),n*I(e),I(t))}function qe(e,t,n){Te+=(e-Te)/++we,Se+=(t-Se)/we,Ee+=(n-Ee)/we}function Xe(){i.point=Ye}function Ye(e,t){e*=O;var n=R(t*=O);g=n*R(e),v=n*I(e),y=I(t),i.point=Ze,qe(g,v,y)}function Ze(e,t){e*=O;var n=R(t*=O),r=n*R(e),n=n*I(e),e=I(t),t=N(k((t=v*e-y*n)*t+(t=y*r-g*e)*t+(t=g*n-v*r)*t),g*r+v*n+y*e);Me+=t,Ae+=t*(g+(g=r)),Le+=t*(v+(v=n)),Re+=t*(y+(y=e)),qe(g,v,y)}function Qe(){i.point=We}function Je(){i.point=$e}function Ke(){et(De,Ne),i.point=We}function $e(e,t){De=e,Ne=t,e*=O,t*=O,i.point=et;var n=R(t);g=n*R(e),v=n*I(e),y=I(t),qe(g,v,y)}function et(e,t){e*=O;var n=R(t*=O),r=n*R(e),n=n*I(e),e=I(t),t=v*e-y*n,i=y*r-g*e,a=g*n-v*r,o=k(t*t+i*i+a*a),s=B(o),o=o&&-s/o;Ce+=o*t,Pe+=o*i,Oe+=o*a,Me+=s,Ae+=s*(g+(g=r)),Le+=s*(v+(v=n)),Re+=s*(y+(y=e)),qe(g,v,y)}function tt(e){return function(){return e}}function nt(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function rt(e,t){return[D(e)>E?e+Math.round(-e/L)*L:e,t]}function it(e,t,n){return(e%=L)?t||n?nt(ot(e),st(t,n)):ot(e):t||n?st(t,n):rt}function at(n){return function(e,t){return[E<(e+=n)?e-L:e<-E?e+L:e,t]}}function ot(e){var t=at(e);return t.invert=at(-e),t}function st(e,t){var i=R(e),a=I(e),o=R(t),s=I(t);function n(e,t){var n=R(t),r=R(e)*n,e=I(e)*n,n=I(t),t=n*i+r*a;return[N(e*o-t*s,r*i-n*a),B(t*o+e*s)]}return n.invert=function(e,t){var n=R(t),r=R(e)*n,e=I(e)*n,n=I(t),t=n*o-e*s;return[N(e*o+n*s,r*i+t*a),B(t*i-r*a)]},n}function lt(t){function e(e){return(e=t(e[0]*O,e[1]*O))[0]*=P,e[1]*=P,e}return t=it(t[0]*O,t[1]*O,2<t.length?t[2]*O:0),e.invert=function(e){return(e=t.invert(e[0]*O,e[1]*O))[0]*=P,e[1]*=P,e},e}function ut(e,t,n,r,i,a){if(n){var o=R(t),s=I(t),l=r*n;null==i?(i=t+r*L,a=t-l/2):(i=ct(o,i),a=ct(o,a),(0<r?i<a:a<i)&&(i+=r*L));for(var u,c=i;0<r?a<c:c<a;c-=l)u=he([o,-s*R(c),-s*I(c)]),e.point(u[0],u[1])}}function ct(e,t){(t=de(t))[0]-=e,ve(t);e=X(-t[1]);return((-t[2]<0?-e:e)+L-C)%L}function ht(){var r,t=[];return{point:function(e,t,n){r.push([e,t,n])},lineStart:function(){t.push(r=[])},lineEnd:n,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],r=null,e}}}function dt(e,t){return D(e[0]-t[0])<C&&D(e[1]-t[1])<C}function ft(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pt(e,t,n,r,a){var o,i,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],i=e[t];if(dt(r,i)){if(!r[2]&&!i[2]){for(a.lineStart(),o=0;o<t;++o)a.point((r=e[o])[0],r[1]);return void a.lineEnd()}i[0]+=2*C}s.push(n=new ft(r,e,null,!0)),l.push(n.o=new ft(r,null,n,!1)),s.push(n=new ft(i,e,null,!1)),l.push(n.o=new ft(i,null,n,!0))}}),s.length){for(l.sort(t),mt(s),mt(l),o=0,i=l.length;o<i;++o)l[o].e=n=!n;for(var u,c,h=s[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;u=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,i=u.length;o<i;++o)a.point((c=u[o])[0],c[1]);else r(d.x,d.n.x,1,a);d=d.n}else{if(f)for(u=d.p.z,o=u.length-1;0<=o;--o)a.point((c=u[o])[0],c[1]);else r(d.x,d.p.x,-1,a);d=d.p}}while(u=(d=d.o).z,f=!f,!d.v);a.lineEnd()}}}function mt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}rt.invert=rt;var gt=t();function vt(e){return D(e[0])<=E?e[0]:u(e[0])*((D(e[0])+E)%L-E)}function yt(e,t){var n=vt(t),r=t[1],t=I(r),i=[I(n),-R(n),0],a=0,o=0;gt.reset(),1===t?r=A+C:-1===t&&(r=-A-C);for(var s=0,l=e.length;s<l;++s)if(c=(u=e[s]).length)for(var u,c,h=u[c-1],d=vt(h),f=h[1]/2+z,p=I(f),m=R(f),g=0;g<c;++g,d=y,p=x,m=_,h=v){var v=u[g],y=vt(v),_=v[1]/2+z,x=I(_),_=R(_),b=y-d,w=0<=b?1:-1,M=w*b,T=E<M,S=p*x;gt.add(N(S*w*I(M),m*_+S*R(M))),a+=T?b+w*L:b,T^n<=d^n<=y&&(ve(S=pe(de(h),de(v))),ve(M=pe(i,S)),(w=(T^0<=b?-1:1)*B(M[2]))<r||r===w&&(S[0]||S[1]))&&(o+=T^0<=b?1:-1)}return(a<-C||a<C&&gt<-C)^1&o}function _t(g,v,y,_){return function(s){var l,u,c,n=v(s),h=ht(),d=v(h),f=!1,t={point:r,lineStart:i,lineEnd:a,polygonStart:function(){t.point=p,t.lineStart=o,t.lineEnd=m,u=[],l=[]},polygonEnd:function(){t.point=r,t.lineStart=i,t.lineEnd=a,u=T.merge(u);var e=yt(l,_);u.length?(f||(s.polygonStart(),f=!0),pt(u,bt,e,y,s)):e&&(f||(s.polygonStart(),f=!0),s.lineStart(),y(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),u=l=null},sphere:function(){s.polygonStart(),s.lineStart(),y(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function r(e,t){g(e,t)&&s.point(e,t)}function e(e,t){n.point(e,t)}function i(){t.point=e,n.lineStart()}function a(){t.point=r,n.lineEnd()}function p(e,t){c.push([e,t]),d.point(e,t)}function o(){d.lineStart(),c=[]}function m(){p(c[0][0],c[0][1]),d.lineEnd();var e,t,n,r,i=d.clean(),a=h.result(),o=a.length;if(c.pop(),l.push(c),c=null,o)if(1&i){if(0<(t=(n=a[0]).length-1)){for(f||(s.polygonStart(),f=!0),s.lineStart(),e=0;e<t;++e)s.point((r=n[e])[0],r[1]);s.lineEnd()}}else 1<o&&2&i&&a.push(a.pop().concat(a.shift())),u.push(a.filter(xt))}return t}}function xt(e){return 1<e.length}function bt(e,t){return((e=e.x)[0]<0?e[1]-A-C:A-e[1])-((t=t.x)[0]<0?t[1]-A-C:A-t[1])}var wt=_t(function(){return 1},function(u){var c,h=NaN,d=NaN,f=NaN;return{lineStart:function(){u.lineStart(),c=1},point:function(e,t){var n,r,i,a,o,s=0<e?E:-E,l=D(e-h);D(l-E)<C?(u.point(h,d=0<(d+t)/2?A:-A),u.point(f,d),u.lineEnd(),u.lineStart(),u.point(s,d),u.point(e,d),c=0):f!==s&&E<=l&&(D(h-f)<C&&(h-=f*C),D(e-s)<C&&(e-=s*C),l=d,i=t,o=I((n=h)-(r=e)),d=D(o)>C?H((I(l)*(a=R(i))*I(r)-I(i)*(r=R(l))*I(n))/(r*a*o)):(l+i)/2,u.point(f,d),u.lineEnd(),u.lineStart(),u.point(s,d),c=0),u.point(h=e,d=t),f=s},lineEnd:function(){u.lineEnd(),h=d=NaN},clean:function(){return 2-c}}},function(e,t,n,r){var i;null==e?(i=n*A,r.point(-E,i),r.point(0,i),r.point(E,i),r.point(E,0),r.point(E,-i),r.point(0,-i),r.point(-E,-i),r.point(-E,0),r.point(-E,i)):D(e[0]-t[0])>C?(e=e[0]<t[0]?E:-E,i=n*e/2,r.point(-e,i),r.point(0,i),r.point(e,i)):r.point(t[0],t[1])},[-E,-A]);function Mt(i){var m=R(i),a=6*O,h=0<m,d=D(m)>C;function f(e,t){return R(e)*R(t)>m}function p(e,t,n){var r,i,a,o,s,l,u,c=[1,0,0],h=pe(de(e),de(t)),d=fe(h,h),f=h[0],p=d-f*f;return p?(r=pe(c,h),me(c=ge(c,m*d/p),ge(h,-m*f/p)),(p=(h=fe(c,d=r))*h-(f=fe(d,d))*(fe(c,c)-1))<0?void 0:(me(p=ge(d,(-h-(r=k(p)))/f),c),p=he(p),n?(i=e[0],a=t[0],o=e[1],t=t[1],a<i&&(u=i,i=a,a=u),!(l=D((s=a-i)-E)<C)&&t<o&&(u=o,o=t,t=u),(l||s<C?l?0<o+t^p[1]<(D(p[0]-i)<C?o:t):o<=p[1]&&p[1]<=t:E<s^(i<=p[0]&&p[0]<=a))?(me(u=ge(d,(-h+r)/f),c),[p,he(u)]):void 0):p)):!n&&e}function g(e,t){var n=h?i:E-i,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}return _t(f,function(a){var o,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(e,t){var n,r=[e,t],i=f(e,t),e=h?i?0:g(e,t):i?g(e+(e<0?E:-E),t):0;!o&&(u=l=i)&&a.lineStart(),i===l||(n=p(o,r))&&!dt(o,n)&&!dt(r,n)||(r[2]=1),i!==l?(c=0,i?(a.lineStart(),n=p(r,o),a.point(n[0],n[1])):(n=p(o,r),a.point(n[0],n[1],2),a.lineEnd()),o=n):d&&o&&h^i&&(e&s||!(t=p(r,o,!0))||(c=0,h?(a.lineStart(),a.point(t[0][0],t[0][1]),a.point(t[1][0],t[1][1]),a.lineEnd()):(a.point(t[1][0],t[1][1]),a.lineEnd(),a.lineStart(),a.point(t[0][0],t[0][1],3)))),!i||o&&dt(o,r)||a.point(r[0],r[1]),o=r,l=i,s=e},lineEnd:function(){l&&a.lineEnd(),o=null},clean:function(){return c|(u&&l)<<1}}},function(e,t,n,r){ut(r,i,a,n,e,t)},h?[0,-i]:[-E,i-E])}var Tt=1e9,St=-Tt;function Et(v,y,_,x){function b(e,t){return v<=e&&e<=_&&y<=t&&t<=x}function w(e,t,n,r){var i=0,a=0;if(null==e||(i=o(e,n))!==(a=o(t,n))||s(e,t)<0^0<n)for(;r.point(0===i||3===i?v:_,1<i?x:y),(i=(i+n+4)%4)!==a;);else r.point(t[0],t[1])}function o(e,t){return D(e[0]-v)<C?0<t?0:3:D(e[0]-_)<C?0<t?2:1:D(e[1]-y)<C?0<t?1:0:0<t?3:2}function M(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(r){var i,h,a,o,s,l,u,c,d,f,p,m=r,e=ht(),t={point:n,lineStart:function(){t.point=g,h&&h.push(a=[]);f=!0,d=!1,u=c=NaN},lineEnd:function(){i&&(g(o,s),l&&d&&e.rejoin(),i.push(e.result()));t.point=n,d&&m.lineEnd()},polygonStart:function(){m=e,i=[],h=[],p=!0},polygonEnd:function(){var e=(()=>{for(var e=0,t=0,n=h.length;t<n;++t)for(var r,i,a=h[t],o=1,s=a.length,l=a[0],u=l[0],c=l[1];o<s;++o)r=u,i=c,l=a[o],u=l[0],c=l[1],i<=x?x<c&&(c-i)*(v-r)<(u-r)*(x-i)&&++e:c<=x&&(u-r)*(x-i)<(c-i)*(v-r)&&--e;return e})(),t=p&&e,n=(i=T.merge(i)).length;(t||n)&&(r.polygonStart(),t&&(r.lineStart(),w(null,null,1,r),r.lineEnd()),n&&pt(i,M,e,w,r),r.polygonEnd());m=r,i=h=a=null}};function n(e,t){b(e,t)&&m.point(e,t)}function g(e,t){var n,r,i=b(e,t);h&&a.push([e,t]),f?(o=e,s=t,f=!1,(l=i)&&(m.lineStart(),m.point(e,t))):i&&d?m.point(e,t):((e,t,n,r,i,a)=>{var o=e[0],s=e[1],l=0,u=1,c=t[0]-o,h=t[1]-s,n=n-o;if(c||!(0<n)){if(n/=c,c<0){if(n<l)return;n<u&&(u=n)}else if(0<c){if(u<n)return;l<n&&(l=n)}if(n=i-o,c||!(n<0)){if(n/=c,c<0){if(u<n)return;l<n&&(l=n)}else if(0<c){if(n<l)return;n<u&&(u=n)}if(n=r-s,h||!(0<n)){if(n/=h,h<0){if(n<l)return;n<u&&(u=n)}else if(0<h){if(u<n)return;l<n&&(l=n)}if(n=a-s,h||!(n<0)){if(n/=h,h<0){if(u<n)return;l<n&&(l=n)}else if(0<h){if(n<l)return;n<u&&(u=n)}return 0<l&&(e[0]=o+l*c,e[1]=s+l*h),u<1&&(t[0]=o+u*c,t[1]=s+u*h),1}}}}})(n=[u=Math.max(St,Math.min(Tt,u)),c=Math.max(St,Math.min(Tt,c))],r=[e=Math.max(St,Math.min(Tt,e)),t=Math.max(St,Math.min(Tt,t))],v,y,_,x)?(d||(m.lineStart(),m.point(n[0],n[1])),m.point(r[0],r[1]),i||m.lineEnd(),p=!1):i&&(m.lineStart(),m.point(e,t),p=!1),u=e,c=t,d=i}return t}}var At,Lt,Rt,Ct=t(),Pt={sphere:n,point:n,lineStart:function(){Pt.point=Dt,Pt.lineEnd=Ot},lineEnd:n,polygonStart:n,polygonEnd:n};function Ot(){Pt.point=Pt.lineEnd=n}function Dt(e,t){At=e*=O,Lt=I(t*=O),Rt=R(t),Pt.point=Nt}function Nt(e,t){e*=O;var n=I(t*=O),t=R(t),r=D(e-At),i=R(r),r=t*I(r),a=Rt*n-Lt*t*i,i=Lt*n+Rt*t*i;Ct.add(N(k(r*r+a*a),i)),At=e,Lt=n,Rt=t}function It(e){return Ct.reset(),l(e,Pt),+Ct}var kt=[null,null],Bt={type:"LineString",coordinates:kt};function Ft(e,t){return kt[0]=e,kt[1]=t,It(Bt)}var Ut={Feature:function(e,t){return Ht(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(Ht(n[r].geometry,t))return!0;return!1}},zt={Sphere:function(){return!0},Point:function(e,t){return Gt(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Gt(n[r],t))return!0;return!1},LineString:function(e,t){return jt(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(jt(n[r],t))return!0;return!1},Polygon:function(e,t){return Vt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Vt(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(Ht(n[r],t))return!0;return!1}};function Ht(e,t){return!(!e||!zt.hasOwnProperty(e.type))&&zt[e.type](e,t)}function Gt(e,t){return 0===Ft(e,t)}function jt(e,t){for(var n,r,i,a=0,o=e.length;a<o;a++){if(0===(r=Ft(e[a],t)))return!0;if(0<a&&0<(i=Ft(e[a],e[a-1]))&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<U*i)return!0;n=r}return!1}function Vt(e,t){return!!yt(e.map(Wt),qt(t))}function Wt(e){return(e=e.map(qt)).pop(),e}function qt(e){return[e[0]*O,e[1]*O]}function Xt(e,t,n){var r=T.range(e,t-C,n).concat(t);return function(t){return r.map(function(e){return[t,e]})}}function Yt(e,t,n){var r=T.range(e,t-C,n).concat(t);return function(t){return r.map(function(e){return[e,t]})}}function Zt(){var t,n,r,i,a,o,s,l,u,c,h,d,f=10,p=f,m=90,g=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return T.range(G(i/m)*m,r,m).map(h).concat(T.range(G(l/g)*g,s,g).map(d)).concat(T.range(G(n/f)*f,t,f).filter(function(e){return D(e%m)>C}).map(u)).concat(T.range(G(o/p)*p,a,p).filter(function(e){return D(e%g)>C}).map(c))}return y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(d(s).slice(1),h(r).reverse().slice(1),d(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],r<i&&(e=i,i=r,r=e),s<l&&(e=l,l=s,s=e),y.precision(v)):[[i,l],[r,s]]},y.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],a=+e[1][1],t<n&&(e=n,n=t,t=e),a<o&&(e=o,o=a,a=e),y.precision(v)):[[n,o],[t,a]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(m=+e[0],g=+e[1],y):[m,g]},y.stepMinor=function(e){return arguments.length?(f=+e[0],p=+e[1],y):[f,p]},y.precision=function(e){return arguments.length?(v=+e,u=Xt(o,a,90),c=Yt(n,t,v),h=Xt(l,s,90),d=Yt(i,r,v),y):v},y.extentMajor([[-180,-90+C],[180,90-C]]).extentMinor([[-180,-80-C],[180,80+C]])}function Qt(e){return e}var Jt,Kt,$t,en,tn=t(),nn=t(),s={point:n,lineStart:n,lineEnd:n,polygonStart:function(){s.lineStart=rn,s.lineEnd=sn},polygonEnd:function(){s.lineStart=s.lineEnd=s.point=n,tn.add(D(nn)),nn.reset()},result:function(){var e=tn/2;return tn.reset(),e}};function rn(){s.point=an}function an(e,t){s.point=on,Jt=$t=e,Kt=en=t}function on(e,t){nn.add(en*e-$t*t),$t=e,en=t}function sn(){on(Jt,Kt)}var ln=1/0,un=ln,cn=-ln,hn=cn,dn={point:function(e,t){e<ln&&(ln=e);cn<e&&(cn=e);t<un&&(un=t);hn<t&&(hn=t)},lineStart:n,lineEnd:n,polygonStart:n,polygonEnd:n,result:function(){var e=[[ln,un],[cn,hn]];return cn=hn=-(un=ln=1/0),e}};var fn,pn,a,o,mn=0,gn=0,vn=0,yn=0,_n=0,xn=0,bn=0,wn=0,Mn=0,b={point:Tn,lineStart:Sn,lineEnd:Ln,polygonStart:function(){b.lineStart=Rn,b.lineEnd=Cn},polygonEnd:function(){b.point=Tn,b.lineStart=Sn,b.lineEnd=Ln},result:function(){var e=Mn?[bn/Mn,wn/Mn]:xn?[yn/xn,_n/xn]:vn?[mn/vn,gn/vn]:[NaN,NaN];return mn=gn=vn=yn=_n=xn=bn=wn=Mn=0,e}};function Tn(e,t){mn+=e,gn+=t,++vn}function Sn(){b.point=En}function En(e,t){b.point=An,Tn(a=e,o=t)}function An(e,t){var n=e-a,r=t-o,n=k(n*n+r*r);yn+=n*(a+e)/2,_n+=n*(o+t)/2,xn+=n,Tn(a=e,o=t)}function Ln(){b.point=Tn}function Rn(){b.point=Pn}function Cn(){On(fn,pn)}function Pn(e,t){b.point=On,Tn(fn=a=e,pn=o=t)}function On(e,t){var n=e-a,r=t-o,n=k(n*n+r*r);yn+=n*(a+e)/2,_n+=n*(o+t)/2,xn+=n,bn+=(n=o*e-a*t)*(a+e),wn+=n*(o+t),Mn+=3*n,Tn(a=e,o=t)}function Dn(e){this._context=e}Dn.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,L)}},result:n};var Nn,In,kn,Bn,Fn,Un=t(),zn={point:n,lineStart:function(){zn.point=Hn},lineEnd:function(){Nn&&Gn(In,kn),zn.point=n},polygonStart:function(){Nn=!0},polygonEnd:function(){Nn=null},result:function(){var e=+Un;return Un.reset(),e}};function Hn(e,t){zn.point=Gn,In=Bn=e,kn=Fn=t}function Gn(e,t){Bn-=e,Fn-=t,Un.add(k(Bn*Bn+Fn*Fn)),Bn=e,Fn=t}function jn(){this._string=[]}function Vn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Wn(r){return function(e){var t,n=new qn;for(t in r)n[t]=r[t];return n.stream=e,n}}function qn(){}function Xn(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),l(n,e.stream(dn)),t(dn.result()),null!=r&&e.clipExtent(r),e}function Yn(i,a,e){return Xn(i,function(e){var t=a[1][0]-a[0][0],n=a[1][1]-a[0][1],r=Math.min(t/(e[1][0]-e[0][0]),n/(e[1][1]-e[0][1])),t=+a[0][0]+(t-r*(e[1][0]+e[0][0]))/2,n=+a[0][1]+(n-r*(e[1][1]+e[0][1]))/2;i.scale(150*r).translate([t,n])},e)}function Zn(e,t,n){return Yn(e,[[0,0],t],n)}function Qn(r,i,e){return Xn(r,function(e){var t=+i,n=t/(e[1][0]-e[0][0]),t=(t-n*(e[1][0]+e[0][0]))/2,e=-n*e[0][1];r.scale(150*n).translate([t,e])},e)}function Jn(i,a,e){return Xn(i,function(e){var t=+a,n=t/(e[1][1]-e[0][1]),r=-n*e[0][0],t=(t-n*(e[1][1]+e[0][1]))/2;i.scale(150*n).translate([r,t])},e)}jn.prototype={_radius:4.5,_circle:Vn(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Vn(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){var e;return this._string.length?(e=this._string.join(""),this._string=[],e):null}},qn.prototype={constructor:qn,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Kn=16,$n=R(30*O);function er(e,t){return+t?(A=e,L=t,function(r){var n,i,a,o,s,l,u,c,h,d,f,p,m={point:e,lineStart:t,lineEnd:v,polygonStart:function(){r.polygonStart(),m.lineStart=y},polygonEnd:function(){r.polygonEnd(),m.lineStart=t}};function e(e,t){e=A(e,t),r.point(e[0],e[1])}function t(){c=NaN,m.point=g,r.lineStart()}function g(e,t){var n=de([e,t]),t=A(e,t);R(c,h,u,d,f,p,c=t[0],h=t[1],u=e,d=n[0],f=n[1],p=n[2],Kn,r),r.point(c,h)}function v(){m.point=e,r.lineEnd()}function y(){t(),m.point=_,m.lineEnd=x}function _(e,t){g(n=e,t),i=c,a=h,o=d,s=f,l=p,m.point=g}function x(){R(c,h,u,d,f,p,i,a,n,o,s,l,Kn,r),m.lineEnd=v,v()}return m}):(n=e,Wn({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}));var n,A,L;function R(e,t,n,r,i,a,o,s,l,u,c,h,d,f){var p,m,g,v,y,_,x,b,w,M,T=o-e,S=s-t,E=T*T+S*S;4*L<E&&d--&&(g=a+h,x=B(g/=v=k((p=r+u)*p+(m=i+c)*m+g*g)),y=D(D(g)-1)<C||D(n-l)<C?(n+l)/2:N(m,p),_=(x=A(y,x))[0],L<(M=S*(b=_-e)-T*(w=(x=x[1])-t))*M/E||.3<D((T*b+S*w)/E-.5)||r*u+i*c+a*h<$n)&&(R(e,t,n,r,i,a,_,x,y,p/=v,m/=v,g,d,f),f.point(_,x),R(_,x,y,p,m,g,o,s,l,u,c,h,d,f))}}var tr=Wn({point:function(e,t){this.stream.point(e*O,t*O)}});function nr(n,r,i,a,o){function e(e,t){return[r+n*(e*=a),i-n*(t*=o)]}return e.invert=function(e,t){return[(e-r)/n*a,(i-t)/n*o]},e}function rr(e,n,r,i,a,t){var o=R(t),t=I(t),s=o*e,l=t*e,u=o/e,c=t/e,h=(t*r-o*n)/e,d=(t*n+o*r)/e;function f(e,t){return[s*(e*=i)-l*(t*=a)+n,r-l*e-s*t]}return f.invert=function(e,t){return[i*(u*e-c*t+h),a*(d-c*e-u*t)]},f}function w(e){return ir(function(){return e})()}function ir(e){var t,r,n,i,a,o,s,l,u,c,h=150,d=480,f=250,p=0,m=0,g=0,v=0,y=0,_=0,x=1,b=1,w=null,M=wt,T=null,S=Qt,E=.5;function A(e){return l(e[0]*O,e[1]*O)}function L(e){return(e=l.invert(e[0],e[1]))&&[e[0]*P,e[1]*P]}function R(){var e=rr(h,0,0,x,b,_).apply(null,t(p,m)),e=(_?rr:nr)(h,d-e[0],f-e[1],x,b,_);return r=it(g,v,y),s=nt(t,e),l=nt(r,s),o=er(s,E),C()}function C(){return u=c=null,A}return A.stream=function(e){return u&&c===e?u:u=tr((n=r,Wn({point:function(e,t){e=n(e,t);return this.stream.point(e[0],e[1])}})(M(o(S(c=e))))));var n},A.preclip=function(e){return arguments.length?(M=e,w=void 0,C()):M},A.postclip=function(e){return arguments.length?(S=e,T=n=i=a=null,C()):S},A.clipAngle=function(e){return arguments.length?(M=+e?Mt(w=e*O):(w=null,wt),C()):w*P},A.clipExtent=function(e){return arguments.length?(S=null==e?(T=n=i=a=null,Qt):Et(T=+e[0][0],n=+e[0][1],i=+e[1][0],a=+e[1][1]),C()):null==T?null:[[T,n],[i,a]]},A.scale=function(e){return arguments.length?(h=+e,R()):h},A.translate=function(e){return arguments.length?(d=+e[0],f=+e[1],R()):[d,f]},A.center=function(e){return arguments.length?(p=e[0]%360*O,m=e[1]%360*O,R()):[p*P,m*P]},A.rotate=function(e){return arguments.length?(g=e[0]%360*O,v=e[1]%360*O,y=2<e.length?e[2]%360*O:0,R()):[g*P,v*P,y*P]},A.angle=function(e){return arguments.length?(_=e%360*O,R()):_*P},A.reflectX=function(e){return arguments.length?(x=e?-1:1,R()):x<0},A.reflectY=function(e){return arguments.length?(b=e?-1:1,R()):b<0},A.precision=function(e){return arguments.length?(o=er(s,E=e*e),C()):k(E)},A.fitExtent=function(e,t){return Yn(A,e,t)},A.fitSize=function(e,t){return Zn(A,e,t)},A.fitWidth=function(e,t){return Qn(A,e,t)},A.fitHeight=function(e,t){return Jn(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&L,R()}}function ar(e){var t=0,n=E/3,r=ir(e),e=r(t,n);return e.parallels=function(e){return arguments.length?r(t=e[0]*O,n=e[1]*O):[t*P,n*P]},e}function or(e,t){var n,r,i,a=I(e),o=(a+I(t))/2;return D(o)<C?(n=R(e),s.invert=function(e,t){return[e/n,B(t*n)]},s):(i=k(r=1+a*(2*o-a))/o,l.invert=function(e,t){var t=i-t,n=N(e,D(t))*u(t);return t*o<0&&(n-=E*u(e)*u(t)),[n/o,B((r-(e*e+t*t)*o*o)/(2*o))]},l);function s(e,t){return[e*n,I(t)/n]}function l(e,t){t=k(r-2*o*I(t))/o;return[t*I(e*=o),i-t*R(e)]}}function sr(){return ar(or).scale(155.424).center([0,33.6442])}function lr(){return sr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ur(i){return function(e,t){var n=R(e),r=R(t),n=i(n*r);return[n*r*I(e),n*I(t)]}}function cr(a){return function(e,t){var n=k(e*e+t*t),r=a(n),i=I(r),r=R(r);return[N(e*i,n*r),B(n&&t*i/n)]}}var hr=ur(function(e){return k(2/(1+e))});hr.invert=cr(function(e){return 2*B(e/2)});var dr=ur(function(e){return(e=X(e))&&e/I(e)});function fr(e,t){return[e,V(q((A+t)/2))]}function pr(n){var r,i,a,o=w(n),t=o.center,s=o.scale,l=o.translate,u=o.clipExtent,c=null;function h(){var e=E*s(),t=o(lt(o.rotate()).invert([0,0]));return u(null==c?[[t[0]-e,t[1]-e],[t[0]+e,t[1]+e]]:n===fr?[[Math.max(t[0]-e,c),r],[Math.min(t[0]+e,i),a]]:[[c,Math.max(t[1]-e,r)],[i,Math.min(t[1]+e,a)]])}return o.scale=function(e){return(arguments.length?(s(e),h):s)()},o.translate=function(e){return(arguments.length?(l(e),h):l)()},o.center=function(e){return(arguments.length?(t(e),h):t)()},o.clipExtent=function(e){return arguments.length?(null==e?c=r=i=a=null:(c=+e[0][0],r=+e[0][1],i=+e[1][0],a=+e[1][1]),h()):null==c?null:[[c,r],[i,a]]},h()}function mr(e){return q((A+e)/2)}function gr(e,t){var n=R(e),i=e===t?I(e):V(n/R(t))/V(mr(t)/mr(e)),a=n*W(mr(e),i)/i;return i?(r.invert=function(e,t){var t=a-t,n=u(i)*k(e*e+t*t),r=N(e,D(t))*u(t);return t*i<0&&(r-=E*u(e)*u(t)),[r/i,2*H(W(a/n,1/i))-A]},r):fr;function r(e,t){0<a?t<-A+C&&(t=-A+C):A-C<t&&(t=A-C);t=a/W(mr(t),i);return[t*I(i*e),a-t*R(i*e)]}}function vr(e,t){return[e,t]}function yr(e,t){var n=R(e),r=e===t?I(e):(n-R(t))/(t-e),i=n/r+e;return D(r)<C?vr:(a.invert=function(e,t){var t=i-t,n=N(e,D(t))*u(t);return t*r<0&&(n-=E*u(e)*u(t)),[n/r,i-u(r)*k(e*e+t*t)]},a);function a(e,t){t=i-t,e*=r;return[t*I(e),i-t*R(e)]}}dr.invert=cr(function(e){return e}),fr.invert=function(e,t){return[e,2*H(j(t))-A]},vr.invert=vr;var _r=1.340264,xr=-.081106,br=893e-6,wr=.003796,Mr=k(3)/2;function Tr(e,t){var t=B(Mr*I(t)),n=t*t,r=n*n*n;return[e*R(t)/(Mr*(_r+3*xr*n+r*(7*br+9*wr*n))),t*(_r+xr*n+r*(br+wr*n))]}function Sr(e,t){var n=R(t),r=R(e)*n;return[n*I(e)/r,I(t)/r]}function Er(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Ar(e,t){return[R(t)*I(e),I(t)]}function Lr(e,t){var n=R(t),r=1+R(e)*n;return[n*I(e)/r,I(t)/r]}function Rr(e,t){return[V(q((A+t)/2)),-e]}Tr.invert=function(e,t){for(var n,r=t,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(_r+xr*i+a*(br+wr*i))-t)/(_r+3*xr*i+a*(7*br+9*wr*i)))*r)*i*i,!(D(n)<U));++o);return[Mr*e*(_r+3*xr*i+a*(7*br+9*wr*i))/R(r),B(I(r)/Mr)]},Sr.invert=cr(H),Er.invert=function(e,t){var n=t,r=25;do{var i=n*n,a=i*i}while(n-=a=(n*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))-t)/(1.007226+i*(.045255+a*(.259866*i-.311325-.005916*11*a))),D(a)>C&&0<--r);return[e/(.8707+(i=n*n)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),n]},Ar.invert=cr(B),Lr.invert=cr(function(e){return 2*H(e)}),Rr.invert=function(e,t){return[-t,2*H(j(e))-A]},e.geoAlbers=lr,e.geoAlbersUsa=function(){var t,n,i,a,o,r,s=lr(),l=sr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=sr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){r=[e,t]}};function h(e){var t=e[0],e=e[1];return r=null,i.point(t,e),r||(a.point(t,e),r)||(o.point(t,e),r)}function d(){return t=n=null,h}return h.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,n=(e[1]-n[1])/t;return(.12<=n&&n<.234&&-.425<=r&&r<-.214?l:.166<=n&&n<.234&&-.214<=r&&r<-.115?u:s).invert(e)},h.stream=function(e){return t&&n===e?t:(r=[s.stream(n=e),l.stream(e),u.stream(e)],i=r.length,t={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},h.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),u.precision(e),d()):s.precision()},h.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),u.scale(e),h.translate(s.translate())):s.scale()},h.translate=function(e){var t,n,r;return arguments.length?(t=s.scale(),n=+e[0],r=+e[1],i=s.translate(e).clipExtent([[n-.455*t,r-.238*t],[n+.455*t,r+.238*t]]).stream(c),a=l.translate([n-.307*t,r+.201*t]).clipExtent([[n-.425*t+C,r+.12*t+C],[n-.214*t-C,r+.234*t-C]]).stream(c),o=u.translate([n-.205*t,r+.212*t]).clipExtent([[n-.214*t+C,r+.166*t+C],[n-.115*t-C,r+.234*t-C]]).stream(c),d()):s.translate()},h.fitExtent=function(e,t){return Yn(h,e,t)},h.fitSize=function(e,t){return Zn(h,e,t)},h.fitWidth=function(e,t){return Qn(h,e,t)},h.fitHeight=function(e,t){return Jn(h,e,t)},h.scale(1070)},e.geoArea=function(e){return oe.reset(),l(e,r),2*oe},e.geoAzimuthalEqualArea=function(){return w(hr).scale(124.75).clipAngle(179.999)},e.geoAzimuthalEqualAreaRaw=hr,e.geoAzimuthalEquidistant=function(){return w(dr).scale(79.4188).clipAngle(179.999)},e.geoAzimuthalEquidistantRaw=dr,e.geoBounds=function(e){var t,n,r,i,a,o,s;if(f=d=-(c=h=1/0),p=[],l(e,_),n=p.length){for(p.sort(je),t=1,a=[r=p[0]];t<n;++t)Ve(r,(i=p[t])[0])||Ve(r,i[1])?(x(r[0],i[1])>x(r[0],r[1])&&(r[1]=i[1]),x(i[0],r[1])>x(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)(s=x(r[1],(i=a[t])[0]))>o&&(o=s,c=i[0],d=r[1])}return p=m=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[d,f]]},e.geoCentroid=function(e){we=Me=Te=Se=Ee=Ae=Le=Re=Ce=Pe=Oe=0,l(e,i);var t=Pe,n=Oe,r=(e=Ce)*e+t*t+n*n;return r<U&&(e=Ae,t=Le,n=Re,Me<C&&(e=Te,t=Se,n=Ee),(r=e*e+t*t+n*n)<U)?[NaN,NaN]:[N(t,e)*P,B(n/k(r))*P]},e.geoCircle=function(){var r,i,a=tt([0,0]),o=tt(90),s=tt(6),l={point:function(e,t){r.push(e=i(e,t)),e[0]*=P,e[1]*=P}};function t(){var e=a.apply(this,arguments),t=o.apply(this,arguments)*O,n=s.apply(this,arguments)*O;return r=[],i=it(-e[0]*O,-e[1]*O,0).invert,ut(l,t,n,1),e={type:"Polygon",coordinates:[r]},r=i=null,e}return t.center=function(e){return arguments.length?(a="function"==typeof e?e:tt([+e[0],+e[1]]),t):a},t.radius=function(e){return arguments.length?(o="function"==typeof e?e:tt(+e),t):o},t.precision=function(e){return arguments.length?(s="function"==typeof e?e:tt(+e),t):s},t},e.geoClipAntimeridian=wt,e.geoClipCircle=Mt,e.geoClipExtent=function(){var t,n,r,i=0,a=0,o=960,s=500;return r={stream:function(e){return t&&n===e?t:t=Et(i,a,o,s)(n=e)},extent:function(e){return arguments.length?(i=+e[0][0],a=+e[0][1],o=+e[1][0],s=+e[1][1],t=n=null,r):[[i,a],[o,s]]}}},e.geoClipRectangle=Et,e.geoConicConformal=function(){return ar(gr).scale(109.5).parallels([30,30])},e.geoConicConformalRaw=gr,e.geoConicEqualArea=sr,e.geoConicEqualAreaRaw=or,e.geoConicEquidistant=function(){return ar(yr).scale(131.154).center([0,13.9389])},e.geoConicEquidistantRaw=yr,e.geoContains=function(e,t){return(e&&Ut.hasOwnProperty(e.type)?Ut[e.type]:Ht)(e,t)},e.geoDistance=Ft,e.geoEqualEarth=function(){return w(Tr).scale(177.158)},e.geoEqualEarthRaw=Tr,e.geoEquirectangular=function(){return w(vr).scale(152.63)},e.geoEquirectangularRaw=vr,e.geoGnomonic=function(){return w(Sr).scale(144.049).clipAngle(60)},e.geoGnomonicRaw=Sr,e.geoGraticule=Zt,e.geoGraticule10=function(){return Zt()()},e.geoIdentity=function(){var r,i,t,n,a,o,s,l=1,u=0,c=0,h=1,d=1,f=0,p=null,m=1,g=1,v=Wn({point:function(e,t){e=x([e,t]);this.stream.point(e[0],e[1])}}),y=Qt;function _(){return m=l*h,g=l*d,o=s=null,x}function x(e){var t,n=e[0]*m,e=e[1]*g;return f&&(t=e*r-n*i,n=n*r+e*i,e=t),[n+u,e+c]}return x.invert=function(e){var t,n=e[0]-u,e=e[1]-c;return f&&(t=e*r+n*i,n=n*r-e*i,e=t),[n/m,e/g]},x.stream=function(e){return o&&s===e?o:o=v(y(s=e))},x.postclip=function(e){return arguments.length?(y=e,p=t=n=a=null,_()):y},x.clipExtent=function(e){return arguments.length?(y=null==e?(p=t=n=a=null,Qt):Et(p=+e[0][0],t=+e[0][1],n=+e[1][0],a=+e[1][1]),_()):null==p?null:[[p,t],[n,a]]},x.scale=function(e){return arguments.length?(l=+e,_()):l},x.translate=function(e){return arguments.length?(u=+e[0],c=+e[1],_()):[u,c]},x.angle=function(e){return arguments.length?(i=I(f=e%360*O),r=R(f),_()):f*P},x.reflectX=function(e){return arguments.length?(h=e?-1:1,_()):h<0},x.reflectY=function(e){return arguments.length?(d=e?-1:1,_()):d<0},x.fitExtent=function(e,t){return Yn(x,e,t)},x.fitSize=function(e,t){return Zn(x,e,t)},x.fitWidth=function(e,t){return Qn(x,e,t)},x.fitHeight=function(e,t){return Jn(x,e,t)},x},e.geoInterpolate=function(e,t){var n=e[0]*O,r=e[1]*O,e=t[0]*O,t=t[1]*O,i=R(r),a=I(r),o=R(t),s=I(t),l=i*R(n),u=i*I(n),c=o*R(e),h=o*I(e),d=2*B(k(Y(t-r)+i*o*Y(e-n))),f=I(d);return(t=d?function(e){var t=I(e*=d)/f,e=I(d-e)/f,n=e*l+t*c,r=e*u+t*h,e=e*a+t*s;return[N(r,n)*P,N(e,k(n*n+r*r))*P]}:function(){return[n*P,r*P]}).distance=d,t},e.geoLength=It,e.geoMercator=function(){return pr(fr).scale(961/L)},e.geoMercatorRaw=fr,e.geoNaturalEarth1=function(){return w(Er).scale(175.295)},e.geoNaturalEarth1Raw=Er,e.geoOrthographic=function(){return w(Ar).scale(249.5).clipAngle(90+C)},e.geoOrthographicRaw=Ar,e.geoPath=function(t,n){var r,i,a=4.5;function o(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),l(e,r(i))),i.result()}return o.area=function(e){return l(e,r(s)),s.result()},o.measure=function(e){return l(e,r(zn)),zn.result()},o.bounds=function(e){return l(e,r(dn)),dn.result()},o.centroid=function(e){return l(e,r(b)),b.result()},o.projection=function(e){return arguments.length?(r=null==e?(t=null,Qt):(t=e).stream,o):t},o.context=function(e){return arguments.length?(i=null==e?(n=null,new jn):new Dn(n=e),"function"!=typeof a&&i.pointRadius(a),o):n},o.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),o):a},o.projection(t).context(n)},e.geoProjection=w,e.geoProjectionMutator=ir,e.geoRotation=lt,e.geoStereographic=function(){return w(Lr).scale(250).clipAngle(142)},e.geoStereographicRaw=Lr,e.geoStream=l,e.geoTransform=function(e){return{stream:Wn(e)}},e.geoTransverseMercator=function(){var e=pr(Rr),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)},e.geoTransverseMercatorRaw=Rr,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-array":15}],30:[function(e,t,n){var r,i;r=this,i=function(e){function n(e,t){return e.parent===t.parent?1:2}function h(e,t){return e+t.x}function d(e,t){return Math.max(e,t.y)}function t(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;0<=--r;)t+=n[r].value;else t=1;e.value=t}function r(e,t){var n,r,i,a,o,s=new p(e),l=+e.value&&(s.value=e.value),u=[s];for(null==t&&(t=c);n=u.pop();)if(l&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;0<=a;--a)u.push(r=n.children[a]=new p(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(f)}function c(e){return e.children}function a(e){e.data=e.data.data}function f(e){for(var t=0;e.height=t,(e=e.parent)&&e.height<++t;);}function p(e){this.data=e,this.depth=this.height=0,this.parent=null}p.prototype=r.prototype={constructor:p,count:function(){return this.eachAfter(t)},each:function(e){var t,n,r,i,a,o=[this];do{for(n=o.reverse(),o=[];t=n.pop();)if(e(t),r=t.children)for(i=0,a=r.length;i<a;++i)o.push(r[i])}while(o.length);return this},eachAfter:function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r,i=[this];t=i.pop();)if(e(t),n=t.children)for(r=n.length-1;0<=r;--r)i.push(n[r]);return this},sum:function(i){return this.eachAfter(function(e){for(var t=+i(e.data)||0,n=e.children,r=n&&n.length;0<=--r;)t+=n[r].value;e.value=t})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(e){for(var t=this,n=((e,t)=>{if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i})(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n},copy:function(){return r(this).eachBefore(a)}};var B=Array.prototype.slice;function m(e){for(var t,n,r=0,i=(e=(e=>{for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e})(B.call(e))).length,a=[];r<i;)t=e[r],n&&s(n,t)?++r:(n=(e=>{switch(e.length){case 1:return(e=>({x:e.x,y:e.y,r:e.r}))(e[0]);case 2:return u(e[0],e[1]);case 3:return g(e[0],e[1],e[2])}})(a=((e,t)=>{var n,r;if(l(t,e))return[t];for(n=0;n<e.length;++n)if(o(t,e[n])&&l(u(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(o(u(e[n],e[r]),t)&&o(u(e[n],t),e[r])&&o(u(e[r],t),e[n])&&l(g(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error})(a,t)),r=0);return n}function o(e,t){var n=e.r-t.r,r=t.x-e.x,t=t.y-e.y;return n<0||n*n<r*r+t*t}function s(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,t=t.y-e.y;return 0<n&&r*r+t*t<n*n}function l(e,t){for(var n=0;n<t.length;++n)if(!s(e,t[n]))return;return 1}function u(e,t){var n=e.x,r=e.y,e=e.r,i=t.x,a=t.y,t=t.r,o=i-n,s=a-r,l=t-e,u=Math.sqrt(o*o+s*s);return{x:(n+i+o/u*l)/2,y:(r+a+s/u*l)/2,r:(u+e+t)/2}}function g(e,t,n){var r=e.x,i=e.y,e=e.r,a=t.x,o=t.y,t=t.r,s=n.x,l=n.y,n=n.r,u=r-a,c=r-s,h=i-o,d=i-l,f=t-e,p=n-e,m=r*r+i*i-e*e,a=m-a*a-o*o+t*t,o=m-s*s-l*l+n*n,t=c*h-u*d,m=(h*o-d*a)/(2*t)-r,s=(d*f-h*p)/t,l=(c*a-u*o)/(2*t)-i,n=(u*p-c*f)/t,d=s*s+n*n-1,h=2*(e+m*s+l*n),a=m*m+l*l-e*e,o=-(d?(h+Math.sqrt(h*h-4*d*a))/(2*d):a/h);return{x:r+m+s*o,y:i+l+n*o,r:o}}function v(e,t,n){var r,i,a,o,s=e.x-t.x,l=e.y-t.y,u=s*s+l*l;u?(i=t.r+n.r,o=e.r+n.r,(o*=o)<(i*=i)?(r=(u+o-i)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=e.x-r*s-a*l,n.y=e.y-r*l+a*s):(r=(u+i-o)/(2*u),a=Math.sqrt(Math.max(0,i/u-r*r)),n.x=t.x+r*s-a*l,n.y=t.y+r*l+a*s)):(n.x=t.x+n.r,n.y=t.y)}function y(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,t=t.y-e.y;return 0<n&&r*r+t*t<n*n}function _(e){var t=e._,e=e.next._,n=t.r+e.r,r=(t.x*e.r+e.x*t.r)/n,e=(t.y*e.r+e.y*t.r)/n;return r*r+e*e}function x(e){this._=e,this.next=null,this.previous=null}function b(e){if(!(r=e.length))return 0;var t,n,r,i,a,o,s,l,u,c,h=e[0];if(h.x=0,h.y=0,!(1<r))return h.r;if(h.x=-(t=e[1]).r,t.x=h.r,t.y=0,!(2<r))return h.r+t.r;v(t,h,n=e[2]),h=new x(h),t=new x(t),n=new x(n),((h.next=n.previous=t).next=h.previous=n).next=t.previous=h;e:for(o=3;o<r;++o){v(h._,t._,n=e[o]),n=new x(n),s=t.next,l=h.previous,u=t._.r,c=h._.r;do{if(u<=c){if(y(s._,n._)){t=s,(h.next=t).previous=h,--o;continue e}u+=s._.r,s=s.next}else{if(y(l._,n._)){((h=l).next=t).previous=h,--o;continue e}c+=l._.r,l=l.previous}}while(s!==l.next);for(n.previous=h,n.next=t,h.next=t.previous=t=n,i=_(h);(n=n.next)!==t;)(a=_(n))<i&&(h=n,i=a);t=h.next}for(h=[t._],n=t;(n=n.next)!==t;)h.push(n._);for(n=m(h),o=0;o<r;++o)(h=e[o]).x-=n.x,h.y-=n.y;return n.r}function w(e){if("function"!=typeof e)throw new Error;return e}function M(){return 0}function T(e){return function(){return e}}function F(e){return Math.sqrt(e.value)}function S(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function E(o,s){return function(e){if(t=e.children){var t,n,r,i=t.length,a=o(e)*s||0;if(a)for(n=0;n<i;++n)t[n].r+=a;if(r=b(t),a)for(n=0;n<i;++n)t[n].r-=a;e.r=r+a}}}function A(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y)}}function L(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function R(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,u=e.value&&(r-t)/e.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*u}var U={depth:-1},C={};function z(e){return e.id}function H(e){return e.parentId}function G(e,t){return e.parent===t.parent?1:2}function P(e){var t=e.children;return t?t[0]:e.t}function O(e){var t=e.children;return t?t[t.length-1]:e.t}function D(e,t){this._=e,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function N(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,u=e.value&&(i-n)/e.value;++s<l;)(a=o[s]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*u}D.prototype=Object.create(p.prototype);var i=(1+Math.sqrt(5))/2;function I(e,t,n,r,i,a){for(var o,s,l,u,c,h,d,f,p,m,g,v=[],y=t.children,_=0,x=0,b=y.length,w=t.value;_<b;){for(l=i-n,u=a-r;!(c=y[x++].value)&&x<b;);for(g=(h=d=c)*c*(m=Math.max(u/l,l/u)/(w*e)),p=Math.max(d/g,g/h);x<b;++x){if(c+=s=y[x].value,s<h&&(h=s),d<s&&(d=s),g=c*c*m,p<(f=Math.max(d/g,g/h))){c-=s;break}p=f}v.push(o={value:c,dice:l<u,children:y.slice(_,x)}),o.dice?R(o,n,r,i,w?r+=u*c/w:a):N(o,n,r,w?n+=l*c/w:i,a),w-=c,_=x}return v}var k=function t(a){function e(e,t,n,r,i){I(a,e,t,n,r,i)}return e.ratio=function(e){return t(1<(e=+e)?e:1)},e}(i);i=function t(f){function e(e,t,n,r,i){if((a=e._squarify)&&a.ratio===f)for(var a,o,s,l,u,c=-1,h=a.length,d=e.value;++c<h;){for(s=(o=a[c]).children,l=o.value=0,u=s.length;l<u;++l)o.value+=s[l].value;o.dice?R(o,t,n,r,n+=(i-n)*o.value/d):N(o,t,n,t+=(r-t)*o.value/d,i),d-=o.value}else e._squarify=a=I(f,e,t,n,r,i),a.ratio=f}return e.ratio=function(e){return t(1<(e=+e)?e:1)},e}(i);e.cluster=function(){var s=n,l=1,u=1,c=!1;function t(t){var r,i=0,e=(t.eachAfter(function(e){var t,n=e.children;n?(e.x=(t=n).reduce(h,0)/t.length,e.y=1+n.reduce(d,0)):(e.x=r?i+=s(e,r):0,e.y=0,r=e)}),(e=>{for(var t;t=e.children;)e=t[0];return e})(t)),n=(e=>{for(var t;t=e.children;)e=t[t.length-1];return e})(t),a=e.x-s(e,n)/2,o=n.x+s(n,e)/2;return t.eachAfter(c?function(e){e.x=(e.x-t.x)*l,e.y=(t.y-e.y)*u}:function(e){e.x=(e.x-a)/(o-a)*l,e.y=(1-(t.y?e.y/t.y:1))*u})}return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(c=!1,l=+e[0],u=+e[1],t):c?null:[l,u]},t.nodeSize=function(e){return arguments.length?(c=!0,l=+e[0],u=+e[1],t):c?[l,u]:null},t},e.hierarchy=r,e.pack=function(){var t=null,n=1,r=1,i=M;function a(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(S(t)).eachAfter(E(i,.5)).eachBefore(A(1)):e.eachBefore(S(F)).eachAfter(E(M,1)).eachAfter(E(i,e.r/Math.min(n,r))).eachBefore(A(Math.min(n,r)/(2*e.r))),e}return a.radius=function(e){return arguments.length?(t=null==(e=e)?null:w(e),a):t},a.size=function(e){return arguments.length?(n=+e[0],r=+e[1],a):[n,r]},a.padding=function(e){return arguments.length?(i="function"==typeof e?e:T(+e),a):i},a},e.packEnclose=m,e.packSiblings=function(e){return b(e),e},e.partition=function(){var n=1,r=1,s=0,i=!1;function t(e){var a,o,t=e.height+1;return e.x0=e.y0=s,e.x1=n,e.y1=r/t,e.eachBefore((a=r,o=t,function(e){e.children&&R(e,e.x0,a*(e.depth+1)/o,e.x1,a*(e.depth+2)/o);var t=e.x0,n=e.y0,r=e.x1-s,i=e.y1-s;r<t&&(t=r=(t+r)/2),i<n&&(n=i=(n+i)/2),e.x0=t,e.y0=n,e.x1=r,e.y1=i})),i&&e.eachBefore(L),e}return t.round=function(e){return arguments.length?(i=!!e,t):i},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(s=+e,t):s},t},e.stratify=function(){var c=z,h=H;function t(e){for(var t,n,r,i,a,o=e.length,s=new Array(o),l={},u=0;u<o;++u)a=e[u],r=s[u]=new p(a),null!=(i=c(a,u,e))&&(i+="")&&(l[a="$"+(r.id=i)]=a in l?C:r);for(u=0;u<o;++u)if(r=s[u],null!=(i=h(e[u],u,e))&&(i+="")){if(!(n=l["$"+i]))throw new Error("missing: "+i);if(n===C)throw new Error("ambiguous: "+i);n.children?n.children.push(r):n.children=[r],r.parent=n}else{if(t)throw new Error("multiple roots");t=r}if(!t)throw new Error("no root");if(t.parent=U,t.eachBefore(function(e){e.depth=e.parent.depth+1,--o}).eachBefore(f),t.parent=null,0<o)throw new Error("cycle");return t}return t.id=function(e){return arguments.length?(c=w(e),t):c},t.parentId=function(e){return arguments.length?(h=w(e),t):h},t},e.tree=function(){var d=G,l=1,u=1,c=null;function t(e){var t,n,r,i,a,o,s=(e=>{for(var t,n,r,i,a,o=[e=new D(e,0)];t=o.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;0<=i;--i)o.push(n=t.children[i]=new D(r[i],i)),n.parent=t;return(e.parent=new D(null,0)).children=[e],e})(e);return s.eachAfter(h),s.parent.m=-s.z,s.eachBefore(f),c?e.eachBefore(p):((r=n=t=e).eachBefore(function(e){e.x<t.x&&(t=e),e.x>n.x&&(n=e),e.depth>r.depth&&(r=e)}),s=t===n?1:d(t,n)/2,i=s-t.x,a=l/(n.x+s+i),o=u/(r.depth||1),e.eachBefore(function(e){e.x=(e.x+i)*a,e.y=e.depth*o})),e}function h(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t){for(var i,a=0,o=0,s=e.children,l=s.length;0<=--l;)(i=s[l]).z+=a,i.m+=a,a+=i.s+(o+=i.c);t=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+d(e._,r._),e.m=e.z-t):e.z=t}else r&&(e.z=r.z+d(e._,r._));e.parent.A=((e,t,n)=>{if(t){for(var r,i=e,a=e,o=t,s=i.parent.children[0],l=i.m,u=a.m,c=o.m,h=s.m;o=O(o),i=P(i),o&&i;)s=P(s),(a=O(a)).a=e,0<(r=o.z+c-i.z-l+d(o._,i._))&&(((e,t,n)=>{var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n})(((e,t,n)=>e.a.parent===t.parent?e.a:n)(o,e,n),e,r),l+=r,u+=r),c+=o.m,l+=i.m,h+=s.m,u+=a.m;o&&!O(a)&&(a.t=o,a.m+=c-u),i&&!P(s)&&(s.t=i,s.m+=l-h,n=e)}return n})(e,r,e.parent.A||n[0])}function f(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function p(e){e.x*=l,e.y=e.depth*u}return t.separation=function(e){return arguments.length?(d=e,t):d},t.size=function(e){return arguments.length?(c=!1,l=+e[0],u=+e[1],t):c?null:[l,u]},t.nodeSize=function(e){return arguments.length?(c=!0,l=+e[0],u=+e[1],t):c?[l,u]:null},t},e.treemap=function(){var o=k,t=!1,n=1,r=1,s=[0],l=M,u=M,c=M,h=M,d=M;function i(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(a),s=[0],t&&e.eachBefore(L),e}function a(e){var t=s[e.depth],n=e.x0+t,r=e.y0+t,i=e.x1-t,a=e.y1-t;i<n&&(n=i=(n+i)/2),a<r&&(r=a=(r+a)/2),e.x0=n,e.y0=r,e.x1=i,e.y1=a,e.children&&(t=s[e.depth+1]=l(e)/2,n+=d(e)-t,r+=u(e)-t,(i-=c(e)-t)<n&&(n=i=(n+i)/2),(a-=h(e)-t)<r&&(r=a=(r+a)/2),o(e,n,r,i,a))}return i.round=function(e){return arguments.length?(t=!!e,i):t},i.size=function(e){return arguments.length?(n=+e[0],r=+e[1],i):[n,r]},i.tile=function(e){return arguments.length?(o=w(e),i):o},i.padding=function(e){return arguments.length?i.paddingInner(e).paddingOuter(e):i.paddingInner()},i.paddingInner=function(e){return arguments.length?(l="function"==typeof e?e:T(+e),i):l},i.paddingOuter=function(e){return arguments.length?i.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):i.paddingTop()},i.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:T(+e),i):u},i.paddingRight=function(e){return arguments.length?(c="function"==typeof e?e:T(+e),i):c},i.paddingBottom=function(e){return arguments.length?(h="function"==typeof e?e:T(+e),i):h},i.paddingLeft=function(e){return arguments.length?(d="function"==typeof e?e:T(+e),i):d},i},e.treemapBinary=function(e,t,n,r,i){var a,o,m=e.children,s=m.length,g=new Array(s+1);for(g[0]=o=a=0;a<s;++a)g[a+1]=o+=m[a].value;!function e(t,n,r,i,a,o,s){if(n-1<=t)return(l=m[t]).x0=i,l.y0=a,l.x1=o,void(l.y1=s);var l=g[t],u=r/2+l,c=t+1,h=n-1;for(;c<h;){var d=c+h>>>1;g[d]<u?c=1+d:h=d}u-g[c-1]<g[c]-u&&t+1<c&&--c;var l=g[c]-l,f=r-l;{var p;s-a<o-i?(e(t,c,l,i,a,p=(i*f+o*l)/r,s),e(c,n,f,p,a,o,s)):(e(t,c,l,i,a,o,p=(a*f+s*l)/r),e(c,n,f,i,p,o,s))}}(0,s,e.value,t,n,r,i)},e.treemapDice=R,e.treemapResquarify=i,e.treemapSlice=N,e.treemapSliceDice=function(e,t,n,r,i){(1&e.depth?N:R)(e,t,n,r,i)},e.treemapSquarify=k,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],31:[function(e,t,n){var r,i;r=this,i=function(e,l){function u(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function t(o){var s=o.length-1;return function(e){var t=e<=0?e=0:1<=e?s-(e=1):Math.floor(e*s),n=o[t],r=o[t+1],i=0<t?o[t-1]:2*n-r,a=t<s-1?o[t+2]:2*r-n;return u((e-t/s)*s,i,n,r,a)}}function n(r){var i=r.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*i),n=r[(t+i-1)%i];return u((e-t/i)*i,n,r[t%i],r[(t+1)%i],r[(t+2)%i])}}function o(e){return function(){return e}}function r(t,n){return function(e){return t+e*n}}function i(e,t){var n=t-e;return n?r(e,180<n||n<-180?n-360*Math.round(n/360):n):o(isNaN(e)?t:e)}function a(a){return 1==(a=+a)?c:function(e,t){return t-e?(n=e,r=t,i=a,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(e){return Math.pow(n+e*r,i)}):o(isNaN(e)?t:e);var n,r,i}}function c(e,t){var n=t-e;return n?r(e,n):o(isNaN(e)?t:e)}var s=function e(t){var o=a(t);function n(t,e){var n=o((t=l.rgb(t)).r,(e=l.rgb(e)).r),r=o(t.g,e.g),i=o(t.b,e.b),a=c(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=i(e),t.opacity=a(e),t+""}}return n.gamma=e,n}(1);function h(s){return function(e){for(var t,n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o=0;o<n;++o)t=l.rgb(e[o]),r[o]=t.r||0,i[o]=t.g||0,a[o]=t.b||0;return r=s(r),i=s(i),a=s(a),t.opacity=1,function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t+""}}}var d=h(t),k=h(n);function f(t,n){n=n||[];var r,i=t?Math.min(n.length,t.length):0,a=n.slice();return function(e){for(r=0;r<i;++r)a[r]=t[r]*(1-e)+n[r]*e;return a}}function p(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function m(e,t){for(var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o=0;o<r;++o)i[o]=w(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(e){for(o=0;o<r;++o)a[o]=i[o](e);return a}}function g(t,n){var r=new Date;return t=+t,n=+n,function(e){return r.setTime(t*(1-e)+n*e),r}}function v(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function y(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),t=null!==t&&"object"==typeof t?t:{})n in e?r[n]=w(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var _=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x=new RegExp(_.source,"g");function b(e,r){var t,n,i,a,o,s=_.lastIndex=x.lastIndex=0,l=-1,u=[],c=[];for(e+="",r+="";(t=_.exec(e))&&(n=x.exec(r));)(i=n.index)>s&&(i=r.slice(s,i),u[l]?u[l]+=i:u[++l]=i),(t=t[0])===(n=n[0])?u[l]?u[l]+=n:u[++l]=n:(u[++l]=null,c.push({i:l,x:v(t,n)})),s=x.lastIndex;return s<r.length&&(i=r.slice(s),u[l]?u[l]+=i:u[++l]=i),u.length<2?c[0]?(o=c[0].x,function(e){return o(e)+""}):(a=r,function(){return a}):(r=c.length,function(e){for(var t,n=0;n<r;++n)u[(t=c[n]).i]=t.x(e);return u.join("")})}function w(e,t){var n=typeof t;return null==t||"boolean"==n?o(t):("number"==n?v:"string"==n?(n=l.color(t))?(t=n,s):b:t instanceof l.color?s:t instanceof Date?g:p(t)?f:Array.isArray(t)?m:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?y:v)(e,t)}var M,T,S,E,A=180/Math.PI,L={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function R(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*A,skewX:Math.atan(l)*A,scaleX:o,scaleY:s}}function C(d,f,p,m){function g(e){return e.length?e.pop()+" ":""}return function(e,t){var n,r,i,a,o,s,l,u,c=[],h=[];return e=d(e),t=d(t),r=e.translateX,i=e.translateY,l=t.translateX,o=t.translateY,s=c,a=h,r!==l||i!==o?(n=s.push("translate(",null,f,null,p),a.push({i:n-4,x:v(r,l)},{i:n-2,x:v(i,o)})):(l||o)&&s.push("translate("+l+f+o+p),a=e.rotate,r=c,n=h,a!==(i=t.rotate)?(180<a-i?i+=360:180<i-a&&(a+=360),n.push({i:r.push(g(r)+"rotate(",null,m)-2,x:v(a,i)})):i&&r.push(g(r)+"rotate("+i+m),s=e.skewX,l=c,o=h,s!==(a=t.skewX)?o.push({i:l.push(g(l)+"skewX(",null,m)-2,x:v(s,a)}):a&&l.push(g(l)+"skewX("+a+m),r=e.scaleX,i=e.scaleY,o=t.scaleY,s=c,l=h,r!==(a=t.scaleX)||i!==o?(u=s.push(g(s)+"scale(",null,",",null,")"),l.push({i:u-4,x:v(r,a)},{i:u-2,x:v(i,o)})):1===a&&1===o||s.push(g(s)+"scale("+a+","+o+")"),e=t=null,function(e){for(var t,n=-1,r=h.length;++n<r;)c[(t=h[n]).i]=t.x(e);return c.join("")}}}var B=C(function(e){return"none"===e?L:(M||(M=document.createElement("DIV"),T=document.documentElement,S=document.defaultView),M.style.transform=e,e=S.getComputedStyle(T.appendChild(M),null).getPropertyValue("transform"),T.removeChild(M),R(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),F=C(function(e){return null!=e&&((E=E||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",e),e=E.transform.baseVal.consolidate())?R((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):L},", ",")",")"),P=Math.SQRT2;function O(e){return((e=Math.exp(e))+1/e)/2}function D(o){return function(t,e){var n=o((t=l.hsl(t)).h,(e=l.hsl(e)).h),r=c(t.s,e.s),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=i(e),t.opacity=a(e),t+""}}}var U=D(i),z=D(c);function N(o){return function(t,e){var n=o((t=l.hcl(t)).h,(e=l.hcl(e)).h),r=c(t.c,e.c),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){return t.h=n(e),t.c=r(e),t.l=i(e),t.opacity=a(e),t+""}}}var H=N(i),G=N(c);function I(s){return function e(o){function t(t,e){var n=s((t=l.cubehelix(t)).h,(e=l.cubehelix(e)).h),r=c(t.s,e.s),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=i(Math.pow(e,o)),t.opacity=a(e),t+""}}return o=+o,t.gamma=e,t}(1)}var j=I(i),V=I(c);e.interpolate=w,e.interpolateArray=function(e,t){return(p(t)?f:m)(e,t)},e.interpolateBasis=t,e.interpolateBasisClosed=n,e.interpolateCubehelix=j,e.interpolateCubehelixLong=V,e.interpolateDate=g,e.interpolateDiscrete=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}},e.interpolateHcl=H,e.interpolateHclLong=G,e.interpolateHsl=U,e.interpolateHslLong=z,e.interpolateHue=function(e,t){var n=i(+e,+t);return function(e){e=n(e);return e-360*Math.floor(e/360)}},e.interpolateLab=function(t,e){var n=c((t=l.lab(t)).l,(e=l.lab(e)).l),r=c(t.a,e.a),i=c(t.b,e.b),a=c(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}},e.interpolateNumber=v,e.interpolateNumberArray=f,e.interpolateObject=y,e.interpolateRgb=s,e.interpolateRgbBasis=d,e.interpolateRgbBasisClosed=k,e.interpolateRound=function(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}},e.interpolateString=b,e.interpolateTransformCss=B,e.interpolateTransformSvg=F,e.interpolateZoom=function(e,t){var r,i,a,o=e[0],s=e[1],l=e[2],e=t[0],n=t[2],u=e-o,c=t[1]-s;return(n=(e=u*u+c*c)<1e-12?(a=Math.log(n/l)/P,function(e){return[o+e*u,s+e*c,l*Math.exp(P*e*a)]}):(r=Math.sqrt(e),t=(n*n-l*l+4*e)/(2*l*2*r),e=(n*n-l*l-4*e)/(2*n*2*r),i=Math.log(Math.sqrt(t*t+1)-t),a=(Math.log(Math.sqrt(e*e+1)-e)-i)/P,function(e){var e=e*a,t=O(i),n=l/(2*r)*(t*(n=P*e+i,((n=Math.exp(2*n))-1)/(n+1))-(n=i,((n=Math.exp(i))-1/n)/2));return[o+n*u,s+n*c,l*t/O(P*e+i)]})).duration=1e3*a,n},e.piecewise=function(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}},e.quantize=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-color":20}],32:[function(e,t,n){var r,i;r=this,i=function(e){var p=Math.PI,h=2*p,d=h-1e-6;function t(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new t}t.prototype=n.prototype={constructor:t,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){var a,o,s=this._x1,l=this._y1,u=(n=+n)-(e=+e),c=(r=+r)-(t=+t),h=s-e,d=l-t,f=h*h+d*d;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=e)+","+(this._y1=t):1e-6<f&&(1e-6<Math.abs(d*u-c*h)&&i?(o=u*u+c*c,r=(n=n-s)*n+(s=r-l)*s,l=Math.sqrt(o),a=Math.sqrt(f),f=(o=i*Math.tan((p-Math.acos((o+f-r)/(2*l*a)))/2))/a,r=o/l,1e-6<Math.abs(f-1)&&(this._+="L"+(e+f*h)+","+(t+f*d)),this._+="A"+i+","+i+",0,0,"+ +(h*s<d*n)+","+(this._x1=e+r*u)+","+(this._y1=t+r*c)):this._+="L"+(this._x1=e)+","+(this._y1=t))},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+o,u=t+s,c=1^a,a=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(1e-6<Math.abs(this._x1-l)||1e-6<Math.abs(this._y1-u))&&(this._+="L"+l+","+u),n&&(d<(a=a<0?a%h+h:a)?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):1e-6<a&&(this._+="A"+n+","+n+",0,"+ +(p<=a)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},e.path=n,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],33:[function(e,t,n){var r,i;r=this,i=function(e){function c(e,t){return e[0]-t[0]||e[1]-t[1]}function h(e){for(var t,n,r,i=e.length,a=[0,1],o=2,s=2;s<i;++s){for(;1<o&&(t=e[a[o-2]],r=e[s],((n=e[a[o-1]])[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])<=0);)--o;a[o++]=s}return a.slice(0,o)}e.polygonArea=function(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[1]*i[0]-t[0]*i[1];return a/2},e.polygonCentroid=function(e){for(var t,n,r=-1,i=e.length,a=0,o=0,s=e[i-1],l=0;++r<i;)t=s,s=e[r],l+=n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a/(l*=3),o/l]},e.polygonContains=function(e,t){for(var n,r,i=e.length,a=e[i-1],o=t[0],s=t[1],l=a[0],u=a[1],c=!1,h=0;h<i;++h)n=(a=e[h])[0],s<(r=a[1])!=s<u&&o<(l-n)*(s-r)/(u-r)+n&&(c=!c),l=n,u=r;return c},e.polygonHull=function(e){if((t=e.length)<3)return null;for(var t,n=new Array(t),r=new Array(t),i=0;i<t;++i)n[i]=[+e[i][0],+e[i][1],i];for(n.sort(c),i=0;i<t;++i)r[i]=[n[i][0],-n[i][1]];var a=h(n),o=h(r),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],u=[];for(i=a.length-1;0<=i;--i)u.push(e[n[a[i]][2]]);for(i=+s;i<o.length-l;++i)u.push(e[n[o[i]][2]]);return u},e.polygonLength=function(e){for(var t,n,r=-1,i=e.length,a=e[i-1],o=a[0],s=a[1],l=0;++r<i;)t=o,n=s,t-=o=(a=e[r])[0],n-=s=a[1],l+=Math.sqrt(t*t+n*n);return l},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],34:[function(e,t,n){var r,i;r=this,i=function(e){function h(e,t,n,r){if(!isNaN(t)&&!isNaN(n)){var i,a,o,s,l,u,c,h,d,f=e._root,p={data:r},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(f){for(;f.length;)if((u=t>=(a=(m+v)/2))?m=a:v=a,(c=n>=(o=(g+y)/2))?g=o:y=o,!(f=(i=f)[h=c<<1|u]))return i[h]=p,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&n===l)p.next=f,i?i[h]=p:e._root=p;else{for(;i=i?i[h]=new Array(4):e._root=new Array(4),(u=t>=(a=(m+v)/2))?m=a:v=a,(c=n>=(o=(g+y)/2))?g=o:y=o,(h=c<<1|u)==(d=(o<=l)<<1|a<=s););i[d]=f,i[h]=p}}else e._root=p}return e}function v(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function r(e){return e[0]}function i(e){return e[1]}function t(e,t,n){t=new a(null==t?r:t,null==n?i:n,NaN,NaN,NaN,NaN);return null==e?t:t.addAll(e)}function a(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function o(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var n=t.prototype=a.prototype;n.copy=function(){var e,t,n=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(r)if(r.length)for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=o(t));else n._root=o(r);return n},n.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return h(this.cover(t,n),t,n,e)},n.addAll=function(e){for(var t,n,r=e.length,i=new Array(r),a=new Array(r),o=1/0,s=1/0,l=-1/0,u=-1/0,c=0;c<r;++c)isNaN(t=+this._x.call(null,n=e[c]))||isNaN(n=+this._y.call(null,n))||((i[c]=t)<o&&(o=t),l<t&&(l=t),(a[c]=n)<s&&(s=n),u<n&&(u=n));if(!(l<o||u<s))for(this.cover(o,s).cover(l,u),c=0;c<r;++c)h(this,i[c],a[c],e[c]);return this},n.cover=function(e,t){if(!isNaN(e=+e)&&!isNaN(t=+t)){var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o,s,l=i-n,u=this._root;e<n||i<=e||t<r||a<=t;)switch(s=(t<r)<<1|e<n,(o=new Array(4))[s]=u,u=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=u)}this._x0=n,this._y0=r,this._x1=i,this._y1=a}return this},n.data=function(){var t=[];return this.visit(function(e){if(!e.length)for(;t.push(e.data),e=e.next;);}),t},n.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(e,t,n){var r,i,a,o,s,l,u,c,h=this._x0,d=this._y0,f=this._x1,p=this._y1,m=[],g=this._root;for(g&&m.push(new v(g,h,d,f,p)),null==n?n=1/0:(h=e-n,d=t-n,f=e+n,p=t+n,n*=n);r=m.pop();)!(g=r.node)||(s=r.x0)>f||(l=r.y0)>p||(o=r.x1)<h||(i=r.y1)<d||(g.length?(m.push(new v(g[3],a=(s+o)/2,u=(l+i)/2,o,i),new v(g[2],s,u,a,i),new v(g[1],a,l,o,u),new v(g[0],s,l,a,u)),(i=(u<=t)<<1|a<=e)&&(r=m[m.length-1],m[m.length-1]=m[m.length-1-i],m[m.length-1-i]=r)):(l=(o=e-+this._x.call(null,g.data))*o+(s=t-+this._y.call(null,g.data))*s)<n&&(h=e-(u=Math.sqrt(n=l)),d=t-u,f=e+u,p=t+u,c=g.data));return c},n.remove=function(e){if(!isNaN(a=+this._x.call(null,e))&&!isNaN(o=+this._y.call(null,e))){var t,n,r,i,a,o,s,l,u,c,h,d=this._root,f=this._x0,p=this._y0,m=this._x1,g=this._y1;if(d){if(d.length)for(;;){if((l=a>=(s=(f+m)/2))?f=s:m=s,(u=o>=(s=(p+g)/2))?p=s:g=s,!(d=(t=d)[c=u<<1|l]))return this;if(!d.length)break;(t[c+1&3]||t[c+2&3]||t[c+3&3])&&(n=t,h=c)}for(;d.data!==e;)if(!(d=(r=d).next))return this;(i=d.next)&&delete d.next,r?i?r.next=i:delete r.next:t?(i?t[c]=i:delete t[c],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(n?n[h]=d:this._root=d)):this._root=i}}return this},n.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},n.root=function(){return this._root},n.size=function(){var t=0;return this.visit(function(e){if(!e.length)for(;++t,e=e.next;);}),t},n.visit=function(e){var t,n,r,i,a,o,s,l=[],u=this._root;for(u&&l.push(new v(u,this._x0,this._y0,this._x1,this._y1));a=l.pop();)!e(u=a.node,n=a.x0,r=a.y0,i=a.x1,a=a.y1)&&u.length&&(o=(n+i)/2,s=(r+a)/2,(t=u[3])&&l.push(new v(t,o,s,i,a)),(t=u[2])&&l.push(new v(t,n,s,o,a)),(t=u[1])&&l.push(new v(t,o,r,i,s)),t=u[0])&&l.push(new v(t,n,r,o,s));return this},n.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new v(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i,a,o,s,l,u,c,h=t.node;h.length&&(a=t.x0,o=t.y0,u=(a+(s=t.x1))/2,c=(o+(l=t.y1))/2,(i=h[0])&&n.push(new v(i,a,o,u,c)),(i=h[1])&&n.push(new v(i,u,o,s,c)),(i=h[2])&&n.push(new v(i,a,c,u,l)),i=h[3])&&n.push(new v(i,u,c,s,l)),r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},n.x=function(e){return arguments.length?(this._x=e,this):this._x},n.y=function(e){return arguments.length?(this._y=e,this):this._y},e.quadtree=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],35:[function(e,t,n){var r,i;r=this,i=function(e){function t(){return Math.random()}var n=function e(n){function t(e,t){return e=null==e?0:+e,t=null==t?1:+t,1===arguments.length?(t=e,e=0):t-=e,function(){return n()*t+e}}return t.source=e,t}(t),r=function e(a){function t(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var e;if(null!=r)e=r,r=null;else for(;r=2*a()-1,e=2*a()-1,!(i=r*r+e*e)||1<i;);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}}return t.source=e,t}(t),i=function e(t){function n(){var e=r.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(t),a=function e(r){function t(n){return function(){for(var e=0,t=0;t<n;++t)e+=r();return e}}return t.source=e,t}(t),o=function e(n){function t(e){var t=a.source(n)(e);return function(){return t()/e}}return t.source=e,t}(t),s=function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(t);e.randomUniform=n,e.randomNormal=r,e.randomLogNormal=i,e.randomBates=o,e.randomIrwinHall=a,e.randomExponential=s,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],36:[function(e,t,n){var r,i;r=this,i=function(e,t,n){function r(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}var i=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),k=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),B=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),F=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),U=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),z=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),H=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),G=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),j=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),V=r("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function a(e){return t.interpolateRgbBasis(e[e.length-1])}var o=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r),W=a(o),s=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r),q=a(s),l=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r),X=a(l),u=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r),Y=a(u),c=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r),Z=a(c),h=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r),Q=a(h),d=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r),J=a(d),f=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r),K=a(f),p=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r),$=a(p),m=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r),ee=a(m),g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r),te=a(g),v=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r),ne=a(v),y=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r),re=a(y),_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r),ie=a(_),x=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r),ae=a(x),b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r),oe=a(b),w=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r),se=a(w),M=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r),le=a(M),T=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r),ue=a(T),S=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r),ce=a(S),E=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r),he=a(E),A=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r),de=a(A),L=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r),fe=a(L),R=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r),pe=a(R),C=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r),me=a(C),P=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r),ge=a(P),O=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r),ve=a(O);var ye=t.interpolateCubehelixLong(n.cubehelix(300,.5,0),n.cubehelix(-240,.5,1)),_e=t.interpolateCubehelixLong(n.cubehelix(-100,.75,.35),n.cubehelix(80,1.5,.8)),xe=t.interpolateCubehelixLong(n.cubehelix(260,.75,.35),n.cubehelix(80,1.5,.8)),D=n.cubehelix();var N=n.rgb(),be=Math.PI/3,we=2*Math.PI/3;function I(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var n=I(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Me=I(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Te=I(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Se=I(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));e.interpolateBlues=de,e.interpolateBrBG=W,e.interpolateBuGn=ee,e.interpolateBuPu=te,e.interpolateCividis=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"},e.interpolateCool=xe,e.interpolateCubehelixDefault=ye,e.interpolateGnBu=ne,e.interpolateGreens=fe,e.interpolateGreys=pe,e.interpolateInferno=Te,e.interpolateMagma=Me,e.interpolateOrRd=re,e.interpolateOranges=ve,e.interpolatePRGn=q,e.interpolatePiYG=X,e.interpolatePlasma=Se,e.interpolatePuBu=ae,e.interpolatePuBuGn=ie,e.interpolatePuOr=Y,e.interpolatePuRd=oe,e.interpolatePurples=me,e.interpolateRainbow=function(e){(e<0||1<e)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return D.h=360*e-100,D.s=1.5-1.5*t,D.l=.8-.9*t,D+""},e.interpolateRdBu=Z,e.interpolateRdGy=Q,e.interpolateRdPu=se,e.interpolateRdYlBu=J,e.interpolateRdYlGn=K,e.interpolateReds=ge,e.interpolateSinebow=function(e){var t;return e=(.5-e)*Math.PI,N.r=255*(t=Math.sin(e))*t,N.g=255*(t=Math.sin(e+be))*t,N.b=255*(t=Math.sin(e+we))*t,N+""},e.interpolateSpectral=$,e.interpolateTurbo=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"},e.interpolateViridis=n,e.interpolateWarm=_e,e.interpolateYlGn=ue,e.interpolateYlGnBu=le,e.interpolateYlOrBr=ce,e.interpolateYlOrRd=he,e.schemeAccent=k,e.schemeBlues=A,e.schemeBrBG=o,e.schemeBuGn=m,e.schemeBuPu=g,e.schemeCategory10=i,e.schemeDark2=B,e.schemeGnBu=v,e.schemeGreens=L,e.schemeGreys=R,e.schemeOrRd=y,e.schemeOranges=O,e.schemePRGn=s,e.schemePaired=F,e.schemePastel1=U,e.schemePastel2=z,e.schemePiYG=l,e.schemePuBu=x,e.schemePuBuGn=_,e.schemePuOr=u,e.schemePuRd=b,e.schemePurples=C,e.schemeRdBu=c,e.schemeRdGy=h,e.schemeRdPu=w,e.schemeRdYlBu=d,e.schemeRdYlGn=f,e.schemeReds=P,e.schemeSet1=H,e.schemeSet2=G,e.schemeSet3=j,e.schemeSpectral=p,e.schemeTableau10=V,e.schemeYlGn=T,e.schemeYlGnBu=M,e.schemeYlOrBr=S,e.schemeYlOrRd=E,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-interpolate"),e("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-interpolate","d3-color"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3)},{"d3-color":20,"d3-interpolate":31}],37:[function(e,t,n){var r,i;r=this,i=function(e,l,T,f,s,t,n){function p(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function r(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}var i=Array.prototype,S=i.map,m=i.slice,u={name:"implicit"};function g(){var a=l.map(),o=[],r=[],i=u;function s(e){var t=e+"",n=a.get(t);if(!n){if(i!==u)return i;a.set(t,n=o.push(e))}return r[(n-1)%r.length]}return s.domain=function(e){if(!arguments.length)return o.slice();o=[],a=l.map();for(var t,n,r=-1,i=e.length;++r<i;)a.has(n=(t=e[r])+"")||a.set(n,o.push(t));return s},s.range=function(e){return arguments.length?(r=m.call(e),s):r.slice()},s.unknown=function(e){return arguments.length?(i=e,s):i},s.copy=function(){return g(o,r).unknown(i)},p.apply(s,arguments),s}function v(){var i,a,e=g().unknown(void 0),o=e.domain,s=e.range,l=[0,1],u=!1,c=0,h=0,d=.5;function t(){var e=o().length,t=l[1]<l[0],n=l[+t],r=l[1-t],r=(i=(r-n)/Math.max(1,e-c+2*h),u&&(i=Math.floor(i)),n+=(r-n-i*(e-c))*d,a=i*(1-c),u&&(n=Math.round(n),a=Math.round(a)),T.range(e).map(function(e){return n+i*e}));return s(t?r.reverse():r)}return delete e.unknown,e.domain=function(e){return(arguments.length?(o(e),t):o)()},e.range=function(e){return arguments.length?(l=[+e[0],+e[1]],t()):l.slice()},e.rangeRound=function(e){return l=[+e[0],+e[1]],u=!0,t()},e.bandwidth=function(){return a},e.step=function(){return i},e.round=function(e){return arguments.length?(u=!!e,t()):u},e.padding=function(e){return arguments.length?(c=Math.min(1,h=+e),t()):c},e.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),t()):c},e.paddingOuter=function(e){return arguments.length?(h=+e,t()):h},e.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),t()):d},e.copy=function(){return v(o(),l).round(u).paddingInner(c).paddingOuter(h).align(d)},p.apply(t(),arguments)}function y(e){return+e}var k=[0,1];function E(e){return e}function c(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function B(e){var t=e[0],n=e[e.length-1];return n<t&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}function F(e,t,n){var r=e[0],e=e[1],i=t[0],t=t[1],i=e<r?(r=c(e,r),n(t,i)):(r=c(r,e),n(i,t));return function(e){return i(r(e))}}function U(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=c(n[o],n[o+1]),a[o]=t(e[o],e[o+1]);return function(e){var t=T.bisect(n,e,1,r)-1;return a[t](i[t](e))}}function A(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function a(){var n,r,t,i,a,o,s=k,l=k,u=f.interpolate,c=E;function h(){return i=2<Math.min(s.length,l.length)?U:F,a=o=null,d}function d(e){return isNaN(e=+e)?t:(a=a||i(s.map(n),l,u))(n(c(e)))}return d.invert=function(e){return c(r((o=o||i(l,s.map(n),f.interpolateNumber))(e)))},d.domain=function(e){return arguments.length?(s=S.call(e,y),c!==E&&(c=B(s)),h()):s.slice()},d.range=function(e){return arguments.length?(l=m.call(e),h()):l.slice()},d.rangeRound=function(e){return l=m.call(e),u=f.interpolateRound,h()},d.clamp=function(e){return arguments.length?(c=e?B(s):E,d):c!==E},d.interpolate=function(e){return arguments.length?(u=e,h()):u},d.unknown=function(e){return arguments.length?(t=e,d):t},function(e,t){return n=e,r=t,h()}}function z(e,t){return a()(e,t)}function H(e,t,n,r){var i,a=T.tickStep(e,t,n);switch((r=s.formatSpecifier(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=s.precisionPrefix(a,o))||(r.precision=i),s.formatPrefix(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=s.precisionRound(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=s.precisionFixed(a))||(r.precision=i-2*("%"===r.type))}return s.format(r)}function h(s){var l=s.domain;return s.ticks=function(e){var t=l();return T.ticks(t[0],t[t.length-1],null==e?10:e)},s.tickFormat=function(e,t){var n=l();return H(n[0],n[n.length-1],null==e?10:e,t)},s.nice=function(e){null==e&&(e=10);var t,n=l(),r=0,i=n.length-1,a=n[r],o=n[i];return o<a&&(t=a,a=o,o=t,t=r,r=i,i=t),0<(t=T.tickIncrement(a,o,e))?(a=Math.floor(a/t)*t,o=Math.ceil(o/t)*t,t=T.tickIncrement(a,o,e)):t<0&&(a=Math.ceil(a*t)/t,o=Math.floor(o*t)/t,t=T.tickIncrement(a,o,e)),0<t?(n[r]=Math.floor(a/t)*t,n[i]=Math.ceil(o/t)*t,l(n)):t<0&&(n[r]=Math.ceil(a*t)/t,n[i]=Math.floor(o*t)/t,l(n)),s},s}function G(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function j(e){return Math.log(e)}function V(e){return Math.exp(e)}function W(e){return-Math.log(-e)}function q(e){return-Math.exp(-e)}function X(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Y(t){return function(e){return-t(-e)}}function o(e){var c,h,i=e(j,V),d=i.domain,f=10;function t(){var t,n;return c=(n=f)===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(e){return Math.log(e)/n}),h=10===(t=f)?X:t===Math.E?Math.exp:function(e){return Math.pow(t,e)},d()[0]<0?(c=Y(c),h=Y(h),e(W,q)):e(j,V),i}return i.base=function(e){return arguments.length?(f=+e,t()):f},i.domain=function(e){return(arguments.length?(d(e),t):d)()},i.ticks=function(e){var t,n,r,i=d(),a=i[0],o=i[i.length-1],s=((i=o<a)&&(s=a,a=o,o=s),c(a)),l=c(o),e=null==e?10:+e,u=[];if(!(f%1)&&l-s<e){if(s=Math.round(s)-1,l=Math.round(l)+1,0<a){for(;s<l;++s)for(n=1,t=h(s);n<f;++n)if(!((r=t*n)<a)){if(o<r)break;u.push(r)}}else for(;s<l;++s)for(n=f-1,t=h(s);1<=n;--n)if(!((r=t*n)<a)){if(o<r)break;u.push(r)}}else u=T.ticks(s,l,Math.min(l-s,e)).map(h);return i?u.reverse():u},i.tickFormat=function(e,n){if("function"!=typeof(n=null==n?10===f?".0e":",":n)&&(n=s.format(n)),e===1/0)return n;null==e&&(e=10);var r=Math.max(1,f*e/i.ticks().length);return function(e){var t=e/h(Math.round(c(e)));return t*f<f-.5&&(t*=f),t<=r?n(e):""}},i.nice=function(){return d(G(d(),{floor:function(e){return h(Math.floor(c(e)))},ceil:function(e){return h(Math.ceil(c(e)))}}))},i}function Z(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Q(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function d(t){var n=1,e=t(Z(n),Q(n));return e.constant=function(e){return arguments.length?t(Z(n=+e),Q(n)):n},h(e)}function J(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function K(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function $(e){return e<0?-e*e:e*e}function _(t){var e=t(E,E),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(E,E):.5===n?t(K,$):t(J(n),J(1/n)):n},h(e)}function x(){var e=_(a());return e.copy=function(){return A(e,x()).exponent(e.exponent())},p.apply(e,arguments),e}var L=1e3,R=60*L,C=60*R,P=24*C,ee=7*P,te=30*P,O=365*P;function ne(e){return new Date(e)}function re(e){return e instanceof Date?+e:+new Date(+e)}function D(o,t,n,r,i,a,s,l,u){var c=z(E,E),h=c.invert,d=c.domain,f=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),_=u("%B"),x=u("%Y"),b=[[s,1,L],[s,5,5*L],[s,15,15*L],[s,30,30*L],[a,1,R],[a,5,5*R],[a,15,15*R],[a,30,30*R],[i,1,C],[i,3,3*C],[i,6,6*C],[i,12,12*C],[r,1,P],[r,2,2*P],[n,1,ee],[t,1,te],[t,3,3*te],[o,1,O]];function w(e){return(s(e)<e?f:a(e)<e?p:i(e)<e?m:r(e)<e?g:t(e)<e?n(e)<e?v:y:o(e)<e?_:x)(e)}function M(e,t,n,r){var i,a;return"number"==typeof(e=null==e?10:e)&&(i=Math.abs(n-t)/e,e=(a=T.bisector(function(e){return e[2]}).right(b,i))===b.length?(r=T.tickStep(t/O,n/O,e),o):a?(r=(a=b[i/b[a-1][2]<b[a][2]/i?a-1:a])[1],a[0]):(r=Math.max(T.tickStep(t,n,e),1),l)),null==r?e:e.every(r)}return c.invert=function(e){return new Date(h(e))},c.domain=function(e){return arguments.length?d(S.call(e,re)):d().map(ne)},c.ticks=function(e,t){var n,r=d(),i=r[0],r=r[r.length-1],a=r<i;return a&&(n=i,i=r,r=n),n=(n=M(e,i,r,t))?n.range(i,r+1):[],a?n.reverse():n},c.tickFormat=function(e,t){return null==t?w:u(t)},c.nice=function(e,t){var n=d();return(e=M(e,n[0],n[n.length-1],t))?d(G(n,e)):c},c.copy=function(){return A(c,D(o,t,n,r,i,a,s,l,u))},c}function b(){var t,n,r,i,a,o=0,s=1,l=E,u=!1;function c(e){return isNaN(e=+e)?a:l(0===r?.5:(e=(i(e)-t)*r,u?Math.max(0,Math.min(1,e)):e))}return c.domain=function(e){return arguments.length?(t=i(o=+e[0]),n=i(s=+e[1]),r=t===n?0:1/(n-t),c):[o,s]},c.clamp=function(e){return arguments.length?(u=!!e,c):u},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.unknown=function(e){return arguments.length?(a=e,c):a},function(e){return t=(i=e)(o),n=e(s),r=t===n?0:1/(n-t),c}}function w(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function M(){var e=_(b());return e.copy=function(){return w(e,M()).exponent(e.exponent())},r.apply(e,arguments)}function N(){var t,n,r,i,a,o,s,l=0,u=.5,c=1,h=E,d=!1;function f(e){return isNaN(e=+e)?s:(e=.5+((e=+o(e))-n)*(e<n?i:a),h(d?Math.max(0,Math.min(1,e)):e))}return f.domain=function(e){return arguments.length?(t=o(l=+e[0]),n=o(u=+e[1]),r=o(c=+e[2]),i=t===n?0:.5/(n-t),a=n===r?0:.5/(r-n),f):[l,u,c]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(h=e,f):h},f.unknown=function(e){return arguments.length?(s=e,f):s},function(e){return t=(o=e)(l),n=e(u),r=e(c),i=t===n?0:.5/(n-t),a=n===r?0:.5/(r-n),f}}function I(){var e=_(N());return e.copy=function(){return w(e,I()).exponent(e.exponent())},r.apply(e,arguments)}e.scaleBand=v,e.scalePoint=function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(n())},t}(v.apply(null,arguments).paddingInner(1))},e.scaleIdentity=function e(t){var n;function r(e){return isNaN(e=+e)?n:e}return(r.invert=r).domain=r.range=function(e){return arguments.length?(t=S.call(e,y),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?S.call(t,y):[0,1],h(r)},e.scaleLinear=function e(){var t=z(E,E);return t.copy=function(){return A(t,e())},p.apply(t,arguments),h(t)},e.scaleLog=function e(){var t=o(a()).domain([1,10]);return t.copy=function(){return A(t,e()).base(t.base())},p.apply(t,arguments),t},e.scaleSymlog=function e(){var t=d(a());return t.copy=function(){return A(t,e()).constant(t.constant())},p.apply(t,arguments)},e.scaleOrdinal=g,e.scaleImplicit=u,e.scalePow=x,e.scaleSqrt=function(){return x.apply(null,arguments).exponent(.5)},e.scaleQuantile=function e(){var t,i=[],n=[],r=[];function a(){var e=0,t=Math.max(1,n.length);for(r=new Array(t-1);++e<t;)r[e-1]=T.quantile(i,e/t);return o}function o(e){return isNaN(e=+e)?t:n[T.bisect(r,e)]}return o.invertExtent=function(e){return(e=n.indexOf(e))<0?[NaN,NaN]:[0<e?r[e-1]:i[0],e<r.length?r[e]:i[i.length-1]]},o.domain=function(e){if(!arguments.length)return i.slice();i=[];for(var t,n=0,r=e.length;n<r;++n)null==(t=e[n])||isNaN(t=+t)||i.push(t);return i.sort(T.ascending),a()},o.range=function(e){return arguments.length?(n=m.call(e),a()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return e().domain(i).range(n).unknown(t)},p.apply(o,arguments)},e.scaleQuantize=function e(){var t,n=0,r=1,i=1,a=[.5],o=[0,1];function s(e){return e<=e?o[T.bisect(a,e,0,i)]:t}function l(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],l()):[n,r]},s.range=function(e){return arguments.length?(i=(o=m.call(e)).length-1,l()):o.slice()},s.invertExtent=function(e){return(e=o.indexOf(e))<0?[NaN,NaN]:e<1?[n,a[0]]:i<=e?[a[i-1],r]:[a[e-1],a[e]]},s.unknown=function(e){return arguments.length&&(t=e),s},s.thresholds=function(){return a.slice()},s.copy=function(){return e().domain([n,r]).range(o).unknown(t)},p.apply(h(s),arguments)},e.scaleThreshold=function e(){var t,n=[.5],r=[0,1],i=1;function a(e){return e<=e?r[T.bisect(n,e,0,i)]:t}return a.domain=function(e){return arguments.length?(n=m.call(e),i=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(e){return arguments.length?(r=m.call(e),i=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(e){return e=r.indexOf(e),[n[e-1],n[e]]},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e().domain(n).range(r).unknown(t)},p.apply(a,arguments)},e.scaleTime=function(){return p.apply(D(t.timeYear,t.timeMonth,t.timeWeek,t.timeDay,t.timeHour,t.timeMinute,t.timeSecond,t.timeMillisecond,n.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},e.scaleUtc=function(){return p.apply(D(t.utcYear,t.utcMonth,t.utcWeek,t.utcDay,t.utcHour,t.utcMinute,t.utcSecond,t.utcMillisecond,n.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},e.scaleSequential=function e(){var t=h(b()(E));return t.copy=function(){return w(t,e())},r.apply(t,arguments)},e.scaleSequentialLog=function e(){var t=o(b()).domain([1,10]);return t.copy=function(){return w(t,e()).base(t.base())},r.apply(t,arguments)},e.scaleSequentialPow=M,e.scaleSequentialSqrt=function(){return M.apply(null,arguments).exponent(.5)},e.scaleSequentialSymlog=function e(){var t=d(b());return t.copy=function(){return w(t,e()).constant(t.constant())},r.apply(t,arguments)},e.scaleSequentialQuantile=function e(){var i=[],t=E;function a(e){if(!isNaN(e=+e))return t((T.bisect(i,e)-1)/(i.length-1))}return a.domain=function(e){if(!arguments.length)return i.slice();i=[];for(var t,n=0,r=e.length;n<r;++n)null==(t=e[n])||isNaN(t=+t)||i.push(t);return i.sort(T.ascending),a},a.interpolator=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e(t).domain(i)},r.apply(a,arguments)},e.scaleDiverging=function e(){var t=h(N()(E));return t.copy=function(){return w(t,e())},r.apply(t,arguments)},e.scaleDivergingLog=function e(){var t=o(N()).domain([.1,1,10]);return t.copy=function(){return w(t,e()).base(t.base())},r.apply(t,arguments)},e.scaleDivergingPow=I,e.scaleDivergingSqrt=function(){return I.apply(null,arguments).exponent(.5)},e.scaleDivergingSymlog=function e(){var t=d(N());return t.copy=function(){return w(t,e()).constant(t.constant())},r.apply(t,arguments)},e.tickFormat=H,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-collection"),e("d3-array"),e("d3-interpolate"),e("d3-format"),e("d3-time"),e("d3-time-format")):"function"==typeof define&&define.amd?define(["exports","d3-collection","d3-array","d3-interpolate","d3-format","d3-time","d3-time-format"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-array":15,"d3-collection":19,"d3-format":28,"d3-interpolate":31,"d3-time":41,"d3-time-format":40}],38:[function(e,t,n){var r,i;r=this,i=function(a){var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.hasOwnProperty(t)?{space:i[t],local:e}:e}function s(e){e=o(e);return(e.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===r&&e.documentElement.namespaceURI===r?e.createElement(n):e.createElementNS(t,n)}})(e)}function t(){}function h(e){return null==e?t:function(){return this.querySelector(e)}}function n(){return[]}function c(e){return null==e?n:function(){return this.querySelectorAll(e)}}function d(e){return function(){return this.matches(e)}}function e(e){return new Array(e.length)}function p(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}p.prototype={constructor:p,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var m="$";function w(e,t,n,r,i,a){for(var o,s=0,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new p(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function M(e,t,n,r,i,a,o){for(var s,l,u={},c=t.length,h=a.length,d=new Array(c),f=0;f<c;++f)(s=t[f])&&(d[f]=l=m+o.call(s,s.__data__,f,t),l in u?i[f]=s:u[l]=s);for(f=0;f<h;++f)(s=u[l=m+o.call(e,a[f],f,a)])?((r[f]=s).__data__=a[f],u[l]=null):n[f]=new p(e,a[f]);for(f=0;f<c;++f)(s=t[f])&&u[d[f]]===s&&(i[f]=s)}function f(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function l(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function u(e,t){return e.style.getPropertyValue(t)||l(e).getComputedStyle(e,null).getPropertyValue(t)}function g(e){return e.trim().split(/^|\s+/)}function v(e){return e.classList||new y(e)}function y(e){this._node=e,this._names=g(e.getAttribute("class")||"")}function _(e,t){for(var n=v(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function x(e,t){for(var n=v(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function b(){this.textContent=""}function T(){this.innerHTML=""}function k(){this.nextSibling&&this.parentNode.appendChild(this)}function B(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function F(){return null}function U(){var e=this.parentNode;e&&e.removeChild(this)}function z(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function H(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}y.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){e=this._names.indexOf(e);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var S={};function G(n,e,t){return n=E(n,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}function E(n,r,i){return function(e){var t=a.event;a.event=e;try{n.call(this,this.__data__,r,i)}finally{a.event=t}}}function j(a){return function(){var e=this.__on;if(e){for(var t,n=0,r=-1,i=e.length;n<i;++n)t=e[n],a.type&&t.type!==a.type||t.name!==a.name?e[++r]=t:this.removeEventListener(t.type,t.listener,t.capture);++r?e.length=r:delete this.__on}}}function V(l,u,c){var h=S.hasOwnProperty(l.type)?G:E;return function(e,t,n){var r,i=this.__on,a=h(u,t,n);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===l.type&&r.name===l.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=a,r.capture=c),void(r.value=u);this.addEventListener(l.type,a,c),r={type:l.type,name:l.name,value:u,listener:a,capture:c},i?i.push(r):this.__on=[r]}}function A(e,t,n){var r=l(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}a.event=null,"undefined"==typeof document||"onmouseenter"in document.documentElement||(S={mouseenter:"mouseover",mouseleave:"mouseout"});var L=[null];function R(e,t){this._groups=e,this._parents=t}function C(){return new R([[document.documentElement]],L)}function P(e){return"string"==typeof e?new R([[document.querySelector(e)]],[document.documentElement]):new R([[e]],L)}R.prototype=C.prototype={constructor:R,select:function(e){"function"!=typeof e&&(e=h(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=t[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new R(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=c(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,s=t[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(r.push(e.call(o,o.__data__,u,s)),i.push(o));return new R(r,i)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new R(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),c=-1,this.each(function(e){p[++c]=e}),p;var n,r=t?M:w,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var h=i[c],d=a[c],f=d.length,p=e.call(h,h&&h.__data__,c,i),m=p.length,g=l[c]=new Array(m),v=s[c]=new Array(m);r(h,d,g,v,u[c]=new Array(f),p,t);for(var y,_,x=0,b=0;x<m;++x)if(y=g[x]){for(b<=x&&(b=x+1);!(_=v[b])&&++b<m;);y._next=_||null}}return(s=new R(s,i))._enter=l,s._exit=u,s},enter:function(){return new R(this._enter||this._groups.map(e),this._parents)},exit:function(){return new R(this._exit||this._groups.map(e),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit(),r="function"==typeof e?e(r):r.append(e+"");return null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,e=n.length,i=Math.min(r,e),a=new Array(r),o=0;o<i;++o)for(var s,l=t[o],u=n[o],c=l.length,h=a[o]=new Array(c),d=0;d<c;++d)(s=l[d]||u[d])&&(h[d]=s);for(;o<r;++o)a[o]=t[o];return new R(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];0<=--a;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n=n||f;for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a){for(var o,s=t[a],l=s.length,u=i[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(e)}return new R(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n,e=o(e);return arguments.length<2?(n=this.node(),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)):this.each((null==t?e.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(e,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):u(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=g(e+"");if(arguments.length<2){for(var r=v(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?_:x)(this,e)}}:t?function(e){return function(){_(this,e)}}:function(e){return function(){x(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?b:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?T:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(k)},lower:function(){return this.each(B)},append:function(e){var t="function"==typeof e?e:s(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:s(e),r=null==t?F:"function"==typeof t?t:h(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(U)},clone:function(e){return this.select(e?H:z)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),o=a.length;if(!(arguments.length<2)){for(s=t?V:j,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return A(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return A(this,e,t)}})(e,t))}};var W=0;function O(){return new D}function D(){this._="@"+(++W).toString(36)}function N(){for(var e,t=a.event;e=t.sourceEvent;)t=e;return t}function I(e,t){var n=e.ownerSVGElement||e;return n.createSVGPoint?((n=n.createSVGPoint()).x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]):(n=e.getBoundingClientRect(),[t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop])}D.prototype=O.prototype={constructor:D,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}},a.clientPoint=I,a.create=function(e){return P(s(e).call(document.documentElement))},a.creator=s,a.customEvent=function(e,t,n,r){var i=a.event;e.sourceEvent=a.event,a.event=e;try{return t.apply(n,r)}finally{a.event=i}},a.local=O,a.matcher=d,a.mouse=function(e){var t=N();return I(e,t=t.changedTouches?t.changedTouches[0]:t)},a.namespace=o,a.namespaces=i,a.select=P,a.selectAll=function(e){return"string"==typeof e?new R([document.querySelectorAll(e)],[document.documentElement]):new R([null==e?[]:e],L)},a.selection=C,a.selector=h,a.selectorAll=c,a.style=u,a.touch=function(e,t,n){arguments.length<3&&(n=t,t=N().changedTouches);for(var r,i=0,a=t?t.length:0;i<a;++i)if((r=t[i]).identifier===n)return I(e,r);return null},a.touches=function(e,t){for(var n=0,r=(t=null==t?N().touches:t)?t.length:0,i=new Array(r);n<r;++n)i[n]=I(e,t[n]);return i},a.window=l,Object.defineProperty(a,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],39:[function(e,t,n){var r,i;r=this,i=function(e,k){function _(e){return function(){return e}}var X=Math.abs,B=Math.atan2,F=Math.cos,S=Math.max,U=Math.min,z=Math.sin,H=Math.sqrt,G=1e-12,j=Math.PI,V=j/2,W=2*j;function Y(e){return 1<=e?V:e<=-1?-V:Math.asin(e)}function E(e){return e.innerRadius}function A(e){return e.outerRadius}function Z(e){return e.startAngle}function Q(e){return e.endAngle}function J(e){return e&&e.padAngle}function q(e,t,n,r,i,a,o){var s=e-n,l=t-r,o=(o?a:-a)/H(s*s+l*l),l=o*l,o=-o*s,s=e+l,e=t+o,t=n+l,n=r+o,r=(s+t)/2,u=(e+n)/2,c=t-s,h=n-e,d=c*c+h*h,a=i-a,s=s*n-t*e,n=(h<0?-1:1)*H(S(0,a*a*d-s*s)),t=(s*h-c*n)/d,e=(-s*c-h*n)/d,f=(s*h+c*n)/d,s=(-s*c+h*n)/d,c=t-r,h=e-u,n=f-r,d=s-u;return n*n+d*d<c*c+h*h&&(t=f,e=s),{cx:t,cy:e,x01:-l,y01:-o,x11:t*(i/a-1),y11:e*(i/a-1)}}function L(e){this._context=e}function n(e){return new L(e)}function r(e){return e[0]}function y(e){return e[1]}function i(){var o=r,s=y,l=_(!0),u=null,c=n,h=null;function t(e){var t,n,r,i=e.length,a=!1;for(null==u&&(h=c(r=k.path())),t=0;t<=i;++t)!(t<i&&l(n=e[t],t,e))===a&&((a=!a)?h.lineStart():h.lineEnd()),a&&h.point(+o(n,t,e),+s(n,t,e));if(r)return h=null,r+""||null}return t.x=function(e){return arguments.length?(o="function"==typeof e?e:_(+e),t):o},t.y=function(e){return arguments.length?(s="function"==typeof e?e:_(+e),t):s},t.defined=function(e){return arguments.length?(l="function"==typeof e?e:_(!!e),t):l},t.curve=function(e){return arguments.length?(c=e,null!=u&&(h=c(u)),t):c},t.context=function(e){return arguments.length?(null==e?u=h=null:h=c(u=e),t):u},t}function R(){var c=r,h=null,d=_(0),f=y,p=_(!0),m=null,g=n,v=null;function t(e){var t,n,r,i,a,o=e.length,s=!1,l=new Array(o),u=new Array(o);for(null==m&&(v=g(a=k.path())),t=0;t<=o;++t){if(!(t<o&&p(i=e[t],t,e))===s)if(s=!s)n=t,v.areaStart(),v.lineStart();else{for(v.lineEnd(),v.lineStart(),r=t-1;n<=r;--r)v.point(l[r],u[r]);v.lineEnd(),v.areaEnd()}s&&(l[t]=+c(i,t,e),u[t]=+d(i,t,e),v.point(h?+h(i,t,e):l[t],f?+f(i,t,e):u[t]))}if(a)return v=null,a+""||null}function e(){return i().defined(p).curve(g).context(m)}return t.x=function(e){return arguments.length?(c="function"==typeof e?e:_(+e),h=null,t):c},t.x0=function(e){return arguments.length?(c="function"==typeof e?e:_(+e),t):c},t.x1=function(e){return arguments.length?(h=null==e?null:"function"==typeof e?e:_(+e),t):h},t.y=function(e){return arguments.length?(d="function"==typeof e?e:_(+e),f=null,t):d},t.y0=function(e){return arguments.length?(d="function"==typeof e?e:_(+e),t):d},t.y1=function(e){return arguments.length?(f=null==e?null:"function"==typeof e?e:_(+e),t):f},t.lineX0=t.lineY0=function(){return e().x(c).y(d)},t.lineY1=function(){return e().x(c).y(f)},t.lineX1=function(){return e().x(h).y(d)},t.defined=function(e){return arguments.length?(p="function"==typeof e?e:_(!!e),t):p},t.curve=function(e){return arguments.length?(g=e,null!=m&&(v=g(m)),t):g},t.context=function(e){return arguments.length?(null==e?m=v=null:v=g(m=e),t):m},t}function C(e,t){return t<e?-1:e<t?1:e<=t?0:NaN}function P(e){return e}L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var O=o(n);function D(e){this._curve=e}function o(t){function e(e){return new D(t(e))}return e._curve=t,e}function s(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(o(e)):t()._curve},e}function N(){return s(i().curve(O))}function I(){var e=R().curve(O),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,a=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return s(n())},delete e.lineX0,e.lineEndAngle=function(){return s(r())},delete e.lineX1,e.lineInnerRadius=function(){return s(i())},delete e.lineY0,e.lineOuterRadius=function(){return s(a())},delete e.lineY1,e.curve=function(e){return arguments.length?t(o(e)):t()._curve},e}function l(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}D.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var c=Array.prototype.slice;function K(e){return e.source}function $(e){return e.target}function t(i){var a=K,o=$,s=r,l=y,u=null;function t(){var e,t=c.call(arguments),n=a.apply(this,t),r=o.apply(this,t);if(u=u||(e=k.path()),i(u,+s.apply(this,(t[0]=n,t)),+l.apply(this,t),+s.apply(this,(t[0]=r,t)),+l.apply(this,t)),e)return u=null,e+""||null}return t.source=function(e){return arguments.length?(a=e,t):a},t.target=function(e){return arguments.length?(o=e,t):o},t.x=function(e){return arguments.length?(s="function"==typeof e?e:_(+e),t):s},t.y=function(e){return arguments.length?(l="function"==typeof e?e:_(+e),t):l},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t}function ee(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function te(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,r,n,r,i)}function ne(e,t,n,r,i){var a=l(t,n),t=l(t,n=(n+i)/2),n=l(r,n),r=l(r,i);e.moveTo(a[0],a[1]),e.bezierCurveTo(t[0],t[1],n[0],n[1],r[0],r[1])}var a={draw:function(e,t){t=Math.sqrt(t/j);e.moveTo(t,0),e.arc(0,0,t,0,W)}},re={draw:function(e,t){t=Math.sqrt(t/5)/2;e.moveTo(-3*t,-t),e.lineTo(-t,-t),e.lineTo(-t,-3*t),e.lineTo(t,-3*t),e.lineTo(t,-t),e.lineTo(3*t,-t),e.lineTo(3*t,t),e.lineTo(t,t),e.lineTo(t,3*t),e.lineTo(-t,3*t),e.lineTo(-t,t),e.lineTo(-3*t,t),e.closePath()}},ie=Math.sqrt(1/3),ae=2*ie,oe={draw:function(e,t){var t=Math.sqrt(t/ae),n=t*ie;e.moveTo(0,-t),e.lineTo(n,0),e.lineTo(0,t),e.lineTo(-n,0),e.closePath()}},u=Math.sin(j/10)/Math.sin(7*j/10),se=Math.sin(W/10)*u,le=-Math.cos(W/10)*u,u={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=se*n,i=le*n;e.moveTo(0,-n),e.lineTo(r,i);for(var a=1;a<5;++a){var o=W*a/5,s=Math.cos(o),o=Math.sin(o);e.lineTo(o*n,-s*n),e.lineTo(s*r-o*i,o*r+s*i)}e.closePath()}},ue={draw:function(e,t){var t=Math.sqrt(t),n=-t/2;e.rect(n,n,t,t)}},h=Math.sqrt(3),ce={draw:function(e,t){t=-Math.sqrt(t/(3*h));e.moveTo(0,2*t),e.lineTo(-h*t,-t),e.lineTo(h*t,-t),e.closePath()}},d=Math.sqrt(3)/2,f=1/Math.sqrt(12),he=3*(f/2+1),de={draw:function(e,t){var t=Math.sqrt(t/he),n=t/2,r=t*f,i=n,t=t*f+t,a=-i,o=t;e.moveTo(n,r),e.lineTo(i,t),e.lineTo(a,o),e.lineTo(-.5*n-d*r,d*n+-.5*r),e.lineTo(-.5*i-d*t,d*i+-.5*t),e.lineTo(-.5*a-d*o,d*a+-.5*o),e.lineTo(-.5*n+d*r,-.5*r-d*n),e.lineTo(-.5*i+d*t,-.5*t-d*i),e.lineTo(-.5*a+d*o,-.5*o-d*a),e.closePath()}},fe=[a,re,oe,ue,u,ce,de];function p(){}function m(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function g(e){this._context=e}function pe(e){this._context=e}function me(e){this._context=e}function ge(e,t){this._basis=new g(e),this._beta=t}g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:m(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:m(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},pe.prototype={areaStart:p,areaEnd:p,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:m(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:m(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ge.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(0<n)for(var r,i=e[0],a=t[0],o=e[n]-i,s=t[n]-a,l=-1;++l<=n;)this._basis.point(this._beta*e[l]+(1-this._beta)*(i+(r=l/n)*o),this._beta*t[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var ve=function t(n){function e(e){return 1===n?new g(e):new ge(e,n)}return e.beta=function(e){return t(+e)},e}(.85);function v(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function x(e,t){this._context=e,this._k=(1-t)/6}x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:v(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:v(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ye=function t(n){function e(e){return new x(e,n)}return e.tension=function(e){return t(+e)},e}(0);function _e(e,t){this._context=e,this._k=(1-t)/6}_e.prototype={areaStart:p,areaEnd:p,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:v(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var xe=function t(n){function e(e){return new _e(e,n)}return e.tension=function(e){return t(+e)},e}(0);function be(e,t){this._context=e,this._k=(1-t)/6}be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:v(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var we=function t(n){function e(e){return new be(e,n)}return e.tension=function(e){return t(+e)},e}(0);function Me(e,t,n){var r,i,a=e._x1,o=e._y1,s=e._x2,l=e._y2;G<e._l01_a&&(a=(a*(r=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a)-e._x0*e._l12_2a+e._x2*e._l01_2a)/(i=3*e._l01_a*(e._l01_a+e._l12_a)),o=(o*r-e._y0*e._l12_2a+e._y2*e._l01_2a)/i),G<e._l23_a&&(s=(s*(r=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a)+e._x1*e._l23_2a-t*e._l12_2a)/(i=3*e._l23_a*(e._l23_a+e._l12_a)),l=(l*r+e._y1*e._l23_2a-n*e._l12_2a)/i),e._context.bezierCurveTo(a,o,s,l,e._x2,e._y2)}function Te(e,t){this._context=e,this._alpha=t}Te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n,r;switch(e=+e,t=+t,this._point&&(n=this._x2-e,r=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Me(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Se=function t(n){function e(e){return n?new Te(e,n):new x(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function Ee(e,t){this._context=e,this._alpha=t}Ee.prototype={areaStart:p,areaEnd:p,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){var n,r;switch(e=+e,t=+t,this._point&&(n=this._x2-e,r=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Me(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ae=function t(n){function e(e){return n?new Ee(e,n):new _e(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function Le(e,t){this._context=e,this._alpha=t}Le.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n,r;switch(e=+e,t=+t,this._point&&(n=this._x2-e,r=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Me(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Re=function t(n){function e(e){return n?new Le(e,n):new be(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function Ce(e){this._context=e}function Pe(e){return e<0?-1:1}function Oe(e,t,n){var r=e._x1-e._x0,t=t-e._x1,i=(e._y1-e._y0)/(r||t<0&&-0),n=(n-e._y1)/(t||r<0&&-0),e=(i*t+n*r)/(r+t);return(Pe(i)+Pe(n))*Math.min(Math.abs(i),Math.abs(n),.5*Math.abs(e))||0}function De(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ne(e,t,n){var r=e._x0,i=e._x1,a=e._y1,o=(i-r)/3;e._context.bezierCurveTo(r+o,e._y0+o*t,i-o,a-o*n,i,a)}function b(e){this._context=e}function Ie(e){this._context=new ke(e)}function ke(e){this._context=e}function Be(e){this._context=e}function Fe(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(a[i[0]=0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;0<=t;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function w(e,t){this._context=e,this._t=t}function M(e,t){if(1<(i=e.length))for(var n,r,i,a=1,o=e[t[0]],s=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function T(e){for(var t=e.length,n=new Array(t);0<=--t;)n[t]=t;return n}function Ue(e,t){return e[t]}function ze(e){var n=e.map(He);return T(e).sort(function(e,t){return n[e]-n[t]})}function He(e){for(var t,n=-1,r=0,i=e.length,a=-1/0;++n<i;)(t=+e[n][1])>a&&(a=t,r=n);return r}function Ge(e){var n=e.map(je);return T(e).sort(function(e,t){return n[e]-n[t]})}function je(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}Ce.prototype={areaStart:p,areaEnd:p,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ne(this,this._t0,De(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ne(this,De(this,n=Oe(this,e,t)),n);break;default:Ne(this,this._t0,n=Oe(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Ie.prototype=Object.create(b.prototype)).point=function(e,t){b.prototype.point.call(this,t,e)},ke.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},Be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Fe(e),i=Fe(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,t),this._context.lineTo(e,t)):(n=this._x*(1-this._t)+e*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,t))}this._x=e,this._y=t}},e.arc=function(){var L=E,R=A,C=_(0),P=null,O=Z,D=Q,N=J,I=null;function t(){var e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,g,v,y,_,x,b,w=+L.apply(this,arguments),M=+R.apply(this,arguments),T=O.apply(this,arguments)-V,S=D.apply(this,arguments)-V,E=X(S-T),A=T<S;if(I=I||(e=k.path()),M<w&&(t=M,M=w,w=t),G<M?W-G<E?(I.moveTo(M*F(T),M*z(T)),I.arc(0,0,M,T,S,!A),G<w&&(I.moveTo(w*F(S),w*z(S)),I.arc(0,0,w,S,T,A))):(r=t=T,i=n=S,o=a=E,c=N.apply(this,arguments)/2,d=G<c&&(P?+P.apply(this,arguments):H(w*w+M*M)),b=x=s=U(X(M-w)/2,+C.apply(this,arguments)),G<d&&(h=Y(d/w*z(c)),d=Y(d/M*z(c)),(a-=2*h)>G?(r+=h*=A?1:-1,i-=h):(a=0,r=i=(T+S)/2),(o-=2*d)>G?(t+=d*=A?1:-1,n-=d):(o=0,t=n=(T+S)/2)),c=M*F(t),h=M*z(t),d=w*F(i),T=w*z(i),G<s&&(f=M*F(n),p=M*z(n),m=w*F(r),g=w*z(r),E<j)&&(S=((e,t,n,r,i,a,o,s)=>{var l=(s=s-a)*(n=n-e)-(o=o-i)*(r=r-t);if(!(l*l<G))return[e+(l=(o*(t-a)-s*(e-i))/l)*n,t+l*r]})(c,h,m,g,f,p,d,T))&&(E=c-S[0],y=h-S[1],_=f-S[0],v=p-S[1],y=1/z((1<(E=(E*_+y*v)/(H(E*E+y*y)*H(_*_+v*v)))?0:E<-1?j:Math.acos(E))/2),_=H(S[0]*S[0]+S[1]*S[1]),x=U(s,(w-_)/(y-1)),b=U(s,(M-_)/(1+y))),G<o?G<b?(l=q(m,g,c,h,M,b,A),u=q(f,p,d,T,M,b,A),I.moveTo(l.cx+l.x01,l.cy+l.y01),b<s?I.arc(l.cx,l.cy,b,B(l.y01,l.x01),B(u.y01,u.x01),!A):(I.arc(l.cx,l.cy,b,B(l.y01,l.x01),B(l.y11,l.x11),!A),I.arc(0,0,M,B(l.cy+l.y11,l.cx+l.x11),B(u.cy+u.y11,u.cx+u.x11),!A),I.arc(u.cx,u.cy,b,B(u.y11,u.x11),B(u.y01,u.x01),!A))):(I.moveTo(c,h),I.arc(0,0,M,t,n,!A)):I.moveTo(c,h),G<w&&G<a?G<x?(l=q(d,T,f,p,w,-x,A),u=q(c,h,m,g,w,-x,A),I.lineTo(l.cx+l.x01,l.cy+l.y01),x<s?I.arc(l.cx,l.cy,x,B(l.y01,l.x01),B(u.y01,u.x01),!A):(I.arc(l.cx,l.cy,x,B(l.y01,l.x01),B(l.y11,l.x11),!A),I.arc(0,0,w,B(l.cy+l.y11,l.cx+l.x11),B(u.cy+u.y11,u.cx+u.x11),A),I.arc(u.cx,u.cy,x,B(u.y11,u.x11),B(u.y01,u.x01),!A))):I.arc(0,0,w,i,r,A):I.lineTo(d,T)):I.moveTo(0,0),I.closePath(),e)return I=null,e+""||null}return t.centroid=function(){var e=(+L.apply(this,arguments)+ +R.apply(this,arguments))/2,t=(+O.apply(this,arguments)+ +D.apply(this,arguments))/2-j/2;return[F(t)*e,z(t)*e]},t.innerRadius=function(e){return arguments.length?(L="function"==typeof e?e:_(+e),t):L},t.outerRadius=function(e){return arguments.length?(R="function"==typeof e?e:_(+e),t):R},t.cornerRadius=function(e){return arguments.length?(C="function"==typeof e?e:_(+e),t):C},t.padRadius=function(e){return arguments.length?(P=null==e?null:"function"==typeof e?e:_(+e),t):P},t.startAngle=function(e){return arguments.length?(O="function"==typeof e?e:_(+e),t):O},t.endAngle=function(e){return arguments.length?(D="function"==typeof e?e:_(+e),t):D},t.padAngle=function(e){return arguments.length?(N="function"==typeof e?e:_(+e),t):N},t.context=function(e){return arguments.length?(I=null==e?null:e,t):I},t},e.area=R,e.areaRadial=I,e.curveBasis=function(e){return new g(e)},e.curveBasisClosed=function(e){return new pe(e)},e.curveBasisOpen=function(e){return new me(e)},e.curveBundle=ve,e.curveCardinal=ye,e.curveCardinalClosed=xe,e.curveCardinalOpen=we,e.curveCatmullRom=Se,e.curveCatmullRomClosed=Ae,e.curveCatmullRomOpen=Re,e.curveLinear=n,e.curveLinearClosed=function(e){return new Ce(e)},e.curveMonotoneX=function(e){return new b(e)},e.curveMonotoneY=function(e){return new Ie(e)},e.curveNatural=function(e){return new Be(e)},e.curveStep=function(e){return new w(e,.5)},e.curveStepAfter=function(e){return new w(e,1)},e.curveStepBefore=function(e){return new w(e,0)},e.line=i,e.lineRadial=N,e.linkHorizontal=function(){return t(ee)},e.linkRadial=function(){var e=t(ne);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e},e.linkVertical=function(){return t(te)},e.pie=function(){var f=P,p=C,m=null,g=_(0),v=_(W),y=_(0);function t(n){for(var e,t,r,i=n.length,a=0,o=new Array(i),s=new Array(i),l=+g.apply(this,arguments),u=Math.min(W,Math.max(-W,v.apply(this,arguments)-l)),c=Math.min(Math.abs(u)/i,y.apply(this,arguments)),h=c*(u<0?-1:1),d=0;d<i;++d)0<(r=s[o[d]=d]=+f(n[d],d,n))&&(a+=r);for(null!=p?o.sort(function(e,t){return p(s[e],s[t])}):null!=m&&o.sort(function(e,t){return m(n[e],n[t])}),d=0,e=a?(u-i*h)/a:0;d<i;++d,l=t)t=o[d],r=s[t],s[t]={data:n[t],index:d,value:r,startAngle:l,endAngle:t=l+(0<r?r*e:0)+h,padAngle:c};return s}return t.value=function(e){return arguments.length?(f="function"==typeof e?e:_(+e),t):f},t.sortValues=function(e){return arguments.length?(p=e,m=null,t):p},t.sort=function(e){return arguments.length?(m=e,p=null,t):m},t.startAngle=function(e){return arguments.length?(g="function"==typeof e?e:_(+e),t):g},t.endAngle=function(e){return arguments.length?(v="function"==typeof e?e:_(+e),t):v},t.padAngle=function(e){return arguments.length?(y="function"==typeof e?e:_(+e),t):y},t},e.pointRadial=l,e.radialArea=I,e.radialLine=N,e.stack=function(){var h=_([]),d=T,f=M,p=Ue;function t(e){for(var t,n=h.apply(this,arguments),r=e.length,i=n.length,a=new Array(i),o=0;o<i;++o){for(var s,l=n[o],u=a[o]=new Array(r),c=0;c<r;++c)u[c]=s=[0,+p(e[c],l,c,e)],s.data=e[c];u.key=l}for(o=0,t=d(a);o<i;++o)a[t[o]].index=o;return f(a,t),a}return t.keys=function(e){return arguments.length?(h="function"==typeof e?e:_(c.call(e)),t):h},t.value=function(e){return arguments.length?(p="function"==typeof e?e:_(+e),t):p},t.order=function(e){return arguments.length?(d=null==e?T:"function"==typeof e?e:_(c.call(e)),t):d},t.offset=function(e){return arguments.length?(f=null==e?M:e,t):f},t},e.stackOffsetDiverging=function(e,t){if(0<(s=e.length))for(var n,r,i,a,o,s,l=0,u=e[t[0]].length;l<u;++l)for(n=a=o=0;n<s;++n)0<(i=(r=e[t[n]][l])[1]-r[0])?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)},e.stackOffsetExpand=function(e,t){if(0<(r=e.length)){for(var n,r,i,a=0,o=e[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}M(e,t)}},e.stackOffsetNone=M,e.stackOffsetSilhouette=function(e,t){if(0<(n=e.length)){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=e[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}M(e,t)}},e.stackOffsetWiggle=function(e,t){if(0<(i=e.length)&&0<(r=(n=e[t[0]]).length)){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,u=0;s<i;++s){for(var c=e[t[s]],h=c[o][1]||0,d=(h-(c[o-1][1]||0))/2,f=0;f<s;++f){var p=e[t[f]];d+=(p[o][1]||0)-(p[o-1][1]||0)}l+=h,u+=d*h}n[o-1][1]+=n[o-1][0]=a,l&&(a-=u/l)}n[o-1][1]+=n[o-1][0]=a,M(e,t)}},e.stackOrderAppearance=ze,e.stackOrderAscending=Ge,e.stackOrderDescending=function(e){return Ge(e).reverse()},e.stackOrderInsideOut=function(e){for(var t,n=e.length,r=e.map(je),i=ze(e),a=0,o=0,s=[],l=[],u=0;u<n;++u)t=i[u],(a<o?(a+=r[t],s):(o+=r[t],l)).push(t);return l.reverse().concat(s)},e.stackOrderNone=T,e.stackOrderReverse=function(e){return T(e).reverse()},e.symbol=function(){var t=_(a),n=_(64),r=null;function i(){var e;if(r=r||(e=k.path()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:_(e),i):t},i.size=function(e){return arguments.length?(n="function"==typeof e?e:_(+e),i):n},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i},e.symbolCircle=a,e.symbolCross=re,e.symbolDiamond=oe,e.symbolSquare=ue,e.symbolStar=u,e.symbolTriangle=ce,e.symbolWye=de,e.symbols=fe,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-path":32}],40:[function(e,t,n){var r,i;r=this,i=function(t,S){function E(e){var t;return 0<=e.y&&e.y<100?((t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L)).setFullYear(e.y),t):new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function A(e){var t;return 0<=e.y&&e.y<100?((t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L))).setUTCFullYear(e.y),t):new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function L(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function n(e){var r=e.dateTime,i=e.date,a=e.time,t=e.periods,n=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=C(t),c=P(t),h=C(n),d=P(n),f=C(o),p=P(o),m=C(s),g=P(s),v=C(l),y=P(l),_={a:function(e){return o[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:G,e:G,f:le,g:ye,G:xe,H:ae,I:oe,j:se,L:j,m:ue,M:ce,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:X,s:Y,S:he,u:de,U:fe,V:pe,w:me,W:ge,x:null,X:null,y:ve,Y:_e,Z:be,"%":q},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:V,e:V,f:Se,g:Ie,G:Be,H:we,I:Me,j:Te,L:W,m:Ee,M:Ae,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:X,s:Y,S:Le,u:Re,U:Ce,V:Pe,w:Oe,W:De,x:null,X:null,y:Ne,Y:ke,Z:Fe,"%":q},b={a:function(e,t,n){t=f.exec(t.slice(n));return t?(e.w=p[t[0].toLowerCase()],n+t[0].length):-1},A:function(e,t,n){t=h.exec(t.slice(n));return t?(e.w=d[t[0].toLowerCase()],n+t[0].length):-1},b:function(e,t,n){t=v.exec(t.slice(n));return t?(e.m=y[t[0].toLowerCase()],n+t[0].length):-1},B:function(e,t,n){t=m.exec(t.slice(n));return t?(e.m=g[t[0].toLowerCase()],n+t[0].length):-1},c:function(e,t,n){return T(e,r,t,n)},d:z,e:z,f:te,g:F,G:B,H:H,I:H,j:J,L:ee,m:Q,M:K,p:function(e,t,n){t=u.exec(t.slice(n));return t?(e.p=c[t[0].toLowerCase()],n+t[0].length):-1},q:Z,Q:re,s:ie,S:$,u:D,U:N,V:I,w:O,W:k,x:function(e,t,n){return T(e,i,t,n)},X:function(e,t,n){return T(e,a,t,n)},y:F,Y:B,Z:U,"%":ne};function w(l,u){return function(e){var t,n,r,i=[],a=-1,o=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++a<s;)37===l.charCodeAt(a)&&(i.push(l.slice(o,a)),null!=(n=R[t=l.charAt(++a)])?t=l.charAt(++a):n="e"===t?" ":"0",(r=u[t])&&(t=r(e,n)),i.push(t),o=a+1);return i.push(l.slice(o,a)),i.join("")}}function M(i,a){return function(e){var t,n,r=L(1900,void 0,1);if(T(r,i,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!a||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=A(L(r.y,0,1))).getUTCDay())||0===n?S.utcMonday.ceil(t):S.utcMonday(t),t=S.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=E(L(r.y,0,1))).getDay())||0===n?S.timeMonday.ceil(t):S.timeMonday(t),t=S.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?A(L(r.y,0,1)).getUTCDay():E(L(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return("Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,A):E)(r)}}function T(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=b[i in R?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=w(i,_),_.X=w(a,_),_.c=w(r,_),x.x=w(i,x),x.X=w(a,x),x.c=w(r,x),{format:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=M(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=M(e+="",!0);return t.toString=function(){return e},t}}}var r,R={"-":"",_:" ",0:"0"},i=/^\s*\d+/,a=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(e,t,n){var r=e<0?"-":"",e=(r?-e:e)+"",i=e.length;return r+(i<n?new Array(n-i+1).join(t)+e:e)}function l(e){return e.replace(o,"\\$&")}function C(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function P(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function O(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function D(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function N(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function I(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function k(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function B(e,t,n){t=i.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function F(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function U(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function Z(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function Q(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function z(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function J(e,t,n){t=i.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function H(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function K(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function $(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function ee(e,t,n){t=i.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function te(e,t,n){t=i.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function ne(e,t,n){t=a.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function re(e,t,n){t=i.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function ie(e,t,n){t=i.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function G(e,t){return s(e.getDate(),t,2)}function ae(e,t){return s(e.getHours(),t,2)}function oe(e,t){return s(e.getHours()%12||12,t,2)}function se(e,t){return s(1+S.timeDay.count(S.timeYear(e),e),t,3)}function j(e,t){return s(e.getMilliseconds(),t,3)}function le(e,t){return j(e,t)+"000"}function ue(e,t){return s(e.getMonth()+1,t,2)}function ce(e,t){return s(e.getMinutes(),t,2)}function he(e,t){return s(e.getSeconds(),t,2)}function de(e){e=e.getDay();return 0===e?7:e}function fe(e,t){return s(S.timeSunday.count(S.timeYear(e)-1,e),t,2)}function u(e){var t=e.getDay();return 4<=t||0===t?S.timeThursday(e):S.timeThursday.ceil(e)}function pe(e,t){return e=u(e),s(S.timeThursday.count(S.timeYear(e),e)+(4===S.timeYear(e).getDay()),t,2)}function me(e){return e.getDay()}function ge(e,t){return s(S.timeMonday.count(S.timeYear(e)-1,e),t,2)}function ve(e,t){return s(e.getFullYear()%100,t,2)}function ye(e,t){return s((e=u(e)).getFullYear()%100,t,2)}function _e(e,t){return s(e.getFullYear()%1e4,t,4)}function xe(e,t){var n=e.getDay();return s((e=4<=n||0===n?S.timeThursday(e):S.timeThursday.ceil(e)).getFullYear()%1e4,t,4)}function be(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function V(e,t){return s(e.getUTCDate(),t,2)}function we(e,t){return s(e.getUTCHours(),t,2)}function Me(e,t){return s(e.getUTCHours()%12||12,t,2)}function Te(e,t){return s(1+S.utcDay.count(S.utcYear(e),e),t,3)}function W(e,t){return s(e.getUTCMilliseconds(),t,3)}function Se(e,t){return W(e,t)+"000"}function Ee(e,t){return s(e.getUTCMonth()+1,t,2)}function Ae(e,t){return s(e.getUTCMinutes(),t,2)}function Le(e,t){return s(e.getUTCSeconds(),t,2)}function Re(e){e=e.getUTCDay();return 0===e?7:e}function Ce(e,t){return s(S.utcSunday.count(S.utcYear(e)-1,e),t,2)}function c(e){var t=e.getUTCDay();return 4<=t||0===t?S.utcThursday(e):S.utcThursday.ceil(e)}function Pe(e,t){return e=c(e),s(S.utcThursday.count(S.utcYear(e),e)+(4===S.utcYear(e).getUTCDay()),t,2)}function Oe(e){return e.getUTCDay()}function De(e,t){return s(S.utcMonday.count(S.utcYear(e)-1,e),t,2)}function Ne(e,t){return s(e.getUTCFullYear()%100,t,2)}function Ie(e,t){return s((e=c(e)).getUTCFullYear()%100,t,2)}function ke(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function Be(e,t){var n=e.getUTCDay();return s((e=4<=n||0===n?S.utcThursday(e):S.utcThursday.ceil(e)).getUTCFullYear()%1e4,t,4)}function Fe(){return"+0000"}function q(){return"%"}function X(e){return+e}function Y(e){return Math.floor(+e/1e3)}function e(e){return r=n(e),t.timeFormat=r.format,t.timeParse=r.parse,t.utcFormat=r.utcFormat,t.utcParse=r.utcParse,r}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var h="%Y-%m-%dT%H:%M:%S.%LZ";var d=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(h);h=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:t.utcParse(h);t.isoFormat=d,t.isoParse=h,t.timeFormatDefaultLocale=e,t.timeFormatLocale=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":41}],41:[function(e,t,n){var r,i;r=this,i=function(e){var i=new Date,l=new Date;function u(a,o,n,r){function s(e){return a(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return a(e=new Date(+e)),e},s.ceil=function(e){return a(e=new Date(e-1)),o(e,1),a(e),e},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(e,t,n){var r,i=[];if(e=s.ceil(e),n=null==n?1:Math.floor(n),e<t&&0<n)for(;i.push(r=new Date(+e)),o(e,n),a(e),r<e&&e<t;);return i},s.filter=function(n){return u(function(e){if(e<=e)for(;a(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},n&&(s.count=function(e,t){return i.setTime(+e),l.setTime(+t),a(i),a(l),Math.floor(n(i,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var t=u(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e}),n=(t.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?u(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):t:null},t.range),r=u(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),a=r.range,o=u(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),k=o.range,s=u(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),B=s.range,c=u(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),F=c.range;function h(t){return u(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var d=h(0),f=h(1),p=h(2),m=h(3),g=h(4),v=h(5),y=h(6),_=d.range,U=f.range,z=p.range,H=m.range,G=g.range,j=v.range,V=y.range,x=u(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),W=x.range,b=u(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),q=(b.every=function(n){return isFinite(n=Math.floor(n))&&0<n?u(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null},b.range),w=u(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),X=w.range,M=u(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),Y=M.range,T=u(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),Z=T.range;function S(t){return u(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var E=S(0),A=S(1),L=S(2),R=S(3),C=S(4),P=S(5),O=S(6),D=E.range,Q=A.range,J=L.range,K=R.range,$=C.range,ee=P.range,te=O.range,N=u(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),ne=N.range,I=u(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),re=(I.every=function(n){return isFinite(n=Math.floor(n))&&0<n?u(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null},I.range);e.timeDay=c,e.timeDays=F,e.timeFriday=v,e.timeFridays=j,e.timeHour=s,e.timeHours=B,e.timeInterval=u,e.timeMillisecond=t,e.timeMilliseconds=n,e.timeMinute=o,e.timeMinutes=k,e.timeMonday=f,e.timeMondays=U,e.timeMonth=x,e.timeMonths=W,e.timeSaturday=y,e.timeSaturdays=V,e.timeSecond=r,e.timeSeconds=a,e.timeSunday=d,e.timeSundays=_,e.timeThursday=g,e.timeThursdays=G,e.timeTuesday=p,e.timeTuesdays=z,e.timeWednesday=m,e.timeWednesdays=H,e.timeWeek=d,e.timeWeeks=_,e.timeYear=b,e.timeYears=q,e.utcDay=T,e.utcDays=Z,e.utcFriday=P,e.utcFridays=ee,e.utcHour=M,e.utcHours=Y,e.utcMillisecond=t,e.utcMilliseconds=n,e.utcMinute=w,e.utcMinutes=X,e.utcMonday=A,e.utcMondays=Q,e.utcMonth=N,e.utcMonths=ne,e.utcSaturday=O,e.utcSaturdays=te,e.utcSecond=r,e.utcSeconds=a,e.utcSunday=E,e.utcSundays=D,e.utcThursday=C,e.utcThursdays=$,e.utcTuesday=L,e.utcTuesdays=J,e.utcWednesday=R,e.utcWednesdays=K,e.utcWeek=E,e.utcWeeks=D,e.utcYear=I,e.utcYears=re,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],42:[function(e,t,n){var r,i;r=this,i=function(e){var i,a,o=0,s=0,t=0,n=1e3,l=0,u=0,c=0,h="object"==typeof performance&&performance.now?performance:Date,r="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d(){return u||(r(f),u=h.now()+c)}function f(){u=0}function p(){this._call=this._time=this._next=null}function m(e,t,n){var r=new p;return r.restart(e,t,n),r}function g(){d(),++o;for(var e,t=i;t;)0<=(e=u-t._time)&&t._call.call(null,e),t=t._next;--o}function v(){u=(l=h.now())+c,o=s=0;try{g()}finally{for(var e,t,n=i,r=1/(o=0);n;)n=n._call?(r>n._time&&(r=n._time),(e=n)._next):(t=n._next,n._next=null,e?e._next=t:i=t);a=e,_(r),u=0}}function y(){var e=h.now(),t=e-l;n<t&&(c-=t,l=e)}function _(e){o||(s=s&&clearTimeout(s),24<e-u?(e<1/0&&(s=setTimeout(v,e-h.now()-c)),t=t&&clearInterval(t)):(t||(l=h.now(),t=setInterval(y,n)),o=1,r(v)))}p.prototype=m.prototype={constructor:p,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?d():+n)+(null==t?0:+t),this._next||a===this||(a?a._next=this:i=this,a=this),this._call=e,this._time=n,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}},e.interval=function(n,r,i){var a=new p,o=r;return null==r?a.restart(n,r,i):(r=+r,i=null==i?d():+i,a.restart(function e(t){t+=o,a.restart(e,o+=r,i),n(t)},r,i)),a},e.now=d,e.timeout=function(t,n,e){var r=new p;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r},e.timer=m,e.timerFlush=g,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],43:[function(e,t,n){var r,i;r=this,i=function(e,R,t,m,C,r,n){var g=t.dispatch("start","end","cancel","interrupt"),v=[],y=0,_=1,x=2,b=3,w=4,M=5,T=6;function S(e,t,n,r,i,a){var o,s,l,u,c,h=e.__transition;if(h){if(n in h)return}else e.__transition={};function d(e){var t,n,r,i;if(l.state!==_)return p();for(t in c)if((i=c[t]).name===l.name){if(i.state===b)return m.timeout(d);i.state===w?(i.state=T,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete c[t]):+t<s&&(i.state=T,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete c[t])}if(m.timeout(function(){l.state===b&&(l.state=w,l.timer.restart(f,l.delay,l.time),f(e))}),l.state=x,l.on.call("start",o,o.__data__,l.index,l.group),l.state===x){for(l.state=b,u=new Array(r=l.tween.length),t=0,n=-1;t<r;++t)(i=l.tween[t].value.call(o,o.__data__,l.index,l.group))&&(u[++n]=i);u.length=n+1}}function f(e){for(var t=e<l.duration?l.ease.call(null,e/l.duration):(l.timer.restart(p),l.state=M,1),n=-1,r=u.length;++n<r;)u[n].call(o,t);l.state===M&&(l.on.call("end",o,o.__data__,l.index,l.group),p())}function p(){for(var e in l.state=T,l.timer.stop(),delete c[s],c)return;delete o.__transition}o=e,s=n,l={name:t,index:r,group:i,on:g,tween:v,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:y},((c=o.__transition)[s]=l).timer=m.timer(function(e){l.state=_,l.timer.restart(d,l.delay,l.time),l.delay<=e&&d(e-l.delay)},0,l.time)}function u(e,t){e=E(e,t);if(e.state>y)throw new Error("too late; already scheduled");return e}function P(e,t){e=E(e,t);if(e.state>b)throw new Error("too late; already running");return e}function E(e,t){e=e.__transition;if(e=e&&e[t])return e;throw new Error("transition not found")}function i(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name!==t?o=!1:(r=x<n.state&&n.state<M,n.state=T,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]);o&&delete e.__transition}}function O(e,t,n){var r=e._id;return e.each(function(){var e=P(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return E(e,r).value[t]}}function D(e,t){var n;return("number"==typeof t?C.interpolateNumber:t instanceof r.color?C.interpolateRgb:(n=r.color(t))?(t=n,C.interpolateRgb):C.interpolateString)(e,t)}function a(r,i){var a,o;function e(){var t,n,e=i.apply(this,arguments);return a=e!==o?(o=e)&&(t=r,n=e,function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}):a}return e._value=i,e}function o(r,i){var a,o;function e(){var t,n,e=i.apply(this,arguments);return a=e!==o?(o=e)&&(t=r,n=e,function(e){this.setAttribute(t,n.call(this,e))}):a}return e._value=i,e}var s=R.selection.prototype.constructor;function N(e){return function(){this.style.removeProperty(e)}}function l(i,a,o){var s,l;function e(){var t,n,r,e=a.apply(this,arguments);return s=e!==l?(l=e)&&(t=i,n=e,r=o,function(e){this.style.setProperty(t,n.call(this,e),r)}):s}return e._value=a,e}function c(n){var r,i;function e(){var t,e=n.apply(this,arguments);return r=e!==i?(i=e)&&(t=e,function(e){this.textContent=t.call(this,e)}):r}return e._value=n,e}var h=0;function A(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function d(e){return R.selection().transition(e)}var t=R.selection.prototype,f=(A.prototype=d.prototype={constructor:A,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=R.selector(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,u=r[o],c=u.length,h=a[o]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=e.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,S(h[d],t,n,d,h,E(s,n)));return new A(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=R.selectorAll(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=e.call(l,l.__data__,h,u),p=E(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&S(d,t,n,m,f,p);a.push(f),o.push(l)}return new A(a,o,t,n)},filter:function(e){"function"!=typeof e&&(e=R.matcher(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new A(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,e=n.length,i=Math.min(r,e),a=new Array(r),o=0;o<i;++o)for(var s,l=t[o],u=n[o],c=l.length,h=a[o]=new Array(c),d=0;d<c;++d)(s=l[d]||u[d])&&(h[d]=s);for(;o<r;++o)a[o]=t[o];return new A(a,this._parents,this._name,this._id)},selection:function(){return new s(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++h,r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)(o=s[u])&&S(o,e,n,u,s,{time:(o=E(o,t)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new A(r,this._parents,e,n)},call:t.call,nodes:t.nodes,node:t.node,size:t.size,empty:t.empty,each:t.each,on:function(e,t){var n,r,i,a,o,s,l=this._id;return arguments.length<2?E(this.node(),l).on.on(e):this.each((n=l,i=t,s=((r=e)+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return!(e=0<=t?e.slice(0,t):e)||"start"===e})?u:P,function(){var e=s(this,n),t=e.on;t!==a&&(o=(a=t).copy()).on(r,i),e.on=o}))},attr:function(e,t){var n=R.namespace(e),r="transform"===n?C.interpolateTransformSvg:D;return this.attrTween(e,"function"==typeof t?(n.local?function(r,i,a){var o,s,l;return function(){var e,t,n=a(this);if(null!=n)return(e=this.getAttributeNS(r.space,r.local))===(t=n+"")?null:e===o&&t===s?l:(s=t,l=i(o=e,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,a){var o,s,l;return function(){var e,t,n=a(this);if(null!=n)return(e=this.getAttribute(r))===(t=n+"")?null:e===o&&t===s?l:(s=t,l=i(o=e,n));this.removeAttribute(r)}})(n,r,O(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(t,n,r){var i,a,o=r+"";return function(){var e=this.getAttributeNS(t.space,t.local);return e===o?null:e===i?a:a=n(i=e,r)}}:function(t,n,r){var i,a,o=r+"";return function(){var e=this.getAttribute(t);return e===o?null:e===i?a:a=n(i=e,r)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return e=R.namespace(e),this.tween(n,(e.local?a:o)(e,t))},style:function(e,t,n){var r,i,a,o,s,l,u,c,h,d,f,p,m,g,v,y,_,x,b,w,M,T,S,E,A,L="transform"==(e+="")?C.interpolateTransformCss:D;return null==t?this.styleTween(e,(M=e,T=L,function(){var e=R.style(this,M),t=(this.style.removeProperty(M),R.style(this,M));return e===t?null:e===S&&t===E?A:A=T(S=e,E=t)})).on("end.style."+e,N(e)):"function"==typeof t?this.styleTween(e,(y=L,_=O(this,"style."+(v=e),t),function(){var e=R.style(this,v),t=_(this),n=t+"";return null==t&&(this.style.removeProperty(v),n=t=R.style(this,v)),e===n?null:e===x&&n===b?w:(b=n,w=y(x=e,t))})).each((u=this._id,g="end."+(m="style."+(c=e)),function(){var e=P(this,u),t=e.on,n=null==e.value[m]?p=p||N(c):void 0;t===h&&f===n||(d=(h=t).copy()).on(g,f=n),e.on=d})):this.styleTween(e,(r=e,i=L,l=(a=t)+"",function(){var e=R.style(this,r);return e===l?null:e===o?s:s=i(o=e,a)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,l(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?(n=O(this,"text",e),function(){var e=n(this);this.textContent=null==e?"":e}):(t=null==e?"":e+"",function(){this.textContent=t}));var t,n},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,c(e))},remove:function(){return this.on("end.remove",(n=this._id,function(){var e,t=this.parentNode;for(e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}));var n},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=E(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?function(i,a){var o,s;return function(){var e=P(this,i),t=e.tween;if(t!==o)for(var n=0,r=(s=o=t).length;n<r;++n)if(s[n].name===a){(s=s.slice()).splice(n,1);break}e.tween=s}}:function(a,o,s){var l,u;if("function"!=typeof s)throw new Error;return function(){var e=P(this,a),t=e.tween;if(t!==l){u=(l=t).slice();for(var n={name:o,value:s},r=0,i=u.length;r<i;++r)if(u[r].name===o){u[r]=n;break}r===i&&u.push(n)}e.tween=u}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){u(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){u(this,e).delay=t}})(t,e)):E(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){P(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){P(this,e).duration=t}})(t,e)):E(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(((e,t)=>{if("function"!=typeof t)throw new Error;return function(){P(this,e).ease=t}})(t,e)):E(this.node(),t).ease},end:function(){var i,a,o=this,s=o._id,l=o.size();return new Promise(function(e,t){var n={value:t},r={value:function(){0==--l&&e()}};o.each(function(){var e=P(this,s),t=e.on;t!==i&&((a=(i=t).copy())._.cancel.push(n),a._.interrupt.push(n),a._.end.push(r)),e.on=a})})}},{time:null,delay:0,duration:250,ease:n.easeCubicInOut});R.selection.prototype.interrupt=function(e){return this.each(function(){i(this,e)})},R.selection.prototype.transition=function(e){var t,n;e=e instanceof A?(t=e._id,e._name):(t=++h,(n=f).time=m.now(),null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)(o=s[u])&&S(o,e,t,u,s,n||((e,t)=>{for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return f.time=m.now(),f;return n})(o,t));return new A(r,this._parents,e,t)};var p=[null];e.active=function(e,t){var n,r,i=e.__transition;if(i)for(r in t=null==t?null:t+"",i)if((n=i[r]).state>_&&n.name===t)return new A([[e]],p,t,+r);return null},e.interrupt=i,e.transition=d,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-selection"),e("d3-dispatch"),e("d3-timer"),e("d3-interpolate"),e("d3-color"),e("d3-ease")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch","d3-timer","d3-interpolate","d3-color","d3-ease"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-color":20,"d3-dispatch":22,"d3-ease":25,"d3-interpolate":31,"d3-selection":38,"d3-timer":42}],44:[function(e,t,n){var r,i;r=this,i=function(e){function r(e){return function(){return e}}function o(e){return e[0]}function s(e){return e[1]}function z(){this._=null}function n(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function l(e,t){var n=t,t=t.R,r=n.U;r?r.L===n?r.L=t:r.R=t:e._=t,t.U=r,n.U=t,n.R=t.L,n.R&&(n.R.U=n),t.L=n}function u(e,t){var n=t,t=t.L,r=n.U;r?r.L===n?r.L=t:r.R=t:e._=t,t.U=r,n.U=t,n.L=t.R,n.L&&(n.L.U=n),t.R=n}function c(e){for(;e.L;)e=e.L;return e}function H(e,t,n,r){var i=[null,null],a=te.push(i)-1;return i.left=e,i.right=t,n&&j(i,e,t,n),r&&j(i,t,e,r),$[e.index].halfedges.push(a),$[t.index].halfedges.push(a),i}function G(e,t,n){t=[t,n];return t.left=e,t}function j(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function V(e,t,n,r){for(var i,a=te.length;a--;)((e,t,n,r,i)=>{var a=e[1];if(!a){var o,s=e[0],l=e.left,u=e.right,c=l[0],l=l[1],h=u[0],u=u[1],d=(c+h)/2;if(u===l){if(d<t||r<=d)return;if(h<c){if(s){if(s[1]>=i)return}else s=[d,n];a=[d,i]}else{if(s){if(s[1]<n)return}else s=[d,i];a=[d,n]}}else if(d=(l+u)/2-(o=(c-h)/(u-l))*d,o<-1||1<o)if(h<c){if(s){if(s[1]>=i)return}else s=[(n-d)/o,n];a=[(i-d)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-d)/o,i];a=[(n-d)/o,n]}else if(l<u){if(s){if(s[0]>=r)return}else s=[t,o*t+d];a=[r,o*r+d]}else{if(s){if(s[0]<t)return}else s=[r,o*r+d];a=[t,o*t+d]}e[0]=s,e[1]=a}return 1})(i=te[a],e,t,n,r)&&((e,t,n,r,i)=>{var a=e[0],o=e[1],s=a[0],a=a[1],l=0,u=1,c=o[0]-s,o=o[1]-a,t=t-s;if(c||!(0<t)){if(t/=c,c<0){if(t<l)return;t<u&&(u=t)}else if(0<c){if(u<t)return;l<t&&(l=t)}if(t=r-s,c||!(t<0)){if(t/=c,c<0){if(u<t)return;l<t&&(l=t)}else if(0<c){if(t<l)return;t<u&&(u=t)}if(t=n-a,o||!(0<t)){if(t/=o,o<0){if(t<l)return;t<u&&(u=t)}else if(0<o){if(u<t)return;l<t&&(l=t)}if(t=i-a,o||!(t<0)){if(t/=o,o<0){if(u<t)return;l<t&&(l=t)}else if(0<o){if(t<l)return;t<u&&(u=t)}return(0<l||u<1)&&(0<l&&(e[0]=[s+l*c,a+l*o]),u<1)&&(e[1]=[s+u*c,a+u*o]),1}}}}})(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>ne||Math.abs(i[0][1]-i[1][1])>ne)||delete te[a]}function W(e,t){return t[+(t.left!==e.site)]}function q(){for(var e,t,n,r,i,a,o,s=0,l=$.length;s<l;++s)if((e=$[s])&&(n=(t=e.halfedges).length)){for(var u=new Array(n),c=new Array(n),h=0;h<n;++h)u[h]=h,c[h]=(r=e,i=te[t[h]],o=a=void 0,r=r.site,a=i.left,r===(o=i.right)&&(o=a,a=r),o?Math.atan2(o[1]-a[1],o[0]-a[0]):(o=r===a?(a=i[1],i[0]):(a=i[0],i[1]),Math.atan2(a[0]-o[0],o[1]-a[1])));for(u.sort(function(e,t){return c[t]-c[e]}),h=0;h<n;++h)c[h]=t[u[h]];for(h=0;h<n;++h)t[h]=c[h]}}z.prototype={constructor:z,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=c(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(l(this,n),n=(e=n).U),n.C=!1,r.C=!0,u(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(u(this,n),n=(e=n).U),n.C=!1,r.C=!0,l(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r=e.U,i=e.L,a=e.R,o=i?a?c(a):i:a;if(r?r.L===e?r.L=o:r.R=o:this._=o,i&&a?(n=o.C,o.C=e.C,((o.L=i).U=o)!==a?(r=o.U,o.U=e.U,e=o.R,r.L=e,(o.R=a).U=o):(o.U=r,e=(r=o).R)):(n=e.C,e=o),e&&(e.U=r),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,l(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,u(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,l(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,u(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,l(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,u(this,r),e=this._;break}}while(t.C=!0,r=(e=r).U,!e.C);e&&(e.C=!1)}}};var X,p=[];function m(){n(this),this.x=this.y=this.arc=this.site=this.cy=null}function Y(e){var t=e.P,n=e.N;if(t&&n){var t=t.site,r=e.site,n=n.site;if(t!==n){var i=r[0],a=r[1],o=t[0]-i,t=t[1]-a,s=n[0]-i,n=n[1]-a,l=2*(o*n-t*s);if(!(-g<=l)){for(var u=o*o+t*t,c=s*s+n*n,n=(n*u-t*c)/l,t=(o*c-s*u)/l,h=p.pop()||new m,d=(h.arc=e,h.site=r,h.x=n+i,h.y=(h.cy=t+a)+Math.sqrt(n*n+t*t),e.circle=h,null),f=ee._;f;)if(h.y<f.y||h.y===f.y&&h.x<=f.x){if(!f.L){d=f.P;break}f=f.L}else{if(!f.R){d=f;break}f=f.R}ee.insert(d,h),d||(X=h)}}}}function Z(e){var t=e.circle;t&&(t.P||(X=t.N),ee.remove(t),p.push(t),n(t),e.circle=null)}var i=[];function a(){n(this),this.edge=this.site=this.circle=null}function b(e){var t=i.pop()||new a;return t.site=e,t}function Q(e){Z(e),K.remove(e),i.push(e),n(e)}function J(e){for(var t,n,r,i,a,o,s=e[0],l=e[1],u=K._;u;)if(r=w(u,l)-s,ne<r)u=u.L;else{if(i=s-(a=l,o=void 0,(o=(i=u).N)?w(o,a):(o=i.site)[1]===a?o[0]:1/0),!(ne<i)){-ne<r?(t=u.P,n=u):-ne<i?n=(t=u).N:t=n=u;break}if(!u.R){t=u;break}u=u.R}$[e.index]={site:e,halfedges:[]};var c,h,d,f,p,m,g,v,y,_,x=b(e);K.insert(t,x),(t||n)&&(t===n?(Z(t),n=b(t.site),K.insert(x,n),x.edge=n.edge=H(t.site,x.site),Y(t),Y(n)):n?(Z(t),Z(n),h=(c=t.site)[0],f=e[0]-h,m=(p=n.site)[0]-h,j(n.edge,c,p,_=[((g=p[1]-(d=c[1]))*(v=f*f+(_=e[1]-d)*_)-_*(y=m*m+g*g))/(g=2*(f*g-_*m))+h,(f*y-m*v)/g+d]),x.edge=H(c,e,null,_),n.edge=H(e,p,null,_),Y(t),Y(n)):x.edge=H(t.site,x.site))}function w(e,t){var n,r,i,a=e.site,o=a[0],s=a[1],l=s-t;return l?(e=e.P)?(e=(a=e.site)[0],(t=(a=a[1])-t)?(i=(n=e-o)/t,(r=1/l-1/t)?(-i+Math.sqrt(i*i-2*r*(n*n/(-2*t)-a+t/2+s-l/2)))/r+o:(o+e)/2):e):-1/0:o}var K,$,ee,te,ne=1e-6,g=1e-12;function re(e,t){return t[1]-e[1]||t[0]-e[0]}function h(e,t){var k,B,n,r=e.sort(re).pop();for(te=[],$=new Array(e.length),K=new z,ee=new z;;)if(n=X,r&&(!n||r[1]<n.y||r[1]===n.y&&r[0]<n.x))r[0]===k&&r[1]===B||(J(r),k=r[0],B=r[1]),r=e.pop();else{if(!n)break;m=p=f=d=h=c=u=l=s=o=a=i=void 0;for(var i=n.arc,a=i.circle,o=a.x,s=a.cy,l=[o,s],u=i.P,c=i.N,h=[i],d=(Q(i),u);d.circle&&Math.abs(o-d.circle.x)<ne&&Math.abs(s-d.circle.cy)<ne;)u=d.P,h.unshift(d),Q(d),d=u;h.unshift(d),Z(d);for(var f=c;f.circle&&Math.abs(o-f.circle.x)<ne&&Math.abs(s-f.circle.cy)<ne;)c=f.N,h.push(f),Q(f),f=c;h.push(f),Z(f);for(var p=h.length,m=1;m<p;++m)j((f=h[m]).edge,(d=h[m-1]).site,f.site,l);(f=h[p-1]).edge=H((d=h[0]).site,f.site,null,l),Y(d),Y(f)}if(q(),t){var g,v,y,_,x,b,w,M,T,S,E=+t[0][0],A=+t[0][1],L=+t[1][0],t=+t[1][1],R=(V(E,A,L,t),E),C=A,P=L,O=t,F=$.length,D=!0;for(I=0;I<F;++I)if(g=$[I]){for(v=g.site,y=(_=g.halfedges).length;y--;)te[_[y]]||_.splice(y,1);for(y=0,x=_.length;y<x;)T=g,T=(S=(S=te[_[y]])[+(S.left===T.site)])[0],M=S[1],b=(w=W(g,te[_[++y%x]]))[0],w=w[1],(Math.abs(T-b)>ne||Math.abs(M-w)>ne)&&(_.splice(y,0,te.push(G(v,S,Math.abs(T-R)<ne&&ne<O-M?[R,Math.abs(b-R)<ne?w:O]:Math.abs(M-O)<ne&&ne<P-T?[Math.abs(w-O)<ne?b:P,O]:Math.abs(T-P)<ne&&ne<M-C?[P,Math.abs(b-P)<ne?w:C]:Math.abs(M-C)<ne&&ne<T-R?[Math.abs(w-C)<ne?b:R,C]:null))-1),++x);x&&(D=!1)}if(D){for(var N,U=1/0,I=0,D=null;I<F;++I)(g=$[I])&&(N=(N=(v=g.site)[0]-R)*N+(N=v[1]-C)*N)<U&&(U=N,D=g);D&&(E=[P,O],A=[P,C],D.halfedges.push(te.push(G(v=D.site,L=[R,C],t=[R,O]))-1,te.push(G(v,t,E))-1,te.push(G(v,E,A))-1,te.push(G(v,A,L))-1))}for(I=0;I<F;++I)!(g=$[I])||g.halfedges.length||delete $[I]}this.edges=te,this.cells=$,K=ee=te=$=null}h.prototype={constructor:h,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(e){return W(t,n[e])});return e.data=t.site.data,e})},triangles:function(){var c=[],h=this.edges;return this.cells.forEach(function(e,t){if(r=(n=e.halfedges).length)for(var n,r,i,a,o=e.site,s=-1,l=h[n[r-1]],u=l.left===o?l.right:l.left;++s<r;)i=u,u=(l=h[n[s]]).left===o?l.right:l.left,i&&u&&t<i.index&&t<u.index&&(a=u,(o[0]-a[0])*(i[1]-o[1])-(o[0]-i[0])*(a[1]-o[1])<0)&&c.push([o.data,i.data,u.data])}),c},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(n,r,e){for(var t,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;for(var l=n-i.site[0],u=r-i.site[1],c=l*l+u*u;i=a.cells[t=o],o=null,i.halfedges.forEach(function(e){var e=a.edges[e],t=e.left;(t!==i.site&&t||(t=e.right))&&(e=(e=n-t[0])*e+(e=r-t[1])*e)<c&&(c=e,o=t.index)}),null!==o;);return a._found=t,null==e||c<=e*e?i.site:null}},e.voronoi=function(){var i=o,a=s,t=null;function n(r){return new h(r.map(function(e,t){var n=[Math.round(i(e,t,r)/ne)*ne,Math.round(a(e,t,r)/ne)*ne];return n.index=t,n.data=e,n}),t)}return n.polygons=function(e){return n(e).polygons()},n.links=function(e){return n(e).links()},n.triangles=function(e){return n(e).triangles()},n.x=function(e){return arguments.length?(i="function"==typeof e?e:r(+e),n):i},n.y=function(e){return arguments.length?(a="function"==typeof e?e:r(+e),n):a},n.extent=function(e){return arguments.length?(t=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],n):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},n.size=function(e){return arguments.length?(t=null==e?null:[[0,0],[+e[0],+e[1]]],n):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},n},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],45:[function(e,t,n){var r,i;r=this,i=function(e,R,C,P,O,D){function N(e){return function(){return e}}function I(e,t,n){this.target=e,this.type=t,this.transform=n}function k(e,t,n){this.k=e,this.x=t,this.y=n}k.prototype={constructor:k,scale:function(e){return 1===e?this:new k(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new k(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var B=new k(1,0,0);function t(e){for(;!e.__zoom;)if(!(e=e.parentNode))return B;return e.__zoom}function F(){O.event.stopImmediatePropagation()}function U(){O.event.preventDefault(),O.event.stopImmediatePropagation()}function z(){return!O.event.ctrlKey&&!O.event.button}function H(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function G(){return this.__zoom||B}function j(){return-O.event.deltaY*(1===O.event.deltaMode?.05:O.event.deltaMode?1:.002)}function V(){return navigator.maxTouchPoints||"ontouchstart"in this}function W(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],t=e.invertY(t[1][1])-n[1][1];return e.translate(r<i?(r+i)/2:Math.min(0,r)||Math.max(0,i),a<t?(a+t)/2:Math.min(0,a)||Math.max(0,t))}t.prototype=k.prototype,e.zoom=function(){var d,o,s=z,u=H,f=W,i=j,t=V,a=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],l=250,c=P.interpolateZoom,n=R.dispatch("start","zoom","end"),h=500,m=150,g=0;function v(e){e.property("__zoom",G).on("wheel.zoom",M).on("mousedown.zoom",T).on("dblclick.zoom",S).filter(t).on("touchstart.zoom",E).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(a[0],Math.min(a[1],t)))===e.k?e:new k(t,e.x,e.y)}function _(e,t,n){var r=t[0]-n[0]*e.k,t=t[1]-n[1]*e.k;return r===e.x&&t===e.y?e:new k(e.k,r,t)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,n,l){e.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var e=arguments,r=w(this,e),t=u.apply(this,e),i=null==l?x(t):"function"==typeof l?l.apply(this,e):l,a=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),t=this.__zoom,o="function"==typeof n?n.apply(this,e):n,s=c(t.invert(i).concat(a/t.k),o.invert(i).concat(a/o.k));return function(e){var t,n;e=1===e?o:(t=s(e),new k(n=a/t[2],i[0]-t[0]*n,i[1]-t[1]*n)),r.zoom(null,e)}})}function w(e,t,n){return!n&&e.__zooming||new r(e,t)}function r(e,t){this.that=e,this.args=t,this.active=0,this.extent=u.apply(e,t),this.taps=0}function M(){if(s.apply(this,arguments)){var e=w(this,arguments),t=this.__zoom,n=Math.max(a[0],Math.min(a[1],t.k*Math.pow(2,i.apply(this,arguments)))),r=O.mouse(this);if(e.wheel)e.mouse[0][0]===r[0]&&e.mouse[0][1]===r[1]||(e.mouse[1]=t.invert(e.mouse[0]=r)),clearTimeout(e.wheel);else{if(t.k===n)return;e.mouse=[r,t.invert(r)],D.interrupt(this),e.start()}U(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},m),e.zoom("mouse",f(_(y(t,n),e.mouse[0],e.mouse[1]),e.extent,p))}}function T(){var n,e,t,r,i;!o&&s.apply(this,arguments)&&(n=w(this,arguments,!0),e=O.select(O.event.view).on("mousemove.zoom",function(){{var e,t;U(),n.moved||(e=O.event.clientX-r,t=O.event.clientY-i,n.moved=g<e*e+t*t)}n.zoom("mouse",f(_(n.that.__zoom,n.mouse[0]=O.mouse(n.that),n.mouse[1]),n.extent,p))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),C.dragEnable(O.event.view,n.moved),U(),n.end()},!0),t=O.mouse(this),r=O.event.clientX,i=O.event.clientY,C.dragDisable(O.event.view),F(),n.mouse=[t,this.__zoom.invert(t)],D.interrupt(this),n.start())}function S(){var e,t,n,r;s.apply(this,arguments)&&(r=this.__zoom,e=O.mouse(this),t=r.invert(e),n=r.k*(O.event.shiftKey?.5:2),r=f(_(y(r,n),e,t),u.apply(this,arguments),p),U(),0<l?O.select(this).transition().duration(l).call(b,r,e):O.select(this).call(v.transform,r))}function E(){if(s.apply(this,arguments)){var e,t,n,r,i=O.event.touches,a=i.length,o=w(this,arguments,O.event.changedTouches.length===a);for(F(),t=0;t<a;++t)n=i[t],r=[r=O.touch(this,i,n.identifier),this.__zoom.invert(r),n.identifier],o.touch0?o.touch1||o.touch0[2]===r[2]||(o.touch1=r,o.taps=0):(o.touch0=r,e=!0,o.taps=1+!!d);d=d&&clearTimeout(d),e&&(o.taps<2&&(d=setTimeout(function(){d=null},h)),D.interrupt(this),o.start())}}function A(){if(this.__zooming){var e,t=w(this,arguments),n=O.event.changedTouches,r=n.length;for(U(),d=d&&clearTimeout(d),e=t.taps=0;e<r;++e)c=n[e],h=O.touch(this,n,c.identifier),t.touch0&&t.touch0[2]===c.identifier?t.touch0[0]=h:t.touch1&&t.touch1[2]===c.identifier&&(t.touch1[0]=h);if(c=t.that.__zoom,t.touch1)var i=t.touch0[0],a=t.touch0[1],o=t.touch1[0],s=t.touch1[1],l=(l=o[0]-i[0])*l+(l=o[1]-i[1])*l,u=(u=s[0]-a[0])*u+(u=s[1]-a[1])*u,c=y(c,Math.sqrt(l/u)),h=[(i[0]+o[0])/2,(i[1]+o[1])/2],l=[(a[0]+s[0])/2,(a[1]+s[1])/2];else{if(!t.touch0)return;h=t.touch0[0],l=t.touch0[1]}t.zoom("touch",f(_(c,h,l),t.extent,p))}}function L(){if(this.__zooming){var e,t,n,r=w(this,arguments),i=O.event.changedTouches,a=i.length;for(F(),o&&clearTimeout(o),o=setTimeout(function(){o=null},h),e=0;e<a;++e)t=i[e],r.touch0&&r.touch0[2]===t.identifier?delete r.touch0:r.touch1&&r.touch1[2]===t.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):(r.end(),2===r.taps&&(n=O.select(this).on("dblclick.zoom"))&&n.apply(this,arguments))}}return v.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",G),e!==r?b(e,t,n):r.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},v.scaleBy=function(e,t,n){v.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n)},v.scaleTo=function(e,a,o){v.transform(e,function(){var e=u.apply(this,arguments),t=this.__zoom,n=null==o?x(e):"function"==typeof o?o.apply(this,arguments):o,r=t.invert(n),i="function"==typeof a?a.apply(this,arguments):a;return f(_(y(t,i),n,r),e,p)},o)},v.translateBy=function(e,t,n){v.transform(e,function(){return f(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),u.apply(this,arguments),p)})},v.translateTo=function(e,r,i,a){v.transform(e,function(){var e=u.apply(this,arguments),t=this.__zoom,n=null==a?x(e):"function"==typeof a?a.apply(this,arguments):a;return f(B.translate(n[0],n[1]).scale(t.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),e,p)},a)},r.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){O.customEvent(new I(v,e,this.that.__zoom),n.apply,n,[e,this.that,this.args])}},v.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:N(+e),v):i},v.filter=function(e){return arguments.length?(s="function"==typeof e?e:N(!!e),v):s},v.touchable=function(e){return arguments.length?(t="function"==typeof e?e:N(!!e),v):t},v.extent=function(e){return arguments.length?(u="function"==typeof e?e:N([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):u},v.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],v):[a[0],a[1]]},v.translateExtent=function(e){return arguments.length?(p[0][0]=+e[0][0],p[1][0]=+e[1][0],p[0][1]=+e[0][1],p[1][1]=+e[1][1],v):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},v.constrain=function(e){return arguments.length?(f=e,v):f},v.duration=function(e){return arguments.length?(l=+e,v):l},v.interpolate=function(e){return arguments.length?(c=e,v):c},v.on=function(){var e=n.on.apply(n,arguments);return e===n?v:e},v.clickDistance=function(e){return arguments.length?(g=(e=+e)*e,v):Math.sqrt(g)},v},e.zoomIdentity=B,e.zoomTransform=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dispatch"),e("d3-drag"),e("d3-interpolate"),e("d3-selection"),e("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-dispatch":22,"d3-drag":23,"d3-interpolate":31,"d3-selection":38,"d3-transition":43}],46:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("d3-array"),i=e("d3-axis"),a=e("d3-brush"),o=e("d3-chord"),s=e("d3-collection"),l=e("d3-color"),u=e("d3-contour"),c=e("d3-dispatch"),h=e("d3-drag"),d=e("d3-dsv"),f=e("d3-ease"),p=e("d3-fetch"),m=e("d3-force"),g=e("d3-format"),v=e("d3-geo"),y=e("d3-hierarchy"),_=e("d3-interpolate"),x=e("d3-path"),b=e("d3-polygon"),w=e("d3-quadtree"),M=e("d3-random"),T=e("d3-scale"),S=e("d3-scale-chromatic"),E=e("d3-selection"),A=e("d3-shape"),L=e("d3-time"),R=e("d3-time-format"),C=e("d3-timer"),P=e("d3-transition"),O=e("d3-voronoi"),D=e("d3-zoom");Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})}),Object.keys(i).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})}),Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})}),Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(s).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})}),Object.keys(l).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})}),Object.keys(u).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})}),Object.keys(c).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})}),Object.keys(h).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return h[e]}})}),Object.keys(d).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}})}),Object.keys(f).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return f[e]}})}),Object.keys(p).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}})}),Object.keys(m).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return m[e]}})}),Object.keys(g).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return g[e]}})}),Object.keys(v).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return v[e]}})}),Object.keys(y).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return y[e]}})}),Object.keys(_).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return _[e]}})}),Object.keys(x).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return x[e]}})}),Object.keys(b).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return b[e]}})}),Object.keys(w).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return w[e]}})}),Object.keys(M).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return M[e]}})}),Object.keys(T).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return T[e]}})}),Object.keys(S).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return S[e]}})}),Object.keys(E).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return E[e]}})}),Object.keys(A).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return A[e]}})}),Object.keys(L).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return L[e]}})}),Object.keys(R).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return R[e]}})}),Object.keys(C).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return C[e]}})}),Object.keys(P).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return P[e]}})}),Object.keys(O).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return O[e]}})}),Object.keys(D).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return D[e]}})}),n.version="5.16.0"},{"d3-array":15,"d3-axis":16,"d3-brush":17,"d3-chord":18,"d3-collection":19,"d3-color":20,"d3-contour":21,"d3-dispatch":22,"d3-drag":23,"d3-dsv":24,"d3-ease":25,"d3-fetch":26,"d3-force":27,"d3-format":28,"d3-geo":29,"d3-hierarchy":30,"d3-interpolate":31,"d3-path":32,"d3-polygon":33,"d3-quadtree":34,"d3-random":35,"d3-scale":37,"d3-scale-chromatic":36,"d3-selection":38,"d3-shape":39,"d3-time":41,"d3-time-format":40,"d3-timer":42,"d3-transition":43,"d3-voronoi":44,"d3-zoom":45}],47:[function(e,t,n){var r,i;r=this,i=function(i){function d(e,t,n,r,i,a,o){return e.a=t,e.b=n,e.c=r,e.d=i,e.e=a,e.f=o,e}var u,c,s,r,f,p,m,g,h="transform",v=h+"Origin",y=function(e){var t,n=e.ownerDocument||e;!(h in e.style)&&"msTransform"in e.style&&(v=(h="msTransform")+"Origin");for(;n.parentNode&&(n=n.parentNode););return c=window,m=new Me,n&&(s=(u=n).documentElement,r=n.body,e=n.createElement("div"),t=n.createElement("div"),r.appendChild(e),e.appendChild(t),e.style.position="static",e.style[h]="translate3d(0,0,1px)",g=t.offsetParent!==e,r.removeChild(e)),n},l=function(e){for(var t,n;e&&e!==r;)(n=e._gsap)&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),t?t.push(n):t=[n]),e=e.parentNode;return t},_=[],x=[],b=function(){return c.pageYOffset||u.scrollTop||s.scrollTop||r.scrollTop||0},w=function(){return c.pageXOffset||u.scrollLeft||s.scrollLeft||r.scrollLeft||0},M=function(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)},T=function e(t){return"fixed"===c.getComputedStyle(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},S=function e(t,n){var r,i,a,o,s,l;if(t.parentNode&&(u||y(t)))return l=(r=M(t))?r.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i=r?n?"rect":"g":"div",a=2!==n?0:100,o=3===n?100:0,s="position:absolute;display:block;pointer-events:none;",l=u.createElementNS?u.createElementNS(l.replace(/^https/,"http"),i):u.createElement(i),n&&(r?(p=p||e(t),l.setAttribute("width",.01),l.setAttribute("height",.01),l.setAttribute("transform","translate("+a+","+o+")"),p):(f||((f=e(t)).style.cssText=s),l.style.cssText=s+"width:0.1px;height:0.1px;top:"+o+"px;left:"+a+"px",f)).appendChild(l),l;throw"Need document and parent."},E=function(e){for(var t=new Me,n=0;n<e.numberOfItems;n++)t.multiply(e.getItem(n).matrix);return t},A=function(e,t){var n,r,i,a,o=M(e),s=e===o,l=o?_:x;if(e===c)return e;if(l.length||l.push(S(e,1),S(e,2),S(e,3)),l=o?p:f,o)r=s?{x:0,y:0}:e.getBBox(),a=(n=e.transform?e.transform.baseVal:{}).numberOfItems?(i=(n=1<n.numberOfItems?E(n):n.getItem(0).matrix).a*r.x+n.c*r.y,n.b*r.x+n.d*r.y):(n=m,i=r.x,r.y),t&&"g"===e.tagName.toLowerCase()&&(i=a=0),l.setAttribute("transform","matrix("+n.a+","+n.b+","+n.c+","+n.d+","+(n.e+i)+","+(n.f+a)+")"),(s?o:e.parentNode).appendChild(l);else{if(i=a=0,g)for(n=e.offsetParent,r=e;(r=r&&r.parentNode)&&r!==n&&r.parentNode;)4<(c.getComputedStyle(r)[h]+"").length&&(i=r.offsetLeft,a=r.offsetTop,r=0);(r=l.style).top=e.offsetTop-a+"px",r.left=e.offsetLeft-i+"px",n=c.getComputedStyle(e),r[h]=n[h],r[v]=n[v],r.border=n.border,r.borderLeftStyle=n.borderLeftStyle,r.borderTopStyle=n.borderTopStyle,r.borderLeftWidth=n.borderLeftWidth,r.borderTopWidth=n.borderTopWidth,r.position="fixed"===n.position?"fixed":"absolute",e.parentNode.appendChild(l)}return l},Me=((e=L.prototype).inverse=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.e,a=this.f,o=e*r-t*n||1e-10;return d(this,r/o,-t/o,-n/o,e/o,(n*a-r*i)/o,-(e*a-t*i)/o)},e.multiply=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,a=this.e,o=this.f,s=e.a,l=e.c,u=e.b,c=e.d,h=e.e,e=e.f;return d(this,s*t+u*r,s*n+u*i,l*t+c*r,l*n+c*i,a+h*t+e*r,o+h*n+e*i)},e.clone=function(){return new L(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,a=this.e,o=this.f;return t===e.a&&n===e.b&&r===e.c&&i===e.d&&a===e.e&&o===e.f},e.apply=function(e,t){var n=e.x,e=e.y,r=this.a,i=this.b,a=this.c,o=this.d,s=this.e,l=this.f;return(t=void 0===t?{}:t).x=n*r+e*a+s||0,t.y=n*i+e*o+l||0,t},L);function L(e,t,n,r,i,a){d(this,e=void 0===e?1:e,t=void 0===t?0:t,n=void 0===n?0:n,r=void 0===r?1:r,i=void 0===i?0:i,a=void 0===a?0:a)}function Qe(e,t,n){if(!e||!e.parentNode||(u||y(e)).documentElement===e)return new Me;var r=l(e.parentNode),i=M(e)?_:x,n=A(e,n),a=i[0].getBoundingClientRect(),o=i[1].getBoundingClientRect(),i=i[2].getBoundingClientRect(),s=n.parentNode,e=T(e),i=new Me((o.left-a.left)/100,(o.top-a.top)/100,(i.left-a.left)/100,(i.top-a.top)/100,a.left+(e?0:w()),a.top+(e?0:b()));if(s.removeChild(n),r)for(a=r.length;a--;)(o=r[a]).scaleX=o.scaleY=0,o.renderTransform(1,o);return t?i.inverse():i}function Te(e){return Math.round(1e4*e)/1e4}function Je(e){for(var t=He.length;t--;)He[t]===e&&He.splice(t,1);Le.to(z,{overwrite:!0,delay:15,duration:0,onComplete:z,data:"_draggable"})}function Se(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()}function Ke(e){dt=e.touches&&ht<e.touches.length,We(e.target,"touchend",H)}function $e(e,t){We(e,"scroll",t),Xe(e.parentNode)||$e(e.parentNode,t)}function et(e,t){qe(e,"scroll",t),Xe(e.parentNode)||et(e.parentNode,t)}function tt(e,t){var n=G(e,"x"),r=G(e,"y");Xe(e)?e=Ve:tt(e.parentNode,t),e._gsMaxScrollX=n,e._gsMaxScrollY=r,t||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)}function nt(e,t,n){var r=e.style;r&&(Ue(r[t])&&(t=o(t,e)||t),null==n?r.removeProperty&&r.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):r[t]=n)}function Ee(e){var t;return e===Re?(n.left=n.top=0,n.width=n.right=Pe.clientWidth||e.innerWidth||a.clientWidth||0,n.height=n.bottom=(e.innerHeight||0)-20<Pe.clientHeight?Pe.clientHeight:e.innerHeight||a.clientHeight||0,n):(t=e.ownerDocument||Ce,e=Ue(e.pageX)?e.nodeType||Ue(e.left)||Ue(e.top)?De(e)[0].getBoundingClientRect():e:{left:e.pageX-Tt(t),top:e.pageY-Mt(t),right:e.pageX-Tt(t)+1,bottom:e.pageY-Mt(t)+1},Ue(e.right)&&!Ue(e.width)?(e.right=e.left+e.width,e.bottom=e.top+e.height):Ue(e.width)&&(e={width:e.right-e.left,height:e.bottom-e.top,right:e.right,left:e.left,bottom:e.bottom,top:e.top}),e)}function Ae(e,t,n){var r,i=e.vars,a=i[n],o=e._listeners[t];return Fe(a)&&(r=a.apply(i.callbackScope||e,i[n+"Params"]||[e.pointerEvent])),r=o&&!1===e.dispatchEvent(t)?!1:r}function rt(e,t){var n=De(e)[0];return n.nodeType||n===Re?j(n,t):Ue(e.left)?{left:n=e.min||e.minX||e.minRotation||0,top:t=e.min||e.minY||0,width:(e.max||e.maxX||e.maxRotation||0)-n,height:(e.max||e.maxY||0)-t}:{left:e.left-(n={x:0,y:0}).x,top:e.top-n.y,width:e.width,height:e.height}}function it(i,a,e,t,o,n){var r,s,l,u={};if(a)if(1!==o&&a instanceof Array){if(u.end=r=[],l=a.length,pt(a[0]))for(s=0;s<l;s++)r[s]=bt(a[s],o);else for(s=0;s<l;s++)r[s]=a[s]*o;e+=1.1,t-=1.1}else Fe(a)?u.end=function(e){var t,n,r=a.call(i,e);if(1!==o)if(pt(r)){for(n in t={},r)t[n]=r[n]*o;r=t}else r*=o;return r}:u.end=a;return!e&&0!==e||(u.max=e),!t&&0!==t||(u.min=t),n&&(u.velocity=0),u}function at(e){var t;return!(!e||!e.getAttribute||e===a)&&(!("true"!==(t=e.getAttribute("data-clickable"))&&("false"===t||!e.onclick&&!U.test(e.nodeName+"")&&"true"!==e.getAttribute("contentEditable")))||at(e.parentNode))}function ot(e,t){for(var n,r=e.length;r--;)(n=e[r]).ondragstart=n.onselectstart=t?null:k,Le.set(n,{lazy:!0,userSelect:t?"text":"none"})}function st(e){return"fixed"===St(e).position||((e=e.parentNode)&&1===e.nodeType?st(e):void 0)}function lt(a,i){a=Le.utils.toArray(a)[0],i=i||{};var o,s,l,e,u,c,h=document.createElement("div"),d=h.style,t=a.firstChild,f=0,p=0,m=a.scrollTop,g=a.scrollLeft,v=a.scrollWidth,y=a.scrollHeight,_=0,x=0,b=0;O&&!1!==i.force3D?(u="translate3d(",c="px,0px)"):B&&(u="translate(",c="px)"),this.scrollTop=function(e,t){if(!arguments.length)return-this.top();this.top(-e,t)},this.scrollLeft=function(e,t){if(!arguments.length)return-this.left();this.left(-e,t)},this.left=function(e,t){if(!arguments.length)return-(a.scrollLeft+p);var n=a.scrollLeft-g,r=p;(2<n||n<-2)&&!t?(g=a.scrollLeft,Le.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-g),i.onKill&&i.onKill()):((e=-e)<0?(p=e-.5|0,e=0):x<e?(p=e-x|0,e=x):p=0,(p||r)&&(this._skip||(d[B]=u+-p+"px,"+-f+c),0<=p+_)&&(d.paddingRight=p+_+"px"),a.scrollLeft=0|e,g=a.scrollLeft)},this.top=function(e,t){if(!arguments.length)return-(a.scrollTop+f);var n=a.scrollTop-m,r=f;(2<n||n<-2)&&!t?(m=a.scrollTop,Le.killTweensOf(this,{top:1,scrollTop:1}),this.top(-m),i.onKill&&i.onKill()):((e=-e)<0?(f=e-.5|0,e=0):b<e?(f=e-b|0,e=b):f=0,!f&&!r||this._skip||(d[B]=u+-p+"px,"+-f+c),a.scrollTop=0|e,m=a.scrollTop)},this.maxScrollTop=function(){return b},this.maxScrollLeft=function(){return x},this.disable=function(){for(t=h.firstChild;t;)e=t.nextSibling,a.appendChild(t),t=e;a===h.parentNode&&a.removeChild(h)},this.enable=function(){if((t=a.firstChild)!==h){for(;t;)e=t.nextSibling,h.appendChild(t),t=e;a.appendChild(h),this.calibrate()}},this.calibrate=function(e){var t,n,r,i=a.clientWidth===o;m=a.scrollTop,g=a.scrollLeft,(!i||a.clientHeight!==s||h.offsetHeight!==l||v!==a.scrollWidth||y!==a.scrollHeight||e)&&((f||p)&&(n=this.left(),r=this.top(),this.left(-a.scrollLeft),this.top(-a.scrollTop)),t=St(a),(!i||e)&&(d.display="block",d.width="auto",d.paddingRight="0px",_=Math.max(0,a.scrollWidth-a.clientWidth))&&(_+=parseFloat(t.paddingLeft)+(D?parseFloat(t.paddingRight):0)),d.display="inline-block",d.position="relative",d.overflow="visible",d.verticalAlign="top",d.boxSizing="content-box",d.width="100%",d.paddingRight=_+"px",D&&(d.paddingBottom=t.paddingBottom),o=a.clientWidth,s=a.clientHeight,v=a.scrollWidth,y=a.scrollHeight,x=a.scrollWidth-o,b=a.scrollHeight-s,l=h.offsetHeight,d.display="block",n||r)&&(this.left(n),this.top(r))},this.content=h,this.element=a,this._skip=!1,this.enable()}function ut(e){var t,n,r,i;N()&&document.body&&(t=window&&window.navigator,Re=window,Ce=document,Pe=Ce.documentElement,a=Ce.body,R=F("div"),ft=!!window.PointerEvent,(Oe=F("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",Be="grab"===Oe.style.cursor?"grab":"move",Ie=t&&-1!==t.userAgent.toLowerCase().indexOf("android"),ct="ontouchstart"in Pe&&"orientation"in Re||t&&(0<t.MaxTouchPoints||0<t.msMaxTouchPoints),t=F("div"),n=F("div"),r=n.style,i=a,r.display="inline-block",r.position="relative",t.style.cssText=n.innerHTML="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",t.appendChild(n),i.appendChild(t),r=n.offsetHeight+18>t.scrollHeight,i.removeChild(t),D=r,Ne=(e=>{for(var t=e.split(","),n=(("onpointerdown"in R?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in R?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":e).split(",")),r={},i=4;-1<--i;)r[t[i]]=n[i],r[n[i]]=t[i];try{Pe.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){P=1}}))}catch(e){}return r})("touchstart,touchmove,touchend,touchcancel"),We(Ce,"touchcancel",k),We(Re,"touchmove",k),a&&a.addEventListener("touchstart",k),We(Ce,"contextmenu",function(){for(var e in Ge)Ge[e].isPressed&&Ge[e].endDrag()}),Le=C=I()),Le?(ke=Le.plugins.inertia,o=Le.utils.checkPrefix,B=o(B),mt=o(mt),De=Le.utils.toArray,O=!!o("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")}var Le,Re,Ce,Pe,a,R,Oe,C,o,De,P,ct,Ne,ht,dt,Ie,ke,Be,ft,O,D,N=function(){return"undefined"!=typeof window},I=function(){return Le||N()&&(Le=window.gsap)&&Le.registerPlugin&&Le},Fe=function(e){return"function"==typeof e},pt=function(e){return"object"==typeof e},Ue=function(e){return void 0===e},k=function(){return!1},B="transform",mt="transformOrigin",gt=Array.isArray,F=function(e,t){t=Ce.createElementNS?Ce.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ce.createElement(e);return t.style?t:Ce.createElement(e)},vt=180/Math.PI,yt=new Me,ze=Date.now||function(){return(new Date).getTime()},He=[],Ge={},_t=0,U=/^(?:a|input|textarea|button|select)$/i,xt=0,je={},Ve={},bt=function(e,t){var n,r={};for(n in e)r[n]=t?e[n]*t:e[n];return r},wt=function(){return He.forEach(function(e){return e()})},z=function(){return!He.length&&Le.ticker.remove(wt)},We=function(e,t,n,r){var i;e.addEventListener&&(i=Ne[t],r=r||(P?{passive:!1}:null),e.addEventListener(i||t,n,r),i)&&t!==i&&e.addEventListener(t,n,r)},qe=function(e,t,n){var r;e.removeEventListener&&(r=Ne[t],e.removeEventListener(r||t,n),r)&&t!==r&&e.removeEventListener(t,n)},H=function e(t){dt=t.touches&&ht<t.touches.length,qe(t.target,"touchend",e)},Mt=function(e){return Re.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},Tt=function(e){return Re.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},Xe=function(e){return!(e&&e!==Pe&&9!==e.nodeType&&e!==Ce.body&&e!==Re&&e.nodeType&&e.parentNode)},G=function(e,t){var t="x"===t?"Width":"Height",n="scroll"+t,r="client"+t;return Math.max(0,Xe(e)?Math.max(Pe[n],a[n])-(Re["inner"+t]||Pe[r]||a[r]):e[n]-e[r])},St=function(e){return Re.getComputedStyle(!(e instanceof Element)&&(e.host||(e.parentNode||{}).host)||e)},n={},Ye={},j=function(e,t){t=De(t)[0];var n,r,i,a,o,s,l,u=e.getBBox&&e.ownerSVGElement,c=e.ownerDocument||Ce;if(e===Re)i=Mt(c),r=(n=Tt(c))+(c.documentElement.clientWidth||e.innerWidth||c.body.clientWidth||0),a=i+((e.innerHeight||0)-20<c.documentElement.clientHeight?c.documentElement.clientHeight:e.innerHeight||c.body.clientHeight||0);else{if(t===Re||Ue(t))return e.getBoundingClientRect();n=i=0,u?(s=(o=e.getBBox()).width,l=o.height):(e.viewBox&&(o=e.viewBox.baseVal)&&(n=o.x||0,i=o.y||0,s=o.width,l=o.height),s||(o="border-box"===(c=St(e)).boxSizing,s=(parseFloat(c.width)||e.clientWidth||0)+(o?0:parseFloat(c.borderLeftWidth)+parseFloat(c.borderRightWidth)),l=(parseFloat(c.height)||e.clientHeight||0)+(o?0:parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth)))),r=s,a=l}return e===t?{left:n,top:i,width:r-n,height:a-i}:(o=(u=Qe(t,!0).multiply(Qe(e))).apply({x:n,y:i}),c=u.apply({x:r,y:i}),s=u.apply({x:r,y:a}),l=u.apply({x:n,y:a}),n=Math.min(o.x,c.x,s.x,l.x),i=Math.min(o.y,c.y,s.y,l.y),{left:n+((e=t.parentNode||{}).scrollLeft||0),top:i+(e.scrollTop||0),width:Math.max(o.x,c.x,s.x,l.x)-n,height:Math.max(o.y,c.y,s.y,l.y)-i})};function V(e){this._listeners={},this.target=e||this}(e=V.prototype).addEventListener=function(e,t){e=this._listeners[e]||(this._listeners[e]=[]);~e.indexOf(t)||e.push(t)},e.removeEventListener=function(e,t){e=this._listeners[e],t=e&&e.indexOf(t)||-1;-1<t&&e.splice(t,1)},e.dispatchEvent=function(t){var n,r=this;return(this._listeners[t]||[]).forEach(function(e){return!1===e.call(r,{type:t,target:r.target})&&(n=!1)}),n};e=Et=V,(t=Ze).prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e,Ze.register=function(e){Le=e,ut()},Ze.create=function(e,t){return C||ut(!0),De(e).map(function(e){return new Ze(e,t)})},Ze.get=function(e){return Ge[(De(e)[0]||{})._gsDragID]},Ze.timeSinceDrag=function(){return(ze()-xt)/1e3},Ze.hitTest=function(e,t,n){var r,i,a,o,s,l;return e!==t&&(e=Ee(e),t=Ee(t),s=e.top,o=e.left,r=e.bottom,i=e.width,a=e.height,(l=t.left>(e=e.right)||t.right<o||t.top>r||t.bottom<s)||!n?!l:(l=-1!==(n+"").indexOf("%"),n=parseFloat(n)||0,(o={left:Math.max(o,t.left),top:Math.max(s,t.top)}).width=Math.min(e,t.right)-o.left,o.height=Math.min(r,t.bottom)-o.top,!(o.width<0||o.height<0)&&(l?i*a*(n*=.01)<=(s=o.width*o.height)||s>=t.width*t.height*n:n<o.width&&n<o.height)))};var Et,e,t=Ze;function Ze(p,c){function i(e){return Se(e),e.stopImmediatePropagation&&e.stopImmediatePropagation(),!1}function a(e,t){var n;if(!h||k.isPressed||!e||("mousedown"===e.type||"pointerdown"===e.type)&&!t&&ze()-U<30&&Ne[k.pointerEvent.type])O&&e&&h&&Se(e);else if(X=ye(),k.pointerEvent=e,Ne[e.type]?(f=~e.type.indexOf("touch")?e.currentTarget||e.target:H,We(f,"touchend",o),We(f,"touchmove",xe),We(f,"touchcancel",o),We(H,"touchstart",Ke)):(f=null,We(H,"mousemove",xe)),P=null,ft&&f||(We(H,"mouseup",o),e&&e.target&&We(e.target,"mouseup",o)),q=oe.call(k,e.target)&&!1===c.dragClickables&&!t)We(e.target,"change",o),Ae(k,"pressInit","onPressInit"),Ae(k,"press","onPress"),ot(B,!0);else{if(g=!(!f||N===I||!1===k.vars.allowNativeTouchScrolling||k.vars.allowContextMenu&&e&&(e.ctrlKey||2<e.which))&&(N?"y":"x"),(O=!g&&!k.allowEventDefault)&&(Se(e),We(Re,"touchforcechange",Se)),e.changedTouches?(e=V=e.changedTouches[0],d=e.identifier):e.pointerId?d=e.pointerId:V=d=null,ht++,t=G,He.push(t),1===He.length&&Le.ticker.add(wt),y=k.pointerY=e.pageY,v=k.pointerX=e.pageX,Ae(k,"pressInit","onPressInit"),(g||k.autoScroll)&&tt(p.parentNode),!p.parentNode||!k.autoScroll||m||D||!p.parentNode._gsMaxScrollX||Oe.parentNode||p.getBBox||(Oe.style.width=p.parentNode.scrollWidth+"px",p.parentNode.appendChild(Oe)),ve(),k.tween&&k.tween.kill(),k.isThrowing=!1,Le.killTweensOf(m||p,r,!0),m&&Le.killTweensOf(p,{scrollTo:1},!0),k.tween=k.lockedAxis=null,!c.zIndexBoost&&(D||m||!1===c.zIndexBoost)||(p.style.zIndex=Ze.zIndex++),k.isPressed=!0,j=!(!c.onDrag&&!k._listeners.drag),u=!(!c.onMove&&!k._listeners.move),!D&&(!1!==c.cursor||c.activeCursor))for(n=B.length;-1<--n;)Le.set(B[n],{cursor:c.activeCursor||c.cursor||("grab"===Be?"grabbing":Be)});Ae(k,"press","onPress")}}function s(e){var t,n;e&&k.isDragging&&!m&&(t=(e=e.target||p.parentNode).scrollLeft-e._gsScrollX,n=e.scrollTop-e._gsScrollY,t||n)&&(C?(v-=t*C.a+n*C.c,y-=n*C.d+t*C.b):(v-=t,y-=n),e._gsScrollX+=t,e._gsScrollY+=n,be(k.pointerX,k.pointerY))}function l(e){var t=(n=ze())-U<40,n=n-te<40,r=t&&Z===U,i=k.pointerEvent&&k.pointerEvent.defaultPrevented,a=t&&Q===U,o=e.isTrusted||null==e.isTrusted&&t&&r;(r||n&&!1!==k.vars.suppressClickOnDrag)&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),!t||k.pointerEvent&&k.pointerEvent.defaultPrevented||r&&(!o||a)?!(k.isPressed||n||t)||o&&e.detail&&t&&!i||Se(e):(o&&r&&(Q=U),Z=U)}function n(e){return C?{x:e.x*C.a+e.y*C.c+C.e,y:e.x*C.b+e.y*C.d+C.f}:{x:e.x,y:e.y}}var h,m,v,y,_,x,b,j,u,w,M,T,S,V,d,W,E,A,L,R,q,f,C,X,g,P,Y,Z,Q,O,e=Et.call(this)||this,t=(Le||ut(1),p=De(p)[0],ke=ke||Le.plugins.inertia,e.vars=c=bt(c||{}),e.target=p,e.x=e.y=e.rotation=0,e.dragResistance=parseFloat(c.dragResistance)||0,e.edgeResistance=isNaN(c.edgeResistance)?1:parseFloat(c.edgeResistance)||0,e.lockAxis=c.lockAxis,e.autoScroll=c.autoScroll||0,e.lockedAxis=null,e.allowEventDefault=!!c.allowEventDefault,Le.getProperty(p,"x"),(c.type||"x,y").toLowerCase()),J=~t.indexOf("x")||~t.indexOf("y"),D=-1!==t.indexOf("rotation"),K=D?"rotation":J?"x":"left",$=J?"y":"top",N=!(!~t.indexOf("x")&&!~t.indexOf("left")&&"scroll"!==t),I=!(!~t.indexOf("y")&&!~t.indexOf("top")&&"scroll"!==t),ee=c.minimumMovement||2,k=(e=>{if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e})(e),B=De(c.trigger||c.handle||p),r={},te=0,F=!1,ne=c.autoScrollMarginTop||40,re=c.autoScrollMarginRight||40,ie=c.autoScrollMarginBottom||40,ae=c.autoScrollMarginLeft||40,oe=c.clickableTest||at,U=0,z=p._gsap||Le.core.getCache(p),se=st(p),le=function(e,t){return parseFloat(z.get(p,e,t))},H=p.ownerDocument||Ce,G=function e(t){if(k.autoScroll&&k.isDragging&&(F||E)){var n,r,i,a,o,s,l,u,c=p,h=15*k.autoScroll;for(F=!1,Ve.scrollTop=null!=Re.pageYOffset?Re.pageYOffset:(null!=H.documentElement.scrollTop?H.documentElement:H.body).scrollTop,Ve.scrollLeft=null!=Re.pageXOffset?Re.pageXOffset:(null!=H.documentElement.scrollLeft?H.documentElement:H.body).scrollLeft,a=k.pointerX-Ve.scrollLeft,o=k.pointerY-Ve.scrollTop;c&&!r;)n=(r=Xe(c.parentNode))?Ve:c.parentNode,i=r?{bottom:Math.max(Pe.clientHeight,Re.innerHeight||0),right:Math.max(Pe.clientWidth,Re.innerWidth||0),left:0,top:0}:n.getBoundingClientRect(),s=l=0,I&&((u=n._gsMaxScrollY-n.scrollTop)<0?l=u:o>i.bottom-ie&&u?(F=!0,l=Math.min(u,h*(1-Math.max(0,i.bottom-o)/ie)|0)):o<i.top+ne&&n.scrollTop&&(F=!0,l=-Math.min(n.scrollTop,h*(1-Math.max(0,o-i.top)/ne)|0)),l)&&(n.scrollTop+=l),N&&((u=n._gsMaxScrollX-n.scrollLeft)<0?s=u:a>i.right-re&&u?(F=!0,s=Math.min(u,h*(1-Math.max(0,i.right-a)/re)|0)):a<i.left+ae&&n.scrollLeft&&(F=!0,s=-Math.min(n.scrollLeft,h*(1-Math.max(0,a-i.left)/ae)|0)),s)&&(n.scrollLeft+=s),r&&(s||l)&&(Re.scrollTo(n.scrollLeft,n.scrollTop),be(k.pointerX+s,k.pointerY+l)),c=n}var d,f;E&&(d=k.x,f=k.y,D?(k.deltaX=d-parseFloat(z.rotation),k.rotation=d,z.rotation=d+"deg",z.renderTransform(1,z)):m?(I&&(k.deltaY=f-m.top(),m.top(f)),N&&(k.deltaX=d-m.left(),m.left(d))):J?(I&&(k.deltaY=f-parseFloat(z.y),z.y=f+"px"),N&&(k.deltaX=d-parseFloat(z.x),z.x=d+"px"),z.renderTransform(1,z)):(I&&(k.deltaY=f-parseFloat(p.style.top||0),p.style.top=f+"px"),N&&(k.deltaY=d-parseFloat(p.style.left||0),p.style.left=d+"px")),!j||t||Y||(!(Y=!0)===Ae(k,"drag","onDrag")&&(N&&(k.x-=k.deltaX),I&&(k.y-=k.deltaY),e(!0)),Y=!1)),E=!1},ue=function(e,t){var n,r,i=k.x,a=k.y;p._gsap||(z=Le.core.getCache(p)),J?(k.x=parseFloat(z.x),k.y=parseFloat(z.y)):D?k.x=k.rotation=parseFloat(z.rotation):m?(k.y=m.top(),k.x=m.left()):(k.y=parseInt(p.style.top||(r=St(p))&&r.top,10)||0,k.x=parseInt(p.style.left||(r||{}).left,10)||0),(A||L||R)&&!t&&(k.isDragging||k.isThrowing)&&(R&&(je.x=k.x,je.y=k.y,(n=R(je)).x!==k.x&&(k.x=n.x,E=!0),n.y!==k.y)&&(k.y=n.y,E=!0),A&&(n=A(k.x))!==k.x&&(k.x=n,D&&(k.rotation=n),E=!0),L)&&((n=L(k.y))!==k.y&&(k.y=n),E=!0),E&&G(!0),e||(k.deltaX=k.x-i,k.deltaY=k.y-a,Ae(k,"throwupdate","onThrowUpdate"))},ce=function(o,s,l,n){return null==s&&(s=-1e20),null==l&&(l=1e20),Fe(o)?function(e){var t=k.isPressed?1-k.edgeResistance:1;return o.call(k,l<e?l+(e-l)*t:e<s?s+(e-s)*t:e)*n}:gt(o)?function(e){for(var t,n,r=o.length,i=0,a=1e20;-1<--r;)(n=(n=(t=o[r])-e)<0?-n:n)<a&&s<=t&&t<=l&&(i=r,a=n);return o[i]}:isNaN(o)?function(e){return e}:function(){return o*n}},he=function(o,i,a,s,l,u,c){return u=u&&u<1e20?u*u:1e20,Fe(o)?function(e){var t=k.isPressed?1-k.edgeResistance:1,n=e.x,r=e.y;return e.x=n=a<n?a+(n-a)*t:n<i?i+(n-i)*t:n,e.y=r=l<r?l+(r-l)*t:r<s?s+(r-s)*t:r,(t=o.call(k,e))!==e&&(e.x=t.x,e.y=t.y),1!==c&&(e.x*=c,e.y*=c),u<1e20&&(t=e.x-n,u<t*t+(t=e.y-r)*t)&&(e.x=n,e.y=r),e}:gt(o)?function(e){for(var t,n,r=o.length,i=0,a=1e20;-1<--r;)(n=(t=(n=o[r]).x-e.x)*t+(t=n.y-e.y)*t)<a&&(i=r,a=n);return a<=u?o[i]:e}:function(e){return e}},de=function(){var e,t;b=!1,m?(m.calibrate(),k.minX=M=-m.maxScrollLeft(),k.minY=S=-m.maxScrollTop(),k.maxX=w=k.maxY=T=0,b=!0):c.bounds&&(t=rt(c.bounds,p.parentNode),D?(k.minX=M=t.left,k.maxX=w=t.left+t.width,k.minY=S=k.maxY=T=0):Ue(c.bounds.maxX)&&Ue(c.bounds.maxY)?(e=rt(p,p.parentNode),k.minX=M=Math.round(le(K,"px")+t.left-e.left-.5),k.minY=S=Math.round(le($,"px")+t.top-e.top-.5),k.maxX=w=Math.round(M+(t.width-e.width)),k.maxY=T=Math.round(S+(t.height-e.height))):(t=c.bounds,k.minX=M=t.minX,k.minY=S=t.minY,k.maxX=w=t.maxX,k.maxY=T=t.maxY),w<M&&(k.minX=w,k.maxX=w=M,M=k.minX),T<S&&(k.minY=T,k.maxY=T=S,S=k.minY),D&&(k.minRotation=M,k.maxRotation=w),b=!0),c.liveSnap&&(e=!0===c.liveSnap?c.snap||{}:c.liveSnap,t=gt(e)||Fe(e),D?(A=ce(t?e:e.rotation,M,w,1),L=null):e.points?R=he(t?e:e.points,M,w,S,T,e.radius,m?-1:1):(N&&(A=ce(t?e:e.x||e.left||e.scrollLeft,M,w,m?-1:1)),I&&(L=ce(t?e:e.y||e.top||e.scrollTop,S,T,m?-1:1))))},fe=function(){k.isThrowing=!1,Ae(k,"throwcomplete","onThrowComplete")},pe=function(){k.isThrowing=!1},me=function(e,t){var n,r;e&&ke?(!0===e&&(n=c.snap||c.liveSnap||{},r=gt(n)||Fe(n),e={resistance:(c.throwResistance||c.resistance||1e3)/(D?10:1)},D?e.rotation=it(k,r?n:n.rotation,w,M,1,t):(N&&(e[K]=it(k,r?n:n.points||n.x||n.left,w,M,m?-1:1,t||"x"===k.lockedAxis)),I&&(e[$]=it(k,r?n:n.points||n.y||n.top,T,S,m?-1:1,t||"y"===k.lockedAxis)),(n.points||gt(n)&&pt(n[0]))&&(e.linkedProps=K+","+$,e.radius=n.radius))),k.isThrowing=!0,r=isNaN(c.overshootTolerance)?1===c.edgeResistance?0:1-k.edgeResistance+.2:c.overshootTolerance,e.duration||(e.duration={max:Math.max(c.minDuration||0,"maxDuration"in c?c.maxDuration:2),min:isNaN(c.minDuration)?0===r||pt(e)&&1e3<e.resistance?0:.5:c.minDuration,overshoot:r}),k.tween=t=Le.to(m||p,{inertia:e,data:"_draggable",onComplete:fe,onInterrupt:pe,onUpdate:c.fastMode?Ae:ue,onUpdateParams:c.fastMode?[k,"onthrowupdate","onThrowUpdate"]:n&&n.radius?[!1,!0]:[]}),c.fastMode||(m&&(m._skip=!0),t.render(1e9,!0,!0),ue(!0,!0),k.endX=k.x,k.endY=k.y,D&&(k.endRotation=k.x),t.play(0),ue(!0,!0),m&&(m._skip=!1))):b&&k.applyBounds()},ge=function(e){var t=C;C=Qe(p.parentNode,!0),e&&k.isPressed&&!C.equals(t||new Me)&&(e=t.inverse().apply({x:v,y:y}),C.apply(e,e),v=e.x,y=e.y),C.equals(yt)&&(C=null)},ve=function(){var e,t=1-k.edgeResistance,n=se?Tt(H):0,r=se?Mt(H):0;ge(!1),C&&(Ye.x=k.pointerX-n,Ye.y=k.pointerY-r,C.apply(Ye,Ye),v=Ye.x,y=Ye.y),E&&(be(k.pointerX,k.pointerY),G(!0)),m?(de(),x=m.top(),_=m.left()):(ye()?(ue(!0,!0),de()):k.applyBounds(),D?(e=p.ownerSVGElement?[z.xOrigin-p.getBBox().x,z.yOrigin-p.getBBox().y]:(St(p)[mt]||"0 0").split(" "),W=k.rotationOrigin=Qe(p).apply({x:parseFloat(e[0])||0,y:parseFloat(e[1])||0}),ue(!0,!0),e=k.pointerX-W.x-n,n=W.y-k.pointerY+r,_=k.x,x=k.y=Math.atan2(n,e)*vt):(x=le($,"px"),_=le(K,"px"))),b&&t&&(w<_?_=w+(_-w)/t:_<M&&(_=M-(M-_)/t),D||(T<x?x=T+(x-T)/t:x<S&&(x=S-(S-x)/t))),k.startX=_,k.startY=x},ye=function(){return k.tween&&k.tween.isActive()},_e=function(){!Oe.parentNode||ye()||k.isDragging||Oe.parentNode.removeChild(Oe)},xe=function(e){var t,n,r,i,a=e;if(h&&!dt&&k.isPressed&&e){if(t=(k.pointerEvent=e).changedTouches){if((e=t[0])!==V&&e.identifier!==d){for(n=t.length;-1<--n&&(e=t[n]).identifier!==d;);if(n<0)return}}else if(e.pointerId&&d&&e.pointerId!==d)return;f&&g&&!P&&(Ye.x=e.pageX,Ye.y=e.pageY,C&&C.apply(Ye,Ye),i=Ye.y,(r=Math.abs(Ye.x-v))!==(i=Math.abs(i-y))&&(ee<r||ee<i)||Ie&&g===P)&&(P=i<r&&N?"x":"y",g&&P!==g&&We(Re,"touchforcechange",Se),!1!==k.vars.lockAxisOnTouchScroll&&N&&I&&(k.lockedAxis="x"===P?"y":"x",Fe(k.vars.onLockAxis))&&k.vars.onLockAxis.call(k,a),Ie)&&g===P?o(a):(O=k.allowEventDefault||g&&(!P||g===P)||!1===a.cancelable?O&&!1:(Se(a),!0),k.autoScroll&&(F=!0),be(e.pageX,e.pageY,u))}else O&&e&&h&&Se(e)},be=function(e,t,n){var r,i,a,o=1-k.dragResistance,s=1-k.edgeResistance,l=k.pointerX,u=k.pointerY,c=x,h=k.x,d=k.y,f=k.endX,p=k.endY,m=k.endRotation,g=E;k.pointerX=e,k.pointerY=t,se&&(e-=Tt(H),t-=Mt(H)),D?(r=Math.atan2(W.y-t,e-W.x)*vt,180<(i=k.y-r)?(x-=360,k.y=r):i<-180&&(x+=360,k.y=r),i=k.x!==_||Math.abs(x-r)>ee?(k.y=r,_+(x-r)*o):_):(C&&(a=e*C.a+t*C.c+C.e,t=e*C.b+t*C.d+C.f,e=a),(t=t-y)<ee&&-ee<t&&(t=0),(e=e-v)<ee&&-ee<e&&(e=0),(k.lockAxis||k.lockedAxis)&&(e||t)&&((a=k.lockedAxis)||(k.lockedAxis=a=N&&Math.abs(e)>Math.abs(t)?"y":I?"x":null,a&&Fe(k.vars.onLockAxis)&&k.vars.onLockAxis.call(k,k.pointerEvent)),"y"===a?t=0:"x"===a&&(e=0)),i=Te(_+e*o),r=Te(x+t*o)),(A||L||R)&&(k.x!==i||k.y!==r&&!D)?(R&&(je.x=i,je.y=r,a=R(je),i=Te(a.x),r=Te(a.y)),A&&(i=Te(A(i))),L&&(r=Te(L(r)))):b&&(w<i?i=w+Math.round((i-w)*s):i<M&&(i=M+Math.round((i-M)*s)),D||(T<r?r=Math.round(T+(r-T)*s):r<S&&(r=Math.round(S+(r-S)*s)))),k.x===i&&(k.y===r||D)||(D?(k.endRotation=k.x=k.endX=i,E=!0):(I&&(k.y=k.endY=r,E=!0),N&&(k.x=k.endX=i,E=!0)),n&&!1===Ae(k,"move","onMove")?(k.pointerX=l,k.pointerY=u,x=c,k.x=h,k.y=d,k.endX=f,k.endY=p,k.endRotation=m,E=g):!k.isDragging&&k.isPressed&&(k.isDragging=!0,Ae(k,"dragstart","onDragStart")))},o=function e(t,n){if(!h||!k.isPressed||t&&null!=d&&!n&&(t.pointerId&&t.pointerId!==d||t.changedTouches&&!((e,t)=>{for(var n=e.length;n--;)if(e[n].identifier===t)return!0})(t.changedTouches,d)))O&&t&&h&&Se(t);else{k.isPressed=!1;var r,i,a,o,s=t,n=k.isDragging,l=k.vars.allowContextMenu&&t&&(t.ctrlKey||2<t.which),u=Le.delayedCall(.001,_e);if(f?(qe(f,"touchend",e),qe(f,"touchmove",xe),qe(f,"touchcancel",e),qe(H,"touchstart",Ke)):qe(H,"mousemove",xe),qe(Re,"touchforcechange",Se),ft&&f||(qe(H,"mouseup",e),t&&t.target&&qe(t.target,"mouseup",e)),E=!1,!q||l){if(Je(G),!D)for(i=B.length;-1<--i;)nt(B[i],"cursor",c.cursor||(!1!==c.cursor?Be:null));if(n&&(te=xt=ze(),k.isDragging=!1),ht--,t){if((r=t.changedTouches)&&(t=r[0])!==V&&t.identifier!==d){for(i=r.length;-1<--i&&(t=r[i]).identifier!==d;);if(i<0)return}k.pointerEvent=s,k.pointerX=t.pageX,k.pointerY=t.pageY}return l&&s?(Se(s),O=!0,Ae(k,"release","onRelease")):s&&!n?(O=!1,X&&(c.snap||c.bounds)&&me(c.inertia||c.throwProps),Ae(k,"release","onRelease"),Ie&&"touchmove"===s.type||-1!==s.type.indexOf("cancel")||(Ae(k,"click","onClick"),ze()-U<300&&Ae(k,"doubleclick","onDoubleClick"),o=s.target||p,U=ze(),Ie)||s.defaultPrevented||Le.delayedCall(.05,function(){U===Z||!k.enabled()||k.isPressed||s.defaultPrevented||(o.click?o.click():H.createEvent&&((a=H.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,Re,1,k.pointerEvent.screenX,k.pointerEvent.screenY,k.pointerX,k.pointerY,!1,!1,!1,!1,0,null),o.dispatchEvent(a)))})):(me(c.inertia||c.throwProps),k.allowEventDefault||!s||!1===c.dragClickables&&oe.call(k,s.target)||!n||g&&(!P||g!==P)||!1===s.cancelable?O=!1:(O=!0,Se(s)),Ae(k,"release","onRelease")),ye()&&u.duration(k.tween.duration()),n&&Ae(k,"dragend","onDragEnd"),!0}t&&(qe(t.target,"change",e),k.pointerEvent=s),ot(B,!1),Ae(k,"release","onRelease"),Ae(k,"click","onClick"),q=!1}},we=Ze.get(p);return we&&we.kill(),e.startDrag=function(e,t){a(e||k.pointerEvent,!0),t&&!k.hitTest(e||k.pointerEvent)&&(t=Ee(e||k.pointerEvent),e=Ee(p),t=n({x:t.left+t.width/2,y:t.top+t.height/2}),e=n({x:e.left+e.width/2,y:e.top+e.height/2}),v-=t.x-e.x,y-=t.y-e.y),k.isDragging||(k.isDragging=!0,Ae(k,"dragstart","onDragStart"))},e.drag=xe,e.endDrag=function(e){return o(e||k.pointerEvent,!0)},e.timeSinceDrag=function(){return k.isDragging?0:(ze()-te)/1e3},e.timeSinceClick=function(){return(ze()-U)/1e3},e.hitTest=function(e,t){return Ze.hitTest(k.target,e,t)},e.getDirection=function(e,t){var n,r,i="velocity"===e&&ke?e:pt(e)&&!D?"element":"start";return"element"===i&&(n=Ee(k.target),r=Ee(e)),e="start"===i?k.x-_:"velocity"===i?ke.getVelocity(p,K):n.left+n.width/2-(r.left+r.width/2),D?e<0?"counter-clockwise":"clockwise":(t=t||2,i="start"===i?k.y-x:"velocity"===i?ke.getVelocity(p,$):n.top+n.height/2-(r.top+r.height/2),r=(n=Math.abs(e/i))<1/t?"":e<0?"left":"right",n<t&&(""!==r&&(r+="-"),r+=i<0?"up":"down"),r)},e.applyBounds=function(e,t){var n,r,i,a;if(e&&c.bounds!==e)return c.bounds=e,k.update(!0,t);if(ue(!0),de(),b&&!ye()){if(e=k.x,t=k.y,w<e?e=w:e<M&&(e=M),T<t?t=T:t<S&&(t=S),(k.x!==e||k.y!==t)&&(n=!0,k.x=k.endX=e,D?k.endRotation=e:k.y=k.endY=t,G(E=!0),k.autoScroll)&&!k.isDragging)for(tt(p.parentNode),r=p,Ve.scrollTop=null!=Re.pageYOffset?Re.pageYOffset:(null!=H.documentElement.scrollTop?H.documentElement:H.body).scrollTop,Ve.scrollLeft=null!=Re.pageXOffset?Re.pageXOffset:(null!=H.documentElement.scrollLeft?H.documentElement:H.body).scrollLeft;r&&!a;)i=(a=Xe(r.parentNode))?Ve:r.parentNode,I&&i.scrollTop>i._gsMaxScrollY&&(i.scrollTop=i._gsMaxScrollY),N&&i.scrollLeft>i._gsMaxScrollX&&(i.scrollLeft=i._gsMaxScrollX),r=i;k.isThrowing&&(n||k.endX>w||k.endX<M||k.endY>T||k.endY<S)&&me(c.inertia||c.throwProps,n)}return k},e.update=function(e,t,n){var r=k.x,i=k.y;return ge(!t),e?k.applyBounds():(E&&n&&G(!0),ue(!0)),t&&(be(k.pointerX,k.pointerY),E)&&G(!0),k.isPressed&&!t&&(N&&.01<Math.abs(r-k.x)||I&&.01<Math.abs(i-k.y)&&!D)&&ve(),k.autoScroll&&(tt(p.parentNode,k.isDragging),F=k.isDragging,G(!0),et(p,s),$e(p,s)),k},e.enable=function(e){var t,n,r={lazy:!0};if(D||!1===c.cursor||(r.cursor=c.cursor||Be),Le.utils.checkPrefix("touchCallout")&&(r.touchCallout="none"),r.touchAction=N===I?"none":c.allowNativeTouchScrolling||c.allowEventDefault?"manipulation":N?"pan-y":"pan-x","soft"!==e){for(t=B.length;-1<--t;)n=B[t],ft||We(n,"mousedown",a),We(n,"touchstart",a),We(n,"click",l,!0),Le.set(n,r),n.getBBox&&n.ownerSVGElement&&Le.set(n.ownerSVGElement,{touchAction:N===I?"none":c.allowNativeTouchScrolling||c.allowEventDefault?"manipulation":N?"pan-y":"pan-x"}),c.allowContextMenu||We(n,"contextmenu",i);ot(B,!1)}return $e(p,s),h=!0,ke&&"soft"!==e&&ke.track(m||p,J?"x,y":D?"rotation":"top,left"),p._gsDragID=e="d"+_t++,Ge[e]=k,m&&(m.enable(),m.element._gsDragID=e),(c.bounds||D)&&ve(),c.bounds&&k.applyBounds(),k},e.disable=function(e){var t,n,r=k.isDragging;if(!D)for(t=B.length;-1<--t;)nt(B[t],"cursor",null);if("soft"!==e){for(t=B.length;-1<--t;)n=B[t],nt(n,"touchCallout",null),nt(n,"touchAction",null),qe(n,"mousedown",a),qe(n,"touchstart",a),qe(n,"click",l),qe(n,"contextmenu",i);ot(B,!0),f&&(qe(f,"touchcancel",o),qe(f,"touchend",o),qe(f,"touchmove",xe)),qe(H,"mouseup",o),qe(H,"mousemove",xe)}return et(p,s),h=!1,ke&&"soft"!==e&&ke.untrack(m||p,J?"x,y":D?"rotation":"top,left"),m&&m.disable(),Je(G),k.isDragging=k.isPressed=q=!1,r&&Ae(k,"dragend","onDragEnd"),k},e.enabled=function(e,t){return arguments.length?e?k.enable(t):k.disable(t):h},e.kill=function(){return k.isThrowing=!1,k.tween&&k.tween.kill(),k.disable(),Le.set(B,{clearProps:"userSelect"}),delete Ge[p._gsDragID],k},~t.indexOf("scroll")&&(m=e.scrollProxy=new lt(p,((e,t)=>{for(var n in t)n in e||(e[n]=t[n]);return e})({onKill:function(){k.isPressed&&o(null)}},c)),p.style.overflowY=I&&!ct?"auto":"hidden",p.style.overflowX=N&&!ct?"auto":"hidden",p=m.content),D?r.rotation=1:(N&&(r[K]=1),I&&(r[$]=1)),z.force3D=!("force3D"in c)||c.force3D,e.enable(),e}var W,q=t.prototype,X={pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1};for(W in X)W in q||(q[W]=X[W]);t.zIndex=1e3,t.version="3.5.1",I()&&Le.registerPlugin(t),i.Draggable=t,i.default=t,"undefined"==typeof window||window!==i?Object.defineProperty(i,"__esModule",{value:!0}):delete window.default},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).window=r.window||{})},{}],48:[function(e,t,n){var r,i;r=this,i=function(e){function t(){return n||r()&&(n=window.gsap)&&n.registerPlugin&&n}function d(e){return Math.round(1e4*e)/1e4}function f(e,t){return E(e.getAttribute(t))}function p(e,t,n,r,i,a){return A(Math.pow((E(n)-E(e))*i,2)+Math.pow((E(r)-E(t))*a,2))}function m(e){console.warn(e)}function g(e){return"non-scaling-stroke"===e.getAttribute("vector-effect")}function v(e){if(!(e=x(e)[0]))return 0;var t,n,r,i,a=e.tagName.toLowerCase(),o=e.style,s=1,l=1;g(e)&&(l=e.getScreenCTM(),s=A(l.a*l.a+l.b*l.b),l=A(l.d*l.d+l.c*l.c));try{i=e.getBBox()}catch(e){m("Some browsers won't measure invisible elements (like display:none or masks inside defs).")}var u=(d=i||{x:0,y:0,width:0,height:0}).x,c=d.y,h=d.width,d=d.height;if(i&&(h||d)||!S[a]||(h=f(e,S[a][0]),d=f(e,S[a][1]),"rect"!==a&&"line"!==a&&(h*=2,d*=2),"line"===a&&(u=f(e,"x1"),c=f(e,"y1"),h=Math.abs(h-u),d=Math.abs(d-c))),"path"===a)i=o.strokeDasharray,o.strokeDasharray="none",t=e.getTotalLength()||0,s!==l&&m("Warning: <path> length cannot be measured when vector-effect is non-scaling-stroke and the element isn't proportionally scaled."),t*=(s+l)/2,o.strokeDasharray=i;else if("rect"===a)t=2*h*s+2*d*l;else if("line"===a)t=p(u,c,u+h,c+d,s,l);else if("polyline"===a||"polygon"===a)for(n=e.getAttribute("points").match(T)||[],"polygon"===a&&n.push(n[0],n[1]),t=0,r=2;r<n.length;r+=2)t+=p(n[r-2],n[r-1],n[r],n[r+1],s,l)||0;else"circle"!==a&&"ellipse"!==a||(o=h/2*s,i=d/2*l,t=Math.PI*(3*(o+i)-A((3*o+i)*(o+3*i))));return t||0}function y(e,t){if(!(e=x(e)[0]))return[0,0];t=t||v(e)+1;var n=(e=b.getComputedStyle(e)).strokeDasharray||"",e=E(e.strokeDashoffset),r=n.indexOf(",");return t<(n=(r=r<0?n.indexOf(" "):r)<0?t:E(n.substr(0,r))||1e-5)&&(n=t),[Math.max(0,-e),Math.max(0,n-e)]}function _(){r()&&(b=window,M=n=t(),x=n.utils.toArray,w=-1!==((b.navigator||{}).userAgent||"").indexOf("Edge"))}var n,x,b,w,M,r=function(){return"undefined"!=typeof window},T=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,S={rect:["width","height"],circle:["r","r"],ellipse:["rx","ry"],line:["x2","y2"]},E=function(e){return parseFloat(e||0)},A=Math.sqrt,i={version:"3.5.1",name:"drawSVG",register:function(e){n=e,_()},init:function(e,t,n,r,i){if(!e.getBBox)return!1;M||_();var a,o,s,l,u,c,h=v(e)+1;return this._style=e.style,this._target=e,t+""=="true"?t="0 100%":t?-1===(t+"").indexOf(" ")&&(t="0 "+t):t="0 0",a=y(e,h),o=t,s=h,l=a[0],u=o.indexOf(" "),l=u<0?(c=void 0!==l?l+"":o,o):(c=o.substr(0,u),o.substr(u+1)),c=~c.indexOf("%")?E(c)/100*s:E(c),o=(l=~l.indexOf("%")?E(l)/100*s:E(l))<c?[l,c]:[c,l],this._length=d(h+10),0===a[0]&&0===o[0]?(u=Math.max(1e-5,o[1]-h),this._dash=d(h+u),this._offset=d(h-a[1]+u),this._offsetPT=this.add(this,"_offset",this._offset,d(h-o[1]+u))):(this._dash=d(a[1]-a[0])||1e-6,this._offset=d(-a[0]),this._dashPT=this.add(this,"_dash",this._dash,d(o[1]-o[0])||1e-5),this._offsetPT=this.add(this,"_offset",this._offset,d(-o[0]))),w&&(s=b.getComputedStyle(e)).strokeLinecap!==s.strokeLinejoin&&(o=E(s.strokeMiterlimit),this.add(e.style,"strokeMiterlimit",o,o+.01)),this._live=g(e)||~(t+"").indexOf("live"),this._props.push("drawSVG"),1},render:function(e,t){var n,r,i=t._pt,a=t._style;if(i){for(t._live&&(n=v(t._target)+11)!==t._length&&(r=n/t._length,t._length=n,t._offsetPT.s*=r,t._offsetPT.c*=r,t._dashPT?(t._dashPT.s*=r,t._dashPT.c*=r):t._dash*=r);i;)i.r(e,i.d),i=i._next;r=t._dash,n=t._length,a.strokeDashoffset=t=t._offset,1!==e&&e?a.strokeDasharray=r+"px,"+n+"px":(r-t<.001&&n-r<=10&&(a.strokeDashoffset=t+1),a.strokeDasharray=t<.001&&n-r<=10?"none":t===r?"0px, 999999px":r+"px,"+n+"px")}},getLength:v,getPosition:y};t()&&n.registerPlugin(i),e.DrawSVGPlugin=i,e.default=i,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).window=r.window||{})},{}],49:[function(e,t,n){var r,i;r=this,i=function(e){function r(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(){return"undefined"!=typeof window}function R(e){return h(e)||B(e)}function m(e){return(ot=O(e,o))&&c}function C(e,t){return!t&&console.warn(e)}function g(e,t){return e&&(o[e]=t)&&ot&&(ot[e]=t)||o}function P(){return 0}function f(e,t){return(e=e.split(",")).forEach(t)||e}function v(e,t,n){var r,i=T(e[1]),a=(i?2:1)+(t<2?0:1),o=e[a];if(i&&(o.duration=e[1]),o.parent=n,t){for(r=o;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=F(n.vars.inherit)&&n.parent;o.immediateRender=F(r.immediateRender),t<2?o.runBackwards=1:o.startAt=e[a-1]}return o}function y(e,t,n,r){U.length&&vt(),e.render(t,n,r),U.length&&vt()}function _(e){return e}function x(e,t){for(var n in t)n in e||"duration"===n||"ease"===n||(e[n]=t[n])}function O(e,t){for(var n in t)e[n]=t[n];return e}function Y(e,t){for(var n in t)e[n]=S(t[n])?Y(e[n]||(e[n]={}),t[n]):t[n];return e}function Z(e){var t=e.parent||N,n=e.keyframes?x:H;if(F(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e}function Q(e){return!e||e._ts&&Q(e.parent)}function J(e){return e._repeat?K(e._tTime,e=e.duration()+e._rDelay)*e:0}function K(e,t){return(e/=t)&&~~e===e?~~e-1:~~e}function l(e,t,n,r){return t.parent&&wt(t),t._start=D(n+t._delay),t._end=D(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),xt(e,t,"_first","_last",e._sort?"_start":0),e._recent=t,r||At(e,t),e}function $(e,t){(o.ScrollTrigger||st("scrollTrigger",t))&&o.ScrollTrigger.create(t,e)}function ee(e,t,n,r){return sn(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Ae!==p.frame?(U.push(e),e._lazy=[t,r]):void 0:1}function te(e,t,n,r){var i=e._repeat,t=D(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=t/e._dur),e._dur=t,e._tDur=i?i<0?1e10:D(t*(i+1)+e._rDelay*i):t,a&&!r?Et(e,e._tTime=e._tDur*a):e.parent&&St(e),n||Mt(e.parent,e),e}function ne(e){return e instanceof L?Mt(e):te(e,e._dur)}function u(e,t){var n,r=e.labels,i=e._recent||Lt,a=e.duration()>=M?i.endTime(!1):e._dur;return B(t)&&(isNaN(t)||t in r)?"<"===(n=t.charAt(0))||">"===n?("<"===n?i._start:i.endTime(0<=i._repeat))+(parseFloat(t.substr(1))||0):(n=t.indexOf("="))<0?(t in r||(r[t]=a),r[t]):(i=+(t.charAt(n-1)+t.substr(n+1)),1<n?u(e,t.substr(0,n-1))+i:a+i):null==t?a:+t}function re(e,t,n){return void 0===n&&(n=[]),e.forEach(function(e){return B(e)&&!t||Ot(e,1)?n.push.apply(n,A(e)):n.push(e)})||n}function ie(e){var f,p,m,g,v,y,_,x,b;return h(e)?e:(f=S(e)?e:{each:e},p=qt(f.ease),m=f.from||0,g=parseFloat(f.base)||0,v={},e=0<m&&m<1,y=isNaN(m)||e,_=f.axis,B(b=x=m)?x=b={center:.5,edges:.5,end:1}[m]||0:!e&&y&&(x=m[0],b=m[1]),function(e,t,n){var r,i,a,o,s,l,u,c,h=(n||f).length,d=v[h];if(!d){if(!(c="auto"===f.grid?0:(f.grid||[1,M])[1])){for(l=-M;l<(l=n[c++].getBoundingClientRect().left)&&c<h;);c--}for(d=v[h]=[],r=y?Math.min(c,h)*x-.5:m%c,i=y?h*b/c-.5:m/c|0,u=M,s=l=0;s<h;s++)o=s%c-r,a=i-(s/c|0),d[s]=o=_?Math.abs("y"===_?a:o):Ze(o*o+a*a),l<o&&(l=o),o<u&&(u=o);"random"===m&&Dt(d),d.max=l-u,d.min=u,d.v=h=(parseFloat(f.amount)||parseFloat(f.each)*(h<c?h-1:_?"y"===_?h/c:c:Math.max(c,h/c))||0)*("edges"===m?-1:1),d.b=h<0?g-h:g,d.u=G(f.amount||f.each)||0,p=p&&h<0?Wt(p):p}return h=(d[e]-d.min)/d.max||0,D(d.b+(p?p(h):h)*d.v)+d.u})}function ae(t){var n=t<1?Math.pow(10,(t+"").length-2):1;return function(e){return Math.floor(Math.round(parseFloat(e)/t)*t*n)/n+(T(e)?0:G(e))}}function oe(l,e){var u,c,t=E(l);return!t&&S(l)&&(u=t=l.radius||M,l.values?(l=A(l.values),(c=!T(l[0]))&&(u*=u)):l=ae(l.increment)),Rt(e,t?h(l)?function(e){return c=l(e),Math.abs(c-e)<=u?c:e}:function(e){for(var t,n,r=parseFloat(c?e.x:e),i=parseFloat(c?e.y:0),a=M,o=0,s=l.length;s--;)(t=c?(t=l[s].x-r)*t+(n=l[s].y-i)*n:Math.abs(l[s]-r))<a&&(a=t,o=s);return o=!u||a<=u?l[o]:e,c||o===e||T(e)?o:o+G(e)}:ae(l))}function se(e,t,n,r){return Rt(E(e)?!t:!0===n?!!(n=0):!r,function(){return E(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e+Math.random()*(t-e))/n)*n*r)/r})}function le(t,n,e){return Rt(e,function(e){return t[~~n(e)]})}function ue(t,e,n){var r=e-t;return E(t)?le(t,ue(0,t.length),e):Rt(n,function(e){return(r+(e-t)%r)%r+t})}function ce(t,e,n){var r=e-t,i=2*r;return E(t)?le(t,ce(0,t.length-1),e):Rt(n,function(e){return t+(r<(e=(i+(e-t)%i)%i||0)?i-e:e)})}function he(t,e,n,r,i){var a=e-t,o=r-n;return Rt(i,function(e){return n+((e-t)/a*o||0)})}function de(t,n,e,r){var i=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!i){var a,o,s,l,u,c=B(t),h={};if(!0===e&&(r=1,e=null),c)t={p:t},n={p:n};else if(E(t)&&!E(n)){for(s=[],l=t.length,u=l-2,o=1;o<l;o++)s.push(de(t[o-1],t[o]));l--,i=function(e){e*=l;var t=Math.min(u,~~e);return s[t](e-t)},e=n}else r||(t=O(E(t)?[]:{},t));if(!s){for(a in n)an.call(h,t,a,"get",n[a]);i=function(e){return hn(e,h),c?t.p:t}}}return Rt(e,i)}function fe(e,t,n){var r,i,a,o=e.labels,s=M;for(r in o)(i=o[r]-t)<0==!!n&&i&&s>(i=Math.abs(i))&&(a=r,s=i);return a}function b(e,t,n){var r=e.vars,i=r[t];if(i)t=r[t+"Params"],r=r.callbackScope||e,n&&U.length&&vt(),t?i.apply(r,t):i.call(r)}function pe(e){return wt(e),e.progress()<1&&b(e,"onInterrupt"),e}function me(e,t,n){return(6*(e=e<0?e+1:1<e?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*d+.5|0}function ge(e,t,n){var r,i,a,o,s="",l=(e+s).match(Ft),u=t?"hsla(":"rgba(",c=0;if(!l)return e;if(l=l.map(function(e){return(e=kt(e,t,1))&&u+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),n&&(a=Bt(e),(r=n.c).join(s)!==a.c.join(s)))for(o=(i=e.replace(Ft,"1").split(nt)).length-1;c<o;c++)s+=i[c]+(~r.indexOf(c)?l.shift()||u+"0,0,0,0)":(a.length?a:l.length?l:n).shift());if(!i)for(o=(i=e.split(Ft)).length-1;c<o;c++)s+=i[c]+l[c];return s+i[o]}function ve(e){var t=e.join(" ");if(Ft.lastIndex=0,Ft.test(t))return t=Ut.test(t),e[1]=ge(e[1],t),e[0]=ge(e[0],t,Bt(e[1])),!0}function ye(e){var t=(e+"").split("("),n=s[t[0]];return n&&1<t.length&&n.config?n.config.apply(null,~e.indexOf("{")?[jt(t[1])]:Vt(e).split(",").map(yt)):s._CE&&Ht.test(e)?s._CE("",e):n}function _e(e,t){for(var n,r=e._first;r;)r instanceof L?_e(r,t):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===t||(r.timeline?_e(r.timeline,t):(n=r._ease,r._ease=r._yEase,r._yEase=n,r._yoyo=t)),r=r._next}function xe(e,t,n,r){var i,a={easeIn:t,easeOut:n=void 0===n?function(e){return 1-t(1-e)}:n,easeInOut:r=void 0===r?function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2}:r};f(e,function(e){for(var t in s[e]=o[e]=a,s[i=e.toLowerCase()]=n,a)s[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=s[e+"."+t]=a[t]})}function be(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}}function we(n,e,t){function r(e){return 1===e?1:i*Math.pow(2,-10*e)*Je((e-a)*o)+1}var i=1<=e?e:1,a=(o=(t||(n?.3:.45))/(e<1?e:1))/qe*(Math.asin(1/i)||0),t="out"===n?r:"in"===n?function(e){return 1-r(1-e)}:be(r),o=qe/o;return t.config=function(e,t){return we(n,e,t)},t}function Me(t,n){function r(e){return e?--e*e*((n+1)*e+n)+1:0}void 0===n&&(n=1.70158);var e="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:be(r);return e.config=function(e){return Me(t,e)},e}var N,n,Te,Se,Ee,Ae,Le,Re,Ce,Pe,Oe,De,Ne,Ie,ke,Be,Fe,Ue,ze,He,Ge,je,Ve,I={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},We={duration:.5,overwrite:!1,delay:0},M=1e8,k=1/M,qe=2*Math.PI,Xe=qe/4,Ye=0,Ze=Math.sqrt,Qe=Math.cos,Je=Math.sin,B=function(e){return"string"==typeof e},h=function(e){return"function"==typeof e},T=function(e){return"number"==typeof e},Ke=function(e){return void 0===e},S=function(e){return"object"==typeof e},F=function(e){return!1!==e},$e="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},E=Array.isArray,et=/(?:-?\.?\d|\.)+/gi,tt=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,nt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rt=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,it=/[+-]=-?[\.\d]+/,at=/[#\-+.]*\b[a-z\d-=+%.]+/gi,o={},ot={},st=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},lt={},U=[],ut={},z={},ct={},ht=30,dt=[],ft="",pt=function(e){var t,n,r=e[0];if(S(r)||h(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=dt.length;n--&&!dt[n].targetTest(r););t=dt[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Zt(e[n],t)))||e.splice(n,1);return e},mt=function(e){return e._gsap||pt(A(e))[0]._gsap},gt=function(e,t,n){return(n=e[t])&&h(n)?e[t]():Ke(n)&&e.getAttribute&&e.getAttribute(t)||n},D=function(e){return Math.round(1e5*e)/1e5||0},vt=function(){var e,t,n=U.length,r=U.slice(0);for(ut={},e=U.length=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},yt=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(at).length<2?t:B(e)?e.trim():e},H=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},_t=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},xt=function(e,t,n,r,i){void 0===n&&(n="_first");var a,o=e[r=void 0===r?"_last":r];if(i)for(a=t[i];o&&o[i]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},bt=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,a=t._next;i?i._next=a:e[n]===t&&(e[n]=a),a?a._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},wt=function(e,t){!e.parent||t&&!e.parent.autoRemoveChildren||e.parent.remove(e),e._act=0},Mt=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Tt=function(e,t){return(e-t._start)*t._ts+(0<=t._ts?0:t._dirty?t.totalDuration():t._tDur)},St=function(e){return e._end=D(e._start+(e._tDur/Math.abs(e._ts||e._rts||k)||0))},Et=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=D(e._dp._time-(0<e._ts?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),St(e),n._dirty||Mt(n,e)),e},At=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=Tt(e.rawTime(),t),!t._dur||Ct(0,t.totalDuration(),n)-t._tTime>k)&&t.render(n,!0),Mt(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)0<=n.rawTime()&&n.totalTime(n._tTime),n=n._dp;e._zTime=-k}},Lt={_start:0,endTime:P},Rt=function(e,t){return e||0===e?t(e):t},Ct=function(e,t,n){return n<e?e:t<n?t:n},G=function(e){return(e=(e+"").substr((parseFloat(e)+"").length))&&isNaN(e)?e:""},Pt=[].slice,Ot=function(e,t){return e&&S(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&S(e[0]))&&!e.nodeType&&e!==n},A=function(e,t){return!B(e)||t||!Te&&zt()?E(e)?re(e,t):Ot(e)?Pt.call(e,0):e?[e]:[]:Pt.call(Se.querySelectorAll(e),0)},Dt=function(e){return e.sort(function(){return.5-Math.random()})},Nt=function(e){for(var t,n,r,i,a=0,o="";~(t=e.indexOf("random(",a));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?at:et),o+=e.substr(a,t-a)+se(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),a=r+1;return o+e.substr(a,e.length-a)},d=255,It={aqua:[0,d,d],lime:[0,d,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,d],navy:[0,0,128],white:[d,d,d],olive:[128,128,0],yellow:[d,d,0],orange:[d,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[d,0,0],pink:[d,192,203],cyan:[0,d,d],transparent:[d,d,d,0]},kt=function(e,t,n){var r,i,a,o,s,l,u,c=e?T(e)?[e>>16,e>>8&d,e&d]:0:It.black;if(!c){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),It[e])c=It[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(r=e.charAt(1))+r+(i=e.charAt(2))+i+(a=e.charAt(3))+a),c=[(e=parseInt(e.substr(1),16))>>16,e>>8&d,e&d];else if("hsl"===e.substr(0,3))if(c=u=e.match(et),t){if(~e.indexOf("="))return c=e.match(tt),n&&c.length<4&&(c[3]=1),c}else o=+c[0]%360/360,s=+c[1]/100,r=2*(l=+c[2]/100)-(i=l<=.5?l*(s+1):l+s-l*s),3<c.length&&(c[3]*=1),c[0]=me(o+1/3,r,i),c[1]=me(o,r,i),c[2]=me(o-1/3,r,i);else c=e.match(et)||It.transparent;c=c.map(Number)}return t&&!u&&(r=c[0]/d,i=c[1]/d,a=c[2]/d,l=((e=Math.max(r,i,a))+(t=Math.min(r,i,a)))/2,e===t?o=s=0:(u=e-t,s=.5<l?u/(2-e-t):u/(e+t),o=e===r?(i-a)/u+(i<a?6:0):e===i?(a-r)/u+2:(r-i)/u+4,o*=60),c[0]=~~(o+.5),c[1]=~~(100*s+.5),c[2]=~~(100*l+.5)),n&&c.length<4&&(c[3]=1),c},Bt=function(e){var t=[],n=[],r=-1;return e.split(Ft).forEach(function(e){e=e.match(nt)||[];t.push.apply(t,e),n.push(r+=e.length+1)}),t.c=n,t},Ft=(()=>{var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(e in It)t+="|"+e+"\\b";return new RegExp(t+")","gi")})(),Ut=/hsl[a]?\(/,p=(Ie=Date.now,ke=500,Be=33,Fe=Ie(),Ue=Fe,He=ze=1e3/240,je={time:0,frame:0,tick:function(){Xt(!0)},deltaRatio:function(e){return De/(1e3/(e||60))},wake:function(){Ee&&(!Te&&a()&&(n=Te=window,Se=n.document||{},o.gsap=c,(n.gsapVersions||(n.gsapVersions=[])).push(c.version),m(ot||n.GreenSockGlobals||!n.gsap&&n||{}),Oe=n.requestAnimationFrame),Ce&&je.sleep(),Pe=Oe||function(e){return setTimeout(e,He-1e3*je.time+1|0)},Re=1,Xt(2))},sleep:function(){(Oe?n.cancelAnimationFrame:clearTimeout)(Ce),Re=0,Pe=P},lagSmoothing:function(e,t){ke=e||1/k,Be=Math.min(t,ke,0)},fps:function(e){ze=1e3/(e||240),He=1e3*je.time+ze},add:function(e){Ge.indexOf(e)<0&&Ge.push(e),zt()},remove:function(e){~(e=Ge.indexOf(e))&&Ge.splice(e,1)&&e<=Ne&&Ne--},_listeners:Ge=[]}),zt=function(){return!Re&&p.wake()},s={},Ht=/^[\d.\-M][\d.\-,\s]/,Gt=/["']/g,jt=function(e){for(var t,n,r,i={},a=e.substr(1,e.length-3).split(":"),o=a[0],s=1,l=a.length;s<l;s++)n=a[s],t=s!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[o]=isNaN(r)?r.replace(Gt,"").trim():+r,o=n.substr(t+1).trim();return i},Vt=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},Wt=function(t){return function(e){return 1-t(1-e)}},qt=function(e,t){return e&&(h(e)?e:s[e]||ye(e))||t};function Xt(e){var t,n,r,i=Ie()-Ue,a=!0===e;if(ke<i&&(Fe+=i-Be),(0<(i=(n=(Ue+=i)-Fe)-He)||a)&&(r=++je.frame,De=n-1e3*je.time,je.time=n/=1e3,He+=i+(ze<=i?4:ze-i),t=1),a||(Ce=Pe(Xt)),t)for(Ne=0;Ne<Ge.length;Ne++)Ge[Ne](n,De,r,e)}function Yt(e){return e<1/2.75?Ve*e*e:e<1/2.75*2?Ve*Math.pow(e-1.5/2.75,2)+.75:e<1/2.75*2.5?Ve*(e-=2.25/2.75)*e+.9375:Ve*Math.pow(e-2.625/2.75,2)+.984375}f("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;xe(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},function(e){return 1-Math.pow(1-e,n)},function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2})}),s.Linear.easeNone=s.none=s.Linear.easeIn,xe("Elastic",we("in"),we("out"),we()),Ve=7.5625,xe("Bounce",function(e){return 1-Yt(1-e)},Yt),xe("Expo",function(e){return e?Math.pow(2,10*(e-1)):0}),xe("Circ",function(e){return-(Ze(1-e*e)-1)}),xe("Sine",function(e){return 1===e?1:1-Qe(e*Xe)}),xe("Back",Me("in"),Me("out"),Me()),s.SteppedEase=s.steps=o.SteppedEase={config:function(e,t){var n=1/(e=void 0===e?1:e),r=e+(t?0:1),i=t?1:0,a=1-k;return function(e){return((r*Ct(0,a,e)|0)+i)*n}}},We.ease=s["quad.out"],f("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return ft+=e+","+e+"Params,"});var Zt=function(e,t){this.id=Ye++,(e._gsap=this).target=e,this.harness=t,this.get=t?t.get:gt,this.set=t?t.getSetter:_n},Qt=((t=Jt.prototype).delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(0<this._repeat?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,te(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(zt(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Et(this,e);n.parent;)n.parent._time!==n._start+(0<=n._ts?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&e<this._tDur||this._ts<0&&0<e||!this._tDur&&!e)&&l(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===k||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),y(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+J(this))%this._dur||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+J(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?K(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return this._rts===-k?0:this._rts;if(this._rts===e)return this;for(var t=this.parent&&this._ts?Tt(this.parent._time,this):this._tTime,e=(this._rts=+e||0,this._ts=this._ps||e===-k?0:this._rts,this.totalTime(Ct(-this._delay,this._tDur,t),!0)),n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},t.paused=function(e){return arguments.length?(this._ps!==e&&((this._ps=e)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(zt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=k)&&Math.abs(this._zTime)!==k))),this):this._ps},t.startTime=function(e){var t;return arguments.length?(this._start=e,!(t=this.parent||this._dp)||!t._sort&&this.parent||l(t,this,e-this._delay),this):this._start},t.endTime=function(e){return this._start+(F(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Tt(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e,ne(this)):this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,ne(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(u(this,e),F(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,F(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-k:0)),this):this._rts<0},t.invalidate=function(){return this._initted=0,this._zTime=-k,this},t.isActive=function(){var e=this.parent||this._dp,t=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(e=e.rawTime(!0))>=t&&e<this.endTime(!0)-k))},t.eventCallback=function(e,t,n){var r=this.vars;return 1<arguments.length?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(r){var i=this;return new Promise(function(t){function e(){var e=i.then;i.then=null,h(n)&&(n=n(i))&&(n.then||n===i)&&(i.then=e),t(n),i.then=e}var n=h(r)?r:_;i._initted&&1===i.totalProgress()&&0<=i._ts||!i._tTime&&i._ts<0?e():i._prom=e})},Jt);function Jt(e,t){var n=e.parent||N;this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,te(this,+e.duration,1,1),this.data=e.data,Re||p.wake(),n&&l(n,this,t||0===t?t:n._time,1),e.reversed&&this.reverse(),e.paused&&this.paused(!0)}H(Qt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!(t.kill=function(){pe(this)}),parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-k,_prom:0,_ps:!1,_rts:1});r($t,Kt=Qt),(t=$t.prototype).to=function(e,t,n){return new j(e,v(arguments,0,this),u(this,T(t)?arguments[3]:n)),this},t.from=function(e,t,n){return new j(e,v(arguments,1,this),u(this,T(t)?arguments[3]:n)),this},t.fromTo=function(e,t,n,r){return new j(e,v(arguments,2,this),u(this,T(t)?arguments[4]:r)),this},t.set=function(e,t,n){return t.duration=0,t.parent=this,Z(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new j(e,t,u(this,n),1),this},t.call=function(e,t,n){return l(this,j.delayedCall(0,e,t),u(this,n))},t.staggerTo=function(e,t,n,r,i,a,o){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=a,n.onCompleteParams=o,n.parent=this,new j(e,n,u(this,i)),this},t.staggerFrom=function(e,t,n,r,i,a,o){return n.runBackwards=1,Z(n).immediateRender=F(n.immediateRender),this.staggerTo(e,t,n,r,i,a,o)},t.staggerFromTo=function(e,t,n,r,i,a,o,s){return r.startAt=n,Z(r).immediateRender=F(r.immediateRender),this.staggerTo(e,t,r,i,a,o,s)},t.render=function(e,t,n){var r,i,a,o,s,l,u,c,h,d,f=this._time,p=this._dirty?this.totalDuration():this._tDur,m=this._dur,g=this!==N&&p-k<e&&0<=e?p:e<k?0:e,v=this._zTime<0!=e<0&&(this._initted||!m);if(g!==this._tTime||n||v){if(f!==this._time&&m&&(g+=this._time-f,e+=this._time-f),r=g,c=this._start,s=!(u=this._ts),v&&(m||(f=this._zTime),!e&&t||(this._zTime=e)),this._repeat&&(y=this._yoyo,o=m+this._rDelay,r=D(g%o),g===p?(a=this._repeat,r=m):((a=~~(g/o))&&a===g/o&&(r=m,a--),m<r&&(r=m)),h=K(this._tTime,o),y&&1&a&&(r=m-r,d=1),a!==(h=!f&&this._tTime&&h!==a?a:h))&&!this._lock){var v=y&&1&h,y=v===(y&&1&a),f=(v=a<h?!v:v)?0:m;if(this._lock=1,this.render(f||(d?0:D(a*o)),t,!m)._lock=0,!t&&this.parent&&b(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),f!==this._time||s!=!this._ts)return this;if(m=this._dur,p=this._tDur,y&&(this._lock=2,this.render(f=v?m:-1e-4,!0),this.vars.repeatRefresh)&&!d&&this.invalidate(),this._lock=0,!this._ts&&!s)return this;_e(this,d)}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=((e,t,n)=>{var r;if(t<n)for(r=e._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<t)return r;r=r._prev}})(this,D(f),D(r)))&&(g-=r-(r=l._start)),this._tTime=g,this._time=r,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e),f||!r||t||b(this,"onStart"),f<=r&&0<=e)for(_=this._first;_;){if(i=_._next,(_._act||r>=_._start)&&_._ts&&l!==_){if(_.parent!==this)return this.render(e,t,n);if(_.render(0<_._ts?(r-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(r-_._start)*_._ts,t,n),r!==this._time||!this._ts&&!s){l=0,i&&(g+=this._zTime=-k);break}}_=i}else for(var _=this._last,x=e<0?e:r;_;){if(i=_._prev,(_._act||x<=_._end)&&_._ts&&l!==_){if(_.parent!==this)return this.render(e,t,n);if(_.render(0<_._ts?(x-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(x-_._start)*_._ts,t,n),r!==this._time||!this._ts&&!s){l=0,i&&(g+=this._zTime=x?-k:k);break}}_=i}if(l&&!t&&(this.pause(),l.render(f<=r?0:-k)._zTime=f<=r?1:-1,this._ts))return this._start=c,St(this),this.render(e,t,n);this._onUpdate&&!t&&b(this,"onUpdate",!0),!(g===p&&p>=this.totalDuration()||!g&&f)||c!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||(!e&&m||!(g===p&&0<this._ts||!g&&this._ts<0)||wt(this,1),t)||e<0&&!f||!g&&!f||(b(this,g===p?"onComplete":"onReverseComplete",!0),!this._prom)||g<p&&0<this.timeScale()||this._prom()}return this},t.add=function(e,t){var n=this;if(T(t)||(t=u(this,t)),!(e instanceof Qt)){if(E(e))return e.forEach(function(e){return n.add(e,t)}),this;if(B(e))return this.addLabel(e,t);if(!h(e))return this;e=j.delayedCall(0,e)}return this!==e?l(this,e,t):this},t.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-M);for(var i=[],a=this._first;a;)a._start>=r&&(a instanceof j?t&&i.push(a):(n&&i.push(a),e&&i.push.apply(i,a.getChildren(!0,t,n)))),a=a._next;return i},t.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},t.remove=function(e){return B(e)?this.removeLabel(e):h(e)?this.killTweensOf(e):(bt(this,e),e===this._recent&&(this._recent=this._last),Mt(this))},t.totalTime=function(e,t){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=D(p.time-(0<this._ts?e/this._ts:(this.totalDuration()-e)/-this._ts))),Kt.prototype.totalTime.call(this,e,t),this._forcing=0,this):this._tTime},t.addLabel=function(e,t){return this.labels[e]=u(this,t),this},t.removeLabel=function(e){return delete this.labels[e],this},t.addPause=function(e,t,n){t=j.delayedCall(0,t||P,n);return t.data="isPause",this._hasPause=1,l(this,t,u(this,e))},t.removePause=function(e){var t=this._first;for(e=u(this,e);t;)t._start===e&&"isPause"===t.data&&wt(t),t=t._next},t.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)tn!==r[i]&&r[i].kill(e,t);return this},t.getTweensOf=function(e,t){for(var n,r=[],i=A(e),a=this._first,o=T(t);a;)a instanceof j?((e,t)=>{for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n})(a._targets,i)&&(o?(!tn||a._initted&&a._ts)&&a.globalTime(0)<=t&&a.globalTime(a.totalDuration())>t:!t||a.isActive())&&r.push(a):(n=a.getTweensOf(i,t)).length&&r.push.apply(r,n),a=a._next;return r},t.tweenTo=function(e,t){t=t||{};var n=this,r=u(n,e),e=t,i=e.startAt,a=e.onStart,o=e.onStartParams,s=j.to(n,H(t,{ease:"none",lazy:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(i&&"time"in i?i.time:n._time))/n.timeScale())||k,onStart:function(){n.pause();var e=t.duration||Math.abs((r-n._time)/n.timeScale());s._dur!==e&&te(s,e,0,1).render(s._time,!0,!0),a&&a.apply(s,o||[])}}));return s},t.tweenFromTo=function(e,t,n){return this.tweenTo(t,H({startAt:{time:u(this,e)}},n))},t.recent=function(){return this._recent},t.nextLabel=function(e){return void 0===e&&(e=this._time),fe(this,u(this,e))},t.previousLabel=function(e){return void 0===e&&(e=this._time),fe(this,u(this,e),1)},t.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+k)},t.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,a=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in a)a[r]>=n&&(a[r]+=e);return Mt(this)},t.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return Kt.prototype.invalidate.call(this)},t.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._time=this._tTime=this._pTime=0,e&&(this.labels={}),Mt(this)},t.totalDuration=function(e){var t,n,r,i=0,a=this,o=a._last,s=M;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-e:e));if(a._dirty){for(r=a.parent;o;)t=o._prev,o._dirty&&o.totalDuration(),s<(n=o._start)&&a._sort&&o._ts&&!a._lock?(a._lock=1,l(a,o,n-o._delay,1)._lock=0):s=n,n<0&&o._ts&&(i-=n,(!r&&!a._dp||r&&r.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-1/0),s=0),o._end>i&&o._ts&&(i=o._end),o=t;te(a,a===N&&a._time>i?a._time:i,1,1),a._dirty=0}return a._tDur},$t.updateRoot=function(e){if(N._ts&&(y(N,Tt(e,N)),Ae=p.frame),p.frame>=ht){ht+=I.autoSleep||120;var t=N._first;if((!t||!t._ts)&&I.autoSleep&&p._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||p.sleep()}}};var Kt,L=$t;function $t(e,t){return(t=Kt.call(this,e=void 0===e?{}:e,t)||this).labels={},t.smoothChildTiming=!!e.smoothChildTiming,t.autoRemoveChildren=!!e.autoRemoveChildren,t._sort=F(e.sortChildren),t.parent&&At(t.parent,w(t)),e.scrollTrigger&&$(w(t),e.scrollTrigger),t}H(L.prototype,{_lock:0,_hasPause:0,_forcing:0});function en(e,t,n,r,i){if(h(e)&&(e=ln(e,i,t,n,r)),!S(e)||e.style&&e.nodeType||E(e)||$e(e))return B(e)?ln(e,i,t,n,r):e;var a,o={};for(a in e)o[a]=ln(e[a],i,t,n,r);return o}var tn,nn,rn=function(e,t,n,r,i,a,o){var s,l,u,c,h,d=new V(this._pt,e,t,0,1,wn,null,i),f=0,p=0;for(d.b=n,d.e=r,n+="",(i=~(r+="").indexOf("random("))&&(r=Nt(r)),a&&(a(a=[n,r],e,t),n=a[0],r=a[1]),s=n.match(rt)||[];c=rt.exec(r);)u=c[0],c=r.substring(f,c.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),u!==s[p++]&&(h=parseFloat(s[p-1])||0,d._pt={_next:d._pt,p:c||1===p?c:",",s:h,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-h,m:l&&l<4?Math.round:0},f=rt.lastIndex);return d.c=f<r.length?r.substring(f,r.length):"",d.fp=o,(it.test(r)||i)&&(d.e=0),this._pt=d},an=function(e,t,n,r,i,a,o,s,l){h(r)&&(r=r(i||0,e,a));i=e[t],a="get"!==n?n:h(i)?l?e[t.indexOf("set")||!h(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():i,n=h(i)?l?vn:gn:mn;if(a!==(r=B(r)&&"="===(r=~r.indexOf("random(")?Nt(r):r).charAt(1)?parseFloat(a)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(G(a)||0):r))return isNaN(a*r)?(i||t in e||st(t,r),rn.call(this,e,t,a,r,n,s||I.stringFilter,l)):(s=new V(this._pt,e,t,+a||0,r-(a||0),"boolean"==typeof i?bn:xn,0,n),l&&(s.fp=l),o&&s.modifier(o,this,e),this._pt=s)},on=function(e,t,n,r,i,a){var o,s,l,u;if(z[e]&&!1!==(o=new z[e]).init(i,o.rawVars?t[e]:en(t[e],r,i,a,n),n,r,a)&&(n._pt=s=new V(n._pt,i,e,0,1,o.render,o,0,o.priority),n!==Le))for(l=n._ptLookup[n._targets.indexOf(i)],u=o._props.length;u--;)l[o._props[u]]=s;return o},sn=function e(t,n){var r,i,a,o,s,l,u,c,h,d,f,p,m,g=t.vars,v=g.ease,y=g.startAt,_=g.immediateRender,x=g.lazy,b=g.onUpdate,w=g.onUpdateParams,M=g.callbackScope,T=g.runBackwards,S=g.yoyoEase,E=g.autoRevert,A=t._dur,L=t._startAt,R=t._targets,C=t.parent,P=C&&"nested"===C.data?C.parent._targets:R,O="auto"===t._overwrite,D=t.timeline;if(t._ease=qt(v=!D||g.keyframes&&v?v:"none",We.ease),t._yEase=S?Wt(qt(!0===S?v:S,We.ease)):0,S&&t._yoyo&&!t._repeat&&(S=t._yEase,t._yEase=t._ease,t._ease=S),!D){if(p=(c=R[0]?mt(R[0]).harness:0)&&g[c.prop],r=_t(g,lt),L&&L.render(-1,!0).kill(),y){if(wt(t._startAt=j.set(R,H({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:F(x),startAt:null,delay:0,onUpdate:b,onUpdateParams:w,callbackScope:M,stagger:0},y))),_)if(0<n)E||(t._startAt=0);else if(A&&!(n<0&&L))return void(n&&(t._zTime=n))}else if(T&&A)if(L)E||(t._startAt=0);else if(a=H({overwrite:!1,data:"isFromStart",lazy:(_=n?!1:_)&&F(x),immediateRender:_,stagger:0,parent:C},r),p&&(a[c.prop]=p),wt(t._startAt=j.set(R,a)),_){if(!n)return}else e(t._startAt,k);for(t._pt=0,x=A&&F(x)||x&&!A,i=0;i<R.length;i++){if(u=(s=R[i])._gsap||pt(R)[i]._gsap,t._ptLookup[i]=d={},ut[u.id]&&U.length&&vt(),f=P===R?i:P.indexOf(s),c&&!1!==(h=new c).init(s,p||r,t,f,P)&&(t._pt=o=new V(t._pt,s,h.name,0,1,h.render,h,0,h.priority),h._props.forEach(function(e){d[e]=o}),h.priority)&&(l=1),!c||p)for(a in r)z[a]&&(h=on(a,r,t,f,s,P))?h.priority&&(l=1):d[a]=o=an.call(t,s,a,"get",r[a],f,P,0,g.stringFilter);t._op&&t._op[i]&&t.kill(s,t._op[i]),O&&t._pt&&(tn=t,N.killTweensOf(s,d,t.globalTime(0)),m=!t.parent,tn=0),t._pt&&x&&(ut[u.id]=1)}l&&Mn(t),t._onInit&&t._onInit(t)}t._from=!D&&!!g.runBackwards,t._onUpdate=b,t._initted=(!t._op||t._pt)&&!m},ln=function(e,t,n,r,i){return h(e)?e.call(t,n,r,i):B(e)&&~e.indexOf("random(")?Nt(e):e},un=ft+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",cn=(un+",id,stagger,delay,duration,paused,scrollTrigger").split(","),j=(r(i,nn=Qt),(t=i.prototype).render=function(e,t,n){var r,i,a=this._time,o=this._tDur,s=this._dur,l=o-k<e&&0<=e?o:e<k?0:e;if(s){if(l!==this._tTime||!e||n||this._startAt&&this._zTime<0!=e<0){if(f=l,m=this.timeline,this._repeat){if(h=s+this._rDelay,f=D(l%h),l===o?(v=this._repeat,f=s):((v=~~(l/h))&&v===l/h&&(f=s,v--),s<f&&(f=s)),(p=this._yoyo&&1&v)&&(d=this._yEase,f=s-f),y=K(this._tTime,h),f===a&&!n&&this._initted)return this;v!==y&&(m&&this._yEase&&_e(m,p),!this.vars.repeatRefresh||p||this._lock||(this._lock=n=1,this.render(D(h*v),!0).invalidate()._lock=0))}if(!this._initted){if(ee(this,e<0?e:f,n,t))return this._tTime=0,this;if(s!==this._dur)return this.render(e,t,n)}for(this._tTime=l,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=i=(d||this._ease)(f/s),this._from&&(this.ratio=i=1-i),!f||a||t||b(this,"onStart"),r=this._pt;r;)r.r(i,r.d),r=r._next;m&&m.render(e<0?e:!f&&p?-k:m._dur*i,t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),b(this,"onUpdate")),this._repeat&&v!==y&&this.vars.onRepeat&&!t&&this.parent&&b(this,"onRepeat"),l!==this._tDur&&l||this._tTime!==l||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),!e&&s||!(l===this._tDur&&0<this._ts||!l&&this._ts<0)||wt(this,1),t)||e<0&&!a||!l&&!a||(b(this,l===o?"onComplete":"onReverseComplete",!0),!this._prom)||l<o&&0<this.timeScale()||this._prom()}}else{var u,c,h=this,d=e,f=t,p=n,m=h.ratio,g=d<0||!d&&m&&!h._start&&h._zTime>k&&!h._dp._lock||(h._ts<0||h._dp._ts<0)&&"isFromStart"!==h.data&&"isStart"!==h.data?0:1,v=h._rDelay,y=0;if(v&&h._repeat&&(y=Ct(0,h._tDur,d),K(y,v)!==(c=K(h._tTime,v)))&&(m=1-g,h.vars.repeatRefresh)&&h._initted&&h.invalidate(),g!==m||p||h._zTime===k||!d&&h._zTime){if(h._initted||!ee(h,d,p,f)){for(c=h._zTime,h._zTime=d||(f?k:0),f=f||d&&!c,h.ratio=g,h._from&&(g=1-g),h._time=0,h._tTime=y,f||b(h,"onStart"),u=h._pt;u;)u.r(g,u.d),u=u._next;h._startAt&&d<0&&h._startAt.render(d,!0,!0),h._onUpdate&&!f&&b(h,"onUpdate"),y&&h._repeat&&!f&&h.parent&&b(h,"onRepeat"),(h._tDur<=d||d<0)&&h.ratio===g&&(g&&wt(h,1),f||(b(h,g?"onComplete":"onReverseComplete",!0),h._prom&&h._prom()))}}else h._zTime||(h._zTime=d)}return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),nn.prototype.invalidate.call(this)},t.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t)&&(this._lazy=0,this.parent))return pe(this);if(this.timeline)d=this.timeline.totalDuration(),this.timeline.killTweensOf(e,t,tn&&!0!==tn.vars.overwrite)._first||pe(this),this.parent&&d!==this.timeline.totalDuration()&&te(this,this._dur*this.timeline._tDur/d,0,1);else{var n,r,i,a,o,s,l,u=this._targets,c=e?A(e):u,h=this._ptLookup,d=this._pt;if((!t||"all"===t)&&((e,t)=>{for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0})(u,c))return"all"===t&&(this._pt=0),pe(this);for(n=this._op=this._op||[],"all"!==t&&(B(t)&&(o={},f(t,function(e){return o[e]=1}),t=o),t=((e,t)=>{var n,r,i,a,o=(e=e[0]?mt(e[0]).harness:0)&&e.aliases;if(!o)return t;for(r in n=O({},t),o)if(r in n)for(i=(a=o[r].split(",")).length;i--;)n[a[i]]=n[r];return n})(u,t)),l=u.length;l--;)if(~c.indexOf(u[l]))for(o in r=h[l],"all"===t?(n[l]=t,a=r,i={}):(i=n[l]=n[l]||{},a=t),a)(s=r&&r[o])&&("kill"in s.d&&!0!==s.d.kill(o)||bt(this,s,"_pt"),delete r[o]),"all"!==i&&(i[o]=1);this._initted&&!this._pt&&d&&pe(this)}return this},i.to=function(e,t){return new i(e,t,arguments[2])},i.from=function(e,t){return new i(e,v(arguments,1))},i.delayedCall=function(e,t,n,r){return new i(t,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:t,onReverseComplete:t,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:r})},i.fromTo=function(e,t,n){return new i(e,v(arguments,2))},i.set=function(e,t){return t.duration=0,t.repeatDelay||(t.repeat=0),new i(e,t)},i.killTweensOf=function(e,t,n){return N.killTweensOf(e,t,n)},i);function i(e,t,n,r){"number"==typeof t&&(n.duration=t,t=n,n=null);var i,a,o,s,l,u,c,h,d,r=(i=nn.call(this,r?t:Z(t),n)||this).vars,f=r.duration,p=r.delay,n=r.immediateRender,m=r.stagger,g=r.overwrite,v=r.keyframes,y=r.defaults,_=r.scrollTrigger,x=r.yoyoEase,r=i.parent,b=(E(e)||$e(e)?T(e[0]):"length"in t)?[e]:A(e);if(i._targets=b.length?pt(b):C("GSAP target "+e+" not found. https://greensock.com",!I.nullTargetWarn)||[],i._ptLookup=[],i._overwrite=g,v||m||R(f)||R(p)){if(t=i.vars,(a=i.timeline=new L({data:"nested",defaults:y||{}})).kill(),a.parent=w(i),v)H(a.vars.defaults,{ease:"none"}),v.forEach(function(e){return a.to(b,e,">")});else{if(l=b.length,h=m?ie(m):P,S(m))for(u in m)~un.indexOf(u)&&((d=d||{})[u]=m[u]);for(o=0;o<l;o++){for(u in s={},t)cn.indexOf(u)<0&&(s[u]=t[u]);s.stagger=0,x&&(s.yoyoEase=x),d&&O(s,d),c=b[o],s.duration=+ln(f,w(i),o,c,b),s.delay=(+ln(p,w(i),o,c,b)||0)-i._delay,!m&&1===l&&s.delay&&(i._delay=p=s.delay,i._start+=p,s.delay=0),a.to(c,s,h(o,c,b))}a.duration()?f=p=0:i.timeline=0}f||i.duration(f=a.duration())}else i.timeline=0;return!0===g&&(tn=w(i),N.killTweensOf(b),tn=0),r&&At(r,w(i)),(n||!f&&!v&&i._start===D(r._time)&&F(n)&&Q(w(i))&&"nested"!==r.data)&&(i._tTime=-k,i.render(Math.max(0,-p))),_&&$(w(i),_),i}H(j.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),f("staggerTo,staggerFrom,staggerFromTo",function(n){j[n]=function(){var e=new L,t=Pt.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});function hn(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next}function dn(e,t,n,r){for(var i,a=this._pt;a;)i=a._next,a.p===r&&a.modifier(e,t,n),a=i}function fn(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?bt(this,r,"_pt"):r.dep||(t=1),r=n;return!t}function pn(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)}var mn=function(e,t,n){return e[t]=n},gn=function(e,t,n){return e[t](n)},vn=function(e,t,n,r){return e[t](r.fp,n)},yn=function(e,t,n){return e.setAttribute(t,n)},_n=function(e,t){return h(e[t])?gn:Ke(e[t])&&e.setAttribute?yn:mn},xn=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4,t)},bn=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},wn=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},Mn=function(e){for(var t,n,r,i,a=e._pt;a;){for(t=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:i)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:i=a,a=t}e._pt=r},V=(Tn.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=pn,this.m=e,this.mt=n,this.tween=t},Tn);function Tn(e,t,n,r,i,a,o,s,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=a||xn,this.d=o||this,this.set=s||mn,this.pr=l||0,(this._next=e)&&(e._prev=this)}f(ft+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return lt[e]=1}),o.TweenMax=o.TweenLite=j,o.TimelineLite=o.TimelineMax=L,N=new L({sortChildren:!1,defaults:We,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),I.stringFilter=ve;function Sn(e,c){return{name:e,rawVars:1,init:function(e,u,t){t._onInit=function(e){var t,n;if(B(u)&&(t={},f(u,function(e){return t[e]=1}),u=t),c){for(n in t={},u)t[n]=c(u[n]);u=t}var r,i,a,o=e,s=u,l=o._targets;for(r in s)for(i=l.length;i--;)(a=(a=(a=o._ptLookup[i][r])&&a.d)&&(a._pt?$n(a,r):a))&&a.modifier&&a.modifier(s[r],o,l[i],r)}}}}function En(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)}function An(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)}function Ln(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)}function Rn(e,t){e=t.s+t.c*e,t.set(t.t,t.p,~~(e+(e<0?-.5:.5))+t.u,t)}function Cn(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)}function Pn(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)}function On(e,t,n){return e.style[t]=n}function Dn(e,t,n){return e.style.setProperty(t,n)}function Nn(e,t,n){return e._gsap[t]=n}function In(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n}function kn(e,t,n,r,i){(e=e._gsap).scaleX=e.scaleY=n,e.renderTransform(i,e)}function Bn(e,t,n,r,i){(e=e._gsap)[t]=n,e.renderTransform(i,e)}function Fn(){vr()&&window.document&&(Vn=window,W=Vn.document,Wn=W.documentElement,Xn=Ar("div")||{style:{}},Yn=Ar("div"),q=Rr(q),Er=q+"Origin",Xn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Qn=!!Rr("perspective"),qn=1)}function Un(e,t,n,r){var i;return qn||Fn(),t in Sr&&"transform"!==t&&~(t=Sr[t]).indexOf(",")&&(t=t.split(",")[0]),yr[t]&&"transform"!==t?(i=Wr(e,r),i="transformOrigin"!==t?i[t]:qr(X(e,Er))+" "+i.zOrigin+"px"):(i=e.style[t])&&"auto"!==i&&!r&&!~(i+"").indexOf("calc(")||(i=Ur[t]&&Ur[t](e,t,n)||X(e,t)||gt(e,t)||("opacity"===t?1:0)),n&&!~(i+"").indexOf(" ")?Br(e,t,i,n)+n:i}function zn(e,t,n,r){n&&"none"!==n||((i=(a=Rr(t,e,1))&&X(e,a,1))&&i!==n?(t=a,n=i):"borderColor"===t&&(n=X(e,"borderTopColor")));var i,a,o,s,l,u,c,h,d,f,p,m=new V(this._pt,e.style,t,0,1,wn),g=0,v=0;if(m.b=n,m.e=r,n+="","auto"===(r+="")&&(e.style[t]=r,r=X(e,t)||r,e.style[t]=n),ve(a=[n,r]),r=a[1],o=(n=a[0]).match(nt)||[],(r.match(nt)||[]).length){for(;h=nt.exec(r);)d=h[0],h=r.substring(g,h.index),l?l=(l+1)%5:"rgba("!==h.substr(-5)&&"hsla("!==h.substr(-5)||(l=1),d!==(u=o[v++]||"")&&(s=parseFloat(u)||0,f=u.substr((s+"").length),(p="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),c=parseFloat(d),d=d.substr((c+"").length),g=nt.lastIndex-d.length,d||(d=d||I.units[t]||f,g===r.length&&(r+=d,m.e+=d)),f!==d&&(s=Br(e,t,u,d)||0),m._pt={_next:m._pt,p:h||1===v?h:",",s:s,c:p?p*c:c-s,m:l&&l<4?Math.round:0});m.c=g<r.length?r.substring(g,r.length):""}else m.r="display"===t&&"none"===r?Pn:Cn;return it.test(r)&&(m.e=0),this._pt=m}function Hn(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,a=t.t,o=a.style,s=t.u,t=a._gsap;if("all"===s||!0===s)o.cssText="",r=1;else for(i=(s=s.split(",")).length;-1<--i;)n=s[i],yr[n]&&(r=1,n="transformOrigin"===n?Er:q),Nr(a,n);r&&(Nr(a,q),t)&&(t.svg&&a.removeAttribute("transform"),Wr(a,1),t.uncache=1)}}function Gn(e,t,n,r,i,a){var o,s=e._gsap,i=i||Vr(e,!0),l=s.xOrigin||0,u=s.yOrigin||0,c=s.xOffset||0,h=s.yOffset||0,d=i[0],f=i[1],p=i[2],m=i[3],g=i[4],v=i[5],y=t.split(" "),_=parseFloat(y[0])||0,x=parseFloat(y[1])||0;n?i!==zr&&(i=d*m-f*p)&&(o=_*(-f/i)+x*(d/i)-(d*v-f*g)/i,_=_*(m/i)+x*(-p/i)+(p*v-m*g)/i,x=o):(_=(i=Or(e)).x+(~y[0].indexOf("%")?_/100*i.width:_),x=i.y+(~(y[1]||y[0]).indexOf("%")?x/100*i.height:x)),r||!1!==r&&s.smooth?(s.xOffset=c+((g=_-l)*d+(v=x-u)*p)-g,s.yOffset=h+(g*f+v*m)-v):s.xOffset=s.yOffset=0,s.xOrigin=_,s.yOrigin=x,s.smooth=!!r,s.origin=t,s.originIsAbsolute=!!n,e.style[Er]="0px 0px",a&&(Ir(a,s,"xOrigin",l,_),Ir(a,s,"yOrigin",u,x),Ir(a,s,"xOffset",c,s.xOffset),Ir(a,s,"yOffset",h,s.yOffset)),e.setAttribute("data-svg-origin",_+" "+x)}function jn(e,t,n){var r=G(t);return D(parseFloat(t)+parseFloat(Br(e,"x",n+"px",r)))+r}var Vn,W,Wn,qn,Xn,Yn,Zn,Qn,Jn,Kn={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=(e=!e.name&&e.default||e).name,n=h(e),n=t&&!n&&e.init?function(){this._props=[]}:e,r={init:P,render:hn,add:an,kill:fn,modifier:dn,rawVars:0},i={targetTest:0,get:0,getSetter:_n,aliases:{},register:0};if(zt(),e!==n){if(z[t])return;H(n,H(_t(e,r),i)),O(n.prototype,O(r,_t(e,i))),z[n.prop=t]=n,e.targetTest&&(dt.push(n),lt[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}g(t,n),e.register&&e.register(c,n,V)})},timeline:function(e){return new L(e)},getTweensOf:function(e,t){return N.getTweensOf(e,t)},getProperty:function(r,e,t,n){B(r)&&(r=A(r)[0]);var i=mt(r||{}).get,a=t?_:yt;return"native"===t&&(t=""),r&&(e?a((z[e]&&z[e].get||i)(r,e,t,n)):function(e,t,n){return a((z[e]&&z[e].get||i)(r,e,t,n))})},quickSetter:function(n,t,r){var i,a;if(1<(n=A(n)).length)return i=n.map(function(e){return c.quickSetter(e,t,r)}),a=i.length,function(e){for(var t=a;t--;)i[t](e)};n=n[0]||{};var o=z[t],s=mt(n),l=s.harness&&(s.harness.aliases||{})[t]||t,u=o?function(e){var t=new o;Le._pt=0,t.init(n,r?e+r:e,Le,0,[n]),t.render(1,t),Le._pt&&hn(1,Le)}:s.set(n,l);return o?u:function(e){return u(n,l,r?e+r:e,s,1)}},isTweening:function(e){return 0<N.getTweensOf(e,!0).length},defaults:function(e){return e&&e.ease&&(e.ease=qt(e.ease,We.ease)),Y(We,e||{})},config:function(e){return Y(I,e||{})},registerEffect:function(e){var r=e.name,i=e.effect,t=e.plugins,a=e.defaults,e=e.extendTimeline;(t||"").split(",").forEach(function(e){return e&&!z[e]&&!o[e]&&C(r+" effect requires "+e+" plugin.")}),ct[r]=function(e,t,n){return i(A(e),H(t||{},a),n)},e&&(L.prototype[r]=function(e,t,n){return this.add(ct[r](e,S(t)?t:(n=t)&&{},this),n)})},registerEase:function(e,t){s[e]=qt(t)},parseEase:function(e,t){return arguments.length?qt(e,t):s},getById:function(e){return N.getById(e)},exportRoot:function(e,t){var n,r,i=new L(e=void 0===e?{}:e);for(i.smoothChildTiming=F(e.smoothChildTiming),N.remove(i),i._dp=0,i._time=i._tTime=N._time,n=N._first;n;)r=n._next,!t&&!n._dur&&n instanceof j&&n.vars.onComplete===n._targets[0]||l(i,n,n._start-n._delay),n=r;return l(N,i,0),i},utils:{wrap:ue,wrapYoyo:ce,distribute:ie,random:se,snap:oe,normalize:function(e,t,n){return he(e,t,0,1,n)},getUnit:G,clamp:function(t,n,e){return Rt(e,function(e){return Ct(t,n,e)})},splitColor:kt,toArray:A,mapRange:he,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(t,n){return function(e){return t(parseFloat(e))+(n||G(e))}},interpolate:de,shuffle:Dt},install:m,effects:ct,ticker:p,updateRoot:L.updateRoot,plugins:z,globalTimeline:N,core:{PropTween:V,globals:g,Tween:j,Timeline:L,Animation:Qt,getCache:mt,_removeLinkedListItem:bt}},$n=(f("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Kn[e]=j[e]}),p.add(L.updateRoot),Le=Kn.to({},{duration:0}),function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n}),c=Kn.registerPlugin({name:"attr",init:function(e,t,n,r,i){var a,o;for(a in t)(o=this.add(e,"setAttribute",(e.getAttribute(a)||0)+"",t[a],r,i,0,0,a))&&(o.op=a),this._props.push(a)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},Sn("roundProps",ae),Sn("modifiers"),Sn("snap",oe))||Kn,t=(j.version=L.version=c.version="3.5.1",Ee=1,a()&&zt(),s.Power0),er=s.Power1,tr=s.Power2,nr=s.Power3,rr=s.Power4,ir=s.Linear,ar=s.Quad,or=s.Cubic,sr=s.Quart,lr=s.Quint,ur=s.Strong,cr=s.Elastic,hr=s.Back,dr=s.SteppedEase,fr=s.Bounce,pr=s.Sine,mr=s.Expo,gr=s.Circ,vr=function(){return"undefined"!=typeof window},yr={},_r=180/Math.PI,xr=Math.PI/180,br=Math.atan2,wr=/([A-Z])/g,Mr=/(?:left|right|width|margin|padding|x)/i,Tr=/[\s,\(]\S/,Sr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},q="transform",Er=q+"Origin",Ar=function(e,t){t=W.createElementNS?W.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):W.createElement(e);return t.style?t:W.createElement(e)},X=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(wr,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,Rr(n)||n,1)||""},Lr="O,Moz,ms,Ms,Webkit".split(","),Rr=function(e,t,n){var r=(t||Xn).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(Lr[i]+e in r););return i<0?null:(3===i?"ms":0<=i?Lr[i]:"")+e},Cr=function e(t){var n,r=Ar("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,o=this.style.cssText;if(Wn.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),Wn.removeChild(r),this.style.cssText=o,n},Pr=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Or=function(t){var n;try{n=t.getBBox()}catch(e){n=Cr.call(t,!0)}return!(n=n&&(n.width||n.height)||t.getBBox===Cr?n:Cr.call(t,!0))||n.width||n.x||n.y?n:{x:+Pr(t,["x","cx","x1"])||0,y:+Pr(t,["y","cy","y1"])||0,width:0,height:0}},Dr=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Or(e))},Nr=function(e,t){t&&(e=e.style,t in yr&&t!==Er&&(t=q),e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(wr,"-$1").toLowerCase())):e.removeAttribute(t))},Ir=function(e,t,n,r,i,a){t=new V(e._pt,t,n,0,1,a?Pn:Cn);return(e._pt=t).b=r,t.e=i,e._props.push(n),t},kr={deg:1,rad:1,turn:1},Br=function e(t,n,r,i){var a=parseFloat(r)||0,o=(r+"").trim().substr((a+"").length)||"px",s=Xn.style,l=Mr.test(n),u="svg"===t.tagName.toLowerCase(),c=(u?"client":"offset")+(l?"Width":"Height"),h="px"===i,d="%"===i;return i===o||!a||kr[i]||kr[o]?a:("px"===o||h||(a=e(t,n,r,"px")),r=t.getCTM&&Dr(t),d&&(yr[n]||~n.indexOf("adius"))?D(a/(r?t.getBBox()[l?"width":"height"]:t[c])*100):(s[l?"width":"height"]=100+(h?o:i),n=~n.indexOf("adius")||"em"===i&&t.appendChild&&!u?t:t.parentNode,(i=(n=(n=r?(t.ownerSVGElement||{}).parentNode:n)&&n!==W&&n.appendChild?n:W.body)._gsap)&&d&&i.width&&l&&i.time===p.time?D(a/i.width*100):(!d&&"%"!==o||(s.position=X(t,"position")),n===t&&(s.position="static"),n.appendChild(Xn),u=Xn[c],n.removeChild(Xn),s.position="absolute",l&&d&&((i=mt(n)).time=p.time,i.width=n[c]),D(h?u*a/100:u&&a?100/u*a:0))))},Fr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ur={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data)return(t=e._pt=new V(e._pt,t,n,0,0,Hn)).u=r,t.pr=-10,t.tween=i,e._props.push(n),1}},zr=[1,0,0,1,0,0],Hr={},Gr=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},jr=function(e){e=X(e,q);return Gr(e)?zr:e.substr(7).match(tt).map(D)},Vr=function(e,t){var n,r,i,a=e._gsap||mt(e),o=e.style,s=jr(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?zr:s:(s!==zr||e.offsetParent||e===Wn||a.svg||(r=o.display,o.display="block",(a=e.parentNode)&&e.offsetParent||(i=1,n=e.nextSibling,Wn.appendChild(e)),s=jr(e),r?o.display=r:Nr(e,"display"),i&&(n?a.insertBefore(e,n):a?a.appendChild(e):Wn.removeChild(e))),t&&6<s.length?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Wr=function(e,t){var n,r,i,a,o,s,l,u,c,h,d,f,p,m,g,v,y,_,x,b,w,M,T,S,E,A,L,R,C,P,O=e._gsap||new Zt(e);return"x"in O&&!t&&!O.uncache||(t=e.style,n=O.scaleX<0,r=X(e,Er)||"0",C=i=a=s=l=u=c=h=0,P=o=1,O.svg=!(!e.getCTM||!Dr(e)),d=Vr(e,O.svg),O.svg&&(b=!O.uncache&&e.getAttribute("data-svg-origin"),Gn(e,b||r,!!b||O.originIsAbsolute,!1!==O.smooth,d)),R=O.xOrigin||0,A=O.yOrigin||0,d!==zr&&(m=d[0],g=d[1],v=d[2],y=d[3],C=_=d[4],i=x=d[5],6===d.length?(P=Math.sqrt(m*m+g*g),o=Math.sqrt(y*y+v*v),s=m||g?br(g,m)*_r:0,(c=v||y?br(v,y)*_r+s:0)&&(o*=Math.cos(c*xr)),O.svg&&(C-=R-(R*m+A*v),i-=A-(R*g+A*y))):(R=d[6],A=d[7],T=d[8],S=d[9],E=d[10],L=d[11],C=d[12],i=d[13],a=d[14],l=(d=br(R,E))*_r,d&&(b=_*(f=Math.cos(-d))+T*(p=Math.sin(-d)),w=x*f+S*p,M=R*f+E*p,T=_*-p+T*f,S=x*-p+S*f,E=R*-p+E*f,L=A*-p+L*f,_=b,x=w,R=M),u=(d=br(-v,E))*_r,d&&(f=Math.cos(-d),L=y*(p=Math.sin(-d))+L*f,m=b=m*f-T*p,g=w=g*f-S*p,v=M=v*f-E*p),s=(d=br(g,m))*_r,d&&(b=m*(f=Math.cos(d))+g*(p=Math.sin(d)),w=_*f+x*p,g=g*f-m*p,x=x*f-_*p,m=b,_=w),l&&359.9<Math.abs(l)+Math.abs(s)&&(l=s=0,u=180-u),P=D(Math.sqrt(m*m+g*g+v*v)),o=D(Math.sqrt(x*x+R*R)),d=br(_,x),c=2e-4<Math.abs(d)?d*_r:0,h=L?1/(L<0?-L:L):0),O.svg)&&(b=e.getAttribute("transform"),O.forceCSS=e.setAttribute("transform","")||!Gr(X(e,q)),b)&&e.setAttribute("transform",b),90<Math.abs(c)&&Math.abs(c)<270&&(n?(P*=-1,c+=s<=0?180:-180,s+=s<=0?180:-180):(o*=-1,c+=c<=0?180:-180)),O.x=((O.xPercent=C&&Math.round(e.offsetWidth/2)===Math.round(-C)?-50:0)?0:C)+"px",O.y=((O.yPercent=i&&Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)?0:i)+"px",O.z=a+"px",O.scaleX=D(P),O.scaleY=D(o),O.rotation=D(s)+"deg",O.rotationX=D(l)+"deg",O.rotationY=D(u)+"deg",O.skewX=c+"deg",O.skewY="0deg",O.transformPerspective=h+"px",(O.zOrigin=parseFloat(r.split(" ")[2])||0)&&(t[Er]=qr(r)),O.xOffset=O.yOffset=0,O.force3D=I.force3D,O.renderTransform=O.svg?Qr:Qn?Zr:Xr,O.uncache=0),O},qr=function(e){return(e=e.split(" "))[0]+" "+e[1]},Xr=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Zr(e,t)},Yr="0deg",Zr=function(e,t){var n,r,i,t=t||this,a=t.xPercent,o=t.yPercent,s=t.x,l=t.y,u=t.z,c=t.rotation,h=t.rotationY,d=t.rotationX,f=t.skewX,p=t.skewY,m=t.scaleX,g=t.scaleY,v=t.transformPerspective,y=t.force3D,_=t.target,t=t.zOrigin,x="",e="auto"===y&&e&&1!==e||!0===y;!t||d===Yr&&h===Yr||(y=parseFloat(h)*xr,n=Math.sin(y),r=Math.cos(y),y=parseFloat(d)*xr,i=Math.cos(y),s=jn(_,s,n*i*-t),l=jn(_,l,-Math.sin(y)*-t),u=jn(_,u,r*i*-t+t)),"0px"!==v&&(x+="perspective("+v+") "),(a||o)&&(x+="translate("+a+"%, "+o+"%) "),!e&&"0px"===s&&"0px"===l&&"0px"===u||(x+="0px"!==u||e?"translate3d("+s+", "+l+", "+u+") ":"translate("+s+", "+l+") "),c!==Yr&&(x+="rotate("+c+") "),h!==Yr&&(x+="rotateY("+h+") "),d!==Yr&&(x+="rotateX("+d+") "),f===Yr&&p===Yr||(x+="skew("+f+", "+p+") "),1===m&&1===g||(x+="scale("+m+", "+g+") "),_.style[q]=x||"translate(0, 0)"},Qr=function(e,t){var n,r,i,a,o,t=t||this,s=t.xPercent,l=t.yPercent,u=t.x,c=t.y,h=t.rotation,d=t.skewX,f=t.skewY,p=t.scaleX,m=t.scaleY,g=t.target,v=t.xOrigin,y=t.yOrigin,_=t.xOffset,x=t.yOffset,t=t.forceCSS,b=parseFloat(u),w=parseFloat(c),h=parseFloat(h),d=parseFloat(d);(f=parseFloat(f))&&(d+=f=parseFloat(f),h+=f),h||d?(h*=xr,d*=xr,n=Math.cos(h)*p,r=Math.sin(h)*p,i=Math.sin(h-d)*-m,a=Math.cos(h-d)*m,d&&(f*=xr,o=Math.tan(d-f),i*=o=Math.sqrt(1+o*o),a*=o,f)&&(o=Math.tan(f),n*=o=Math.sqrt(1+o*o),r*=o),n=D(n),r=D(r),i=D(i),a=D(a)):(n=p,a=m,r=i=0),(b&&!~(u+"").indexOf("px")||w&&!~(c+"").indexOf("px"))&&(b=Br(g,"x",u,"px"),w=Br(g,"y",c,"px")),(v||y||_||x)&&(b=D(b+v-(v*n+y*i)+_),w=D(w+y-(v*r+y*a)+x)),(s||l)&&(o=g.getBBox(),b=D(b+s/100*o.width),w=D(w+l/100*o.height)),g.setAttribute("transform",o="matrix("+n+","+r+","+i+","+a+","+b+","+w+")"),t&&(g.style[q]=o)},Jr=(f("padding,margin,Width,Radius",function(t,n){var e="Bottom",s=(n<3?["Top","Right",e,"Left"]:["TopLeft","TopRight",e+"Right",e+"Left"]).map(function(e){return n<2?t+e:"border"+e+t});Ur[1<n?"border"+t:t]=function(t,e,n,r,i){var a,o;if(arguments.length<4)return a=s.map(function(e){return Un(t,e,n)}),5===(o=a.join(" ")).split(a[0]).length?a[0]:o;a=(r+"").split(" "),o={},s.forEach(function(e,t){return o[e]=a[t]=a[t]||a[(t-1)/2|0]}),t.init(e,o,i)}}),{name:"css",register:Fn,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var a,o,s,l,u,c,h,d,f,p,m,g,v,y,_,x,b,w,M=this._props,T=e.style;for(u in qn||Fn(),t)if("autoRound"!==u&&(a=t[u],!z[u]||!on(u,t,n,r,e,i)))if(h=typeof a,l=Ur[u],"string"===(h="function"===h?typeof(a=a.call(n,r,e,i)):h)&&~a.indexOf("random(")&&(a=Nt(a)),l)l(this,e,u,a,n)&&(g=1);else if("--"===u.substr(0,2))this.add(T,"setProperty",getComputedStyle(e).getPropertyValue(u)+"",a+"",r,i,0,0,u);else if("undefined"!==h){if(l=Un(e,u),s=parseFloat(l),(h="string"===h&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),o=parseFloat(a),d=(u=u in Sr&&("autoAlpha"===u&&(1===s&&"hidden"===Un(e,"visibility")&&o&&(s=0),Ir(this,T,"visibility",s?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==u)&&"transform"!==u&&~(u=Sr[u]).indexOf(",")?u.split(",")[0]:u)in yr)if(f||((p=e._gsap).renderTransform||Wr(e),m=!1!==t.smoothOrigin&&p.smooth,(f=this._pt=new V(this._pt,T,q,0,1,p.renderTransform,p,0,-1)).dep=1),"scale"===u)this._pt=new V(this._pt,p,"scaleY",p.scaleY,h?h*o:o-p.scaleY),M.push("scaleY",u),u+="X";else{if("transformOrigin"===u){w=b=x=void 0,x=(_=a).split(" "),b=x[0],w=x[1]||"50%","top"!==b&&"bottom"!==b&&"left"!==w&&"right"!==w||(_=b,b=w,w=_),x[0]=Fr[b]||b,x[1]=Fr[w]||w,a=x.join(" "),p.svg?Gn(e,a,0,m,0,this):((c=parseFloat(a.split(" ")[2])||0)!==p.zOrigin&&Ir(this,p,"zOrigin",p.zOrigin,c),Ir(this,T,u,qr(l),qr(a)));continue}if("svgOrigin"===u){Gn(e,a,1,m,0,this);continue}if(u in Hr){_=this,b=p,w=u,x=s,D=h,y=P=void 0,P=B(v=a),y=parseFloat(v)*(P&&~v.indexOf("rad")?_r:1),y=x+(D=D?y*D:y-x)+"deg",P&&("short"===(P=v.split("_")[1])&&(D%=360)!==D%180&&(D+=D<0?360:-360),"cw"===P&&D<0?D=(D+36e9)%360-360*~~(D/360):"ccw"===P&&0<D&&(D=(D-36e9)%360-360*~~(D/360))),_._pt=v=new V(_._pt,b,w,x,D,An),v.e=y,v.u="deg",_._props.push(w);continue}if("smoothOrigin"===u){Ir(this,p,"smooth",p.smooth,a);continue}if("force3D"===u){p[u]=a;continue}if("transform"===u){R=L=A=E=S=N=D=O=P=C=void 0;var S,E,A,L,R,C=this,P=a,O=e,D=Yn.style,N=O._gsap;for(E in D.cssText=getComputedStyle(O).cssText+";position:absolute;display:block;",D[q]=P,W.body.appendChild(Yn),S=Wr(Yn,1),yr)(A=N[E])!==(L=S[E])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(E)<0&&(A=G(A)!==(R=G(L))?Br(O,E,A,R):parseFloat(A),L=parseFloat(L),C._pt=new V(C._pt,N,E,A,L-A,En),C._pt.u=R||0,C._props.push(E));W.body.removeChild(Yn);continue}}else u in T||(u=Rr(u)||u);if(d||(o||0===o)&&(s||0===s)&&!Tr.test(a)&&u in T)o=o||0,(y=(l+"").substr((s+"").length))!==(c=G(a)||(u in I.units?I.units[u]:y))&&(s=Br(e,u,l,c)),this._pt=new V(this._pt,d?p:T,u,s,h?h*o:o-s,"px"!==c||!1===t.autoRound||d?En:Rn),this._pt.u=c||0,y!==c&&(this._pt.b=l,this._pt.r=Ln);else if(u in T)zn.call(this,e,u,l,a);else{if(!(u in e)){st(u,a);continue}this.add(e,u,e[u],a,r,i)}M.push(u)}g&&Mn(this)},get:Un,aliases:Sr,getSetter:function(e,t,n){var r=Sr[t];return(t=r&&r.indexOf(",")<0?r:t)in yr&&t!==Er&&(e._gsap.x||Un(e,"x"))?n&&Zn===n?"scale"===t?In:Nn:(Zn=n||{})&&("scale"===t?kn:Bn):e.style&&!Ke(e.style[t])?On:~t.indexOf("-")?Dn:_n(e,t)},core:{_removeProperty:Nr,_getMatrix:Vr}}),Kr=(c.utils.checkPrefix=Rr,Jn=f((Kr="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+($r="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){yr[e]=1}),f($r,function(e){I.units[e]="deg",Hr[e]=1}),Sr[Jn[13]]=Kr+","+$r,f("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){e=e.split(":");Sr[e[1]]=Jn[e[0]]}),f("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){I.units[e]="px"}),c.registerPlugin(Jr),c.registerPlugin(Jr)||c),$r=Kr.core.Tween;e.Back=hr,e.Bounce=fr,e.CSSPlugin=Jr,e.Circ=gr,e.Cubic=or,e.Elastic=cr,e.Expo=mr,e.Linear=ir,e.Power0=t,e.Power1=er,e.Power2=tr,e.Power3=nr,e.Power4=rr,e.Quad=ar,e.Quart=sr,e.Quint=lr,e.Sine=pr,e.SteppedEase=dr,e.Strong=ur,e.TimelineLite=L,e.TimelineMax=L,e.TweenLite=j,e.TweenMax=$r,e.default=Kr,e.gsap=Kr,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete window.default},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).window=r.window||{})},{}],50:[function(e,t,p){!function(f){!function(){function e(){this.init()}function t(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")}var y,a,o,s,l,u,c,h,n,r,i,d;e.prototype={init:function(){var e=this||y;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||y;if(e=parseFloat(e),t.ctx||h(),void 0!==e&&0<=e&&e<=1){if(t._volume=e,!t._muted){t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,y.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*e)}}return t}return t._volume},mute:function(e){var t=this||y;t.ctx||h(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,y.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||y,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||y,t=e._howls.length-1;0<=t;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,h()),e},codecs:function(e){return(this||y)._codecs[e.replace(/^x-/,"")]},_setup:function(){var t=this||y;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(e){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var e,t,n,r,i=this||y,a=null;try{a="undefined"!=typeof Audio?new Audio:null}catch(e){return i}return a&&"function"==typeof a.canPlayType&&(e=a.canPlayType("audio/mpeg;").replace(/^no$/,""),t=(t=(n=i._navigator?i._navigator.userAgent:"").match(/OPR\/(\d+)/g))&&parseInt(t[0].split("/")[1],10)<33,r=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),n=n.match(/Version\/(.*?) /),r=r&&n&&parseInt(n[1],10)<15,i._codecs={mp3:!(t||!e&&!a.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!e,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(r||!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(r||!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")}),i},_unlockAudio:function(){var s,l=this||y;if(!l._audioUnlocked&&l.ctx)return l._audioUnlocked=!1,l.autoUnlock=!1,l._mobileUnloaded||44100===l.ctx.sampleRate||(l._mobileUnloaded=!0,l.unload()),l._scratchBuffer=l.ctx.createBuffer(1,1,22050),s=function(e){for(;l._html5AudioPool.length<l.html5PoolSize;)try{var t=new Audio;t._unlocked=!0,l._releaseHtml5Audio(t)}catch(e){l.noAudio=!0;break}for(var n=0;n<l._howls.length;n++)if(!l._howls[n]._webAudio)for(var r=l._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=l._howls[n]._soundById(r[i]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}l._autoResume();var o=l.ctx.createBufferSource();o.buffer=l._scratchBuffer,o.connect(l.ctx.destination),void 0===o.start?o.noteOn(0):o.start(0),"function"==typeof l.ctx.resume&&l.ctx.resume(),o.onended=function(){o.disconnect(0),l._audioUnlocked=!0,document.removeEventListener("touchstart",s,!0),document.removeEventListener("touchend",s,!0),document.removeEventListener("click",s,!0),document.removeEventListener("keydown",s,!0);for(var e=0;e<l._howls.length;e++)l._howls[e]._emit("unlock")}},document.addEventListener("touchstart",s,!0),document.addEventListener("touchend",s,!0),document.addEventListener("click",s,!0),document.addEventListener("keydown",s,!0),l},_obtainHtml5Audio:function(){var e=this||y;return e._html5AudioPool.length?e._html5AudioPool.pop():((e=(new Audio).play())&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio)},_releaseHtml5Audio:function(e){var t=this||y;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&y.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){var e;t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())},t.ctx.suspend().then(e,e))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&y.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}},y=new e,t.prototype={init:function(e){var t=this;return y.ctx||h(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=y.usingWebAudio&&!t._html5,void 0!==y.ctx&&y.ctx&&y.autoUnlock&&y._unlockAudio(),y._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(y.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n,r,i=0;i<e._src.length;i++){if(e._format&&e._format[i])n=e._format[i];else{if("string"!=typeof(r=e._src[i])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=(n=(n=/^data:audio\/([^;,]+);/i.exec(r))||/\.([^.]+)$/.exec(r.split("?",1)[0]))&&n[1].toLowerCase()}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&y.codecs(n)){t=e._src[i];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&s(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,n){var r=this,e=null;if("number"==typeof t)e=t,t=null;else{if("string"==typeof t&&"loaded"===r._state&&!r._sprite[t])return null;if(void 0===t&&(t="__default",!r._playLock)){for(var i=0,a=0;a<r._sounds.length;a++)r._sounds[a]._paused&&!r._sounds[a]._ended&&(i++,e=r._sounds[a]._id);1===i?t=null:e=null}}var o,s=e?r._soundById(e):r._inactiveSound();if(!s)return null;if(e&&!t&&(t=s._sprite||"__default"),"loaded"!==r._state)return s._sprite=t,s._ended=!1,o=s._id,r._queue.push({event:"play",action:function(){r.play(o)}}),o;if(e&&!s._paused)return n||r._loadQueue("play"),s._id;r._webAudio&&y._autoResume();var l,u,c,h,d=Math.max(0,0<s._seek?s._seek:r._sprite[t][0]/1e3),f=Math.max(0,(r._sprite[t][0]+r._sprite[t][1])/1e3-d),p=1e3*f/Math.abs(s._rate),m=r._sprite[t][0]/1e3,g=(r._sprite[t][0]+r._sprite[t][1])/1e3,v=(s._sprite=t,s._ended=!1,function(){s._paused=!1,s._seek=d,s._start=m,s._stop=g,s._loop=!(!s._loop&&!r._sprite[t][2])});if(!(g<=d))return l=s._node,r._webAudio?(c=function(){r._playLock=!1,v(),r._refreshBuffer(s);var e=s._muted||r._muted?0:s._volume;l.gain.setValueAtTime(e,y.ctx.currentTime),s._playStart=y.ctx.currentTime,void 0===l.bufferSource.start?s._loop?l.bufferSource.noteGrainOn(0,d,86400):l.bufferSource.noteGrainOn(0,d,f):s._loop?l.bufferSource.start(0,d,86400):l.bufferSource.start(0,d,f),p!==1/0&&(r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),p)),n||setTimeout(function(){r._emit("play",s._id),r._loadQueue()},0)},"running"===y.state&&"interrupted"!==y.ctx.state?c():(r._playLock=!0,r.once("resume",c),r._clearTimer(s._id))):(u=function(){l.currentTime=d,l.muted=s._muted||r._muted||y._muted||l.muted,l.volume=s._volume*y.volume(),l.playbackRate=s._rate;try{var e=l.play();e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)?(r._playLock=!0,v(),e.then(function(){r._playLock=!1,l._unlocked=!0,n?r._loadQueue():r._emit("play",s._id)}).catch(function(){r._playLock=!1,r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):n||(r._playLock=!1,v(),r._emit("play",s._id)),l.playbackRate=s._rate,l.paused?r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."):"__default"!==t||s._loop?r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),p):(r._endTimers[s._id]=function(){r._ended(s),l.removeEventListener("ended",r._endTimers[s._id],!1)},l.addEventListener("ended",r._endTimers[s._id],!1))}catch(e){r._emit("playerror",s._id,e)}},"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===l.src&&(l.src=r._src,l.load()),c=window&&window.ejecta||!l.readyState&&y._navigator.isCocoonJS,3<=l.readyState||c?u():(r._playLock=!0,r._state="loading",h=function(){r._state="loaded",u(),l.removeEventListener(y._canPlayEvent,h,!1)},l.addEventListener(y._canPlayEvent,h,!1),r._clearTimer(s._id))),s._id;r._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)t._queue.push({event:"pause",action:function(){t.pause(e)}});else for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)n._queue.push({event:"stop",action:function(){n.stop(e)}});else for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var a=n._soundById(r[i]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,n._stopFade(r[i]),a._node&&(n._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&n._clearSound(a._node))),t||n._emit("stop",a._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)n._queue.push({event:"mute",action:function(){n.mute(e,t)}});else{if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,y.ctx.currentTime):a._node&&(a._node.muted=!!y._muted||e),n._emit("mute",a._id))}}return n},volume:function(){var e,t,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]?0<=n._getSoundIds().indexOf(r[0])?i=parseInt(r[0],10):e=parseFloat(r[0]):2<=r.length&&(e=parseFloat(r[0]),i=parseInt(r[1],10)),!(void 0!==e&&0<=e&&e<=1))return(t=i?n._soundById(i):n._sounds[0])?t._volume:0;if("loaded"!==n._state||n._playLock)n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}});else{void 0===i&&(n._volume=e);for(var i=n._getSoundIds(i),a=0;a<i.length;a++)(t=n._soundById(i[a]))&&(t._volume=e,r[2]||n._stopFade(i[a]),n._webAudio&&t._node&&!t._muted?t._node.gain.setValueAtTime(e,y.ctx.currentTime):t._node&&!t._muted&&(t._node.volume=e*y.volume()),n._emit("volume",t._id))}return n},fade:function(e,t,n,r){var i=this;if("loaded"!==i._state||i._playLock)i._queue.push({event:"fade",action:function(){i.fade(e,t,n,r)}});else{e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),i.volume(e,r);for(var a=i._getSoundIds(r),o=0;o<a.length;o++){var s,l,u=i._soundById(a[o]);u&&(r||i._stopFade(a[o]),i._webAudio&&!u._muted&&(l=(s=y.ctx.currentTime)+n/1e3,u._volume=e,u._node.gain.setValueAtTime(e,s),u._node.gain.linearRampToValueAtTime(t,l)),i._startFadeInterval(u,e,t,n,a[o],void 0===r))}}return i},_startFadeInterval:function(t,n,r,i,e,a){var o=this,s=n,l=r-n,u=Math.abs(l/.01),u=Math.max(4,0<u?i/u:i),c=Date.now();t._fadeTo=r,t._interval=setInterval(function(){var e=(Date.now()-c)/i;c=Date.now(),s+=l*e,s=Math.round(100*s)/100,s=l<0?Math.max(r,s):Math.min(r,s),o._webAudio?t._volume=s:o.volume(s,t._id,!0),a&&(o._volume=s),(r<n&&s<=r||n<r&&r<=s)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,o.volume(r,t._id),o._emit("fade",t._id))},u)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(y.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;r._loop=e=i[0]}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var a=r._getSoundIds(t),o=0;o<a.length;o++)(n=r._soundById(a[o]))&&(n._loop=e,r._webAudio)&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e)&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(a[o]))&&(r.pause(a[o],!0),r.play(a[o],!0));return r},rate:function(){var e,t=this,n=arguments;if(0===n.length?a=t._sounds[0]._id:1===n.length?0<=t._getSoundIds().indexOf(n[0])?a=parseInt(n[0],10):e=parseFloat(n[0]):2===n.length&&(e=parseFloat(n[0]),a=parseInt(n[1],10)),"number"!=typeof e)return((i=t._soundById(a))||t)._rate;if("loaded"!==t._state||t._playLock)t._queue.push({event:"rate",action:function(){t.rate.apply(t,n)}});else{void 0===a&&(t._rate=e);for(var r,i,a=t._getSoundIds(a),o=0;o<a.length;o++)(i=t._soundById(a[o]))&&(t.playing(a[o])&&(i._rateSeek=t.seek(a[o]),i._playStart=t._webAudio?y.ctx.currentTime:i._playStart),i._rate=e,t._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,y.ctx.currentTime):i._node&&(i._node.playbackRate=e),r=t.seek(a[o]),r=1e3*((t._sprite[i._sprite][0]+t._sprite[i._sprite][1])/1e3-r)/Math.abs(i._rate),!t._endTimers[a[o]]&&i._paused||(t._clearTimer(a[o]),t._endTimers[a[o]]=setTimeout(t._ended.bind(t,i),r)),t._emit("rate",i._id))}return t},seek:function(){var e,t,n=this,r=arguments;if(0===r.length?n._sounds.length&&(t=n._sounds[0]._id):1===r.length?0<=n._getSoundIds().indexOf(r[0])?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0])):2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),void 0===t)return 0;if("number"!=typeof e||"loaded"===n._state&&!n._playLock){var i,a,o,s,l,u=n._soundById(t);if(u){if(!("number"==typeof e&&0<=e))return n._webAudio?(s=n.playing(t)?y.ctx.currentTime-u._playStart:0,l=u._rateSeek?u._rateSeek-u._seek:0,u._seek+(l+s*Math.abs(u._rate))):u._node.currentTime;(i=n.playing(t))&&n.pause(t,!0),u._seek=e,u._ended=!1,n._clearTimer(t),n._webAudio||!u._node||isNaN(u._node.duration)||(u._node.currentTime=e),a=function(){i&&n.play(t,!0),n._emit("seek",t)},i&&!n._webAudio?(o=function(){n._playLock?setTimeout(o,0):a()},setTimeout(o,0)):a()}}else n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}});return n},playing:function(e){if("number"==typeof e)return!!(e=this._soundById(e))&&!e._paused;for(var t=0;t<this._sounds.length;t++)if(!this._sounds[t]._paused)return!0;return!1},duration:function(e){var t=this._duration,e=this._soundById(e);return t=e?this._sprite[e._sprite][1]/1e3:t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(y._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),y._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);for(var r=y._howls.indexOf(e),i=(0<=r&&y._howls.splice(r,1),!0),n=0;n<y._howls.length;n++)if(y._howls[n]._src===e._src||0<=e._src.indexOf(y._howls[n]._src)){i=!1;break}return o&&i&&delete o[e._src],y.noAudio=!1,e._state="unloaded",e._sounds=[],e=null},on:function(e,t,n,r){e=this["_on"+e];return"function"==typeof t&&e.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var a=n===r[i].id;if(t===r[i].fn&&a||!t&&a){r.splice(i,1);break}}else if(e)this["_on"+e]=[];else for(var o=Object.keys(this),i=0;i<o.length;i++)0===o[i].indexOf("_on")&&Array.isArray(this[o[i]])&&(this[o[i]]=[]);return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],i=r.length-1;0<=i;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(e,r[i].fn,r[i].id));return this._loadQueue(e),this},_loadQueue:function(e){var t;return 0<this._queue.length&&((t=this._queue[0]).event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()),this},_ended:function(e){var t,n=this,r=e._sprite;return!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop?setTimeout(n._ended.bind(n,e),100):(r=!(!e._loop&&!n._sprite[r][2]),n._emit("end",e._id),!n._webAudio&&r&&n.stop(e._id,!0).play(e._id),n._webAudio&&r&&(n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=y.ctx.currentTime,t=1e3*(e._stop-e._start)/Math.abs(e._rate),n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),t)),n._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),y._autoSuspend()),n._webAudio||r||n.stop(e._id,!0)),n},_clearTimer:function(e){var t;return this._endTimers[e]&&("function"!=typeof this._endTimers[e]?clearTimeout(this._endTimers[e]):(t=this._soundById(e))&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1),delete this._endTimers[e]),this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new a(this)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;0<=r;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){if(void 0!==e)return[e];for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t},_refreshBuffer:function(e){return e._node.bufferSource=y.ctx.createBufferSource(),e._node.bufferSource.buffer=o[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,y.ctx.currentTime),this},_cleanBuffer:function(e){var t=y._navigator&&0<=y._navigator.vendor.indexOf("Apple");if(e.bufferSource){if(y._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=y._scratchBuffer}catch(e){}e.bufferSource=null}return this},_clearSound:function(e){/MSIE |Trident\//.test(y._navigator&&y._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}},(a=function(e){this._parent=e,this.init()}).prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++y._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=y._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),e._node.gain.setValueAtTime(n,y.ctx.currentTime),e._node.paused=!0,e._node.connect(y.masterGain)):y.noAudio||(e._node=y._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(y._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*y.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++y._counter,e},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(y._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}},o={},s=function(t){var e=t._src;if(o[e])t._duration=o[e].duration,c(t);else if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);u(r.buffer,t)}else{var a=new XMLHttpRequest;a.open(t._xhr.method,e,!0),a.withCredentials=t._xhr.withCredentials,a.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(e){a.setRequestHeader(e,t._xhr.headers[e])}),a.onload=function(){var e=(a.status+"")[0];"0"!==e&&"2"!==e&&"3"!==e?t._emit("loaderror",null,"Failed loading audio file with status: "+a.status+"."):u(a.response,t)},a.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete o[e],t.load())},l(a)}},l=function(t){try{t.send()}catch(e){t.onerror()}},u=function(e,t){function n(){t._emit("loaderror",null,"Decoding audio data failed.")}function r(e){e&&0<t._sounds.length?(o[t._src]=e,c(t,e)):n()}"undefined"!=typeof Promise&&1===y.ctx.decodeAudioData.length?y.ctx.decodeAudioData(e).then(r).catch(n):y.ctx.decodeAudioData(e,r,n)},c=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},h=function(){if(y.usingWebAudio){try{"undefined"!=typeof AudioContext?y.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?y.ctx=new webkitAudioContext:y.usingWebAudio=!1}catch(e){y.usingWebAudio=!1}y.ctx||(y.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(y._navigator&&y._navigator.platform),t=y._navigator&&y._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=t?parseInt(t[1],10):null;e&&t&&t<9&&(e=/safari/.test(y._navigator&&y._navigator.userAgent.toLowerCase()),y._navigator)&&!e&&(y.usingWebAudio=!1),y.usingWebAudio&&(y.masterGain=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),y.masterGain.gain.setValueAtTime(y._muted?0:y._volume,y.ctx.currentTime),y.masterGain.connect(y.ctx.destination)),y._setup()}},"function"==typeof define&&define.amd&&define([],function(){return{Howler:y,Howl:t}}),void 0!==p&&(p.Howler=y,p.Howl=t),void 0!==f?(f.HowlerGlobal=e,f.Howler=y,f.Howl=t,f.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=y,window.Howl=t,window.Sound=a),HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(this.ctx&&this.ctx.listener)for(var t=this._howls.length-1;0<=t;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;if(r.ctx&&r.ctx.listener){if(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e)return r._pos;r._pos=[e,t,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2])}return r},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,a){var o=this;if(o.ctx&&o.ctx.listener){var s=o._orientation;if(t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,i="number"!=typeof i?s[4]:i,a="number"!=typeof a?s[5]:a,"number"!=typeof e)return s;o._orientation=[e,t,n,r,i,a],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(e,t,n,r,i,a)}return o},Howl.prototype.init=(n=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],n.call(this,e)}),Howl.prototype.stereo=function(e,t){var n=this;if(n._webAudio)if("loaded"!==n._state)n._queue.push({event:"stereo",action:function(){n.stereo(e,t)}});else{var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var i=n._getSoundIds(t),a=0;a<i.length;a++){var o=n._soundById(i[a]);if(o){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||d(o,r),"spatial"==r?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(e,0,0):o._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",o._id)}}}return n},Howl.prototype.pos=function(e,t,n,r){var i=this;if(i._webAudio)if("loaded"!==i._state)i._queue.push({event:"pos",action:function(){i.pos(e,t,n,r)}});else{if(t="number"!=typeof t?0:t,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof e)return i._pos;i._pos=[e,t,n]}for(var a=i._getSoundIds(r),o=0;o<a.length;o++){var s=i._soundById(a[o]);if(s){if("number"!=typeof e)return s._pos;s._pos=[e,t,n],s._node&&(s._panner&&!s._panner.pan||d(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setPosition(e,t,n)),i._emit("pos",s._id)}}}return i},Howl.prototype.orientation=function(e,t,n,r){var i=this;if(i._webAudio)if("loaded"!==i._state)i._queue.push({event:"orientation",action:function(){i.orientation(e,t,n,r)}});else{if(t="number"!=typeof t?i._orientation[1]:t,n="number"!=typeof n?i._orientation[2]:n,void 0===r){if("number"!=typeof e)return i._orientation;i._orientation=[e,t,n]}for(var a=i._getSoundIds(r),o=0;o<a.length;o++){var s=i._soundById(a[o]);if(s){if("number"!=typeof e)return s._orientation;s._orientation=[e,t,n],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),d(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setOrientation(e,t,n)),i._emit("orientation",s._id)}}}return i},Howl.prototype.pannerAttr=function(){var e,t,n=this,r=arguments;if(n._webAudio){if(0===r.length)return n._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return((o=n._soundById(parseInt(r[0],10)))||n)._pannerAttr;e=r[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:n._panningModel})}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i,a,o,s=n._getSoundIds(t),l=0;l<s.length;l++)(o=n._soundById(s[l]))&&(i=o._pannerAttr,i={coneInnerAngle:(void 0!==e.coneInnerAngle?e:i).coneInnerAngle,coneOuterAngle:(void 0!==e.coneOuterAngle?e:i).coneOuterAngle,coneOuterGain:(void 0!==e.coneOuterGain?e:i).coneOuterGain,distanceModel:(void 0!==e.distanceModel?e:i).distanceModel,maxDistance:(void 0!==e.maxDistance?e:i).maxDistance,refDistance:(void 0!==e.refDistance?e:i).refDistance,rolloffFactor:(void 0!==e.rolloffFactor?e:i).rolloffFactor,panningModel:(void 0!==e.panningModel?e:i).panningModel},(a=o._panner)||(o._pos||(o._pos=n._pos||[0,0,-.5]),d(o,"spatial"),a=o._panner),a.coneInnerAngle=i.coneInnerAngle,a.coneOuterAngle=i.coneOuterAngle,a.coneOuterGain=i.coneOuterGain,a.distanceModel=i.distanceModel,a.maxDistance=i.maxDistance,a.refDistance=i.refDistance,a.rolloffFactor=i.rolloffFactor,a.panningModel=i.panningModel)}return n},Sound.prototype.init=(r=Sound.prototype.init,function(){var e=this,t=e._parent;e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,r.call(this),e._stereo?t.stereo(e._stereo):e._pos&&t.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}),Sound.prototype.reset=(i=Sound.prototype.reset,function(){var e=this,t=e._parent;return e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,e._stereo?t.stereo(e._stereo):e._pos?t.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,t._refreshBuffer(e)),i.call(this)}),d=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,t,n){function r(e){e="function"==typeof e?e:e?function(){var t=0,n=0,r=0,i=1,e=(()=>{var r=4022871197;return function(e){e=e.toString();for(var t=0;t<e.length;t++){var n=.02519603282416938*(r+=e.charCodeAt(t));r=(n=(n-(r=n>>>0))*r)>>>0,r+=4294967296*(n-=r)}return 2.3283064365386963e-10*(r>>>0)}})();t=e(" "),n=e(" "),r=e(" ");for(var a=0;a<arguments.length;a++)(t-=e(arguments[a]))<0&&(t+=1),(n-=e(arguments[a]))<0&&(n+=1),(r-=e(arguments[a]))<0&&(r+=1);return e=null,function(){var e=2091639*t+2.3283064365386963e-10*i;return t=n,n=r,r=e-(i=0|e)}}(e):Math.random;this.p=i(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var t=0;t<512;t++)this.perm[t]=this.p[255&t],this.permMod12[t]=this.perm[t]%12}function i(e){for(var t=new Uint8Array(256),n=0;n<256;n++)t[n]=n;for(n=0;n<255;n++){var r=n+~~(e()*(256-n)),i=t[n];t[n]=t[r],t[r]=i}return t}var _,x,j,V;_=.5*(Math.sqrt(3)-1),x=(3-Math.sqrt(3))/6,j=(Math.sqrt(5)-1)/4,V=(5-Math.sqrt(5))/20,r.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,t){var n,r=this.permMod12,i=this.perm,a=this.grad3,o=0,s=0,l=0,u=(e+t)*_,c=Math.floor(e+u),u=Math.floor(t+u),h=(c+u)*x,e=e-(c-h),t=t-(u-h),h=t<e?(n=1,0):(n=0,1),d=e-n+x,f=t-h+x,p=e-1+2*x,m=t-1+2*x,c=255&c,u=255&u,g=.5-e*e-t*t,v=.5-d*d-f*f,y=.5-p*p-m*m;return 70*((o=0<=g?(g*=g)*g*(a[g=3*r[c+i[u]]]*e+a[1+g]*t):o)+(s=0<=v?(v*=v)*v*(a[e=3*r[c+n+i[u+h]]]*d+a[1+e]*f):s)+(l=0<=y?(y*=y)*y*(a[g=3*r[1+c+i[1+u]]]*p+a[1+g]*m):l))},noise3D:function(e,t,n){var r,i,a,o,s,l=this.permMod12,u=this.perm,c=this.grad3,h=(e+t+n)*(1/3),d=Math.floor(e+h),f=Math.floor(t+h),h=Math.floor(n+h),p=(d+f+h)*(1/6),e=e-(d-p),t=t-(f-p),n=n-(h-p),p=t<=e?n<=t?(s=o=r=1,a=i=0):o=n<=e?(s=a=i=0,r=1):(s=i=r=0,a=1):t<n?(o=i=r=0,s=a=1):e<n?(o=a=r=0,s=i=1):(s=o=i=1,a=r=0),m=e-r+1/6,g=t-i+1/6,v=n-a+1/6,y=e-o+1/6*2,_=t-s+1/6*2,x=n-p+1/6*2,b=e-1+.5,w=t-1+.5,M=n-1+.5,d=255&d,f=255&f,h=255&h,T=.6-e*e-t*t-n*n,S=.6-m*m-g*g-v*v,E=.6-y*y-_*_-x*x,A=.6-b*b-w*w-M*M;return 32*((T<0?0:(T*=T)*T*(c[T=3*l[d+u[f+u[h]]]]*e+c[1+T]*t+c[2+T]*n))+(S<0?0:(S*=S)*S*(c[e=3*l[d+r+u[f+i+u[h+a]]]]*m+c[1+e]*g+c[2+e]*v))+(E<0?0:(E*=E)*E*(c[t=3*l[d+o+u[f+s+u[h+p]]]]*y+c[1+t]*_+c[2+t]*x))+(A<0?0:(A*=A)*A*(c[T=3*l[1+d+u[1+f+u[1+h]]]]*b+c[1+T]*w+c[2+T]*M)))},noise4D:function(e,t,n,r){var i,k,B,F,U,z,H,G,a=this.perm,o=this.grad4,s=(e+t+n+r)*j,l=Math.floor(e+s),u=Math.floor(t+s),c=Math.floor(n+s),s=Math.floor(r+s),h=(l+u+c+s)*V,e=e-(l-h),t=t-(u-h),n=n-(c-h),r=r-(s-h),h=0,d=0,f=0,p=0,m=(t<e?h++:d++,n<e?h++:f++,r<e?h++:p++,n<t?d++:f++,r<t?d++:p++,r<n?f++:p++,e-(i=3<=h?1:0)+V),g=t-(k=3<=d?1:0)+V,v=n-(B=3<=f?1:0)+V,y=r-(F=3<=p?1:0)+V,_=e-(U=2<=h?1:0)+2*V,x=t-(z=2<=d?1:0)+2*V,b=n-(H=2<=f?1:0)+2*V,w=r-(G=2<=p?1:0)+2*V,M=e-(h=1<=h?1:0)+3*V,T=t-(d=1<=d?1:0)+3*V,S=n-(f=1<=f?1:0)+3*V,E=r-(p=1<=p?1:0)+3*V,A=e-1+4*V,L=t-1+4*V,R=n-1+4*V,C=r-1+4*V,l=255&l,u=255&u,c=255&c,s=255&s,P=.6-e*e-t*t-n*n-r*r,O=.6-m*m-g*g-v*v-y*y,D=.6-_*_-x*x-b*b-w*w,N=.6-M*M-T*T-S*S-E*E,I=.6-A*A-L*L-R*R-C*C;return 27*((P<0?0:(P*=P)*P*(o[P=a[l+a[u+a[c+a[s]]]]%32*4]*e+o[1+P]*t+o[2+P]*n+o[3+P]*r))+(O<0?0:(O*=O)*O*(o[e=a[l+i+a[u+k+a[c+B+a[s+F]]]]%32*4]*m+o[1+e]*g+o[2+e]*v+o[3+e]*y))+(D<0?0:(D*=D)*D*(o[t=a[l+U+a[u+z+a[c+H+a[s+G]]]]%32*4]*_+o[1+t]*x+o[2+t]*b+o[3+t]*w))+(N<0?0:(N*=N)*N*(o[n=a[l+h+a[u+d+a[c+f+a[s+p]]]]%32*4]*M+o[1+n]*T+o[2+n]*S+o[3+n]*E))+(I<0?0:(I*=I)*I*(o[P=a[1+l+a[1+u+a[1+c+a[1+s]]]]%32*4]*A+o[1+P]*L+o[2+P]*R+o[3+P]*C)))}},r._buildPermutationTable=i,"undefined"!=typeof define&&define.amd&&define(function(){return r}),void 0!==n?n.SimplexNoise=r:"undefined"!=typeof window&&(window.SimplexNoise=r),void 0!==t&&(t.exports=r)},{}],52:[function(e,t,n){var r,i;r=this,i=function(e){void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:0<e?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});var j=0,V=1,W=2,P=1,E=2,O=3,D=0,H=1,q=2,Y=0,Z=1,Q=2,J=3,ee=4,te=5,ne=100,re=101,ie=102,ae=103,oe=104,se=200,le=201,ue=202,ce=203,he=204,de=205,fe=206,pe=207,me=208,ge=209,ve=210,ye=0,_e=1,xe=2,be=3,we=4,Me=5,Le=6,Re=7,A=0,N=1,I=2,Ce=0,k=1,B=2,F=3,U=4,Pe=5,Oe=301,De=302,Ne=303,Ie=304,ke=306,Be=307,Fe=1e3,Ue=1001,ze=1002,z=1003,He=1004,Ge=1005,G=1006,je=1007,Ve=1008,We=1009,c=1010,h=1011,qe=1012,p=1013,Ze=1014,Qe=1015,Je=1016,v=1017,y=1018,Ke=1019,$e=1020,et=1021,tt=1022,nt=1023,rt=1024,it=1025,at=nt,ot=1026,st=1027,lt=1028,ut=1029,ct=1030,ht=1031,dt=1032,ft=1033,pt=33776,mt=33777,gt=33778,vt=33779,yt=35840,_t=35841,xt=35842,bt=35843,wt=36196,Mt=37492,Tt=37496,St=37808,Et=37809,At=37810,Lt=37811,Rt=37812,Ct=37813,Pt=37814,Ot=37815,Dt=37816,Nt=37817,It=37818,kt=37819,Bt=37820,Ft=37821,Ut=36492,zt=37840,Ht=37841,Gt=37842,jt=37843,Vt=37844,Wt=37845,qt=37846,Xt=37847,Yt=37848,Zt=37849,Qt=37850,Jt=37851,Kt=37852,$t=37853,en=3e3,tn=3001,nn=3007,rn=3002,an=3003,on=3004,sn=3005,ln=3006,un=3201,cn=0,hn=1,dn=35048;function fn(){}Object.assign(fn.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){var n;return void 0!==this._listeners&&void 0!==(n=this._listeners)[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){var n;void 0!==this._listeners&&void 0!==(e=this._listeners[e])&&-1!==(n=e.indexOf(t))&&e.splice(n,1)},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});for(var i=[],pn=0;pn<256;pn++)i[pn]=(pn<16?"0":"")+pn.toString(16);var mn,Te={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+"-"+i[255&t]+i[t>>8&255]+"-"+i[t>>16&15|64]+i[t>>24&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[255&r]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:n<=e?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:n<=e?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Te.DEG2RAD},radToDeg:function(e){return e*Te.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),d=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};function Xe(e,t){void 0===t&&(t=0),this.x=e=void 0===e?0:e,this.y=t}function gn(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Xe.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Xe.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,e=e.elements;return this.x=e[0]*t+e[3]*n+e[6],this.y=e[1]*t+e[4]*n+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,e=this.y-e.y;return t*t+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this},toArray:function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),t=Math.sin(t),r=this.x-e.x,i=this.y-e.y;return this.x=r*n-i*t+e.x,this.y=r*t+i*n+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(gn.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,e=e.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},extractBasis:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){e=e.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var e=e.elements,t=t.elements,n=this.elements,r=e[0],i=e[3],a=e[6],o=e[1],s=e[4],l=e[7],u=e[2],c=e[5],e=e[8],h=t[0],d=t[3],f=t[6],p=t[1],m=t[4],g=t[7],v=t[2],y=t[5],t=t[8];return n[0]=r*h+i*p+a*v,n[3]=r*d+i*m+a*y,n[6]=r*f+i*g+a*t,n[1]=o*h+s*p+l*v,n[4]=o*d+s*m+l*y,n[7]=o*f+s*g+l*t,n[2]=u*h+c*p+e*v,n[5]=u*d+c*m+e*y,n[8]=u*f+c*g+e*t,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],e=e[8];return t*a*e-t*o*l-n*i*e+n*o*s+r*i*l-r*a*s},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var t=e.elements,e=this.elements,n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],t=t[8],c=t*o-s*u,h=s*l-t*a,d=u*a-o*l,f=n*c+r*h+i*d;return 0==f?this.set(0,0,0,0,0,0,0,0,0):(e[0]=c*(c=1/f),e[1]=(i*u-t*r)*c,e[2]=(s*r-i*o)*c,e[3]=h*c,e[4]=(t*n-i*l)*c,e[5]=(i*a-s*n)*c,e[6]=d*c,e[7]=(r*l-u*n)*c,e[8]=(o*n-r*a)*c,this)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,a,o){var s=Math.cos(i),i=Math.sin(i);this.set(n*s,n*i,-n*(s*a+i*o)+a+e,-r*i,r*s,-r*(-i*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),e=Math.sin(e),n=this.elements,r=n[0],i=n[3],a=n[6],o=n[1],s=n[4],l=n[7];return n[0]=t*r+e*o,n[3]=t*i+e*s,n[6]=t*a+e*l,n[1]=-e*r+t*o,n[4]=-e*i+t*s,n[7]=-e*a+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){var n=this.elements;return(e=void 0===e?[]:e)[t=void 0===t?0:t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var vn={getDataURL:function(e){var t;return/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement?e.src:2048<(t=e instanceof HTMLCanvasElement?e:((mn=void 0===mn?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):mn).width=e.width,mn.height=e.height,t=mn.getContext("2d"),e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),mn)).width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},yn=0;function d(e,t,n,r,i,a,o,s,l,u){Object.defineProperty(this,"id",{value:yn++}),this.uuid=Te.generateUUID(),this.name="",this.image=void 0!==e?e:d.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:d.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ue,this.wrapT=void 0!==r?r:Ue,this.magFilter=void 0!==i?i:G,this.minFilter=void 0!==a?a:Ve,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:nt,this.internalFormat=null,this.type=void 0!==s?s:We,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:en,this.version=0,this.onUpdate=null}function Se(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),this.x=e=void 0===e?0:e,this.y=t,this.z=n,this.w=r}function _n(e,t,n){this.width=e,this.height=t,this.scissor=new Se(0,0,e,t),this.scissorTest=!1,this.viewport=new Se(0,0,e,t),this.texture=new d(void 0,(n=n||{}).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:G,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function xn(e,t,n){_n.call(this,e,t,n),this.samples=4}function f(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),this._x=e=void 0===e?0:e,this._y=t,this._z=n,this._w=r}d.DEFAULT_IMAGE=void 0,d.DEFAULT_MAPPING=300,d.prototype=Object.assign(Object.create(fn.prototype),{constructor:d,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Te.generateUUID()),!t&&void 0===e.images[r.uuid]){if(Array.isArray(r))for(var i=[],a=0,o=r.length;a<o;a++)i.push(vn.getDataURL(r[a]));else i=vn.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||1<e.x)switch(this.wrapS){case Fe:e.x=e.x-Math.floor(e.x);break;case Ue:e.x=e.x<0?0:1;break;case ze:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case Fe:e.y=e.y-Math.floor(e.y);break;case Ue:e.y=e.y<0?0:1;break;case ze:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}return e}}),Object.defineProperty(d.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Se.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Se.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,e=e.elements;return this.x=e[0]*t+e[4]*n+e[8]*r+e[12]*i,this.y=e[1]*t+e[5]*n+e[9]*r+e[13]*i,this.z=e[2]*t+e[6]*n+e[10]*r+e[14]*i,this.w=e[3]*t+e[7]*n+e[11]*r+e[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,a,o,s,l,u,c,e=e.elements,h=e[0],d=e[4],f=e[8],p=e[1],m=e[5],g=e[9],v=e[2],y=e[6],e=e[10];return Math.abs(d-p)<.01&&Math.abs(f-v)<.01&&Math.abs(g-y)<.01?Math.abs(d+p)<.1&&Math.abs(f+v)<.1&&Math.abs(g+y)<.1&&Math.abs(h+m+e-3)<.1?this.set(1,0,0,0):(i=Math.PI,o=(e+1)/2,s=(d+p)/4,l=(f+v)/4,u=(g+y)/4,(a=(m+1)/2)<(c=(h+1)/2)&&o<c?r=c<.01?(t=0,n=.707106781):(n=s/(t=Math.sqrt(c)),l/t):o<a?r=a<.01?(n=0,t=.707106781):(t=s/(n=Math.sqrt(a)),u/n):o<.01?(n=t=.707106781,r=0):(t=l/(r=Math.sqrt(o)),n=u/r),this.set(t,n,r,i)):(c=Math.sqrt((y-g)*(y-g)+(f-v)*(f-v)+(p-d)*(p-d)),Math.abs(c)<.001&&(c=1),this.x=(y-g)/c,this.y=(f-v)/c,this.z=(p-d)/c,this.w=Math.acos((h+m+e-1)/2)),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),_n.prototype=Object.assign(Object.create(fn.prototype),{constructor:_n,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),xn.prototype=Object.assign(Object.create(_n.prototype),{constructor:xn,isWebGLMultisampleRenderTarget:!0,copy:function(e){return _n.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(f,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,a,o){var s,l,u,c=n[r+0],h=n[r+1],d=n[r+2],n=n[r+3],r=i[a+0],f=i[a+1],p=i[a+2],i=i[a+3];n===i&&c===r&&h===f&&d===p||(a=1-o,s=0<=(l=c*r+h*f+d*p+n*i)?1:-1,(u=1-l*l)>Number.EPSILON&&(u=Math.sqrt(u),l=Math.atan2(u,l*s),a=Math.sin(a*l)/u,o=Math.sin(o*l)/u),c=c*a+r*(l=o*s),h=h*a+f*l,d=d*a+p*l,n=n*a+i*l,a===1-o&&(c*=u=1/Math.sqrt(c*c+h*h+d*d+n*n),h*=u,d*=u,n*=u)),e[t]=c,e[t+1]=h,e[t+2]=d,e[t+3]=n},multiplyQuaternionsFlat:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],l=n[r+2],n=n[r+3],r=i[a],u=i[a+1],c=i[a+2],i=i[a+3];return e[t]=o*i+n*r+s*c-l*u,e[t+1]=s*i+n*u+l*r-o*c,e[t+2]=l*i+n*c+o*u-s*r,e[t+3]=n*i-o*r-s*u-l*c,e}}),Object.defineProperties(f.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(f.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e.order,e=Math.cos,o=Math.sin,s=e(n/2),l=e(r/2),u=e(i/2),c=o(n/2),h=o(r/2),d=o(i/2);switch(a){case"XYZ":this._x=c*l*u+s*h*d,this._y=s*h*u-c*l*d,this._z=s*l*d+c*h*u,this._w=s*l*u-c*h*d;break;case"YXZ":this._x=c*l*u+s*h*d,this._y=s*h*u-c*l*d,this._z=s*l*d-c*h*u,this._w=s*l*u+c*h*d;break;case"ZXY":this._x=c*l*u-s*h*d,this._y=s*h*u+c*l*d,this._z=s*l*d+c*h*u,this._w=s*l*u-c*h*d;break;case"ZYX":this._x=c*l*u-s*h*d,this._y=s*h*u+c*l*d,this._z=s*l*d-c*h*u,this._w=s*l*u+c*h*d;break;case"YZX":this._x=c*l*u+s*h*d,this._y=s*h*u+c*l*d,this._z=s*l*d-c*h*u,this._w=s*l*u-c*h*d;break;case"XZY":this._x=c*l*u-s*h*d,this._y=s*h*u-c*l*d,this._z=s*l*d+c*h*u,this._w=s*l*u+c*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var t=t/2,n=Math.sin(t);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(t),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var e=e.elements,t=e[0],n=e[4],r=e[8],i=e[1],a=e[5],o=e[9],s=e[2],l=e[6],e=e[10],u=t+a+e;return 0<u?(u=.5/Math.sqrt(u+1),this._w=.25/u,this._x=(l-o)*u,this._y=(r-s)*u,this._z=(i-n)*u):a<t&&e<t?(u=2*Math.sqrt(1+t-a-e),this._w=(l-o)/u,this._x=.25*u,this._y=(n+i)/u,this._z=(r+s)/u):e<a?(u=2*Math.sqrt(1+a-t-e),this._w=(r-s)/u,this._x=(n+i)/u,this._y=.25*u,this._z=(o+l)/u):(u=2*Math.sqrt(1+e-t-a),this._w=(i-n)/u,this._x=(r+s)/u,this._y=(o+l)/u,this._z=.25*u),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Te.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);return 0!==n&&(t=Math.min(1,t/n),this.slerp(e,t)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,e=e._w,a=t._x,o=t._y,s=t._z,t=t._w;return this._x=n*t+e*a+r*s-i*o,this._y=r*t+e*o+i*a-n*s,this._z=i*t+e*s+n*o-r*a,this._w=e*t-n*a-r*o-i*s,this._onChangeCallback(),this},slerp:function(e,t){if(0!==t){if(1===t)return this.copy(e);var n,r=this._x,i=this._y,a=this._z,o=this._w,s=o*e._w+r*e._x+i*e._y+a*e._z;s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s?(this._w=o,this._x=r,this._y=i,this._z=a):((e=1-s*s)<=Number.EPSILON?(this._w=(n=1-t)*o+t*this._w,this._x=n*r+t*this._x,this._y=n*i+t*this._y,this._z=n*a+t*this._z,this.normalize()):(n=Math.sqrt(e),e=Math.atan2(n,s),s=Math.sin((1-t)*e)/n,t=Math.sin(t*e)/n,this._w=o*s+this._w*t,this._x=r*s+this._x*t,this._y=i*s+this._y*t,this._z=a*s+this._z*t),this._onChangeCallback())}return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return this._x=e[t=void 0===t?0:t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var bn=new Ye,wn=new f;function Ye(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.x=e=void 0===e?0:e,this.y=t,this.z=n}Object.assign(Ye.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(wn.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(wn.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,e=e.elements;return this.x=e[0]*t+e[3]*n+e[6]*r,this.y=e[1]*t+e[4]*n+e[7]*r,this.z=e[2]*t+e[5]*n+e[8]*r,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,e=e.elements,i=1/(e[3]*t+e[7]*n+e[11]*r+e[15]);return this.x=(e[0]*t+e[4]*n+e[8]*r+e[12])*i,this.y=(e[1]*t+e[5]*n+e[9]*r+e[13])*i,this.z=(e[2]*t+e[6]*n+e[10]*r+e[14])*i,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,e=e.w,s=e*t+a*r-o*n,l=e*n+o*t-i*r,u=e*r+i*n-a*t,t=-i*t-a*n-o*r;return this.x=s*e+t*-i+l*-o-u*-a,this.y=l*e+t*-a+u*-i-s*-o,this.z=u*e+t*-o+s*-a-l*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,e=e.elements;return this.x=e[0]*t+e[4]*n+e[8]*r,this.y=e[1]*t+e[5]*n+e[9]*r,this.z=e[2]*t+e[6]*n+e[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,e=e.z,i=t.x,a=t.y,t=t.z;return this.x=r*t-e*a,this.y=e*i-n*t,this.z=n*a-r*i,this},projectOnVector:function(e){var t=e.lengthSq();return 0===t?this.set(0,0,0):(t=e.dot(this)/t,this.copy(e).multiplyScalar(t))},projectOnPlane:function(e){return bn.copy(this).projectOnVector(e),this.sub(bn)},reflect:function(e){return this.sub(bn.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:(e=this.dot(e)/t,Math.acos(Te.clamp(e,-1,1)))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,e=this.z-e.z;return t*t+n*n+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){e=e.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),e=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=e,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return this.x=e[t=void 0===t?0:t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Mn=new Ye,Tn=new Ee,Sn=new Ye(0,0,0),En=new Ye(1,1,1),An=new Ye,Ln=new Ye,Rn=new Ye;function Ee(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Ee.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ee).fromArray(this.elements)},copy:function(e){var t=this.elements,e=e.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(e){var t=this.elements,e=e.elements;return t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,r=1/Mn.setFromMatrixColumn(e,0).length(),i=1/Mn.setFromMatrixColumn(e,1).length(),e=1/Mn.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t,n,r,i,a=this.elements,o=e.x,s=e.y,l=e.z,u=Math.cos(o),o=Math.sin(o),c=Math.cos(s),s=Math.sin(s),h=Math.cos(l),l=Math.sin(l);return"XYZ"===e.order?(n=u*h,r=u*l,i=o*h,t=o*l,a[0]=c*h,a[4]=-c*l,a[8]=s,a[1]=r+i*s,a[5]=n-t*s,a[9]=-o*c,a[2]=t-n*s,a[6]=i+r*s,a[10]=u*c):"YXZ"===e.order?(t=c*l,n=s*h,a[0]=(i=c*h)+(r=s*l)*o,a[4]=n*o-t,a[8]=u*s,a[1]=u*l,a[5]=u*h,a[9]=-o,a[2]=t*o-n,a[6]=r+i*o,a[10]=u*c):"ZXY"===e.order?(t=c*l,n=s*h,a[0]=(r=c*h)-(i=s*l)*o,a[4]=-u*l,a[8]=n+t*o,a[1]=t+n*o,a[5]=u*h,a[9]=i-r*o,a[2]=-u*s,a[6]=o,a[10]=u*c):"ZYX"===e.order?(t=u*h,n=u*l,i=o*h,r=o*l,a[0]=c*h,a[4]=i*s-n,a[8]=t*s+r,a[1]=c*l,a[5]=r*s+t,a[9]=n*s-i,a[2]=-s,a[6]=o*c,a[10]=u*c):"YZX"===e.order?(r=u*c,t=u*s,n=o*c,i=o*s,a[0]=c*h,a[4]=i-r*l,a[8]=n*l+t,a[1]=l,a[5]=u*h,a[9]=-o*h,a[2]=-s*h,a[6]=t*l+n,a[10]=r-i*l):"XZY"===e.order&&(t=u*c,n=u*s,r=o*c,i=o*s,a[0]=c*h,a[4]=-l,a[8]=s*h,a[1]=t*l+i,a[5]=u*h,a[9]=n*l-r,a[2]=r*l-n,a[6]=o*h,a[10]=i*l+t),a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Sn,e,En)},lookAt:function(e,t,n){var r=this.elements;return Rn.subVectors(e,t),0===Rn.lengthSq()&&(Rn.z=1),Rn.normalize(),An.crossVectors(n,Rn),0===An.lengthSq()&&(1===Math.abs(n.z)?Rn.x+=1e-4:Rn.z+=1e-4,Rn.normalize(),An.crossVectors(n,Rn)),An.normalize(),Ln.crossVectors(Rn,An),r[0]=An.x,r[4]=Ln.x,r[8]=Rn.x,r[1]=An.y,r[5]=Ln.y,r[9]=Rn.y,r[2]=An.z,r[6]=Ln.z,r[10]=Rn.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var e=e.elements,t=t.elements,n=this.elements,r=e[0],i=e[4],a=e[8],o=e[12],s=e[1],l=e[5],u=e[9],c=e[13],h=e[2],d=e[6],f=e[10],p=e[14],m=e[3],g=e[7],v=e[11],e=e[15],y=t[0],_=t[4],x=t[8],b=t[12],w=t[1],M=t[5],T=t[9],S=t[13],E=t[2],A=t[6],L=t[10],R=t[14],C=t[3],P=t[7],O=t[11],t=t[15];return n[0]=r*y+i*w+a*E+o*C,n[4]=r*_+i*M+a*A+o*P,n[8]=r*x+i*T+a*L+o*O,n[12]=r*b+i*S+a*R+o*t,n[1]=s*y+l*w+u*E+c*C,n[5]=s*_+l*M+u*A+c*P,n[9]=s*x+l*T+u*L+c*O,n[13]=s*b+l*S+u*R+c*t,n[2]=h*y+d*w+f*E+p*C,n[6]=h*_+d*M+f*A+p*P,n[10]=h*x+d*T+f*L+p*O,n[14]=h*b+d*S+f*R+p*t,n[3]=m*y+g*w+v*E+e*C,n[7]=m*_+g*M+v*A+e*P,n[11]=m*x+g*T+v*L+e*O,n[15]=m*b+g*S+v*R+e*t,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*l*c-i*o*h+n*l*h+r*o*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*a*h-r*a*d+r*l*u-i*s*u)+e[11]*(+t*l*c-t*o*d-i*a*c+n*a*d+i*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*h+r*a*c-n*a*h+n*s*u)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var t=this.elements,e=e.elements,n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],e=e[15],v=h*g*u-m*d*u+m*l*f-s*g*f-h*l*e+s*d*e,y=p*d*u-c*g*u-p*l*f+o*g*f+c*l*e-o*d*e,_=c*m*u-p*h*u+p*s*f-o*m*f-c*s*e+o*h*e,x=p*h*l-c*m*l-p*s*d+o*m*d+c*s*g-o*h*g,b=n*v+r*y+i*_+a*x;return 0==b?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(t[0]=v*(v=1/b),t[1]=(m*d*a-h*g*a-m*i*f+r*g*f+h*i*e-r*d*e)*v,t[2]=(s*g*a-m*l*a+m*i*u-r*g*u-s*i*e+r*l*e)*v,t[3]=(h*l*a-s*d*a-h*i*u+r*d*u+s*i*f-r*l*f)*v,t[4]=y*v,t[5]=(c*g*a-p*d*a+p*i*f-n*g*f-c*i*e+n*d*e)*v,t[6]=(p*l*a-o*g*a-p*i*u+n*g*u+o*i*e-n*l*e)*v,t[7]=(o*d*a-c*l*a+c*i*u-n*d*u-o*i*f+n*l*f)*v,t[8]=_*v,t[9]=(p*h*a-c*m*a-p*r*f+n*m*f+c*r*e-n*h*e)*v,t[10]=(o*m*a-p*s*a+p*r*u-n*m*u-o*r*e+n*s*e)*v,t[11]=(c*s*a-o*h*a-c*r*u+n*h*u+o*r*f-n*s*f)*v,t[12]=x*v,t[13]=(c*m*i-p*h*i+p*r*d-n*m*d-c*r*g+n*h*g)*v,t[14]=(p*s*i-o*m*i-p*r*l+n*m*l+o*r*g-n*s*g)*v,t[15]=(o*h*i-c*s*i+c*r*l-n*h*l-o*r*d+n*s*d)*v,this)},scale:function(e){var t=this.elements,n=e.x,r=e.y,e=e.z;return t[0]*=n,t[4]*=r,t[8]*=e,t[1]*=n,t[5]*=r,t[9]*=e,t[2]*=n,t[6]*=r,t[10]*=e,t[3]*=n,t[7]*=r,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];return Math.sqrt(Math.max(t,e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),t=Math.sin(t),r=1-n,i=e.x,a=e.y,e=e.z,o=r*i,s=r*a;return this.set(o*i+n,o*a-t*e,o*e+t*a,0,o*a+t*e,s*a+n,s*e-t*i,0,o*e-t*a,s*e+t*i,r*e*e+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,t=t._w,s=i+i,l=a+a,u=o+o,c=i*s,h=i*l,i=i*u,d=a*l,a=a*u,o=o*u,s=t*s,l=t*l,t=t*u,u=n.x,f=n.y,n=n.z;return r[0]=(1-(d+o))*u,r[1]=(h+t)*u,r[2]=(i-l)*u,r[3]=0,r[4]=(h-t)*f,r[5]=(1-(c+o))*f,r[6]=(a+s)*f,r[7]=0,r[8]=(i+l)*n,r[9]=(a-s)*n,r[10]=(1-(c+d))*n,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var r=this.elements,i=Mn.set(r[0],r[1],r[2]).length(),a=Mn.set(r[4],r[5],r[6]).length(),o=Mn.set(r[8],r[9],r[10]).length(),e=(this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Tn.copy(this),1/i),r=1/a,s=1/o;return Tn.elements[0]*=e,Tn.elements[1]*=e,Tn.elements[2]*=e,Tn.elements[4]*=r,Tn.elements[5]*=r,Tn.elements[6]*=r,Tn.elements[8]*=s,Tn.elements[9]*=s,Tn.elements[10]*=s,t.setFromRotationMatrix(Tn),n.x=i,n.y=a,n.z=o,this},makePerspective:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(n-r),l=(t+e)/(t-e),n=(n+r)/(n-r),r=-(a+i)/(a-i),a=-2*a*i/(a-i);return o[0]=2*i/(t-e),o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=s,o[9]=n,o[13]=0,o[2]=0,o[6]=0,o[10]=r,o[14]=a,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),l=1/(n-r),u=1/(a-i),t=(t+e)*s,e=(n+r)*l,n=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-t,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-e,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-n,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){var n=this.elements;return(e=void 0===e?[]:e)[t=void 0===t?0:t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var Cn=new Ee,Pn=new f;function On(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=On.DefaultOrder),this._x=e=void 0===e?0:e,this._y=t,this._z=n,this._order=r}function Dn(){this.mask=1}On.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],On.DefaultOrder="XYZ",Object.defineProperties(On.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(On.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Te.clamp,e=e.elements,i=e[0],a=e[4],o=e[8],s=e[1],l=e[5],u=e[9],c=e[2],h=e[6],d=e[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return Cn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Cn,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return Pn.setFromEuler(this),this.setFromQuaternion(Pn,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Ye(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Dn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var Nn=0,In=new Ye,kn=new f,Bn=new Ee,Fn=new Ye,Un=new Ye,zn=new Ye,Hn=new f,Gn=new Ye(1,0,0),jn=new Ye(0,1,0),Vn=new Ye(0,0,1),Wn={type:"added"},qn={type:"removed"};function m(){Object.defineProperty(this,"id",{value:Nn++}),this.uuid=Te.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=m.DefaultUp.clone();var e=new Ye,t=new On,n=new f,r=new Ye(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ee},normalMatrix:{value:new gn}}),this.matrix=new Ee,this.matrixWorld=new Ee,this.matrixAutoUpdate=m.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Xn(){m.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}m.DefaultUp=new Ye(0,1,0),m.DefaultMatrixAutoUpdate=!0,m.prototype=Object.assign(Object.create(fn.prototype),{constructor:m,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return kn.setFromAxisAngle(e,t),this.quaternion.multiply(kn),this},rotateOnWorldAxis:function(e,t){return kn.setFromAxisAngle(e,t),this.quaternion.premultiply(kn),this},rotateX:function(e){return this.rotateOnAxis(Gn,e)},rotateY:function(e){return this.rotateOnAxis(jn,e)},rotateZ:function(e){return this.rotateOnAxis(Vn,e)},translateOnAxis:function(e,t){return In.copy(e).applyQuaternion(this.quaternion),this.position.add(In.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Gn,e)},translateY:function(e){return this.translateOnAxis(jn,e)},translateZ:function(e){return this.translateOnAxis(Vn,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Bn.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Fn.copy(e):Fn.set(e,t,n);e=this.parent;this.updateWorldMatrix(!0,!1),Un.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bn.lookAt(Un,Fn,this.up):Bn.lookAt(Fn,Un,this.up),this.quaternion.setFromRotationMatrix(Bn),e&&(Bn.extractRotation(e.matrixWorld),kn.setFromRotationMatrix(Bn),this.quaternion.premultiply(kn.inverse()))},add:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.add(arguments[t]);else e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),(e.parent=this).children.push(e),e.dispatchEvent(Wn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e);return this},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);else{var n=this.children.indexOf(e);-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(qn))}return this},attach:function(e){return this.updateWorldMatrix(!0,!1),Bn.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Bn.multiply(e.parent.matrixWorld)),e.applyMatrix4(Bn),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Ye),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new f),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Un,e,zn),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Ye),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Un,Hn,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Ye),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(n){var e,t,r,i=void 0===n||"string"==typeof n,a={},o=(i&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{}},a.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}),{});function s(e,t){return void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(n)),t.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){o.geometry=s(n.geometries,this.geometry);var l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){var u=l.shapes;if(Array.isArray(u))for(var c=0,h=u.length;c<h;c++){var d=u[c];s(n.shapes,d)}else s(n.shapes,u)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var f=[],p=0,m=this.material.length;p<m;p++)f.push(s(n.materials,this.material[p]));o.material=f}else o.material=s(n.materials,this.material);if(0<this.children.length){o.children=[];for(var g=0;g<this.children.length;g++)o.children.push(this.children[g].toJSON(n).object)}return i&&(l=v(n.geometries),i=v(n.materials),e=v(n.textures),t=v(n.images),r=v(n.shapes),0<l.length&&(a.geometries=l),0<i.length&&(a.materials=i),0<e.length&&(a.textures=e),0<t.length&&(a.images=t),0<r.length)&&(a.shapes=r),a.object=o,a;function v(e){var t,n=[];for(t in e){var r=e[t];delete r.metadata,n.push(r)}return n}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),Xn.prototype=Object.assign(Object.create(m.prototype),{constructor:Xn,isScene:!0,copy:function(e,t){return m.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=m.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Yn=[new Ye,new Ye,new Ye,new Ye,new Ye,new Ye,new Ye,new Ye],Zn=new Ye,Qn=new sr,Jn=new Ye,Kn=new Ye,$n=new Ye,er=new Ye,tr=new Ye,nr=new Ye,rr=new Ye,ir=new Ye,ar=new Ye,or=new Ye;function sr(e,t){this.min=void 0!==e?e:new Ye(1/0,1/0,1/0),this.max=void 0!==t?t:new Ye(-1/0,-1/0,-1/0)}function lr(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){or.fromArray(e,a);var s=i.x*Math.abs(or.x)+i.y*Math.abs(or.y)+i.z*Math.abs(or.z),l=t.dot(or),u=n.dot(or),c=r.dot(or);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}Object.assign(sr.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),i<u&&(i=u),a<c&&(a=c),o<h&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),i<u&&(i=u),a<c&&(a=c),o<h&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){t=Zn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Ye),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Ye),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);for(var t=e.geometry,n=(void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Qn.copy(t.boundingBox),Qn.applyMatrix4(e.matrixWorld),this.union(Qn)),e.children),r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Ye),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Zn),Zn.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n=0<e.normal.x?(t=e.normal.x*this.min.x,e.normal.x*this.max.x):(t=e.normal.x*this.max.x,e.normal.x*this.min.x);return 0<e.normal.y?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){return!this.isEmpty()&&(this.getCenter(rr),ir.subVectors(this.max,rr),Jn.subVectors(e.a,rr),Kn.subVectors(e.b,rr),$n.subVectors(e.c,rr),er.subVectors(Kn,Jn),tr.subVectors($n,Kn),nr.subVectors(Jn,$n),!!lr([0,-er.z,er.y,0,-tr.z,tr.y,0,-nr.z,nr.y,er.z,0,-er.x,tr.z,0,-tr.x,nr.z,0,-nr.x,-er.y,er.x,0,-tr.y,tr.x,0,-nr.y,nr.x,0],Jn,Kn,$n,ir))&&!!lr([1,0,0,0,1,0,0,0,1],Jn,Kn,$n,ir)&&(ar.crossVectors(er,tr),lr([ar.x,ar.y,ar.z],Jn,Kn,$n,ir))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Ye),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Zn.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Zn).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(Yn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yn)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var ur=new sr;function cr(e,t){this.center=void 0!==e?e:new Ye,this.radius=void 0!==t?t:-1}Object.assign(cr.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){for(var n=this.center,r=(void 0!==t?n.copy(t):ur.setFromPoints(e).getCenter(n),0),i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Ye),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new sr),this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var hr=new Ye,dr=new Ye,fr=new Ye,pr=new Ye,mr=new Ye,gr=new Ye,vr=new Ye;function yr(e,t){this.origin=void 0!==e?e:new Ye,this.direction=void 0!==t?t:new Ye(0,0,-1)}Object.assign(yr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Ye),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,hr)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Ye),t.subVectors(e,this.origin);e=t.dot(this.direction);return e<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=hr.subVectors(e,this.origin).dot(this.direction);return(t<0?this.origin:(hr.copy(this.direction).multiplyScalar(t).add(this.origin),hr)).distanceToSquared(e)},distanceSqToSegment:function(e,t,n,r){dr.copy(e).add(t).multiplyScalar(.5),fr.copy(t).sub(e).normalize(),pr.copy(this.origin).sub(dr);var i,a,o,e=.5*e.distanceTo(t),t=-this.direction.dot(fr),s=pr.dot(this.direction),l=-pr.dot(fr),u=pr.lengthSq(),c=Math.abs(1-t*t);return c=0<c?(a=t*s-l,o=e*c,0<=(i=t*l-s)?-o<=a?a<=o?(i*=c=1/c)*(i+t*(a*=c)+2*s)+a*(t*i+a+2*l)+u:(a=e,-(i=Math.max(0,-(t*a+s)))*i+a*(a+2*l)+u):(a=-e,-(i=Math.max(0,-(t*a+s)))*i+a*(a+2*l)+u):a<=-o?-(i=Math.max(0,-(-t*e+s)))*i+(a=0<i?-e:Math.min(Math.max(-e,-l),e))*(a+2*l)+u:a<=o?(i=0,(a=Math.min(Math.max(-e,-l),e))*(a+2*l)+u):-(i=Math.max(0,-(t*e+s)))*i+(a=0<i?e:Math.min(Math.max(-e,-l),e))*(a+2*l)+u):(a=0<t?-e:e,-(i=Math.max(0,-(t*a+s)))*i+a*(a+2*l)+u),n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(fr).multiplyScalar(a).add(dr),c},intersectSphere:function(e,t){hr.subVectors(e.center,this.origin);var n=hr.dot(this.direction),r=hr.dot(hr)-n*n,e=e.radius*e.radius;return e<r||(r=n+(e=Math.sqrt(e-r)),(n=n-e)<0&&r<0)?null:n<0?this.at(r,t):this.at(n,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:0<=(e=-(this.origin.dot(e.normal)+e.constant)/t)?e:null},intersectPlane:function(e,t){e=this.distanceToPlane(e);return null===e?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,a=1/this.direction.x,o=1/this.direction.y,s=1/this.direction.z,l=this.origin,a=0<=a?(n=(e.min.x-l.x)*a,(e.max.x-l.x)*a):(n=(e.max.x-l.x)*a,(e.min.x-l.x)*a),o=0<=o?(i=(e.min.y-l.y)*o,(e.max.y-l.y)*o):(i=(e.max.y-l.y)*o,(e.min.y-l.y)*o);return o<n||a<i||((n<i||n!=n)&&(n=i),(o<a||a!=a)&&(a=o),(i=0<=s?(r=(e.min.z-l.z)*s,(e.max.z-l.z)*s):(r=(e.max.z-l.z)*s,(e.min.z-l.z)*s))<n)||a<r||((n<r||n!=n)&&(n=r),(a=i<a||a!=a?i:a)<0)?null:this.at(0<=n?n:a,t)},intersectsBox:function(e){return null!==this.intersectBox(e,hr)},intersectTriangle:function(e,t,n,r,i){mr.subVectors(t,e),gr.subVectors(n,e),vr.crossVectors(mr,gr);var a,t=this.direction.dot(vr);if(0<t){if(r)return null;a=1}else{if(!(t<0))return null;a=-1,t=-t}pr.subVectors(this.origin,e);n=a*this.direction.dot(gr.crossVectors(pr,gr));return n<0||(r=a*this.direction.dot(mr.cross(pr)))<0||t<n+r||(e=-a*pr.dot(vr))<0?null:this.at(e/t,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var _r=new Ye,xr=new Ye,br=new gn;function wr(e,t){this.normal=void 0!==e?e:new Ye(1,0,0),this.constant=void 0!==t?t:0}Object.assign(wr.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){n=_r.subVectors(n,t).cross(xr.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Ye),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Ye);var n=e.delta(_r),r=this.normal.dot(n);return 0===r?0===this.distanceToPoint(e.start)?t.copy(e.start):void 0:(r=-(e.start.dot(this.normal)+this.constant)/r)<0||1<r?void 0:t.copy(n).multiplyScalar(r).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),e=this.distanceToPoint(e.end);return t<0&&0<e||e<0&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Ye),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){t=t||br.getNormalMatrix(e),e=this.coplanarPoint(_r).applyMatrix4(e),t=this.normal.applyMatrix3(t).normalize();return this.constant=-e.dot(t),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Mr=new Ye,Tr=new Ye,Sr=new Ye,Er=new Ye,Ar=new Ye,Lr=new Ye,Rr=new Ye,Cr=new Ye,Pr=new Ye,Or=new Ye;function X(e,t,n){this.a=void 0!==e?e:new Ye,this.b=void 0!==t?t:new Ye,this.c=void 0!==n?n:new Ye}Object.assign(X,{getNormal:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Ye),r.subVectors(n,t),Mr.subVectors(e,t),r.cross(Mr);n=r.lengthSq();return 0<n?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){Mr.subVectors(r,t),Tr.subVectors(n,t),Sr.subVectors(e,t);var r=Mr.dot(Mr),n=Mr.dot(Tr),e=Mr.dot(Sr),t=Tr.dot(Tr),a=Tr.dot(Sr),o=r*t-n*n;return void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Ye),0==o?i.set(-2,-1,-1):i.set(1-(t=(t*e-n*a)*(i=1/o))-(o=(r*a-n*e)*i),o,t)},containsPoint:function(e,t,n,r){return X.getBarycoord(e,t,n,r,Er),0<=Er.x&&0<=Er.y&&Er.x+Er.y<=1},getUV:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Er),s.set(0,0),s.addScaledVector(i,Er.x),s.addScaledVector(a,Er.y),s.addScaledVector(o,Er.z),s},isFrontFacing:function(e,t,n,r){return Mr.subVectors(n,t),Tr.subVectors(e,t),Mr.cross(Tr).dot(r)<0}}),Object.assign(X.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Mr.subVectors(this.c,this.b),Tr.subVectors(this.a,this.b),.5*Mr.cross(Tr).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Ye),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return X.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new wr),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return X.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return X.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return X.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return X.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Ye);var n=this.a,r=this.b,i=this.c,a=(Ar.subVectors(r,n),Lr.subVectors(i,n),Cr.subVectors(e,n),Ar.dot(Cr)),o=Lr.dot(Cr);if(a<=0&&o<=0)return t.copy(n);Pr.subVectors(e,r);var s=Ar.dot(Pr),l=Lr.dot(Pr);if(0<=s&&l<=s)return t.copy(r);var u=a*l-s*o;if(u<=0&&0<=a&&s<=0)return c=a/(a-s),t.copy(n).addScaledVector(Ar,c);Or.subVectors(e,i);var c,h,e=Ar.dot(Or),d=Lr.dot(Or);return 0<=d&&e<=d?t.copy(i):(a=e*o-a*d)<=0&&0<=o&&d<=0?(h=o/(o-d),t.copy(n).addScaledVector(Lr,h)):(o=s*d-e*l)<=0&&0<=l-s&&0<=e-d?(Rr.subVectors(i,r),h=(l-s)/(l-s+(e-d)),t.copy(r).addScaledVector(Rr,h)):(c=a*(i=1/(o+a+u)),h=u*i,t.copy(n).addScaledVector(Ar,c).addScaledVector(Lr,h))},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Nr={h:0,s:0,l:0},Ir={h:0,s:0,l:0};function x(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function kr(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Br(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Fr(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function Ur(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Ye,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new x,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}Object.assign(x.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){return e=Te.euclideanModulo(e,1),t=Te.clamp(t,0,1),n=Te.clamp(n,0,1),0===t?this.r=this.g=this.b=n:(this.r=kr(t=2*n-(n=n<=.5?n*(1+t):n+t-n*t),n,e+1/3),this.g=kr(t,n,e),this.b=kr(t,n,e-1/3)),this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(l=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r,i,a,o=l[1],s=l[2];switch(o){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return r=parseFloat(n[1])/360,i=parseInt(n[2],10)/100,a=parseInt(n[3],10)/100,e(n[5]),this.setHSL(r,i,a)}}else if(l=/^\#([A-Fa-f0-9]+)$/.exec(t)){var o=l[1],l=o.length;if(3===l)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(e){var t=Dr[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t=0<(t=void 0===t?2:t)?1/t:1;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=Br(e.r),this.g=Br(e.g),this.b=Br(e.b),this},copyLinearToSRGB:function(e){return this.r=Fr(e.r),this.g=Fr(e.g),this.b=Fr(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n=this.r,r=this.g,i=this.b,a=Math.max(n,r,i),o=Math.min(n,r,i),s=(o+a)/2;if(o===a)u=t=0;else{var l=a-o,u=s<=.5?l/(a+o):l/(2-a-o);switch(a){case n:t=(r-i)/l+(r<i?6:0);break;case r:t=(i-n)/l+2;break;case i:t=(n-r)/l+4}t/=6}return e.h=t,e.s=u,e.l=s,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(Nr),Nr.h+=e,Nr.s+=t,Nr.l+=n,this.setHSL(Nr.h,Nr.s,Nr.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Nr),e.getHSL(Ir);var e=Te.lerp(Nr.h,Ir.h,t),n=Te.lerp(Nr.s,Ir.s,t),t=Te.lerp(Nr.l,Ir.l,t);return this.setHSL(e,n,t),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return this.r=e[t=void 0===t?0:t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return(e=void 0===e?[]:e)[t=void 0===t?0:t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},fromBufferAttribute:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),x.NAMES=Dr,Object.assign(Ur.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var r=0,i=e.vertexColors.length;r<i;r++)this.vertexColors[r]=e.vertexColors[r].clone();return this}});var zr=0;function o(){Object.defineProperty(this,"id",{value:zr++}),this.uuid=Te.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Z,this.side=D,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=he,this.blendDst=de,this.blendEquation=ne,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=be,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Hr(e){o.call(this),this.type="MeshBasicMaterial",this.color=new x(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=A,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}o.prototype=Object.assign(Object.create(fn.prototype),{constructor:o,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(var t in e){var n,r=e[t];void 0===r?console.warn("THREE.Material: '"+t+"' parameter is undefined."):"shading"===t?(console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r):void 0===(n=this[t])?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r}},toJSON:function(e){var t=void 0===e||"string"==typeof e,n=(t&&(e={textures:{},images:{}}),{metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}});function r(e){var t,n=[];for(t in e){var r=e[t];delete r.metadata,n.push(r)}return n}return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity)&&(n.envMapIntensity=this.envMapIntensity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Z&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==D&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t&&(t=r(e.textures),e=r(e.images),0<t.length&&(n.textures=t),0<e.length)&&(n.images=e),n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t)for(var r=t.length,n=new Array(r),i=0;i!==r;++i)n[i]=t[i].clone();return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(o.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),((Hr.prototype=Object.create(o.prototype)).constructor=Hr).prototype.isMeshBasicMaterial=!0,Hr.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var a=new Ye,Gr=new Xe;function R(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function jr(e,t,n){R.call(this,new Int8Array(e),t,n)}function Vr(e,t,n){R.call(this,new Uint8Array(e),t,n)}function Wr(e,t,n){R.call(this,new Uint8ClampedArray(e),t,n)}function qr(e,t,n){R.call(this,new Int16Array(e),t,n)}function Xr(e,t,n){R.call(this,new Uint16Array(e),t,n)}function Yr(e,t,n){R.call(this,new Int32Array(e),t,n)}function Zr(e,t,n){R.call(this,new Uint32Array(e),t,n)}function K(e,t,n){R.call(this,new Float32Array(e),t,n)}function Qr(e,t,n){R.call(this,new Float64Array(e),t,n)}function Jr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Kr(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(R.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(R.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new x),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Xe),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Ye),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Se),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix3(e),this.setXY(t,Gr.x,Gr.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)a.fromBufferAttribute(this,r),a.applyMatrix3(e),this.setXYZ(r,a.x,a.y,a.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)a.x=this.getX(t),a.y=this.getY(t),a.z=this.getZ(t),a.applyMatrix4(e),this.setXYZ(t,a.x,a.y,a.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)a.x=this.getX(t),a.y=this.getY(t),a.z=this.getZ(t),a.applyNormalMatrix(e),this.setXYZ(t,a.x,a.y,a.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)a.x=this.getX(t),a.y=this.getY(t),a.z=this.getZ(t),a.transformDirection(e),this.setXYZ(t,a.x,a.y,a.z);return this},set:function(e,t){return this.array.set(e,t=void 0===t?0:t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(jr.prototype=Object.create(R.prototype)).constructor=jr,(Vr.prototype=Object.create(R.prototype)).constructor=Vr,(Wr.prototype=Object.create(R.prototype)).constructor=Wr,(qr.prototype=Object.create(R.prototype)).constructor=qr,Xr.prototype=Object.create(R.prototype),Xr.prototype.constructor=Xr,(Yr.prototype=Object.create(R.prototype)).constructor=Yr,Zr.prototype=Object.create(R.prototype),Zr.prototype.constructor=Zr,(K.prototype=Object.create(R.prototype)).constructor=K,(Qr.prototype=Object.create(R.prototype)).constructor=Qr,Object.assign(Jr.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:r})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&0<r[0].length,a=r[1]&&0<r[1].length,o=e.morphTargets,s=o.length;if(0<s){for(var l=[],u=0;u<s;u++)l[u]={name:o[u].name,data:[]};this.morphTargets.position=l}var c=e.morphNormals,h=c.length;if(0<h){for(var d=[],f=0;f<h;f++)d[f]={name:c[f].name,data:[]};this.morphTargets.normal=d}var p=e.skinIndices,m=e.skinWeights,g=p.length===n.length,v=m.length===n.length;0<n.length&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var y=0;y<t.length;y++){var _=t[y],x=(this.vertices.push(n[_.a],n[_.b],n[_.c]),_.vertexNormals),x=(3===x.length?this.normals.push(x[0],x[1],x[2]):(x=_.normal,this.normals.push(x,x,x)),_.vertexColors);3===x.length?this.colors.push(x[0],x[1],x[2]):(x=_.color,this.colors.push(x,x,x)),!0===i&&(void 0!==(x=r[0][y])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",y),this.uvs.push(new Xe,new Xe,new Xe))),!0===a&&(void 0!==(x=r[1][y])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",y),this.uvs2.push(new Xe,new Xe,new Xe)));for(var b=0;b<s;b++){var w=o[b].vertices;l[b].data.push(w[_.a],w[_.b],w[_.c])}for(var M=0;M<h;M++){var T=c[M].vertexNormals[y];d[M].data.push(T.a,T.b,T.c)}g&&this.skinIndices.push(p[_.a],p[_.b],p[_.c]),v&&this.skinWeights.push(m[_.a],m[_.b],m[_.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var $r=1,ei=new Ee,ti=new m,ni=new Ye,ri=new sr,ii=new sr,g=new Ye;function $(){Object.defineProperty(this,"id",{value:$r+=2}),this.uuid=Te.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}$.prototype=Object.assign(Object.create(fn.prototype),{constructor:$,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<Kr(e)?Zr:Xr)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position,t=(void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0),this.attributes.normal),n=(void 0!==t&&(n=(new gn).getNormalMatrix(e),t.applyNormalMatrix(n),t.needsUpdate=!0),this.attributes.tangent);return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return ei.makeRotationX(e),this.applyMatrix4(ei),this},rotateY:function(e){return ei.makeRotationY(e),this.applyMatrix4(ei),this},rotateZ:function(e){return ei.makeRotationZ(e),this.applyMatrix4(ei),this},translate:function(e,t,n){return ei.makeTranslation(e,t,n),this.applyMatrix4(ei),this},scale:function(e,t,n){return ei.makeScale(e,t,n),this.applyMatrix4(ei),this},lookAt:function(e){return ti.lookAt(e),ti.updateMatrix(),this.applyMatrix4(ti.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ni).negate(),this.translate(ni.x,ni.y,ni.z),this},setFromObject:function(e){var t,n,r=e.geometry;return e.isPoints||e.isLine?(n=new K(3*r.vertices.length,3),t=new K(3*r.colors.length,3),this.setAttribute("position",n.copyVector3sArray(r.vertices)),this.setAttribute("color",t.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(n=new K(r.lineDistances.length,1),this.setAttribute("lineDistance",n.copyArray(r.lineDistances))),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())):e.isMesh&&r&&r.isGeometry&&this.fromGeometry(r),this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new K(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}return!0===t.verticesNeedUpdate&&(void 0!==(n=this.attributes.position)&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(void 0!==(n=this.attributes.normal)&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(void 0!==(n=this.attributes.color)&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(void 0!==(n=this.attributes.uv)&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(void 0!==(n=this.attributes.lineDistance)&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Jr).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t,n=new Float32Array(3*e.vertices.length);for(t in this.setAttribute("position",new R(n,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(n=new Float32Array(3*e.normals.length),this.setAttribute("normal",new R(n,3).copyVector3sArray(e.normals))),0<e.colors.length&&(n=new Float32Array(3*e.colors.length),this.setAttribute("color",new R(n,3).copyColorsArray(e.colors))),0<e.uvs.length&&(n=new Float32Array(2*e.uvs.length),this.setAttribute("uv",new R(n,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(n=new Float32Array(2*e.uvs2.length),this.setAttribute("uv2",new R(n,2).copyVector2sArray(e.uvs2))),this.groups=e.groups,e.morphTargets){for(var r=[],i=e.morphTargets[t],a=0,o=i.length;a<o;a++){var s=i[a],l=new K(3*s.data.length,3);l.name=s.name,r.push(l.copyVector3sArray(s.data))}this.morphAttributes[t]=r}return 0<e.skinIndices.length&&(n=new K(4*e.skinIndices.length,4),this.setAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(n=new K(4*e.skinWeights.length,4),this.setAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new sr);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];ri.setFromBufferAttribute(i),this.morphTargetsRelative?(g.addVectors(this.boundingBox.min,ri.min),this.boundingBox.expandByPoint(g),g.addVectors(this.boundingBox.max,ri.max),this.boundingBox.expandByPoint(g)):(this.boundingBox.expandByPoint(ri.min),this.boundingBox.expandByPoint(ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new cr);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(ri.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];ii.setFromBufferAttribute(a),this.morphTargetsRelative?(g.addVectors(ri.min,ii.min),ri.expandByPoint(g),g.addVectors(ri.max,ii.max),ri.expandByPoint(g)):(ri.expandByPoint(ii.min),ri.expandByPoint(ii.max))}ri.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)g.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(g));if(t)for(var u=0,c=t.length;u<c;u++)for(var h=t[u],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)g.fromBufferAttribute(h,f),d&&(ni.fromBufferAttribute(e,f),g.add(ni)),o=Math.max(o,n.distanceToSquared(g));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new R(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Ye,o=new Ye,s=new Ye,l=new Ye,u=new Ye,c=new Ye,h=new Ye,d=new Ye;if(e)for(var f=0,p=e.count;f<p;f+=3){var m=e.getX(f+0),g=e.getX(f+1),v=e.getX(f+2);a.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),l.fromBufferAttribute(n,m),u.fromBufferAttribute(n,g),c.fromBufferAttribute(n,v),l.add(h),u.add(h),c.add(h),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,u.x,u.y,u.z),n.setXYZ(v,c.x,c.y,c.z)}else for(var y=0,_=t.count;y<_;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n,r=this.attributes;for(n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,a=e.attributes[n],o=a.array,a=a.itemSize*t,s=Math.min(o.length,i.length-a),l=0,u=a;l<s;l++,u++)i[u]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)g.fromBufferAttribute(e,t),g.normalize(),e.setXYZ(t,g.x,g.y,g.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,e=e.normalized,i=new n.constructor(t.length*r),a=0,o=0,s=0,l=t.length;s<l;s++)for(var a=t[s]*r,u=0;u<r;u++)i[o++]=n[a++];return new R(i,r,e)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,n=new $,r=this.index.array,i=this.attributes;for(t in i){var a=e(i[t],r);n.setAttribute(t,a)}var o,s=this.morphAttributes;for(o in s){for(var l=[],u=s[o],c=0,h=u.length;c<h;c++){var d=e(u[c],r);l.push(d)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,p=0,m=f.length;p<m;p++){var g=f[p];n.addGroup(g.start,g.count,g.materialIndex)}return n},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),void 0!==this.parameters){var t,n=this.parameters;for(t in n)void 0!==n[t]&&(e[t]=n[t])}else{e.data={attributes:{}};var r,i=this.index,a=(null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)}),this.attributes);for(r in a){var o=a[r],s=o.toJSON(e.data);""!==o.name&&(s.name=o.name),e.data.attributes[r]=s}var l,u={},c=!1;for(l in this.morphAttributes){for(var h=this.morphAttributes[l],d=[],f=0,p=h.length;f<p;f++){var m=h[f],g=m.toJSON(e.data);""!==m.name&&(g.name=m.name),d.push(g)}0<d.length&&(u[l]=d,c=!0)}c&&(e.data.morphAttributes=u,e.data.morphTargetsRelative=this.morphTargetsRelative);i=this.groups,i=(0<i.length&&(e.data.groups=JSON.parse(JSON.stringify(i))),this.boundingSphere);null!==i&&(e.data.boundingSphere={center:i.center.toArray(),radius:i.radius})}return e},clone:function(){return(new $).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t,n={},r=(this.name=e.name,e.index),i=(null!==r&&this.setIndex(r.clone(n)),e.attributes);for(t in i){var a=i[t];this.setAttribute(t,a.clone(n))}var o,s=e.morphAttributes;for(o in s){for(var l=[],u=s[o],c=0,h=u.length;c<h;c++)l.push(u[c].clone(n));this.morphAttributes[o]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,f=0,p=d.length;f<p;f++){var m=d[f];this.addGroup(m.start,m.count,m.materialIndex)}r=e.boundingBox,null!==r&&(this.boundingBox=r.clone()),r=e.boundingSphere;return null!==r&&(this.boundingSphere=r.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ai=new Ee,oi=new yr,si=new cr,li=new Ye,ui=new Ye,ci=new Ye,hi=new Ye,di=new Ye,fi=new Ye,pi=new Ye,mi=new Ye,gi=new Ye,vi=new Xe,yi=new Xe,_i=new Xe,xi=new Ye,bi=new Ye;function C(e,t){m.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new $,this.material=void 0!==t?t:new Hr,this.updateMorphTargets()}function wi(e,t,n,r,i,a,o,s){r=t.side===H?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==q,s);if(null===r)return null;bi.copy(s),bi.applyMatrix4(e.matrixWorld);i=n.ray.origin.distanceTo(bi);return i<n.near||i>n.far?null:{distance:i,point:bi.clone(),object:e}}function Mi(e,t,n,r,i,a,o,s,l,u,c,h){li.fromBufferAttribute(i,u),ui.fromBufferAttribute(i,c),ci.fromBufferAttribute(i,h);var d=e.morphTargetInfluences;if(t.morphTargets&&a&&d){pi.set(0,0,0),mi.set(0,0,0),gi.set(0,0,0);for(var f=0,p=a.length;f<p;f++){var m=d[f],g=a[f];0!==m&&(hi.fromBufferAttribute(g,u),di.fromBufferAttribute(g,c),fi.fromBufferAttribute(g,h),o?(pi.addScaledVector(hi,m),mi.addScaledVector(di,m),gi.addScaledVector(fi,m)):(pi.addScaledVector(hi.sub(li),m),mi.addScaledVector(di.sub(ui),m),gi.addScaledVector(fi.sub(ci),m)))}li.add(pi),ui.add(mi),ci.add(gi)}e.isSkinnedMesh&&(e.boneTransform(u,li),e.boneTransform(c,ui),e.boneTransform(h,ci));i=wi(e,t,n,r,li,ui,ci,xi);return i&&(s&&(vi.fromBufferAttribute(s,u),yi.fromBufferAttribute(s,c),_i.fromBufferAttribute(s,h),i.uv=X.getUV(xi,li,ui,ci,vi,yi,_i,new Xe)),l&&(vi.fromBufferAttribute(l,u),yi.fromBufferAttribute(l,c),_i.fromBufferAttribute(l,h),i.uv2=X.getUV(xi,li,ui,ci,vi,yi,_i,new Xe)),e=new Ur(u,c,h),X.getNormal(li,ui,ci,e.normal),i.face=e),i}C.prototype=Object.assign(Object.create(m.prototype),{constructor:C,isMesh:!0,copy:function(e){return m.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(0<n.length){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{t=e.morphTargets;void 0!==t&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),si.copy(n.boundingSphere),si.applyMatrix4(i),!1!==e.ray.intersectsSphere(si)&&(ai.getInverse(i),oi.copy(e.ray).applyMatrix4(ai),null===n.boundingBox||!1!==oi.intersectsBox(n.boundingBox))))if(n.isBufferGeometry){var a=n.index,o=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,u=n.attributes.uv,c=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==a)if(Array.isArray(r))for(var f=0,p=h.length;f<p;f++)for(var m=h[f],g=r[m.materialIndex],v=Math.max(m.start,d.start),y=Math.min(m.start+m.count,d.start+d.count);v<y;v+=3){var _,x=a.getX(v),b=a.getX(v+1),k=a.getX(v+2);(_=Mi(this,g,e,oi,o,s,l,u,c,x,b,k))&&(_.faceIndex=Math.floor(v/3),_.face.materialIndex=m.materialIndex,t.push(_))}else for(var w=Math.max(0,d.start),B=Math.min(a.count,d.start+d.count);w<B;w+=3){var F=a.getX(w),U=a.getX(w+1),z=a.getX(w+2);(_=Mi(this,r,e,oi,o,s,l,u,c,F,U,z))&&(_.faceIndex=Math.floor(w/3),t.push(_))}else if(void 0!==o)if(Array.isArray(r))for(var M=0,H=h.length;M<H;M++)for(var T=h[M],G=r[T.materialIndex],S=Math.max(T.start,d.start),j=Math.min(T.start+T.count,d.start+d.count);S<j;S+=3)(_=Mi(this,G,e,oi,o,s,l,u,c,S,S+1,S+2))&&(_.faceIndex=Math.floor(S/3),_.face.materialIndex=T.materialIndex,t.push(_));else for(var E=Math.max(0,d.start),V=Math.min(o.count,d.start+d.count);E<V;E+=3)(_=Mi(this,r,e,oi,o,s,l,u,c,E,E+1,E+2))&&(_.faceIndex=Math.floor(E/3),t.push(_))}else if(n.isGeometry){var A,W=Array.isArray(r),L=n.vertices,R=n.faces,i=n.faceVertexUvs[0];0<i.length&&(A=i);for(var C=0,q=R.length;C<q;C++){var P,O,D,N=R[C],I=W?r[N.materialIndex]:r;void 0!==I&&(P=L[N.a],O=L[N.b],D=L[N.c],_=wi(this,I,e,oi,P,O,D,xi))&&(A&&A[C]&&(I=A[C],vi.copy(I[0]),yi.copy(I[1]),_i.copy(I[2]),_.uv=X.getUV(xi,P,O,D,vi,yi,_i,new Xe)),_.face=N,_.faceIndex=C,t.push(_))}}}});var Ti=0,Si=new Ee,Ei=new m,Ai=new Ye;function M(){Object.defineProperty(this,"id",{value:Ti+=2}),this.uuid=Te.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}M.prototype=Object.assign(Object.create(fn.prototype),{constructor:M,isGeometry:!0,applyMatrix4:function(e){for(var t=(new gn).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(var i=0,a=this.faces.length;i<a;i++){var o=this.faces[i];o.normal.applyMatrix3(t).normalize();for(var s=0,l=o.vertexNormals.length;s<l;s++)o.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Si.makeRotationX(e),this.applyMatrix4(Si),this},rotateY:function(e){return Si.makeRotationY(e),this.applyMatrix4(Si),this},rotateZ:function(e){return Si.makeRotationZ(e),this.applyMatrix4(Si),this},translate:function(e,t,n){return Si.makeTranslation(e,t,n),this.applyMatrix4(Si),this},scale:function(e,t,n){return Si.makeScale(e,t,n),this.applyMatrix4(Si),this},lookAt:function(e){return Ei.lookAt(e),Ei.updateMatrix(),this.applyMatrix4(Ei.matrix),this},fromBufferGeometry:function(e){var a=this,t=null!==e.index?e.index:void 0,n=e.attributes;if(void 0===n.position)console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.");else{var r=n.position,o=n.normal,s=n.color,l=n.uv,u=n.uv2;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var i=0;i<r.count;i++)a.vertices.push((new Ye).fromBufferAttribute(r,i)),void 0!==s&&a.colors.push((new x).fromBufferAttribute(s,i));var c=e.groups;if(0<c.length)for(var h=0;h<c.length;h++)for(var d=c[h],f=d.start,p=f,m=f+d.count;p<m;p+=3)void 0!==t?y(t.getX(p),t.getX(p+1),t.getX(p+2),d.materialIndex):y(p,p+1,p+2,d.materialIndex);else if(void 0!==t)for(var g=0;g<t.count;g+=3)y(t.getX(g),t.getX(g+1),t.getX(g+2));else for(var v=0;v<r.count;v+=3)y(v,v+1,v+2);this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone())}return this;function y(e,t,n,r){var i=void 0===s?[]:[a.colors[e].clone(),a.colors[t].clone(),a.colors[n].clone()],i=new Ur(e,t,n,void 0===o?[]:[(new Ye).fromBufferAttribute(o,e),(new Ye).fromBufferAttribute(o,t),(new Ye).fromBufferAttribute(o,n)],i,r);a.faces.push(i),void 0!==l&&a.faceVertexUvs[0].push([(new Xe).fromBufferAttribute(l,e),(new Xe).fromBufferAttribute(l,t),(new Xe).fromBufferAttribute(l,n)]),void 0!==u&&a.faceVertexUvs[1].push([(new Xe).fromBufferAttribute(u,e),(new Xe).fromBufferAttribute(u,t),(new Xe).fromBufferAttribute(u,n)])}},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ai).negate(),this.translate(Ai.x,Ai.y,Ai.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,t=0===t?1:1/t,n=new Ee;return n.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var e=new Ye,t=new Ye,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);for(var t=new Array(this.vertices.length),n=0,r=this.vertices.length;n<r;n++)t[n]=new Ye;if(e)for(var i=new Ye,a=new Ye,o=0,s=this.faces.length;o<s;o++){var l=this.faces[o],u=this.vertices[l.a],c=this.vertices[l.b],h=this.vertices[l.c];i.subVectors(h,c),a.subVectors(u,c),i.cross(a),t[l.a].add(i),t[l.b].add(i),t[l.c].add(i)}else{this.computeFaceNormals();for(var d=0,f=this.faces.length;d<f;d++){var p=this.faces[d];t[p.a].add(p.normal),t[p.b].add(p.normal),t[p.c].add(p.normal)}}for(var m=0,g=this.vertices.length;m<g;m++)t[m].normalize();for(var v=0,y=this.faces.length;v<y;v++){var _=this.faces[v],x=_.vertexNormals;3===x.length?(x[0].copy(t[_.a]),x[1].copy(t[_.b]),x[2].copy(t[_.c])):(x[0]=t[_.a].clone(),x[1]=t[_.b].clone(),x[2]=t[_.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var r=0,i=n.vertexNormals.length;r<i;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var a=new M;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var l=this.morphNormals[o].faceNormals,u=this.morphNormals[o].vertexNormals,c=0,h=this.faces.length;c<h;c++){var d=new Ye,f={a:new Ye,b:new Ye,c:new Ye};l.push(d),u.push(f)}}var p=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var m=0,g=this.faces.length;m<g;m++){var v=this.faces[m],y=p.faceNormals[m],_=p.vertexNormals[m];y.copy(v.normal),_.a.copy(v.vertexNormals[0]),_.b.copy(v.vertexNormals[1]),_.c.copy(v.vertexNormals[2])}}for(var x=0,b=this.faces.length;x<b;x++){var w=this.faces[x];w.normal=w.__originalFaceNormal,w.vertexNormals=w.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new sr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new cr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new gn).getNormalMatrix(t));for(var h=0,d=o.length;h<d;h++){var f=o[h].clone();void 0!==t&&f.applyMatrix4(t),a.push(f)}for(var p=0,m=c.length;p<m;p++)u.push(c[p].clone());for(var g=0,v=l.length;g<v;g++){var y=l[g],_=void 0,x=void 0,b=void 0,w=y.vertexNormals,M=y.vertexColors;(_=new Ur(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&_.normal.applyMatrix3(r).normalize();for(var T=0,S=w.length;T<S;T++)x=w[T].clone(),void 0!==r&&x.applyMatrix3(r).normalize(),_.vertexNormals.push(x);_.color.copy(y.color);for(var E=0,A=M.length;E<A;E++)b=M[E],_.vertexColors.push(b.clone());_.materialIndex=y.materialIndex+n,s.push(_)}for(var L=0,R=e.faceVertexUvs.length;L<R;L++){var C=e.faceVertexUvs[L];void 0===this.faceVertexUvs[L]&&(this.faceVertexUvs[L]=[]);for(var P=0,O=C.length;P<O;P++){for(var D=C[P],N=[],I=0,k=D.length;I<k;I++)N.push(D[I].clone());this.faceVertexUvs[L].push(N)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){for(var e={},t=[],n=[],r=Math.pow(10,4),i=0,a=this.vertices.length;i<a;i++){var o=this.vertices[i],o=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r);void 0===e[o]?(e[o]=i,t.push(this.vertices[i]),n[i]=t.length-1):n[i]=n[e[o]]}for(var s=[],l=0,u=this.faces.length;l<u;l++)for(var c=this.faces[l],h=(c.a=n[c.a],c.b=n[c.b],c.c=n[c.c],[c.a,c.b,c.c]),d=0;d<3;d++)if(h[d]===h[(d+1)%3]){s.push(l);break}for(var f=s.length-1;0<=f;f--){var p=s[f];this.faces.splice(p,1);for(var m=0,g=this.faceVertexUvs.length;m<g;m++)this.faceVertexUvs[m].splice(p,1)}var v=this.vertices.length-t.length;return this.vertices=t,v},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Ye(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(r=[]),o&&o.length===t&&(i=[]);for(var s=0;s<t;s++){var l=e[s]._id;r&&r.push(a[l]),i&&i.push(o[l])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t,n=this.parameters;for(t in n)void 0!==n[t]&&(e[t]=n[t])}else{for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}for(var o=[],s=[],l={},u=[],c={},h=[],d={},f=0;f<this.faces.length;f++){var p,m=this.faces[f],g=void 0!==this.faceVertexUvs[0][f],v=0<m.normal.length(),y=0<m.vertexNormals.length,_=1!==m.color.r||1!==m.color.g||1!==m.color.b,x=0<m.vertexColors.length;p=b(2,3,g),p=b(p,4,v),p=b(p,5,y),p=b(p,6,_),p=b(p,7,x),o.push(p),o.push(m.a,m.b,m.c),o.push(m.materialIndex),g&&(p=this.faceVertexUvs[0][f],o.push(T(p[0]),T(p[1]),T(p[2]))),v&&o.push(w(m.normal)),y&&(g=m.vertexNormals,o.push(w(g[0]),w(g[1]),w(g[2]))),_&&o.push(M(m.color)),x&&(p=m.vertexColors,o.push(M(p[0]),M(p[1]),M(p[2])))}e.data={},e.data.vertices=r,e.data.normals=s,0<u.length&&(e.data.colors=u),0<h.length&&(e.data.uvs=[h]),e.data.faces=o}return e;function b(e,t,n){return n?e|1<<t:e&~(1<<t)}function w(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0===l[t]&&(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function M(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0===c[t]&&(c[t]=u.length,u.push(e.getHex())),c[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0===d[t]&&(d[t]=h.length/2,h.push(e.x,e.y)),d[t]}},clone:function(){return(new M).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(var i=e.colors,a=0,o=i.length;a<o;a++)this.colors.push(i[a].clone());for(var s=e.faces,l=0,u=s.length;l<u;l++)this.faces.push(s[l].clone());for(var c=0,h=e.faceVertexUvs.length;c<h;c++){var d=e.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var f=0,k=d.length;f<k;f++){for(var p=d[f],m=[],g=0,B=p.length;g<B;g++){var F=p[g];m.push(F.clone())}this.faceVertexUvs[c].push(m)}}for(var v=e.morphTargets,y=0,U=v.length;y<U;y++){var _={};if(_.name=v[y].name,void 0!==v[y].vertices){_.vertices=[];for(var x=0,z=v[y].vertices.length;x<z;x++)_.vertices.push(v[y].vertices[x].clone())}if(void 0!==v[y].normals){_.normals=[];for(var b=0,H=v[y].normals.length;b<H;b++)_.normals.push(v[y].normals[b].clone())}this.morphTargets.push(_)}for(var w=e.morphNormals,M=0,G=w.length;M<G;M++){var T={};if(void 0!==w[M].vertexNormals){T.vertexNormals=[];for(var S=0,j=w[M].vertexNormals.length;S<j;S++){var E=w[M].vertexNormals[S],A={};A.a=E.a.clone(),A.b=E.b.clone(),A.c=E.c.clone(),T.vertexNormals.push(A)}}if(void 0!==w[M].faceNormals){T.faceNormals=[];for(var L=0,V=w[M].faceNormals.length;L<V;L++)T.faceNormals.push(w[M].faceNormals[L].clone())}this.morphNormals.push(T)}for(var R=e.skinWeights,C=0,W=R.length;C<W;C++)this.skinWeights.push(R[C].clone());for(var P=e.skinIndices,O=0,q=P.length;O<q;O++)this.skinIndices.push(P[O].clone());for(var D=e.lineDistances,N=0,X=D.length;N<X;N++)this.lineDistances.push(D[N]);var I=e.boundingBox,I=(null!==I&&(this.boundingBox=I.clone()),e.boundingSphere);return null!==I&&(this.boundingSphere=I.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Li=(o=>{function e(e,t,n,r,i,a){o.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new Ri(e,t,n,r,i,a)),this.mergeVertices()}return o&&(e.__proto__=o),(e.prototype=Object.create(o&&o.prototype)).constructor=e})(M),Ri=(s=>{function e(e,t,n,r,i,a){s.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var C=this,P=(e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1,[]),O=[],D=[],N=[],I=0,k=0;function o(e,t,n,r,i,a,o,s,l,u,c){for(var h=a/l,d=o/u,f=a/2,p=o/2,m=s/2,g=l+1,v=u+1,y=0,_=0,x=new Ye,b=0;b<v;b++)for(var w=b*d-p,M=0;M<g;M++)x[e]=(M*h-f)*r,x[t]=w*i,x[n]=m,O.push(x.x,x.y,x.z),x[e]=0,x[t]=0,x[n]=0<s?1:-1,D.push(x.x,x.y,x.z),N.push(M/l),N.push(1-b/u),y+=1;for(var T=0;T<u;T++)for(var S=0;S<l;S++){var E=I+S+g*T,A=I+S+g*(T+1),L=I+(S+1)+g*(T+1),R=I+(S+1)+g*T;P.push(E,A,R),P.push(A,L,R),_+=6}C.addGroup(k,_,c),k+=_,I+=y}o("z","y","x",-1,-1,n,t,e,a,i,0),o("z","y","x",1,-1,n,t,-e,a,i,1),o("x","z","y",1,1,e,n,t,r,a,2),o("x","z","y",1,-1,e,n,-t,r,a,3),o("x","y","z",1,-1,e,t,n,r,i,4),o("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(P),this.setAttribute("position",new K(O,3)),this.setAttribute("normal",new K(D,3)),this.setAttribute("uv",new K(N,2))}return s&&(e.__proto__=s),(e.prototype=Object.create(s&&s.prototype)).constructor=e})($);function Ci(e){var t,n={};for(t in e)for(var r in n[t]={},e[t]){var i=e[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?n[t][r]=i.clone():Array.isArray(i)?n[t][r]=i.slice():n[t][r]=i}return n}function Pi(e){for(var t={},n=0;n<e.length;n++){var r,i=Ci(e[n]);for(r in i)t[r]=i[r]}return t}var Oi={clone:Ci,merge:Pi},Di="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Ni="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function Ii(e){o.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Di,this.fragmentShader=Ni,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function ki(){m.call(this),this.type="Camera",this.matrixWorldInverse=new Ee,this.projectionMatrix=new Ee,this.projectionMatrixInverse=new Ee}function L(e,t,n,r){ki.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}((Ii.prototype=Object.create(o.prototype)).constructor=Ii).prototype.isShaderMaterial=!0,Ii.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ci(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this},Ii.prototype.toJSON=function(e){var t,n=o.prototype.toJSON.call(this,e);for(t in n.uniforms={},this.uniforms){var r=this.uniforms[t].value;r&&r.isTexture?n.uniforms[t]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?n.uniforms[t]={type:"c",value:r.getHex()}:r&&r.isVector2?n.uniforms[t]={type:"v2",value:r.toArray()}:r&&r.isVector3?n.uniforms[t]={type:"v3",value:r.toArray()}:r&&r.isVector4?n.uniforms[t]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?n.uniforms[t]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?n.uniforms[t]={type:"m4",value:r.toArray()}:n.uniforms[t]={value:r}}0<Object.keys(this.defines).length&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;var i,a={};for(i in this.extensions)!0===this.extensions[i]&&(a[i]=!0);return 0<Object.keys(a).length&&(n.extensions=a),n},ki.prototype=Object.assign(Object.create(m.prototype),{constructor:ki,isCamera:!0,copy:function(e,t){return m.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Ye),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){m.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){m.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),L.prototype=Object.assign(Object.create(ki.prototype),{constructor:L,isPerspectiveCamera:!0,copy:function(e,t){return ki.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e;this.fov=2*Te.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Te.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Te.RAD2DEG*Math.atan(Math.tan(.5*Te.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e,t=this.near,n=t*Math.tan(.5*Te.DEG2RAD*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i,o=this.view,s=(null!==this.view&&this.view.enabled&&(s=o.fullWidth,e=o.fullHeight,a+=o.offsetX*i/s,n-=o.offsetY*r/e,i*=o.width/s,r*=o.height/e),this.filmOffset);0!==s&&(a+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){e=m.prototype.toJSON.call(this,e);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});function Bi(e,t,o){var a,s,l,u,c,h;m.call(this),this.type="CubeCamera",!0!==o.isWebGLCubeRenderTarget?console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."):(this.renderTarget=o,(a=new L(90,1,e,t)).layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Ye(1,0,0)),this.add(a),(s=new L(90,1,e,t)).layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Ye(-1,0,0)),this.add(s),(l=new L(90,1,e,t)).layers=this.layers,l.up.set(0,0,1),l.lookAt(new Ye(0,1,0)),this.add(l),(u=new L(90,1,e,t)).layers=this.layers,u.up.set(0,0,-1),u.lookAt(new Ye(0,-1,0)),this.add(u),(c=new L(90,1,e,t)).layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Ye(0,0,1)),this.add(c),(h=new L(90,1,e,t)).layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Ye(0,0,-1)),this.add(h),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.xr.enabled,r=e.getRenderTarget(),i=(e.xr.enabled=!1,o.texture.generateMipmaps);o.texture.generateMipmaps=!1,e.setRenderTarget(o,0),e.render(t,a),e.setRenderTarget(o,1),e.render(t,s),e.setRenderTarget(o,2),e.render(t,l),e.setRenderTarget(o,3),e.render(t,u),e.setRenderTarget(o,4),e.render(t,c),o.texture.generateMipmaps=i,e.setRenderTarget(o,5),e.render(t,h),e.setRenderTarget(r),e.xr.enabled=n},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)})}function Fi(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),_n.call(this,e,e,t)}function Ui(e,t,n,r,i,a,o,s,l,u,c,h){d.call(this,null,a,o,s,l,u,r,i,c,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:z,this.minFilter=void 0!==u?u:z,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}(Bi.prototype=Object.create(m.prototype)).constructor=Bi,((Fi.prototype=Object.create(_n.prototype)).constructor=Fi).prototype.isWebGLCubeRenderTarget=!0,Fi.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new Xn,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV = equirectUv( direction );","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new Ii({name:"CubemapFromEquirect",uniforms:Ci(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:H,blending:Y}),t=(r.uniforms.tEquirect.value=t,new C(new Ri(5,5,5),r));return n.add(t),new Bi(1,10,this).update(e,n),t.geometry.dispose(),t.material.dispose(),this},((Ui.prototype=Object.create(d.prototype)).constructor=Ui).prototype.isDataTexture=!0;var zi=new cr,Hi=new Ye;function Gi(e,t,n,r,i,a){this.planes=[void 0!==e?e:new wr,void 0!==t?t:new wr,void 0!==n?n:new wr,void 0!==r?r:new wr,void 0!==i?i:new wr,void 0!==a?a:new wr]}Object.assign(Gi.prototype,{set:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){var t=this.planes,e=e.elements,n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],e=e[15];return t[0].setComponents(a-n,u-o,f-c,e-p).normalize(),t[1].setComponents(a+n,u+o,f+c,e+p).normalize(),t[2].setComponents(a+r,u+s,f+h,e+m).normalize(),t[3].setComponents(a-r,u-s,f-h,e-m).normalize(),t[4].setComponents(a-i,u-l,f-d,e-g).normalize(),t[5].setComponents(a+i,u+l,f+d,e+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),zi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(zi)},intersectsSprite:function(e){return zi.center.set(0,0,0),zi.radius=.7071067811865476,zi.applyMatrix4(e.matrixWorld),this.intersectsSphere(zi)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Hi.x=(0<r.normal.x?e.max:e.min).x,Hi.y=(0<r.normal.y?e.max:e.min).y,Hi.z=(0<r.normal.z?e.max:e.min).z,r.distanceToPoint(Hi)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Ae={common:{diffuse:{value:new x(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new gn},uv2Transform:{value:new gn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new x(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new x(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new gn}},sprite:{diffuse:{value:new x(15658734)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new gn}}};function ji(){var n=null,e=!1,r=null,i=null;function a(e,t){r(e,t),i=n.requestAnimationFrame(a)}return{start:function(){!0!==e&&null!==r&&(i=n.requestAnimationFrame(a),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(e){r=e},setContext:function(e){n=e}}}function Vi(l,e){var u=e.isWebGL2,c=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),c.get(e)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var t=c.get(e);t&&(l.deleteBuffer(t.buffer),c.delete(e))},update:function(e,t){e.isInterleavedBufferAttribute&&(e=e.data);var n,r,i,a,o,s=c.get(e);void 0===s?c.set(e,(r=t,i=(n=e).array,a=n.usage,o=l.createBuffer(),l.bindBuffer(r,o),l.bufferData(r,i,a),n.onUploadCallback(),r=5126,i instanceof Float32Array?r=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?r=5123:i instanceof Int16Array?r=5122:i instanceof Uint32Array?r=5125:i instanceof Int32Array?r=5124:i instanceof Int8Array?r=5120:i instanceof Uint8Array&&(r=5121),{buffer:o,type:r,bytesPerElement:i.BYTES_PER_ELEMENT,version:n.version})):s.version<e.version&&(a=s.buffer,o=t,i=(r=e).array,r=r.updateRange,l.bindBuffer(o,a),-1===r.count?l.bufferSubData(o,0,i):(u?l.bufferSubData(o,r.offset*i.BYTES_PER_ELEMENT,i,r.offset,r.count):l.bufferSubData(o,r.offset*i.BYTES_PER_ELEMENT,i.subarray(r.offset,r.offset+r.count)),r.count=-1),s.version=e.version)}}}function Wi(e,t,n,r){M.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new qi(e,t,n,r)),this.mergeVertices()}function qi(e,t,n,r){$.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};for(var i=(e=e||1)/2,a=(t=t||1)/2,o=Math.floor(n)||1,s=Math.floor(r)||1,l=o+1,u=s+1,c=e/o,h=t/s,d=[],f=[],p=[],m=[],g=0;g<u;g++)for(var v=g*h-a,y=0;y<l;y++)f.push(y*c-i,-v,0),p.push(0,0,1),m.push(y/o),m.push(1-g/s);for(var _=0;_<s;_++)for(var x=0;x<o;x++){var b=x+l*(_+1),w=x+1+l*(_+1),M=x+1+l*_;d.push(x+l*_,b,M),d.push(b,w,M)}this.setIndex(d),this.setAttribute("position",new K(f,3)),this.setAttribute("normal",new K(p,3)),this.setAttribute("uv",new K(m,2))}(Wi.prototype=Object.create(M.prototype)).constructor=Wi,(qi.prototype=Object.create($.prototype)).constructor=qi;var _={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Xi={basic:{uniforms:Pi([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.fog]),vertexShader:_.meshbasic_vert,fragmentShader:_.meshbasic_frag},lambert:{uniforms:Pi([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.fog,Ae.lights,{emissive:{value:new x(0)}}]),vertexShader:_.meshlambert_vert,fragmentShader:_.meshlambert_frag},phong:{uniforms:Pi([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.fog,Ae.lights,{emissive:{value:new x(0)},specular:{value:new x(1118481)},shininess:{value:30}}]),vertexShader:_.meshphong_vert,fragmentShader:_.meshphong_frag},standard:{uniforms:Pi([Ae.common,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.roughnessmap,Ae.metalnessmap,Ae.fog,Ae.lights,{emissive:{value:new x(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_.meshphysical_vert,fragmentShader:_.meshphysical_frag},toon:{uniforms:Pi([Ae.common,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.gradientmap,Ae.fog,Ae.lights,{emissive:{value:new x(0)}}]),vertexShader:_.meshtoon_vert,fragmentShader:_.meshtoon_frag},matcap:{uniforms:Pi([Ae.common,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.fog,{matcap:{value:null}}]),vertexShader:_.meshmatcap_vert,fragmentShader:_.meshmatcap_frag},points:{uniforms:Pi([Ae.points,Ae.fog]),vertexShader:_.points_vert,fragmentShader:_.points_frag},dashed:{uniforms:Pi([Ae.common,Ae.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_.linedashed_vert,fragmentShader:_.linedashed_frag},depth:{uniforms:Pi([Ae.common,Ae.displacementmap]),vertexShader:_.depth_vert,fragmentShader:_.depth_frag},normal:{uniforms:Pi([Ae.common,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,{opacity:{value:1}}]),vertexShader:_.normal_vert,fragmentShader:_.normal_frag},sprite:{uniforms:Pi([Ae.sprite,Ae.fog]),vertexShader:_.sprite_vert,fragmentShader:_.sprite_frag},background:{uniforms:{uvTransform:{value:new gn},t2D:{value:null}},vertexShader:_.background_vert,fragmentShader:_.background_frag},cube:{uniforms:Pi([Ae.envmap,{opacity:{value:1}}]),vertexShader:_.cube_vert,fragmentShader:_.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_.equirect_vert,fragmentShader:_.equirect_frag},distanceRGBA:{uniforms:Pi([Ae.common,Ae.displacementmap,{referencePosition:{value:new Ye},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_.distanceRGBA_vert,fragmentShader:_.distanceRGBA_frag},shadow:{uniforms:Pi([Ae.lights,Ae.fog,{color:{value:new x(0)},opacity:{value:1}}]),vertexShader:_.shadow_vert,fragmentShader:_.shadow_frag}};function Yi(a,n,o,r){var s,l,u=new x(0),c=0,h=null,d=0,f=null;function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return u},setClearColor:function(e,t){u.set(e),p(u,c=void 0!==t?t:1)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(u,c=e)},render:function(e,t,n,r){var t=!0===t.isScene?t.background:null,i=(i=a.xr).getSession&&i.getSession();null===(t=i&&"additive"===i.environmentBlendMode?null:t)?p(u,c):t&&t.isColor&&(p(t,1),r=!0),(a.autoClear||r)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),t&&(t.isCubeTexture||t.isWebGLCubeRenderTarget||t.mapping===ke)?(void 0===l&&((l=new C(new Ri(1,1,1),new Ii({name:"BackgroundCubeMaterial",uniforms:Ci(Xi.cube.uniforms),vertexShader:Xi.cube.vertexShader,fragmentShader:Xi.cube.fragmentShader,side:H,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(l)),i=t.isWebGLCubeRenderTarget?t.texture:t,l.material.uniforms.envMap.value=i,l.material.uniforms.flipEnvMap.value=i.isCubeTexture?-1:1,h===t&&d===i.version&&f===a.toneMapping||(l.material.needsUpdate=!0,h=t,d=i.version,f=a.toneMapping),e.unshift(l,l.geometry,l.material,0,0,null)):t&&t.isTexture&&(void 0===s&&((s=new C(new qi(2,2),new Ii({name:"BackgroundMaterial",uniforms:Ci(Xi.background.uniforms),vertexShader:Xi.background.vertexShader,fragmentShader:Xi.background.fragmentShader,side:D,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(s)),!0===(s.material.uniforms.t2D.value=t).matrixAutoUpdate&&t.updateMatrix(),s.material.uniforms.uvTransform.value.copy(t.matrix),h===t&&d===t.version&&f===a.toneMapping||(s.material.needsUpdate=!0,d=(h=t).version,f=a.toneMapping),e.unshift(s,s.geometry,s.material,0,0,null))}}}function Zi(R,C,P,O){var a=R.getParameter(34921),D=O.isWebGL2?null:C.get("OES_vertex_array_object"),N=O.isWebGL2||null!==D,I={},e=F(null),k=e;function B(e){if(O.isWebGL2)return R.bindVertexArray(e);D.bindVertexArrayOES(e)}function o(e){if(O.isWebGL2)return R.deleteVertexArray(e);D.deleteVertexArrayOES(e)}function F(e){for(var t=[],n=[],r=[],i=0;i<a;i++)r[i]=n[i]=t[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{}}}function U(){for(var e=k.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function z(e){H(e,0)}function H(e,t){var n=k.newAttributes,r=k.enabledAttributes,i=k.attributeDivisors;n[e]=1,0===r[e]&&(R.enableVertexAttribArray(e),r[e]=1),i[e]!==t&&((O.isWebGL2?R:C.get("ANGLE_instanced_arrays"))[O.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](e,t),i[e]=t)}function G(){for(var e=k.newAttributes,t=k.enabledAttributes,n=0,r=t.length;n<r;n++)t[n]!==e[n]&&(R.disableVertexAttribArray(n),t[n]=0)}function j(e,t,n,r,i,a){!0!==O.isWebGL2||5124!==n&&5125!==n?R.vertexAttribPointer(e,t,n,r,i,a):R.vertexAttribIPointer(e,t,n,r,i,a)}function s(){t(),k!==e&&B((k=e).object)}function t(){e.geometry=null,e.program=null,e.wireframe=!1}return{setup:function(e,t,n,r,i){var a=!1;if(N){var o=((e,t,n)=>{var n=!0===n.wireframe,r=I[e.id];return void 0===r&&(r={},I[e.id]=r),void 0===(e=r[t.id])&&(e={},r[t.id]=e),void 0===(r=e[n])&&(r=F((()=>O.isWebGL2?R.createVertexArray():D.createVertexArrayOES())()),e[n]=r),r})(r,n,t);if(k!==o&&B((k=o).object),a=(e=>{var t,n=k.attributes,r=e.attributes;if(Object.keys(n).length!==Object.keys(r).length)return!0;for(t in r){var i=n[t],a=r[t];if(i.attribute!==a)return!0;if(i.data!==a.data)return!0}return!1})(r)){var s,l={},u=r.attributes;for(s in u){var c=u[s],h={};(h.attribute=c).data&&(h.data=c.data),l[s]=h}k.attributes=l}}else{o=!0===t.wireframe;k.geometry===r.id&&k.program===n.id&&k.wireframe===o||(k.geometry=r.id,k.program=n.id,k.wireframe=o,a=!0)}if(!0===e.isInstancedMesh&&(a=!0),null!==i&&P.update(i,34963),a){var d=e,o=t,a=n,f=r;if(!1!==O.isWebGL2||!d.isInstancedMesh&&!f.isInstancedBufferGeometry||null!==C.get("ANGLE_instanced_arrays")){U();var p,m=f.attributes,g=a.getAttributes(),v=o.defaultAttributeValues;for(p in g){var y=g[p];if(0<=y){var _=m[p];if(void 0!==_){var x,b,w=_.normalized,M=_.itemSize,T=P.get(_);void 0!==T&&(x=T.buffer,b=T.type,T=T.bytesPerElement,_.isInterleavedBufferAttribute?(A=_.data,S=A.stride,E=_.offset,A&&A.isInstancedInterleavedBuffer?(H(y,A.meshPerAttribute),void 0===f._maxInstanceCount&&(f._maxInstanceCount=A.meshPerAttribute*A.count)):z(y),R.bindBuffer(34962,x),j(y,M,b,w,S*T,E*T)):(_.isInstancedBufferAttribute?(H(y,_.meshPerAttribute),void 0===f._maxInstanceCount&&(f._maxInstanceCount=_.meshPerAttribute*_.count)):z(y),R.bindBuffer(34962,x),j(y,M,b,w,0,0)))}else if("instanceMatrix"===p){var S,E,A=P.get(d.instanceMatrix);void 0!==A&&(S=A.buffer,E=A.type,H(y+0,1),H(y+1,1),H(y+2,1),H(y+3,1),R.bindBuffer(34962,S),R.vertexAttribPointer(y+0,4,E,!1,64,0),R.vertexAttribPointer(y+1,4,E,!1,64,16),R.vertexAttribPointer(y+2,4,E,!1,64,32),R.vertexAttribPointer(y+3,4,E,!1,64,48))}else if(void 0!==v){var L=v[p];if(void 0!==L)switch(L.length){case 2:R.vertexAttrib2fv(y,L);break;case 3:R.vertexAttrib3fv(y,L);break;case 4:R.vertexAttrib4fv(y,L);break;default:R.vertexAttrib1fv(y,L)}}}}G()}null!==i&&R.bindBuffer(34963,P.get(i).buffer)}},reset:s,resetDefaultState:t,dispose:function(){for(var e in s(),I){var t,n=I[e];for(t in n){var r,i=n[t];for(r in i)o(i[r].object),delete i[r];delete n[t]}delete I[e]}},releaseStatesOfGeometry:function(e){if(void 0!==I[e.id]){var t,n=I[e.id];for(t in n){var r,i=n[t];for(r in i)o(i[r].object),delete i[r];delete n[t]}delete I[e.id]}},releaseStatesOfProgram:function(e){for(var t in I){t=I[t];if(void 0!==t[e.id]){var n,r=t[e.id];for(n in r)o(r[n].object),delete r[n];delete t[e.id]}}},initAttributes:U,enableAttribute:z,disableUnusedAttributes:G}}function Qi(o,s,l,e){var u,c=e.isWebGL2;this.setMode=function(e){u=e},this.render=function(e,t){o.drawArrays(u,e,t),l.update(t,u)},this.renderInstances=function(e,t,n,r){if(0!==r){var i,a;if(c)i=o,a="drawArraysInstanced";else if(a="drawArraysInstancedANGLE",null===(i=s.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");i[a](u,t,n,r),l.update(n,u,r)}}}function Ji(t,n,e){var r;function i(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,o=void 0!==e.precision?e.precision:"highp",s=i(o),s=(s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s),!0===e.logarithmicDepthBuffer),e=t.getParameter(34930),l=t.getParameter(35660),u=t.getParameter(3379),c=t.getParameter(34076),h=t.getParameter(34921),d=t.getParameter(36347),f=t.getParameter(36348),p=t.getParameter(36349),m=0<l,g=a||!!n.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){var e;return void 0===r&&(e=n.get("EXT_texture_filter_anisotropic"),r=null!==e?t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0),r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:s,maxTextures:e,maxVertexTextures:l,maxTextureSize:u,maxCubemapSize:c,maxAttributes:h,maxVertexUniforms:d,maxVaryings:f,maxFragmentUniforms:p,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:a?t.getParameter(36183):0}}function Ki(){var u=this,c=null,h=0,d=!1,f=!1,p=new wr,m=new gn,g={value:null,needsUpdate:!1};function v(){g.value!==c&&(g.value=c,g.needsUpdate=0<h),u.numPlanes=h,u.numIntersection=0}function y(e,t,n,r){var i=null!==e?e.length:0,a=null;if(0!==i){if(a=g.value,!0!==r||null===a){var r=n+4*i,o=t.matrixWorldInverse;m.getNormalMatrix(o),(null===a||a.length<r)&&(a=new Float32Array(r));for(var s=0,l=n;s!==i;++s,l+=4)p.copy(e[s]).applyMatrix4(o,m),p.normal.toArray(a,l),a[l+3]=p.constant}g.value=a,g.needsUpdate=!0}return u.numPlanes=i,u.numIntersection=0,a}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,n){var r=0!==e.length||t||0!==h||d;return d=t,c=y(e,n,0),h=e.length,r},this.beginShadows=function(){f=!0,y(null)},this.endShadows=function(){f=!1,v()},this.setState=function(e,t,n,r,i,a){if(!d||null===e||0===e.length||f&&!n)f?y(null):v();else{var n=f?0:h,o=4*n,s=i.clippingState||null;g.value=s;for(var s=y(e,r,o,a),l=0;l!==o;++l)s[l]=c[l];i.clippingState=s,this.numIntersection=t?this.numPlanes:0,this.numPlanes+=n}}}function $i(n){var r={};return{get:function(e){if(void 0!==r[e])return r[e];var t;switch(e){case"WEBGL_depth_texture":t=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":t=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":t=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":t=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=n.getExtension(e)}return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),r[e]=t}}}function ea(e,g,i,a){var o=new WeakMap,v=new WeakMap;function s(e){var t,e=e.target,n=o.get(e);for(t in null!==n.index&&g.remove(n.index),n.attributes)g.remove(n.attributes[t]);e.removeEventListener("dispose",s),o.delete(e);var r=v.get(n);r&&(g.remove(r),v.delete(n)),a.releaseStatesOfGeometry(e),!0===e.isInstancedBufferGeometry&&delete e._maxInstanceCount,i.memory.geometries--}function r(e){var t=[],n=e.index,r=e.attributes.position,i=0;if(null!==n)for(var a=n.array,i=n.version,o=0,s=a.length;o<s;o+=3){var l=a[o+0],u=a[o+1],c=a[o+2];t.push(l,u,u,c,c,l)}else{n=r.array;i=r.version;for(var h=0,d=n.length/3-1;h<d;h+=3){var f=h+0,p=h+1,m=h+2;t.push(f,p,p,m,m,f)}}r=new(65535<Kr(t)?Zr:Xr)(t,1),r.version=i,n=v.get(e);n&&g.remove(n),v.set(e,r)}return{get:function(e,t){var n=o.get(t);return n||(t.addEventListener("dispose",s),t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new $).setFromObject(e)),n=t._bufferGeometry),o.set(t,n),i.memory.geometries++),n},update:function(e){var t,n=e.attributes;for(t in n)g.update(n[t],34962);var r,i=e.morphAttributes;for(r in i)for(var a=i[r],o=0,s=a.length;o<s;o++)g.update(a[o],34962)},getWireframeAttribute:function(e){var t,n=v.get(e);return(!n||null!==(t=e.index)&&n.version<t.version)&&r(e),v.get(e)}}}function ta(o,s,l,e){var u,c,h,d=e.isWebGL2;this.setMode=function(e){u=e},this.setIndex=function(e){c=e.type,h=e.bytesPerElement},this.render=function(e,t){o.drawElements(u,t,c,e*h),l.update(t,u)},this.renderInstances=function(e,t,n,r){if(0!==r){var i,a;if(d)i=o,a="drawElementsInstanced";else if(a="drawElementsInstancedANGLE",null===(i=s.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");i[a](u,n,c,t*h,r),l.update(n,u,r)}}}function na(e){var r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(e,t,n){switch(n=n||1,r.calls++,t){case 4:r.triangles+=n*(e/3);break;case 1:r.lines+=n*(e/2);break;case 3:r.lines+=n*(e-1);break;case 2:r.lines+=n*e;break;case 0:r.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}}}function ra(e,t){return e[0]-t[0]}function ia(e,t){return Math.abs(t[1])-Math.abs(e[1])}function aa(v){for(var y={},_=new Float32Array(8),x=[],e=0;e<8;e++)x[e]=[e,0];return{update:function(e,t,n,r){var i=e.morphTargetInfluences,a=void 0===i?0:i.length;if(void 0===(o=y[t.id])){for(var o=[],s=0;s<a;s++)o[s]=[s,0];y[t.id]=o}for(var l=0;l<a;l++){var u=o[l];u[0]=l,u[1]=i[l]}o.sort(ia);for(var c=0;c<8;c++)c<a&&o[c][1]?(x[c][0]=o[c][0],x[c][1]=o[c][1]):(x[c][0]=Number.MAX_SAFE_INTEGER,x[c][1]=0);x.sort(ra);for(var h=n.morphTargets&&t.morphAttributes.position,d=n.morphNormals&&t.morphAttributes.normal,f=0,p=0;p<8;p++){var m=x[p],g=m[0],m=m[1];g!==Number.MAX_SAFE_INTEGER&&m?(h&&t.getAttribute("morphTarget"+p)!==h[g]&&t.setAttribute("morphTarget"+p,h[g]),d&&t.getAttribute("morphNormal"+p)!==d[g]&&t.setAttribute("morphNormal"+p,d[g]),f+=_[p]=m):(h&&void 0!==t.getAttribute("morphTarget"+p)&&t.deleteAttribute("morphTarget"+p),d&&void 0!==t.getAttribute("morphNormal"+p)&&t.deleteAttribute("morphNormal"+p),_[p]=0)}e=t.morphTargetsRelative?1:1-f,r.getUniforms().setValue(v,"morphTargetBaseInfluence",e),r.getUniforms().setValue(v,"morphTargetInfluences",_)}}}function oa(e,i,a,o){var s=new WeakMap;return{update:function(e){var t=o.render.frame,n=e.geometry,r=i.get(e,n);return s.get(r)!==t&&(n.isGeometry&&r.updateFromObject(e),i.update(r),s.set(r,t)),e.isInstancedMesh&&a.update(e.instanceMatrix,34962),r},dispose:function(){s=new WeakMap}}}function sa(e,t,n,r,i,a,o,s,l,u){d.call(this,e=void 0!==e?e:[],t=void 0!==t?t:Oe,n,r,i,a,o=void 0!==o?o:tt,s,l,u),this.flipY=!1}function la(e,t,n,r){d.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=z,this.minFilter=z,this.wrapR=Ue,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function ua(e,t,n,r){d.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=z,this.minFilter=z,this.wrapR=Ue,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Xi.physical={uniforms:Pi([Xi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new x(0)},transparency:{value:0}}]),vertexShader:_.meshphysical_vert,fragmentShader:_.meshphysical_frag},((sa.prototype=Object.create(d.prototype)).constructor=sa).prototype.isCubeTexture=!0,Object.defineProperty(sa.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),((la.prototype=Object.create(d.prototype)).constructor=la).prototype.isDataTexture2DArray=!0,((ua.prototype=Object.create(d.prototype)).constructor=ua).prototype.isDataTexture3D=!0;var ca=new d,ha=new la,da=new ua,fa=new sa,pa=[],ma=[],ga=new Float32Array(16),va=new Float32Array(9),ya=new Float32Array(4);function _a(e,t,n){var r=e[0];if(r<=0||0<r)return e;var i=t*n,a=pa[i];if(void 0===a&&(a=new Float32Array(i),pa[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)e[o].toArray(a,s+=n)}return a}function xa(e,t){if(e.length===t.length){for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return;return 1}}function ba(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function wa(e,t){var n=ma[t];void 0===n&&(n=new Int32Array(t),ma[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ma(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ta(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y):xa(n,t)||(e.uniform2fv(this.addr,t),ba(n,t))}function Sa(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z):void 0!==t.r?n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b):xa(n,t)||(e.uniform3fv(this.addr,t),ba(n,t))}function Ea(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w):xa(n,t)||(e.uniform4fv(this.addr,t),ba(n,t))}function Aa(e,t){var n=this.cache,r=t.elements;void 0===r?xa(n,t)||(e.uniformMatrix2fv(this.addr,!1,t),ba(n,t)):xa(n,r)||(ya.set(r),e.uniformMatrix2fv(this.addr,!1,ya),ba(n,r))}function La(e,t){var n=this.cache,r=t.elements;void 0===r?xa(n,t)||(e.uniformMatrix3fv(this.addr,!1,t),ba(n,t)):xa(n,r)||(va.set(r),e.uniformMatrix3fv(this.addr,!1,va),ba(n,r))}function Ra(e,t){var n=this.cache,r=t.elements;void 0===r?xa(n,t)||(e.uniformMatrix4fv(this.addr,!1,t),ba(n,t)):xa(n,r)||(ga.set(r),e.uniformMatrix4fv(this.addr,!1,ga),ba(n,r))}function Ca(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||ca,i)}function Pa(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ha,i)}function Oa(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||da,i)}function Da(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||fa,i)}function Na(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ia(e,t){var n=this.cache;xa(n,t)||(e.uniform2iv(this.addr,t),ba(n,t))}function ka(e,t){var n=this.cache;xa(n,t)||(e.uniform3iv(this.addr,t),ba(n,t))}function Ba(e,t){var n=this.cache;xa(n,t)||(e.uniform4iv(this.addr,t),ba(n,t))}function Fa(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ua(e,t){e.uniform1fv(this.addr,t)}function za(e,t){e.uniform1iv(this.addr,t)}function Ha(e,t){e.uniform2iv(this.addr,t)}function Ga(e,t){e.uniform3iv(this.addr,t)}function ja(e,t){e.uniform4iv(this.addr,t)}function Va(e,t){t=_a(t,this.size,2);e.uniform2fv(this.addr,t)}function Wa(e,t){t=_a(t,this.size,3);e.uniform3fv(this.addr,t)}function qa(e,t){t=_a(t,this.size,4);e.uniform4fv(this.addr,t)}function Xa(e,t){t=_a(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,t)}function Ya(e,t){t=_a(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,t)}function Za(e,t){t=_a(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,t)}function Qa(e,t,n){var r=t.length,i=wa(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||ca,i[a])}function Ja(e,t,n){var r=t.length,i=wa(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||fa,i[a])}function Ka(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=(e=>{switch(e){case 5126:return Ma;case 35664:return Ta;case 35665:return Sa;case 35666:return Ea;case 35674:return Aa;case 35675:return La;case 35676:return Ra;case 5124:case 35670:return Na;case 35667:case 35671:return Ia;case 35668:case 35672:return ka;case 35669:case 35673:return Ba;case 5125:return Fa;case 35678:case 36198:case 36298:case 36306:case 35682:return Ca;case 35679:case 36299:case 36307:return Oa;case 35680:case 36300:case 36308:case 36293:return Da;case 36289:case 36303:case 36311:case 36292:return Pa}})(t.type)}function $a(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=(e=>{switch(e){case 5126:return Ua;case 35664:return Va;case 35665:return Wa;case 35666:return qa;case 35674:return Xa;case 35675:return Ya;case 35676:return Za;case 5124:case 35670:return za;case 35667:case 35671:return Ha;case 35668:case 35672:return Ga;case 35669:case 35673:return ja;case 35678:case 36198:case 36298:case 36306:case 35682:return Qa;case 35680:case 36300:case 36308:case 36293:return Ja}})(t.type)}function eo(e){this.id=e,this.seq=[],this.map={}}$a.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ba(t,e)},eo.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var to=/([\w\d_]+)(\])?(\[|\.)?/g;function no(e,t){e.seq.push(t),e.map[t.id]=t}function ro(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r),a=e.getUniformLocation(t,i.name),o=(p=f=d=h=c=u=l=s=o=void 0,i),s=a,l=this,u=o.name,c=u.length;for(to.lastIndex=0;;){var h=to.exec(u),d=to.lastIndex,f=h[1],p=h[3];if("]"===h[2]&&(f|=0),void 0===p||"["===p&&d+2===c){no(l,new(void 0===p?Ka:$a)(f,o,s));break}h=l.map[f];void 0===h&&no(l,h=new eo(f)),l=h}}}function io(e,t,n){t=e.createShader(t);return e.shaderSource(t,n),e.compileShader(t),t}ro.prototype.setValue=function(e,t,n,r){t=this.map[t];void 0!==t&&t.setValue(e,n,r)},ro.prototype.setOptional=function(e,t,n){t=t[n];void 0!==t&&this.setValue(e,n,t)},ro.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},ro.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var ao=0;function oo(e){switch(e){case en:return["Linear","( value )"];case tn:return["sRGB","( value )"];case rn:return["RGBE","( value )"];case on:return["RGBM","( value, 7.0 )"];case sn:return["RGBM","( value, 16.0 )"];case ln:return["RGBD","( value, 256.0 )"];case nn:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case an:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function so(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+(e=>{for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")})(e.getShaderSource(t))}function lo(e,t){t=oo(t);return"vec4 "+e+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function uo(e){return""!==e}function co(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ho(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var fo=/^[ \t]*#include +<([\w\d./]+)>/gm;function po(e){return e.replace(fo,mo)}function mo(e,t){var n=_[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return po(n)}var go=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,vo=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function yo(e){return e.replace(vo,xo).replace(go,_o)}function _o(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),xo(0,t,n,r)}function xo(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function bo(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function wo(e,t,n,r){var i,a,o,s,l=e.getContext(),u=n.defines,c=n.vertexShader,h=n.fragmentShader,d=(f="SHADOWMAP_TYPE_BASIC",(d=n).shadowMapType===P?f="SHADOWMAP_TYPE_PCF":d.shadowMapType===E?f="SHADOWMAP_TYPE_PCF_SOFT":d.shadowMapType===O&&(f="SHADOWMAP_TYPE_VSM"),f),f=(e=>{var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Oe:case De:t="ENVMAP_TYPE_CUBE";break;case ke:case Be:t="ENVMAP_TYPE_CUBE_UV";break;case Ne:case Ie:t="ENVMAP_TYPE_EQUIREC"}return t})(n),p=(e=>{var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case De:case Ie:t="ENVMAP_MODE_REFRACTION"}return t})(n),m=(e=>{var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case A:t="ENVMAP_BLENDING_MULTIPLY";break;case N:t="ENVMAP_BLENDING_MIX";break;case I:t="ENVMAP_BLENDING_ADD"}return t})(n),g=0<e.gammaFactor?e.gammaFactor:1,v=n.isWebGL2?"":[(v=n).extensionDerivatives||v.envMapCubeUV||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||"physical"===v.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(v.extensionShaderTextureLOD||v.envMap)&&v.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(uo).join("\n"),u=(e=>{var t,n=[];for(t in e){var r=e[t];!1!==r&&n.push("#define "+t+" "+r)}return n.join("\n")})(u),y=l.createProgram(),m=(n.isRawShaderMaterial?(0<(i=[u].filter(uo).join("\n")).length&&(i+="\n"),0<(a=[v,u].filter(uo).join("\n")).length&&(a+="\n")):(i=[bo(n),"#define SHADER_NAME "+n.shaderName,u,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(uo).join("\n"),a=[v,bo(n),"#define SHADER_NAME "+n.shaderName,u,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ce?"#define TONE_MAPPING":"",n.toneMapping!==Ce?_.tonemapping_pars_fragment:"",n.toneMapping!==Ce?((e,t)=>{var n;switch(t){case k:n="Linear";break;case B:n="Reinhard";break;case F:n="OptimizedCineon";break;case U:n="ACESFilmic";break;case Pe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"})("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",_.encodings_pars_fragment,n.map?lo("mapTexelToLinear",n.mapEncoding):"",n.matcap?lo("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?lo("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?lo("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?lo("lightMapTexelToLinear",n.lightMapEncoding):"",(u="linearToOutputTexel",g=oo(g=n.outputEncoding),"vec4 "+u+"( vec4 value ) { return LinearTo"+g[0]+g[1]+"; }"),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(uo).join("\n")),c=ho(c=co(c=po(c),n),n),h=ho(h=co(h=po(h),n),n),c=yo(c),h=yo(h),n.isWebGL2&&!n.isRawShaderMaterial&&(f=!1,p=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==c.match(p)&&null!==h.match(p)&&(f=!0,c=c.replace(p,""),h=h.replace(p,"")),i=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#version 300 es\n","#define varying in",f?"":"out highp vec4 pc_fragColor;",f?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a),i+c),d=a+h,u=io(l,35633,m),g=io(l,35632,d);return l.attachShader(y,u),l.attachShader(y,g),void 0!==n.index0AttributeName?l.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&l.bindAttribLocation(y,0,"position"),l.linkProgram(y),e.debug.checkShaderErrors&&(p=l.getProgramInfoLog(y).trim(),f=l.getShaderInfoLog(u).trim(),c=l.getShaderInfoLog(g).trim(),!(m=h=!0)===l.getProgramParameter(y,35714)?(h=!1,d=so(l,u,"vertex"),e=so(l,g,"fragment"),console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(y,35715),"gl.getProgramInfoLog",p,d,e)):""!==p?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",p):""!==f&&""!==c||(m=!1),m)&&(this.diagnostics={runnable:h,programLog:p,vertexShader:{log:f,prefix:i},fragmentShader:{log:c,prefix:a}}),l.deleteShader(u),l.deleteShader(g),this.getUniforms=function(){return o=void 0===o?new ro(l,y):o},this.getAttributes=function(){return s=void 0===s?((e,t)=>{for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i).name;n[a]=e.getAttribLocation(t,a)}return n})(l,y):s},this.destroy=function(){r.releaseStatesOfProgram(this),l.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=ao++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=u,this.fragmentShader=g,this}function Mo(f,p,m,o){var s=[],g=m.isWebGL2,v=m.logarithmicDepthBuffer,y=m.floatVertexTextures,_=m.maxVertexUniforms,x=m.vertexTextures,b=m.precision,w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},i=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function M(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=en,t}return{getParameters:function(e,t,n,r,i,a,o){var s,l=r.fog,r=e.isMeshStandardMaterial?r.environment:null,r=e.envMap||r,u=w[e.type],c=o.isSkinnedMesh?(c=(c=o).skeleton.bones,y?1024:(s=Math.floor((_-20)/4),(s=Math.min(s,c.length))<c.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+c.length+" bones. This GPU supports "+s+"."),0):s)):0,h=(null!==e.precision&&(b=m.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",b,"instead."),s=e,(h=u)?(h=Xi[h],{name:s.name||s.type,uniforms:Oi.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):{name:s.name||s.type,uniforms:s.uniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}),d=(e.onBeforeCompile(h,f),f.getRenderTarget());return{isWebGL2:g,shaderID:u,shaderName:h.name,uniforms:h.uniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,defines:e.defines,isRawShaderMaterial:e.isRawShaderMaterial,isShaderMaterial:e.isShaderMaterial,precision:b,instancing:!0===o.isInstancedMesh,supportsVertexTextures:x,outputEncoding:null!==d?M(d.texture):f.outputEncoding,map:!!e.map,mapEncoding:M(e.map),matcap:!!e.matcap,matcapEncoding:M(e.matcap),envMap:!!r,envMapMode:r&&r.mapping,envMapEncoding:M(r),envMapCubeUV:!!r&&(r.mapping===ke||r.mapping===Be),lightMap:!!e.lightMap,lightMapEncoding:M(e.lightMap),aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:M(e.emissiveMap),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===hn,tangentSpaceNormalMap:e.normalMapType===cn,clearcoatMap:!!e.clearcoatMap,clearcoatRoughnessMap:!!e.clearcoatRoughnessMap,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatMap||e.clearcoatRoughnessMap||e.clearcoatNormalMap||e.displacementMap),uvsVertexOnly:!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap||!e.displacementMap),fog:!!l,useFog:e.fog,fogExp2:l&&l.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:v,skinning:e.skinning&&0<c,maxBones:c,useVertexTexture:y,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:f.maxMorphTargets,maxMorphNormals:f.maxMorphNormals,numDirLights:t.directional.length,numPointLights:t.point.length,numSpotLights:t.spot.length,numRectAreaLights:t.rectArea.length,numHemiLights:t.hemi.length,numDirLightShadows:t.directionalShadowMap.length,numPointLightShadows:t.pointShadowMap.length,numSpotLightShadows:t.spotShadowMap.length,numClippingPlanes:i,numClipIntersection:a,dithering:e.dithering,shadowMapEnabled:f.shadowMap.enabled&&0<n.length,shadowMapType:f.shadowMap.type,toneMapping:e.toneMapped?f.toneMapping:Ce,physicallyCorrectLights:f.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===q,flipSided:e.side===H,depthPacking:void 0!==e.depthPacking&&e.depthPacking,index0AttributeName:e.index0AttributeName,extensionDerivatives:e.extensions&&e.extensions.derivatives,extensionFragDepth:e.extensions&&e.extensions.fragDepth,extensionDrawBuffers:e.extensions&&e.extensions.drawBuffers,extensionShaderTextureLOD:e.extensions&&e.extensions.shaderTextureLOD,rendererExtensionFragDepth:g||null!==p.get("EXT_frag_depth"),rendererExtensionDrawBuffers:g||null!==p.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:g||null!==p.get("EXT_shader_texture_lod"),customProgramCacheKey:e.customProgramCacheKey()}},getProgramCacheKey:function(e){var t=[];if(e.shaderID?t.push(e.shaderID):(t.push(e.fragmentShader),t.push(e.vertexShader)),void 0!==e.defines)for(var n in e.defines)t.push(n),t.push(e.defines[n]);if(void 0===e.isRawShaderMaterial){for(var r=0;r<i.length;r++)t.push(e[i[r]]);t.push(f.outputEncoding),t.push(f.gammaFactor)}return t.push(e.customProgramCacheKey),t.join()},acquireProgram:function(e,t){for(var n,r=0,i=s.length;r<i;r++){var a=s[r];if(a.cacheKey===t){++(n=a).usedTimes;break}}return void 0===n&&(n=new wo(f,t,e,o),s.push(n)),n},releaseProgram:function(e){var t;0==--e.usedTimes&&(t=s.indexOf(e),s[t]=s[s.length-1],s.pop(),e.destroy())},programs:s}}function To(){var r=new WeakMap;return{get:function(e){var t=r.get(e);return void 0===t&&r.set(e,t={}),t},remove:function(e){r.delete(e)},update:function(e,t,n){r.get(e)[t]=n},dispose:function(){r=new WeakMap}}}function So(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Eo(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ao(){var s=[],l=0,o=[],u=[],c={id:-1};function h(e,t,n,r,i,a){var o=s[l];return void 0===o?(o={id:e.id,object:e,geometry:t,material:n,program:n.program||c,groupOrder:r,renderOrder:e.renderOrder,z:i,group:a},s[l]=o):(o.id=e.id,o.object=e,o.geometry=t,o.material=n,o.program=n.program||c,o.groupOrder=r,o.renderOrder=e.renderOrder,o.z=i,o.group=a),l++,o}return{opaque:o,transparent:u,init:function(){l=0,u.length=o.length=0},push:function(e,t,n,r,i,a){e=h(e,t,n,r,i,a),(!0===n.transparent?u:o).push(e)},unshift:function(e,t,n,r,i,a){e=h(e,t,n,r,i,a),(!0===n.transparent?u:o).unshift(e)},finish:function(){for(var e=l,t=s.length;e<t;e++){var n=s[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){1<o.length&&o.sort(e||So),1<u.length&&u.sort(t||Eo)}}}function Lo(){var i=new WeakMap;function a(e){e=e.target;e.removeEventListener("dispose",a),i.delete(e)}return{get:function(e,t){var n,r=i.get(e);return void 0===r?(n=new Ao,i.set(e,new WeakMap),i.get(e).set(t,n),e.addEventListener("dispose",a)):void 0===(n=r.get(t))&&(n=new Ao,r.set(t,n)),n},dispose:function(){i=new WeakMap}}}function Ro(){var n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":t={direction:new Ye,color:new x};break;case"SpotLight":t={position:new Ye,direction:new Ye,color:new x,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Ye,color:new x,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Ye,skyColor:new x,groundColor:new x};break;case"RectAreaLight":t={color:new x,position:new Ye,halfWidth:new Ye,halfHeight:new Ye}}return n[e.id]=t}}}var Co=0;function Po(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Oo(){for(var n,L=new Ro,R=(n={},{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t}}),C={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},e=0;e<9;e++)C.probe.push(new Ye);var P=new Ye,O=new Ee,D=new Ee;return{setup:function(e,t,n){for(var r=0,i=0,a=0,o=0;o<9;o++)C.probe[o].set(0,0,0);var s=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0,m=n.matrixWorldInverse;e.sort(Po);for(var g=0,v=e.length;g<v;g++){var y,_,x,b,w=e[g],M=w.color,T=w.intensity,S=w.distance,E=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)r+=M.r*T,i+=M.g*T,a+=M.b*T;else if(w.isLightProbe)for(var A=0;A<9;A++)C.probe[A].addScaledVector(w.sh.coefficients[A],T);else w.isDirectionalLight?((x=L.get(w)).color.copy(w.color).multiplyScalar(w.intensity),x.direction.setFromMatrixPosition(w.matrixWorld),P.setFromMatrixPosition(w.target.matrixWorld),x.direction.sub(P),x.direction.transformDirection(m),w.castShadow&&(y=w.shadow,(_=R.get(w)).shadowBias=y.bias,_.shadowNormalBias=y.normalBias,_.shadowRadius=y.radius,_.shadowMapSize=y.mapSize,C.directionalShadow[s]=_,C.directionalShadowMap[s]=E,C.directionalShadowMatrix[s]=w.shadow.matrix,d++),C.directional[s]=x,s++):w.isSpotLight?((y=L.get(w)).position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(m),y.color.copy(M).multiplyScalar(T),y.distance=S,y.direction.setFromMatrixPosition(w.matrixWorld),P.setFromMatrixPosition(w.target.matrixWorld),y.direction.sub(P),y.direction.transformDirection(m),y.coneCos=Math.cos(w.angle),y.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),y.decay=w.decay,w.castShadow&&(_=w.shadow,(x=R.get(w)).shadowBias=_.bias,x.shadowNormalBias=_.normalBias,x.shadowRadius=_.radius,x.shadowMapSize=_.mapSize,C.spotShadow[u]=x,C.spotShadowMap[u]=E,C.spotShadowMatrix[u]=w.shadow.matrix,p++),C.spot[u]=y,u++):w.isRectAreaLight?((S=L.get(w)).color.copy(M).multiplyScalar(T),S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(m),D.identity(),O.copy(w.matrixWorld),O.premultiply(m),D.extractRotation(O),S.halfWidth.set(.5*w.width,0,0),S.halfHeight.set(0,.5*w.height,0),S.halfWidth.applyMatrix4(D),S.halfHeight.applyMatrix4(D),C.rectArea[c]=S,c++):w.isPointLight?((M=L.get(w)).position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(m),M.color.copy(w.color).multiplyScalar(w.intensity),M.distance=w.distance,M.decay=w.decay,w.castShadow&&(S=w.shadow,(b=R.get(w)).shadowBias=S.bias,b.shadowNormalBias=S.normalBias,b.shadowRadius=S.radius,b.shadowMapSize=S.mapSize,b.shadowCameraNear=S.camera.near,b.shadowCameraFar=S.camera.far,C.pointShadow[l]=b,C.pointShadowMap[l]=E,C.pointShadowMatrix[l]=w.shadow.matrix,f++),C.point[l]=M,l++):w.isHemisphereLight&&((S=L.get(w)).direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(m),S.direction.normalize(),S.skyColor.copy(w.color).multiplyScalar(T),S.groundColor.copy(w.groundColor).multiplyScalar(T),C.hemi[h]=S,h++)}C.ambient[0]=r,C.ambient[1]=i,C.ambient[2]=a,(n=C.hash).directionalLength===s&&n.pointLength===l&&n.spotLength===u&&n.rectAreaLength===c&&n.hemiLength===h&&n.numDirectionalShadows===d&&n.numPointShadows===f&&n.numSpotShadows===p||(C.directional.length=s,C.spot.length=u,C.rectArea.length=c,C.point.length=l,C.hemi.length=h,C.directionalShadow.length=d,C.directionalShadowMap.length=d,C.pointShadow.length=f,C.pointShadowMap.length=f,C.spotShadow.length=p,C.spotShadowMap.length=p,C.directionalShadowMatrix.length=d,C.pointShadowMatrix.length=f,C.spotShadowMatrix.length=p,n.directionalLength=s,n.pointLength=l,n.spotLength=u,n.rectAreaLength=c,n.hemiLength=h,n.numDirectionalShadows=d,n.numPointShadows=f,n.numSpotShadows=p,C.version=Co++)},state:C}}function Do(){var t=new Oo,n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function(e){t.setup(n,r,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function No(){var r=new WeakMap;function i(e){e=e.target;e.removeEventListener("dispose",i),r.delete(e)}return{get:function(e,t){var n;return!1===r.has(e)?(n=new Do,r.set(e,new WeakMap),r.get(e).set(t,n),e.addEventListener("dispose",i)):!1===r.get(e).has(t)?(n=new Do,r.get(e).set(t,n)):n=r.get(e).get(t),n},dispose:function(){r=new WeakMap}}}function Io(e){o.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function ko(e){o.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ye,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}((Io.prototype=Object.create(o.prototype)).constructor=Io).prototype.isMeshDepthMaterial=!0,Io.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},((ko.prototype=Object.create(o.prototype)).constructor=ko).prototype.isMeshDistanceMaterial=!0,ko.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var Bo="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",Fo="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Uo(v,y,_){var x=new Gi,b=new Xe,w=new Xe,M=new Se,i=[],a=[],h={},d={0:H,1:D,2:q},T=new Ii({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},vertexShader:Fo,fragmentShader:Bo}),S=T.clone(),e=(S.defines.HORIZONAL_PASS=1,new $),E=(e.setAttribute("position",new R(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3)),new C(e,T)),A=this;function f(e,t,n){var n=e<<0|t<<1|n<<2,r=i[n];return void 0===r&&(r=new Io({depthPacking:un,morphTargets:e,skinning:t}),i[n]=r),r}function p(e,t,n){var n=e<<0|t<<1|n<<2,r=a[n];return void 0===r&&(r=new ko({morphTargets:e,skinning:t}),a[n]=r),r}function L(e,t,n,r,i,a,o){var s,l=null,u=f,c=e.customDepthMaterial;return!0===r.isPointLight&&(u=p,c=e.customDistanceMaterial),l=void 0===c?(!(s=!1)===n.morphTargets&&(s=t.morphAttributes&&t.morphAttributes.position&&0<t.morphAttributes.position.length),!(t=!1)===e.isSkinnedMesh&&(!0===n.skinning?t=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),u(s,t,!0===e.isInstancedMesh)):c,v.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length&&(u=l.uuid,s=n.uuid,void 0===(t=h[u])&&(h[u]=t={}),void 0===(e=t[s])&&(e=l.clone(),t[s]=e),l=e),l.visible=n.visible,l.wireframe=n.wireframe,l.side=o===O?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=i,l.farDistance=a),l}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=P,this.render=function(e,t,n){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==e.length){var r=v.getRenderTarget(),i=v.getActiveCubeFace(),a=v.getActiveMipmapLevel(),o=v.state;o.setBlending(Y),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,l,u=0,c=e.length;u<c;u++){var h=e[u],d=h.shadow;if(!1!==d.autoUpdate||!1!==d.needsUpdate)if(void 0===d)console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");else{b.copy(d.mapSize);for(var f=d.getFrameExtents(),p=(b.multiply(f),w.copy(d.mapSize),(b.x>_||b.y>_)&&(b.x>_&&(w.x=Math.floor(_/f.x),b.x=w.x*f.x,d.mapSize.x=w.x),b.y>_)&&(w.y=Math.floor(_/f.y),b.y=w.y*f.y,d.mapSize.y=w.y),null!==d.map||d.isPointLightShadow||this.type!==O||(d.map=new _n(b.x,b.y,f={minFilter:G,magFilter:G,format:nt}),d.map.texture.name=h.name+".shadowMap",d.mapPass=new _n(b.x,b.y,f),d.camera.updateProjectionMatrix()),null===d.map&&(d.map=new _n(b.x,b.y,{minFilter:z,magFilter:z,format:nt}),d.map.texture.name=h.name+".shadowMap",d.camera.updateProjectionMatrix()),v.setRenderTarget(d.map),v.clear(),d.getViewportCount()),m=0;m<p;m++){var g=d.getViewport(m);M.set(w.x*g.x,w.y*g.y,w.x*g.z,w.y*g.w),o.viewport(M),d.updateMatrices(h,m),x=d.getFrustum(),!function e(t,n,r,i,a){if(!1===t.visible)return;var o=t.layers.test(n.layers);if(o&&(t.isMesh||t.isLine||t.isPoints)&&(t.castShadow||t.receiveShadow&&a===O)&&(!t.frustumCulled||x.intersectsObject(t))){t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld);var s=y.update(t),l=t.material;if(Array.isArray(l))for(var u=s.groups,c=0,h=u.length;c<h;c++){var d=u[c],f=l[d.materialIndex];f&&f.visible&&(f=L(t,s,f,i,r.near,r.far,a),v.renderBufferDirect(r,null,s,f,t,d))}else l.visible&&(o=L(t,s,l,i,r.near,r.far,a),v.renderBufferDirect(r,null,s,o,t,null))}var p=t.children;for(var m=0,g=p.length;m<g;m++)e(p[m],n,r,i,a)}(t,n,d.camera,h,this.type)}d.isPointLightShadow||this.type!==O||(f=d,s=n,l=void 0,l=y.update(E),T.uniforms.shadow_pass.value=f.map.texture,T.uniforms.resolution.value=f.mapSize,T.uniforms.radius.value=f.radius,v.setRenderTarget(f.mapPass),v.clear(),v.renderBufferDirect(s,null,l,T,E,null),S.uniforms.shadow_pass.value=f.mapPass.texture,S.uniforms.resolution.value=f.mapSize,S.uniforms.radius.value=f.radius,v.setRenderTarget(f.map),v.clear(),v.renderBufferDirect(s,null,l,S,E,null)),d.needsUpdate=!1}}A.needsUpdate=!1,v.setRenderTarget(r,i,a)}}}function zo(c,k,e){e=e.isWebGL2;var r=new function(){var t=!1,a=new Se,n=null,o=new Se(0,0,0,0);return{setMask:function(e){n===e||t||(c.colorMask(e,e,e,e),n=e)},setLocked:function(e){t=e},setClear:function(e,t,n,r,i){!0===i&&(e*=r,t*=r,n*=r),a.set(e,t,n,r),!1===o.equals(a)&&(c.clearColor(e,t,n,r),o.copy(a))},reset:function(){t=!1,n=null,o.set(-1,0,0,0)}}},i=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){(e?C:P)(2929)},setMask:function(e){n===e||t||(c.depthMask(e),n=e)},setFunc:function(e){if(r!==e){if(e)switch(e){case ye:c.depthFunc(512);break;case _e:c.depthFunc(519);break;case xe:c.depthFunc(513);break;case be:c.depthFunc(515);break;case we:c.depthFunc(514);break;case Me:c.depthFunc(518);break;case Le:c.depthFunc(516);break;case Re:c.depthFunc(517);break;default:c.depthFunc(515)}else c.depthFunc(515);r=e}},setLocked:function(e){t=e},setClear:function(e){i!==e&&(c.clearDepth(e),i=e)},reset:function(){t=!1,i=r=n=null}}},a=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?C:P)(2960)},setMask:function(e){n===e||t||(c.stencilMask(e),n=e)},setFunc:function(e,t,n){r===e&&i===t&&a===n||(c.stencilFunc(e,t,n),r=e,i=t,a=n)},setOp:function(e,t,n){o===e&&s===t&&l===n||(c.stencilOp(e,t,n),o=e,s=t,l=n)},setLocked:function(e){t=e},setClear:function(e){u!==e&&(c.clearStencil(e),u=e)},reset:function(){t=!1,u=l=s=o=a=i=r=n=null}}},t={},n=null,l=null,u=null,h=null,d=null,f=null,p=null,m=null,g=null,v=!1,o=null,s=null,y=null,_=null,x=null,B=c.getParameter(35661),b=!1,w=0,M=c.getParameter(7938),T=(-1!==M.indexOf("WebGL")?(w=parseFloat(/^WebGL\ ([0-9])/.exec(M)[1]),b=1<=w):-1!==M.indexOf("OpenGL ES")&&(w=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(M)[1]),b=2<=w),null),S={},E=new Se,A=new Se;function L(e,t,n){var r=new Uint8Array(4),i=c.createTexture();c.bindTexture(e,i),c.texParameteri(e,10241,9728),c.texParameteri(e,10240,9728);for(var a=0;a<n;a++)c.texImage2D(t+a,0,6408,1,1,0,6408,5121,r);return i}var R={};function C(e){!0!==t[e]&&(c.enable(e),t[e]=!0)}function P(e){!1!==t[e]&&(c.disable(e),t[e]=!1)}R[3553]=L(3553,3553,1),R[34067]=L(34067,34069,6),r.setClear(0,0,0,1),i.setClear(1),a.setClear(0),C(2929),i.setFunc(be),I(!1),F(V),C(2884),N(Y);var O={},D=(O[ne]=32774,O[re]=32778,O[ie]=32779,e?(O[ae]=32775,O[oe]=32776):null!==(M=k.get("EXT_blend_minmax"))&&(O[ae]=M.MIN_EXT,O[oe]=M.MAX_EXT),{});function N(e,t,n,r,i,a,o,s){if(e===Y)l&&(P(3042),l=!1);else if(l||(C(3042),l=!0),e!==te){if(e!==u||s!==v){if(h===ne&&p===ne||(c.blendEquation(32774),p=h=ne),s)switch(e){case Z:c.blendFuncSeparate(1,771,1,771);break;case Q:c.blendFunc(1,1);break;case J:c.blendFuncSeparate(0,0,769,771);break;case ee:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case Z:c.blendFuncSeparate(770,771,1,771);break;case Q:c.blendFunc(770,1);break;case J:c.blendFunc(0,769);break;case ee:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}g=m=f=d=null,u=e,v=s}}else i=i||t,a=a||n,o=o||r,t===h&&i===p||(c.blendEquationSeparate(O[t],O[i]),h=t,p=i),n===d&&r===f&&a===m&&o===g||(c.blendFuncSeparate(D[n],D[r],D[a],D[o]),d=n,f=r,m=a,g=o),u=e,v=null}function I(e){o!==e&&(e?c.frontFace(2304):c.frontFace(2305),o=e)}function F(e){e!==j?(C(2884),e!==s&&(e===V?c.cullFace(1029):e===W?c.cullFace(1028):c.cullFace(1032))):P(2884),s=e}function U(e,t,n){e?(C(32823),_===t&&x===n||(c.polygonOffset(t,n),_=t,x=n)):P(32823)}function z(e){T!==(e=void 0===e?33984+B-1:e)&&(c.activeTexture(e),T=e)}return D[se]=0,D[le]=1,D[ue]=768,D[he]=770,D[ve]=776,D[me]=774,D[fe]=772,D[ce]=769,D[de]=771,D[ge]=775,D[pe]=773,{buffers:{color:r,depth:i,stencil:a},enable:C,disable:P,useProgram:function(e){return n!==e&&(c.useProgram(e),n=e,!0)},setBlending:N,setMaterial:function(e,t){(e.side===q?P:C)(2884);var n=e.side===H,t=(I(n=t?!n:n),e.blending===Z&&!1===e.transparent?N(Y):N(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),i.setFunc(e.depthFunc),i.setTest(e.depthTest),i.setMask(e.depthWrite),r.setMask(e.colorWrite),e.stencilWrite);a.setTest(t),t&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),U(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:I,setCullFace:F,setLineWidth:function(e){e!==y&&(b&&c.lineWidth(e),y=e)},setPolygonOffset:U,setScissorTest:function(e){(e?C:P)(3089)},activeTexture:z,bindTexture:function(e,t){null===T&&z();var n=S[T];void 0===n&&(S[T]=n={type:void 0,texture:void 0}),n.type===e&&n.texture===t||(c.bindTexture(e,t||R[e]),n.type=e,n.texture=t)},unbindTexture:function(){var e=S[T];void 0!==e&&void 0!==e.type&&(c.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{c.compressedTexImage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{c.texImage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{c.texImage3D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===E.equals(e)&&(c.scissor(e.x,e.y,e.z,e.w),E.copy(e))},viewport:function(e){!1===A.equals(e)&&(c.viewport(e.x,e.y,e.z,e.w),A.copy(e))},reset:function(){t={},S={},s=o=u=n=T=null,r.reset(),i.reset(),a.reset()}}}function Ho(b,r,w,M,i,T,u){var a,S=i.isWebGL2,t=i.maxTextures,E=i.maxCubemapSize,B=i.maxTextureSize,F=i.maxSamples,o=new WeakMap,n=!1;try{n="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function s(e,t){return n?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function A(e,t,n,r){var i=1;return(i=e.width>r||e.height>r?r/Math.max(e.width,e.height):i)<1||!0===t?"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?(t=(r=t?Te.floorPowerOfTwo:Math.floor)(i*e.width),r=r(i*e.height),void 0===a&&(a=s(t,r)),(i=n?s(t,r):a).width=t,i.height=r,i.getContext("2d").drawImage(e,0,0,t,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+t+"x"+r+")."),i):("data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e):e}function L(e){return Te.isPowerOfTwo(e.width)&&Te.isPowerOfTwo(e.height)}function R(e,t){return e.generateMipmaps&&t&&e.minFilter!==z&&e.minFilter!==G}function C(e,t,n,r){b.generateMipmap(e),M.get(t).__maxMipLevel=Math.log(Math.max(n,r))*Math.LOG2E}function P(e,t,n){if(!1===S)return t;if(null!==e){if(void 0!==b[e])return b[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}e=t;return 6403===t&&(5126===n&&(e=33326),5131===n&&(e=33325),5121===n)&&(e=33321),6407===t&&(5126===n&&(e=34837),5131===n&&(e=34843),5121===n)&&(e=32849),33325!==(e=6408===t&&(5126===n&&(e=34836),5131===n&&(e=34842),5121===n)?32856:e)&&33326!==e&&34842!==e&&34836!==e||r.get("EXT_color_buffer_float"),e}function l(e){return e===z||e===He||e===Ge?9728:9729}function c(e){var t,n,e=e.target;e.removeEventListener("dispose",c),t=e,void 0!==(n=M.get(t)).__webglInit&&(b.deleteTexture(n.__webglTexture),M.remove(t)),e.isVideoTexture&&o.delete(e),u.memory.textures--}function h(e){var e=e.target,t=(e.removeEventListener("dispose",h),M.get(e)),n=M.get(e.texture);if(e){if(void 0!==n.__webglTexture&&b.deleteTexture(n.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var r=0;r<6;r++)b.deleteFramebuffer(t.__webglFramebuffer[r]),t.__webglDepthbuffer&&b.deleteRenderbuffer(t.__webglDepthbuffer[r]);else b.deleteFramebuffer(t.__webglFramebuffer),t.__webglDepthbuffer&&b.deleteRenderbuffer(t.__webglDepthbuffer),t.__webglMultisampledFramebuffer&&b.deleteFramebuffer(t.__webglMultisampledFramebuffer),t.__webglColorRenderbuffer&&b.deleteRenderbuffer(t.__webglColorRenderbuffer),t.__webglDepthRenderbuffer&&b.deleteRenderbuffer(t.__webglDepthRenderbuffer);M.remove(e.texture),M.remove(e)}u.memory.textures--}var d=0;function f(e,t){var n,r=M.get(e);if(e.isVideoTexture&&(n=e,i=u.render.frame,o.get(n)!==i)&&(o.set(n,i),n.update()),0<e.version&&r.__version!==e.version){var i=e.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void y(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}w.activeTexture(33984+t),w.bindTexture(3553,r.__webglTexture)}function p(e,t){if(6===e.image.length){var n=M.get(e);if(0<e.version&&n.__version!==e.version){D(n,e),w.activeTexture(33984+t),w.bindTexture(34067,n.__webglTexture),b.pixelStorei(37440,e.flipY);for(var r=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),i=e.image[0]&&e.image[0].isDataTexture,a=[],o=0;o<6;o++)a[o]=r||i?i?e.image[o].image:e.image[o]:A(e.image[o],!1,!0,E);var s=a[0],l=L(s)||S,u=T.convert(e.format),c=T.convert(e.type),h=P(e.internalFormat,u,c);if(O(34067,e,l),r){for(var d=0;d<6;d++)for(var f=a[d].mipmaps,p=0;p<f.length;p++){var m=f[p];e.format!==nt&&e.format!==tt?null!==u?w.compressedTexImage2D(34069+d,p,h,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):w.texImage2D(34069+d,p,h,m.width,m.height,0,u,c,m.data)}n.__maxMipLevel=f.length-1}else{f=e.mipmaps;for(var g=0;g<6;g++)if(i){w.texImage2D(34069+g,0,h,a[g].width,a[g].height,0,u,c,a[g].data);for(var v=0;v<f.length;v++){var y=f[v].image[g].image;w.texImage2D(34069+g,v+1,h,y.width,y.height,0,u,c,y.data)}}else{w.texImage2D(34069+g,0,h,u,c,a[g]);for(var _=0;_<f.length;_++){var x=f[_];w.texImage2D(34069+g,_+1,h,u,c,x.image[g])}}n.__maxMipLevel=f.length}R(e,l)&&C(34067,e,s.width,s.height),n.__version=e.version,e.onUpdate&&e.onUpdate(e)}else w.activeTexture(33984+t),w.bindTexture(34067,n.__webglTexture)}}function m(e,t){w.activeTexture(33984+t),w.bindTexture(34067,M.get(e).__webglTexture)}var g={},v=(g[Fe]=10497,g[Ue]=33071,g[ze]=33648,{});function O(e,t,n){n?(b.texParameteri(e,10242,g[t.wrapS]),b.texParameteri(e,10243,g[t.wrapT]),32879!==e&&35866!==e||b.texParameteri(e,32882,g[t.wrapR]),b.texParameteri(e,10240,v[t.magFilter]),b.texParameteri(e,10241,v[t.minFilter])):(b.texParameteri(e,10242,33071),b.texParameteri(e,10243,33071),32879!==e&&35866!==e||b.texParameteri(e,32882,33071),t.wrapS===Ue&&t.wrapT===Ue||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),b.texParameteri(e,10240,l(t.magFilter)),b.texParameteri(e,10241,l(t.minFilter)),t.minFilter!==z&&t.minFilter!==G&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));n=r.get("EXT_texture_filter_anisotropic");!n||t.type===Qe&&null===r.get("OES_texture_float_linear")||t.type===Je&&null===(S||r.get("OES_texture_half_float_linear"))||(1<t.anisotropy||M.get(t).__currentAnisotropy)&&(b.texParameterf(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,i.getMaxAnisotropy())),M.get(t).__currentAnisotropy=t.anisotropy)}function D(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",c),e.__webglTexture=b.createTexture(),u.memory.textures++)}function y(e,t,n){var r,i=3553,n=(t.isDataTexture2DArray&&(i=35866),t.isDataTexture3D&&(i=32879),D(e,t),w.activeTexture(33984+n),w.bindTexture(i,e.__webglTexture),b.pixelStorei(37440,t.flipY),b.pixelStorei(37441,t.premultiplyAlpha),b.pixelStorei(3317,t.unpackAlignment),n=t,!S&&(n.wrapS!==Ue||n.wrapT!==Ue||n.minFilter!==z&&n.minFilter!==G)&&!1===L(t.image)),n=A(t.image,n,!1,B),a=L(n)||S,o=T.convert(t.format),s=T.convert(t.type),l=P(t.internalFormat,o,s),u=(O(i,t,a),t.mipmaps);if(t.isDepthTexture)l=6402,S?l=t.type===Qe?36012:t.type===Ze?33190:t.type===$e?35056:33189:t.type===Qe&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),t.format===ot&&6402===l&&t.type!==qe&&t.type!==Ze&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=qe,s=T.convert(t.type)),t.format===st&&6402===l&&(l=34041,t.type!==$e)&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=$e,s=T.convert(t.type)),w.texImage2D(3553,0,l,n.width,n.height,0,o,s,null);else if(t.isDataTexture)if(0<u.length&&a){for(var c=0,h=u.length;c<h;c++)r=u[c],w.texImage2D(3553,c,l,r.width,r.height,0,o,s,r.data);t.generateMipmaps=!1,e.__maxMipLevel=u.length-1}else w.texImage2D(3553,0,l,n.width,n.height,0,o,s,n.data),e.__maxMipLevel=0;else if(t.isCompressedTexture){for(var d=0,f=u.length;d<f;d++)r=u[d],t.format!==nt&&t.format!==tt?null!==o?w.compressedTexImage2D(3553,d,l,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w.texImage2D(3553,d,l,r.width,r.height,0,o,s,r.data);e.__maxMipLevel=u.length-1}else if(t.isDataTexture2DArray)w.texImage3D(35866,0,l,n.width,n.height,n.depth,0,o,s,n.data),e.__maxMipLevel=0;else if(t.isDataTexture3D)w.texImage3D(32879,0,l,n.width,n.height,n.depth,0,o,s,n.data),e.__maxMipLevel=0;else if(0<u.length&&a){for(var p=0,m=u.length;p<m;p++)r=u[p],w.texImage2D(3553,p,l,o,s,r);t.generateMipmaps=!1,e.__maxMipLevel=u.length-1}else w.texImage2D(3553,0,l,o,s,n),e.__maxMipLevel=0;R(t,a)&&C(i,t,n.width,n.height),e.__version=t.version,t.onUpdate&&t.onUpdate(t)}function _(e,t,n,r){var i=T.convert(t.texture.format),a=T.convert(t.texture.type),o=P(t.texture.internalFormat,i,a);w.texImage2D(r,0,o,t.width,t.height,0,i,a,null),b.bindFramebuffer(36160,e),b.framebufferTexture2D(36160,n,r,M.get(t.texture).__webglTexture,0),b.bindFramebuffer(36160,null)}function x(e,t,n){var r,i;b.bindRenderbuffer(36161,e),t.depthBuffer&&!t.stencilBuffer?(i=33189,n?((r=t.depthTexture)&&r.isDepthTexture&&(r.type===Qe?i=36012:r.type===Ze&&(i=33190)),r=N(t),b.renderbufferStorageMultisample(36161,r,i,t.width,t.height)):b.renderbufferStorage(36161,i,t.width,t.height),b.framebufferRenderbuffer(36160,36096,36161,e)):t.depthBuffer&&t.stencilBuffer?(n?(r=N(t),b.renderbufferStorageMultisample(36161,r,35056,t.width,t.height)):b.renderbufferStorage(36161,34041,t.width,t.height),b.framebufferRenderbuffer(36160,33306,36161,e)):(i=T.convert(t.texture.format),r=T.convert(t.texture.type),e=P(t.texture.internalFormat,i,r),n?(i=N(t),b.renderbufferStorageMultisample(36161,i,e,t.width,t.height)):b.renderbufferStorage(36161,e,t.width,t.height)),b.bindRenderbuffer(36161,null)}function U(e){var t=M.get(e),n=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");var r=t.__webglFramebuffer,i=e;if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(b.bindFramebuffer(36160,r),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(M.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),f(i.depthTexture,0),r=M.get(i.depthTexture).__webglTexture,i.depthTexture.format===ot)b.framebufferTexture2D(36160,36096,3553,r,0);else{if(i.depthTexture.format!==st)throw new Error("Unknown depthTexture format");b.framebufferTexture2D(36160,33306,3553,r,0)}}else if(n){t.__webglDepthbuffer=[];for(var a=0;a<6;a++)b.bindFramebuffer(36160,t.__webglFramebuffer[a]),t.__webglDepthbuffer[a]=b.createRenderbuffer(),x(t.__webglDepthbuffer[a],e,!1)}else b.bindFramebuffer(36160,t.__webglFramebuffer),t.__webglDepthbuffer=b.createRenderbuffer(),x(t.__webglDepthbuffer,e,!1);b.bindFramebuffer(36160,null)}function N(e){return S&&e.isWebGLMultisampleRenderTarget?Math.min(F,e.samples):0}v[z]=9728,v[He]=9984,v[Ge]=9986,v[G]=9729,v[je]=9985;var I=!(v[Ve]=9987),k=!1;this.allocateTextureUnit=function(){var e=d;return t<=e&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+t),d+=1,e},this.resetTextureUnits=function(){d=0},this.setTexture2D=f,this.setTexture2DArray=function(e,t){var n=M.get(e);0<e.version&&n.__version!==e.version?y(n,e,t):(w.activeTexture(33984+t),w.bindTexture(35866,n.__webglTexture))},this.setTexture3D=function(e,t){var n=M.get(e);0<e.version&&n.__version!==e.version?y(n,e,t):(w.activeTexture(33984+t),w.bindTexture(32879,n.__webglTexture))},this.setTextureCube=p,this.setTextureCubeDynamic=m,this.setupRenderTarget=function(e){var t,n=M.get(e),r=M.get(e.texture),i=(e.addEventListener("dispose",h),r.__webglTexture=b.createTexture(),u.memory.textures++,!0===e.isWebGLCubeRenderTarget),a=!0===e.isWebGLMultisampleRenderTarget,o=L(e)||S;if(!S||e.texture.format!==tt||e.texture.type!==Qe&&e.texture.type!==Je||(e.texture.format=nt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),i){n.__webglFramebuffer=[];for(var s=0;s<6;s++)n.__webglFramebuffer[s]=b.createFramebuffer()}else n.__webglFramebuffer=b.createFramebuffer(),a&&(S?(n.__webglMultisampledFramebuffer=b.createFramebuffer(),n.__webglColorRenderbuffer=b.createRenderbuffer(),b.bindRenderbuffer(36161,n.__webglColorRenderbuffer),a=T.convert(e.texture.format),t=T.convert(e.texture.type),a=P(e.texture.internalFormat,a,t),t=N(e),b.renderbufferStorageMultisample(36161,t,a,e.width,e.height),b.bindFramebuffer(36160,n.__webglMultisampledFramebuffer),b.framebufferRenderbuffer(36160,36064,36161,n.__webglColorRenderbuffer),b.bindRenderbuffer(36161,null),e.depthBuffer&&(n.__webglDepthRenderbuffer=b.createRenderbuffer(),x(n.__webglDepthRenderbuffer,e,!0)),b.bindFramebuffer(36160,null)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."));if(i){w.bindTexture(34067,r.__webglTexture),O(34067,e.texture,o);for(var l=0;l<6;l++)_(n.__webglFramebuffer[l],e,36064,34069+l);R(e.texture,o)&&C(34067,e.texture,e.width,e.height),w.bindTexture(34067,null)}else w.bindTexture(3553,r.__webglTexture),O(3553,e.texture,o),_(n.__webglFramebuffer,e,36064,3553),R(e.texture,o)&&C(3553,e.texture,e.width,e.height),w.bindTexture(3553,null);e.depthBuffer&&U(e)},this.updateRenderTargetMipmap=function(e){var t,n,r=e.texture;R(r,L(e)||S)&&(t=e.isWebGLCubeRenderTarget?34067:3553,n=M.get(r).__webglTexture,w.bindTexture(t,n),C(t,r,e.width,e.height),w.bindTexture(t,null))},this.updateMultisampleRenderTarget=function(e){var t,n,r;e.isWebGLMultisampleRenderTarget&&(S?(t=M.get(e),b.bindFramebuffer(36008,t.__webglMultisampledFramebuffer),b.bindFramebuffer(36009,t.__webglFramebuffer),n=e.width,r=16384,e.depthBuffer&&(r|=256),e.stencilBuffer&&(r|=1024),b.blitFramebuffer(0,0,n,e=e.height,0,0,n,e,r,9728),b.bindFramebuffer(36160,t.__webglMultisampledFramebuffer)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."))},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===I&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),I=!0),e=e.texture),f(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),k=!0),e=e.texture),(e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?p:m)(e,t)}}function Go(e,n,t){var r=t.isWebGL2;return{convert:function(e){var t;if(e===We)return 5121;if(e===v)return 32819;if(e===y)return 32820;if(e===Ke)return 33635;if(e===c)return 5120;if(e===h)return 5122;if(e===qe)return 5123;if(e===p)return 5124;if(e===Ze)return 5125;if(e===Qe)return 5126;if(e===Je)return r?5131:null!==(t=n.get("OES_texture_half_float"))?t.HALF_FLOAT_OES:null;if(e===et)return 6406;if(e===tt)return 6407;if(e===nt)return 6408;if(e===rt)return 6409;if(e===it)return 6410;if(e===ot)return 6402;if(e===st)return 34041;if(e===lt)return 6403;if(e===ut)return 36244;if(e===ct)return 33319;if(e===ht)return 33320;if(e===dt)return 36248;if(e===ft)return 36249;if(e===pt||e===mt||e===gt||e===vt){if(null===(t=n.get("WEBGL_compressed_texture_s3tc")))return null;if(e===pt)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===mt)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===gt)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===vt)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===yt||e===_t||e===xt||e===bt){if(null===(t=n.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===yt)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===_t)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===xt)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===bt)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===wt)return null!==(t=n.get("WEBGL_compressed_texture_etc1"))?t.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===Mt||e===Tt)&&null!==(t=n.get("WEBGL_compressed_texture_etc"))){if(e===Mt)return t.COMPRESSED_RGB8_ETC2;if(e===Tt)return t.COMPRESSED_RGBA8_ETC2_EAC}return e===St||e===Et||e===At||e===Lt||e===Rt||e===Ct||e===Pt||e===Ot||e===Dt||e===Nt||e===It||e===kt||e===Bt||e===Ft||e===zt||e===Ht||e===Gt||e===jt||e===Vt||e===Wt||e===qt||e===Xt||e===Yt||e===Zt||e===Qt||e===Jt||e===Kt||e===$t?null!==(t=n.get("WEBGL_compressed_texture_astc"))?e:null:e===Ut?null!==(t=n.get("EXT_texture_compression_bptc"))?e:null:e===$e?r?34042:null!==(t=n.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function jo(e){L.call(this),this.cameras=e||[]}function Vo(){m.call(this),this.type="Group"}function Wo(){this._targetRay=null,this._grip=null}function qo(f,t){var n=this,v=null,r=1,p=null,i="local-floor",m=null,g=[],u=new Map,y=new L,_=(y.layers.enable(1),y.viewport=new Se,new L),x=(_.layers.enable(2),_.viewport=new Se,[y,_]),b=new jo,w=(b.layers.enable(1),b.layers.enable(2),null),M=null;function a(e){var t=u.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function o(){u.forEach(function(e,t){e.disconnect(t)}),u.clear(),f.setFramebuffer(null),f.setRenderTarget(f.getRenderTarget()),c.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function s(e){p=e,c.setContext(v),c.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function l(e){for(var t=v.inputSources,n=0;n<g.length;n++)u.set(t[n],g[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],a=u.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),u.delete(i))}for(var o=0;o<e.added.length;o++){var s=e.added[o],l=u.get(s);l&&l.dispatchEvent({type:"connected",data:s})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=g[e];return void 0===t&&(t=new Wo,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){var t=g[e];return void 0===t&&(t=new Wo,g[e]=t),t.getGripSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p},this.getSession=function(){return v},this.setSession=function(e){null!==(v=e)&&(v.addEventListener("select",a),v.addEventListener("selectstart",a),v.addEventListener("selectend",a),v.addEventListener("squeeze",a),v.addEventListener("squeezestart",a),v.addEventListener("squeezeend",a),v.addEventListener("end",o),!0!==(e=t.getContextAttributes()).xrCompatible&&t.makeXRCompatible(),e=new XRWebGLLayer(v,t,{antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:r}),v.updateRenderState({baseLayer:e}),v.requestReferenceSpace(i).then(s),v.addEventListener("inputsourceschange",l))};var T=new Ye,S=new Ye;function E(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){b.near=_.near=y.near=e.near,b.far=_.far=y.far=e.far,w===b.near&&M===b.far||(v.updateRenderState({depthNear:b.near,depthFar:b.far}),w=b.near,M=b.far);var t=e.parent,n=b.cameras;E(b,t);for(var r=0;r<n.length;r++)E(n[r],t);e.matrixWorld.copy(b.matrixWorld);for(var i,a,o,s,l,u,c,h,d,f,p=e.children,m=0,g=p.length;m<g;m++)p[m].updateMatrixWorld(!0);return 2===n.length?(e=b,i=y,a=_,T.setFromMatrixPosition(i.matrixWorld),S.setFromMatrixPosition(a.matrixWorld),o=T.distanceTo(S),s=i.projectionMatrix.elements,a=a.projectionMatrix.elements,l=s[14]/(s[10]-1),u=s[14]/(s[10]+1),c=(s[9]+1)/s[5],h=(s[9]-1)/s[5],s=(s[8]-1)/s[0],a=(a[8]+1)/a[0],d=l*s,f=l*a,s=(a=o/(a-s))*-s,i.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(s),e.translateZ(a),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld),i=l+a,l=u+a,e.projectionMatrix.makePerspective(d-s,o-s+f,c*u/l*i,h*u/l*i,i,l)):b.projectionMatrix.copy(y.projectionMatrix),b};var A=null;var c=new ji;c.setAnimationLoop(function(e,t){if(null!==(m=t.getViewerPose(p))){var n=m.views,r=v.renderState.baseLayer,i=(f.setFramebuffer(r.framebuffer),!1);n.length!==b.cameras.length&&(i=!(b.cameras.length=0));for(var a=0;a<n.length;a++){var o=n[a],s=r.getViewport(o),l=x[a];l.matrix.fromArray(o.transform.matrix),l.projectionMatrix.fromArray(o.projectionMatrix),l.viewport.set(s.x,s.y,s.width,s.height),0===a&&b.matrix.copy(l.matrix),!0===i&&b.cameras.push(l)}}for(var u=v.inputSources,c=0;c<g.length;c++){var h=g[c],d=u[c];h.update(d,t,p)}A&&A(e,t)}),this.setAnimationLoop=function(e){A=e},this.dispose=function(){}}function Xo(a){function p(e,t,n){e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap);var r,i,n=t.envMap||n;n&&(e.envMap.value=n,e.flipEnvMap.value=n.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=a.get(n).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r&&(!0===(r=r.isWebGLRenderTarget?r.texture:r).matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),t.aoMap?i=t.aoMap:t.lightMap&&(i=t.lightMap),void 0!==i&&(!0===(i=i.isWebGLRenderTarget?i.texture:i).matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function m(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===H)&&(e.bumpScale.value*=-1),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===H)&&e.normalScale.value.negate(),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,t,n,r,i){var a,o,s,l,u,c,h,d,f;t.isMeshBasicMaterial?p(e,t):t.isMeshLambertMaterial?(p(e,t),d=e,(f=t).emissiveMap&&(d.emissiveMap.value=f.emissiveMap)):t.isMeshToonMaterial?(p(e,t),d=e,(f=t).gradientMap&&(d.gradientMap.value=f.gradientMap),f.emissiveMap&&(d.emissiveMap.value=f.emissiveMap),f.bumpMap&&(d.bumpMap.value=f.bumpMap,d.bumpScale.value=f.bumpScale,f.side===H)&&(d.bumpScale.value*=-1),f.normalMap&&(d.normalMap.value=f.normalMap,d.normalScale.value.copy(f.normalScale),f.side===H)&&d.normalScale.value.negate(),f.displacementMap&&(d.displacementMap.value=f.displacementMap,d.displacementScale.value=f.displacementScale,d.displacementBias.value=f.displacementBias)):t.isMeshPhongMaterial?(p(e,t),o=t,(a=e).specular.value.copy(o.specular),a.shininess.value=Math.max(o.shininess,1e-4),o.emissiveMap&&(a.emissiveMap.value=o.emissiveMap),o.bumpMap&&(a.bumpMap.value=o.bumpMap,a.bumpScale.value=o.bumpScale,o.side===H)&&(a.bumpScale.value*=-1),o.normalMap&&(a.normalMap.value=o.normalMap,a.normalScale.value.copy(o.normalScale),o.side===H)&&a.normalScale.value.negate(),o.displacementMap&&(a.displacementMap.value=o.displacementMap,a.displacementScale.value=o.displacementScale,a.displacementBias.value=o.displacementBias)):t.isMeshStandardMaterial?(p(e,t,n),t.isMeshPhysicalMaterial?(m(a=e,o=t,n),a.reflectivity.value=o.reflectivity,a.clearcoat.value=o.clearcoat,a.clearcoatRoughness.value=o.clearcoatRoughness,o.sheen&&a.sheen.value.copy(o.sheen),o.clearcoatMap&&(a.clearcoatMap.value=o.clearcoatMap),o.clearcoatRoughnessMap&&(a.clearcoatRoughnessMap.value=o.clearcoatRoughnessMap),o.clearcoatNormalMap&&(a.clearcoatNormalScale.value.copy(o.clearcoatNormalScale),a.clearcoatNormalMap.value=o.clearcoatNormalMap,o.side===H)&&a.clearcoatNormalScale.value.negate(),a.transparency.value=o.transparency):m(e,t,n)):t.isMeshMatcapMaterial?(p(e,t),n=e,(h=t).matcap&&(n.matcap.value=h.matcap),h.bumpMap&&(n.bumpMap.value=h.bumpMap,n.bumpScale.value=h.bumpScale,h.side===H)&&(n.bumpScale.value*=-1),h.normalMap&&(n.normalMap.value=h.normalMap,n.normalScale.value.copy(h.normalScale),h.side===H)&&n.normalScale.value.negate(),h.displacementMap&&(n.displacementMap.value=h.displacementMap,n.displacementScale.value=h.displacementScale,n.displacementBias.value=h.displacementBias)):t.isMeshDepthMaterial?(p(e,t),n=e,(h=t).displacementMap&&(n.displacementMap.value=h.displacementMap,n.displacementScale.value=h.displacementScale,n.displacementBias.value=h.displacementBias)):t.isMeshDistanceMaterial?(p(e,t),n=e,(s=t).displacementMap&&(n.displacementMap.value=s.displacementMap,n.displacementScale.value=s.displacementScale,n.displacementBias.value=s.displacementBias),n.referencePosition.value.copy(s.referencePosition),n.nearDistance.value=s.nearDistance,n.farDistance.value=s.farDistance):t.isMeshNormalMaterial?(p(e,t),n=e,(s=t).bumpMap&&(n.bumpMap.value=s.bumpMap,n.bumpScale.value=s.bumpScale,s.side===H)&&(n.bumpScale.value*=-1),s.normalMap&&(n.normalMap.value=s.normalMap,n.normalScale.value.copy(s.normalScale),s.side===H)&&n.normalScale.value.negate(),s.displacementMap&&(n.displacementMap.value=s.displacementMap,n.displacementScale.value=s.displacementScale,n.displacementBias.value=s.displacementBias)):t.isLineBasicMaterial?(n=t,(c=e).diffuse.value.copy(n.color),c.opacity.value=n.opacity,t.isLineDashedMaterial&&(c=t,(n=e).dashSize.value=c.dashSize,n.totalSize.value=c.dashSize+c.gapSize,n.scale.value=c.scale)):t.isPointsMaterial?(n=t,c=r,r=i,(i=e).diffuse.value.copy(n.color),i.opacity.value=n.opacity,i.size.value=n.size*c,i.scale.value=.5*r,n.map&&(i.map.value=n.map),n.alphaMap&&(i.alphaMap.value=n.alphaMap),n.map?l=n.map:n.alphaMap&&(l=n.alphaMap),void 0!==l&&(!0===l.matrixAutoUpdate&&l.updateMatrix(),i.uvTransform.value.copy(l.matrix))):t.isSpriteMaterial?(r=t,(n=e).diffuse.value.copy(r.color),n.opacity.value=r.opacity,n.rotation.value=r.rotation,r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.map?u=r.map:r.alphaMap&&(u=r.alphaMap),void 0!==u&&(!0===u.matrixAutoUpdate&&u.updateMatrix(),n.uvTransform.value.copy(u.matrix))):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}}}function Yo(e){var i=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,B=void 0!==e.alpha&&e.alpha,F=void 0===e.depth||e.depth,U=void 0===e.stencil||e.stencil,z=void 0!==e.antialias&&e.antialias,H=void 0===e.premultipliedAlpha||e.premultipliedAlpha,G=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,j=void 0!==e.powerPreference?e.powerPreference:"default",V=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,v=null,y=null,p=(this.domElement=i,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=en,this.physicallyCorrectLights=!1,this.toneMapping=Ce,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4,this),W=!1,q=null,X=0,Y=0,m=null,h=null,g=-1,_=null,x=null,b=new Se,o=new Se,Z=null,r=i.width,w=i.height,M=1,Q=null,J=null,s=new Se(0,0,r,w),l=new Se(0,0,r,w),K=!1,$=new Gi,T=new Ki,ee=!1,te=!1,S=new Ee,E=new Ye,ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function re(){return null===m?M:1}var d,A,L,R,C,P,c,ie,O,f,ae,oe,u,a,se,le,ue,D,N,I=n;function ce(e,t){for(var n=0;n<e.length;n++){var r=i.getContext(e[n],t);if(null!==r)return r}return null}try{var he={alpha:B,depth:F,stencil:U,antialias:z,premultipliedAlpha:H,preserveDrawingBuffer:G,powerPreference:j,failIfMajorPerformanceCaveat:V};if(i.addEventListener("webglcontextlost",me,!1),i.addEventListener("webglcontextrestored",ge,!1),null===I){var de=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&de.shift(),null===(I=ce(de,he)))throw ce(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===I.getShaderPrecisionFormat&&(I.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function fe(){d=new $i(I),!1===(A=new Ji(I,d,e)).isWebGL2&&(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("OES_vertex_array_object"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),D=new Go(0,d,A),(L=new zo(I,d,A)).scissor(o.copy(l).multiplyScalar(M).floor()),L.viewport(b.copy(s).multiplyScalar(M).floor()),R=new na,C=new To,P=new Ho(I,d,L,C,A,D,R),c=new Vi(I,A),N=new Zi(I,d,c,A),ie=new ea(0,c,R,N),O=new oa(0,ie,c,R),se=new aa(I),f=new Mo(p,d,A,N),ae=new Xo(C),oe=new Lo,u=new No,a=new Yi(p,L,O,H),le=new Qi(I,d,R,A),ue=new ta(I,d,R,A),R.programs=f.programs,p.capabilities=A,p.extensions=d,p.properties=C,p.renderLists=oe,p.state=L,p.info=R}fe();var k=new qo(p,I),pe=(this.xr=k,new Uo(p,O,A.maxTextureSize));function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1,fe()}function ve(e){var e=e.target;e.removeEventListener("dispose",ve),ye(e=e),C.remove(e)}function ye(e){var t=C.get(e).program;(e.program=void 0)!==t&&f.releaseProgram(t)}this.shadowMap=pe,this.getContext=function(){return I},this.getContextAttributes=function(){return I.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(e){void 0!==e&&(M=e,this.setSize(r,w,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Xe),e.set(r,w)},this.setSize=function(e,t,n){k.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(r=e,w=t,i.width=Math.floor(e*M),i.height=Math.floor(t*M),!1!==n&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Xe),e.set(r*M,w*M).floor()},this.setDrawingBufferSize=function(e,t,n){r=e,w=t,M=n,i.width=Math.floor(e*n),i.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Se),e.copy(b)},this.getViewport=function(e){return e.copy(s)},this.setViewport=function(e,t,n,r){e.isVector4?s.set(e.x,e.y,e.z,e.w):s.set(e,t,n,r),L.viewport(b.copy(s).multiplyScalar(M).floor())},this.getScissor=function(e){return e.copy(l)},this.setScissor=function(e,t,n,r){e.isVector4?l.set(e.x,e.y,e.z,e.w):l.set(e,t,n,r),L.scissor(o.copy(l).multiplyScalar(M).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(e){L.setScissorTest(K=e)},this.setOpaqueSort=function(e){Q=e},this.setTransparentSort=function(e){J=e},this.getClearColor=function(){return a.getClearColor()},this.setClearColor=function(){a.setClearColor.apply(a,arguments)},this.getClearAlpha=function(){return a.getClearAlpha()},this.setClearAlpha=function(){a.setClearAlpha.apply(a,arguments)},this.clear=function(e,t,n){var r=0;void 0!==e&&!e||(r|=16384),void 0!==t&&!t||(r|=256),void 0!==n&&!n||(r|=1024),I.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",me,!1),i.removeEventListener("webglcontextrestored",ge,!1),oe.dispose(),u.dispose(),C.dispose(),O.dispose(),N.dispose(),k.dispose(),t.stop()},this.renderBufferImmediate=function(e,t){N.initAttributes();var n=C.get(e),t=(e.hasPositions&&!n.position&&(n.position=I.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=I.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=I.createBuffer()),e.hasColors&&!n.color&&(n.color=I.createBuffer()),t.getAttributes());e.hasPositions&&(I.bindBuffer(34962,n.position),I.bufferData(34962,e.positionArray,35048),N.enableAttribute(t.position),I.vertexAttribPointer(t.position,3,5126,!1,0,0)),e.hasNormals&&(I.bindBuffer(34962,n.normal),I.bufferData(34962,e.normalArray,35048),N.enableAttribute(t.normal),I.vertexAttribPointer(t.normal,3,5126,!1,0,0)),e.hasUvs&&(I.bindBuffer(34962,n.uv),I.bufferData(34962,e.uvArray,35048),N.enableAttribute(t.uv),I.vertexAttribPointer(t.uv,2,5126,!1,0,0)),e.hasColors&&(I.bindBuffer(34962,n.color),I.bufferData(34962,e.colorArray,35048),N.enableAttribute(t.color),I.vertexAttribPointer(t.color,3,5126,!1,0,0)),N.disableUnusedAttributes(),I.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=ne);var o=i.isMesh&&i.matrixWorld.determinant()<0,e=Me(e,t,r,i),t=(L.setMaterial(r,o),n.index),o=n.attributes.position;if(null===t){if(void 0===o||0===o.count)return}else if(0===t.count)return;var s=1,e=(!0===r.wireframe&&(t=ie.getWireframeAttribute(n),s=2),(r.morphTargets||r.morphNormals)&&se.update(i,n,r,e),N.setup(i,r,e,n,t),le),l=(null!==t&&(l=c.get(t),(e=ue).setIndex(l)),(null!==t?t:o).count),t=n.drawRange.start*s,o=n.drawRange.count*s,u=null!==a?a.start*s:0,a=null!==a?a.count*s:1/0,s=Math.max(t,u),l=Math.min(l,t+o,u+a)-1,t=Math.max(0,l-s+1);0!==t&&(i.isMesh?!0===r.wireframe?(L.setLineWidth(r.wireframeLinewidth*re()),e.setMode(1)):e.setMode(4):i.isLine?(o=r.linewidth,L.setLineWidth((o=void 0===o?1:o)*re()),i.isLineSegments?e.setMode(1):i.isLineLoop?e.setMode(2):e.setMode(3)):i.isPoints?e.setMode(0):i.isSprite&&e.setMode(4),i.isInstancedMesh?e.renderInstances(n,s,t,i.count):n.isInstancedBufferGeometry?(u=Math.min(n.instanceCount,n._maxInstanceCount),e.renderInstances(n,s,t,u)):e.render(s,t))},this.compile=function(i,e){(y=u.get(i,e)).init(),i.traverse(function(e){e.isLight&&(y.pushLight(e),e.castShadow)&&y.pushShadow(e)}),y.setupLights(e);var a=new WeakMap;i.traverse(function(e){var t=e.material;if(t)if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];!1===a.has(r)&&(we(r,i,e),a.set(r))}else!1===a.has(t)&&(we(t,i,e),a.set(t))})};var _e=null;var t=new ji;function xe(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,l=o.geometry,u=null===r?o.material:r,c=o.group;if(n.isArrayCamera)for(var h=(x=n).cameras,d=0,f=h.length;d<f;d++){var p=h[d];s.layers.test(p.layers)&&(L.viewport(b.copy(p.viewport)),y.setupLights(p),be(s,t,p,l,u,c))}else x=null,be(s,t,n,l,u,c)}}function be(e,t,n,r,i,a){var o,s;e.onBeforeRender(p,t,n,r,i,a),y=u.get(t,x||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject?(o=Me(n,t,i,e),L.setMaterial(i),N.reset(),s=o,e.render(function(e){p.renderBufferImmediate(e,s)})):p.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(p,t,n,r,i,a),y=u.get(t,x||n)}function we(e,t,n){!0!==t.isScene&&(t=ne);var r=C.get(e),i=y.state.lights,a=y.state.shadowsArray,o=i.state.version,a=f.getParameters(e,i.state,a,t,T.numPlanes,T.numIntersection,n),n=f.getProgramCacheKey(a),s=r.program,l=!0;if(void 0===s)e.addEventListener("dispose",ve);else if(s.cacheKey!==n)ye(e);else{if(r.lightsStateVersion!==o)r.lightsStateVersion=o;else if(void 0!==a.shaderID)return;l=!1}l&&(s=f.acquireProgram(a,n),r.program=s,r.uniforms=a.uniforms,r.outputEncoding=a.outputEncoding,e.program=s);var u=s.getAttributes();if(e.morphTargets)for(var c=e.numSupportedMorphTargets=0;c<p.maxMorphTargets;c++)0<=u["morphTarget"+c]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(var h=e.numSupportedMorphNormals=0;h<p.maxMorphNormals;h++)0<=u["morphNormal"+h]&&e.numSupportedMorphNormals++;l=r.uniforms,(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=T.numPlanes,r.numIntersection=T.numIntersection,l.clippingPlanes=T.uniform),r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.needsLights=(n=e).isMeshLambertMaterial||n.isMeshToonMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isShadowMaterial||n.isShaderMaterial&&!0===n.lights,r.lightsStateVersion=o,r.needsLights&&(l.ambientLightColor.value=i.state.ambient,l.lightProbe.value=i.state.probe,l.directionalLights.value=i.state.directional,l.directionalLightShadows.value=i.state.directionalShadow,l.spotLights.value=i.state.spot,l.spotLightShadows.value=i.state.spotShadow,l.rectAreaLights.value=i.state.rectArea,l.pointLights.value=i.state.point,l.pointLightShadows.value=i.state.pointShadow,l.hemisphereLights.value=i.state.hemi,l.directionalShadowMap.value=i.state.directionalShadowMap,l.directionalShadowMatrix.value=i.state.directionalShadowMatrix,l.spotShadowMap.value=i.state.spotShadowMap,l.spotShadowMatrix.value=i.state.spotShadowMatrix,l.pointShadowMap.value=i.state.pointShadowMap,l.pointShadowMatrix.value=i.state.pointShadowMatrix),a=r.program.getUniforms(),s=ro.seqWithValue(a.seq,l);r.uniformsList=s}function Me(e,t,n,r){!0!==t.isScene&&(t=ne),P.resetTextureUnits();var i,a,o=t.fog,s=n.isMeshStandardMaterial?t.environment:null,l=null===m?p.outputEncoding:m.texture.encoding,u=C.get(n),c=y.state.lights,h=(!0!==ee||!0!==te&&e===_||(h=e===_&&n.id===g,T.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,u,h)),n.version===u.__version?(void 0===u.program||n.fog&&u.fog!==o||u.environment!==s||u.needsLights&&u.lightsStateVersion!==c.state.version||void 0!==u.numClippingPlanes&&(u.numClippingPlanes!==T.numPlanes||u.numIntersection!==T.numIntersection)||u.outputEncoding!==l)&&we(n,t,r):(we(n,t,r),u.__version=n.version),!1),c=!1,l=!1,t=u.program,d=t.getUniforms(),f=u.uniforms;return L.useProgram(t.program)&&(l=c=h=!0),n.id!==g&&(g=n.id,c=!0),(h||_!==e)&&(d.setValue(I,"projectionMatrix",e.projectionMatrix),A.logarithmicDepthBuffer&&d.setValue(I,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,l=c=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap)&&void 0!==(h=d.map.cameraPosition)&&h.setValue(I,E.setFromMatrixPosition(e.matrixWorld)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&d.setValue(I,"isOrthographic",!0===e.isOrthographicCamera),n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&d.setValue(I,"viewMatrix",e.matrixWorldInverse),n.skinning&&(d.setOptional(I,r,"bindMatrix"),d.setOptional(I,r,"bindMatrixInverse"),h=r.skeleton)&&(e=h.bones,A.floatVertexTextures?(void 0===h.boneTexture&&(e=Math.sqrt(4*e.length),e=Te.ceilPowerOfTwo(e),e=Math.max(e,4),(a=new Float32Array(e*e*4)).set(h.boneMatrices),i=new Ui(a,e,e,nt,Qe),h.boneMatrices=a,h.boneTexture=i,h.boneTextureSize=e),d.setValue(I,"boneTexture",h.boneTexture,P),d.setValue(I,"boneTextureSize",h.boneTextureSize)):d.setOptional(I,h,"boneMatrices")),!c&&u.receiveShadow===r.receiveShadow||(u.receiveShadow=r.receiveShadow,d.setValue(I,"receiveShadow",r.receiveShadow)),c&&(d.setValue(I,"toneMappingExposure",p.toneMappingExposure),u.needsLights&&(a=l,(i=f).ambientLightColor.needsUpdate=a,i.lightProbe.needsUpdate=a,i.directionalLights.needsUpdate=a,i.directionalLightShadows.needsUpdate=a,i.pointLights.needsUpdate=a,i.pointLightShadows.needsUpdate=a,i.spotLights.needsUpdate=a,i.spotLightShadows.needsUpdate=a,i.rectAreaLights.needsUpdate=a,i.hemisphereLights.needsUpdate=a),o&&n.fog&&ae.refreshFogUniforms(f,o),ae.refreshMaterialUniforms(f,n,s,M,w),void 0!==f.ltc_1&&(f.ltc_1.value=Ae.LTC_1),void 0!==f.ltc_2&&(f.ltc_2.value=Ae.LTC_2),ro.upload(I,u.uniformsList,f,P)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ro.upload(I,u.uniformsList,f,P),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&d.setValue(I,"center",r.center),d.setValue(I,"modelViewMatrix",r.modelViewMatrix),d.setValue(I,"normalMatrix",r.normalMatrix),d.setValue(I,"modelMatrix",r.matrixWorld),t}t.setAnimationLoop(function(e){k.isPresenting||_e&&_e(e)}),"undefined"!=typeof window&&t.setContext(window),this.setAnimationLoop=function(e){_e=e,k.setAnimationLoop(e),null===e?t.stop():t.start()},this.render=function(e,t){var n,r,i;void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),i=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),n=arguments[3]),void 0!==t&&!0!==t.isCamera?console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."):!0!==W&&(N.resetDefaultState(),g=-1,!(_=null)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===k.enabled&&!0===k.isPresenting&&(t=k.getCamera(t)),!0===e.isScene&&e.onBeforeRender(p,e,t,i||m),(y=u.get(e,t)).init(),S.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),$.setFromProjectionMatrix(S),te=this.localClippingEnabled,ee=T.init(this.clippingPlanes,te,t),(v=oe.get(e,t)).init(),function e(t,n,r,i){if(!1===t.visible)return;var a=t.layers.test(n.layers);if(a)if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(n);else if(t.isLight)y.pushLight(t),t.castShadow&&y.pushShadow(t);else if(t.isSprite){var o;t.frustumCulled&&!$.intersectsSprite(t)||(i&&E.setFromMatrixPosition(t.matrixWorld).applyMatrix4(S),a=O.update(t),(o=t.material).visible&&v.push(t,a,o,r,E.z,null))}else if(t.isImmediateRenderObject)i&&E.setFromMatrixPosition(t.matrixWorld).applyMatrix4(S),v.push(t,null,t.material,r,E.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==R.render.frame&&(t.skeleton.update(),t.skeleton.frame=R.render.frame),!t.frustumCulled||$.intersectsObject(t))){i&&E.setFromMatrixPosition(t.matrixWorld).applyMatrix4(S);var s=O.update(t),l=t.material;if(Array.isArray(l))for(var u=s.groups,c=0,h=u.length;c<h;c++){var d=u[c],f=l[d.materialIndex];f&&f.visible&&v.push(t,s,f,r,E.z,d)}else l.visible&&v.push(t,s,l,r,E.z,null)}var p=t.children;for(var m=0,g=p.length;m<g;m++)e(p[m],n,r,i)}(e,t,0,p.sortObjects),v.finish(),!0===p.sortObjects&&v.sort(Q,J),!0===ee&&T.beginShadows(),r=y.state.shadowsArray,pe.render(r,e,t),y.setupLights(t),!0===ee&&T.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==i&&this.setRenderTarget(i),a.render(v,e,t,n),r=v.opaque,i=v.transparent,0<r.length&&xe(r,e,t),0<i.length&&xe(i,e,t),!0===e.isScene&&e.onAfterRender(p,e,t),null!==m&&(P.updateRenderTargetMipmap(m),P.updateMultisampleRenderTarget(m)),L.buffers.depth.setTest(!0),L.buffers.depth.setMask(!0),L.buffers.color.setMask(!0),L.setPolygonOffset(!1),y=v=null)},this.setFramebuffer=function(e){q!==e&&null===m&&I.bindFramebuffer(36160,e),q=e},this.getActiveCubeFace=function(){return X},this.getActiveMipmapLevel=function(){return Y},this.getRenderTarget=function(){return m},this.setRenderTarget=function(e,t,n){X=t,Y=n,(m=e)&&void 0===C.get(e).__webglFramebuffer&&P.setupRenderTarget(e);var r,i=q,a=!1;Z=e?(r=C.get(e).__webglFramebuffer,e.isWebGLCubeRenderTarget?(i=r[t||0],a=!0):i=e.isWebGLMultisampleRenderTarget?C.get(e).__webglMultisampledFramebuffer:r,b.copy(e.viewport),o.copy(e.scissor),e.scissorTest):(b.copy(s).multiplyScalar(M).floor(),o.copy(l).multiplyScalar(M).floor(),K),h!==i&&(I.bindFramebuffer(36160,i),h=i),L.viewport(b),L.scissor(o),L.setScissorTest(Z),a&&(r=C.get(e.texture),I.framebufferTexture2D(36160,36064,34069+(t||0),r.__webglTexture,n||0))},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=C.get(e).__webglFramebuffer;if(s=e.isWebGLCubeRenderTarget&&void 0!==o?s[o]:s){o=!1;s!==h&&(I.bindFramebuffer(36160,s),o=!0);try{var l=e.texture,u=l.format,c=l.type;u!==nt&&D.convert(u)!==I.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):c===We||D.convert(c)===I.getParameter(35738)||c===Qe&&(A.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||c===Je&&(A.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))?36053===I.checkFramebufferStatus(36160)?0<=t&&t<=e.width-r&&0<=n&&n<=e.height-i&&I.readPixels(t,n,r,i,D.convert(u),D.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&I.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(t.image.width*r),r=Math.floor(t.image.height*r),a=D.convert(t.format);P.setTexture2D(t,0),I.copyTexImage2D(3553,n,a,e.x,e.y,i,r,0),L.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r){void 0===r&&(r=0);var i=t.image.width,a=t.image.height,o=D.convert(n.format),s=D.convert(n.type);P.setTexture2D(n,0),I.pixelStorei(37440,n.flipY),I.pixelStorei(37441,n.premultiplyAlpha),I.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?I.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?I.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):I.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&I.generateMipmap(3553),L.unbindTexture()},this.initTexture=function(e){P.setTexture2D(e,0),L.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Zo(e){Yo.call(this,e)}function Qo(e,t){this.name="",this.color=new x(e),this.density=void 0!==t?t:25e-5}function Jo(e,t,n){this.name="",this.color=new x(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Ko(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Te.generateUUID()}jo.prototype=Object.assign(Object.create(L.prototype),{constructor:jo,isArrayCamera:!0}),Vo.prototype=Object.assign(Object.create(m.prototype),{constructor:Vo,isGroup:!0}),Object.assign(Wo.prototype,{constructor:Wo,getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Vo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Vo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),this},update:function(e,t,n){var r=null,i=null,a=this._targetRay,o=this._grip;return e&&(null!==a&&null!==(r=t.getPose(e.targetRaySpace,n))&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)),null!==o)&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==a&&(a.visible=null!==r),null!==o&&(o.visible=null!==i),this}}),Object.assign(qo.prototype,fn.prototype),Zo.prototype=Object.assign(Object.create(Yo.prototype),{constructor:Zo,isWebGL1Renderer:!0}),Object.assign(Qo.prototype,{isFogExp2:!0,clone:function(){return new Qo(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Jo.prototype,{isFog:!0,clone:function(){return new Jo(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Ko.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ko.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return this.array.set(e,t=void 0===t?0:t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Te.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);e=new Ko(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Te.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var $o,es=new Ye;function ts(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function ns(e){o.call(this),this.type="SpriteMaterial",this.color=new x(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(ts.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(ts.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)es.x=this.getX(t),es.y=this.getY(t),es.z=this.getZ(t),es.applyMatrix4(e),this.setXYZ(t,es.x,es.y,es.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ts(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return new R(new this.array.constructor(t),this.itemSize,this.normalized)},toJSON:function(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}),((ns.prototype=Object.create(o.prototype)).constructor=ns).prototype.isSpriteMaterial=!0,ns.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var rs=new Ye,is=new Ye,as=new Ye,os=new Xe,ss=new Xe,ls=new Ee,us=new Ye,cs=new Ye,hs=new Ye,ds=new Xe,fs=new Xe,ps=new Xe;function ms(e){var t;m.call(this),this.type="Sprite",void 0===$o&&($o=new $,t=new Ko(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5),$o.setIndex([0,1,2,0,2,3]),$o.setAttribute("position",new ts(t,3,0,!1)),$o.setAttribute("uv",new ts(t,2,3,!1))),this.geometry=$o,this.material=void 0!==e?e:new ns,this.center=new Xe(.5,.5)}function gs(e,t,n,r,i,a){os.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(ss.x=a*os.x-i*os.y,ss.y=i*os.x+a*os.y):ss.copy(os),e.copy(t),e.x+=ss.x,e.y+=ss.y,e.applyMatrix4(ls)}ms.prototype=Object.assign(Object.create(m.prototype),{constructor:ms,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),is.setFromMatrixScale(this.matrixWorld),ls.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),as.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&is.multiplyScalar(-as.z);var n,r,i=this.material.rotation,i=(0!==i&&(r=Math.cos(i),n=Math.sin(i)),this.center);gs(us.set(-.5,-.5,0),as,i,is,n,r),gs(cs.set(.5,-.5,0),as,i,is,n,r),gs(hs.set(.5,.5,0),as,i,is,n,r),ds.set(0,0),fs.set(1,0),ps.set(1,1),null===e.ray.intersectTriangle(us,cs,hs,!1,rs)&&(gs(cs.set(-.5,.5,0),as,i,is,n,r),fs.set(0,1),null===e.ray.intersectTriangle(us,hs,cs,!1,rs))||(i=e.ray.origin.distanceTo(rs))<e.near||i>e.far||t.push({distance:i,point:rs.clone(),uv:X.getUV(rs,us,cs,hs,ds,fs,ps,new Xe),face:null,object:this})},copy:function(e){return m.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});var vs,ys,_s,xs,bs,ws=new Ye,Ms=new Ye;function Ts(){m.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Ss(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),C.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ee,this.bindMatrixInverse=new Ee}Ts.prototype=Object.assign(Object.create(m.prototype),{constructor:Ts,isLOD:!0,copy:function(e){m.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var t=this.levels;if(0<t.length){for(var n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){var n;0<this.levels.length&&(ws.setFromMatrixPosition(this.matrixWorld),n=e.ray.origin.distanceTo(ws),this.getObjectForDistance(n).raycast(e,t))},update:function(e){var t=this.levels;if(1<t.length){ws.setFromMatrixPosition(e.matrixWorld),Ms.setFromMatrixPosition(this.matrixWorld);var n,r,i=ws.distanceTo(Ms)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}},toJSON:function(e){for(var t=m.prototype.toJSON.call(this,e),n=(!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[],this.levels),r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Ss.prototype=Object.assign(Object.create(C.prototype),{constructor:Ss,isSkinnedMesh:!0,copy:function(e){return C.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Se,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!=1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){C.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:(vs=new Ye,ys=new Se,_s=new Se,xs=new Ye,bs=new Ee,function(e,t){var n=this.skeleton,r=this.geometry;ys.fromBufferAttribute(r.attributes.skinIndex,e),_s.fromBufferAttribute(r.attributes.skinWeight,e),vs.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a,o=_s.getComponent(i);0!==o&&(a=ys.getComponent(i),bs.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(xs.copy(vs).applyMatrix4(bs),o))}return t.applyMatrix4(this.bindMatrixInverse)})});var Es=new Ee,As=new Ee;function Ls(e,t){if(this.bones=(e=e||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ee)}}function Rs(){m.call(this),this.type="Bone"}Object.assign(Ls.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Ee;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.getInverse(this.boneInverses[e])}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:As;Es.multiplyMatrices(o,t[i]),Es.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new Ls(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Rs.prototype=Object.assign(Object.create(m.prototype),{constructor:Rs,isBone:!0});var Cs=new Ee,Ps=new Ee,Os=[],Ds=new C;function Ns(e,t,n){C.call(this,e,t),this.instanceMatrix=new R(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function b(e){o.call(this),this.type="LineBasicMaterial",this.color=new x(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}Ns.prototype=Object.assign(Object.create(C.prototype),{constructor:Ns,isInstancedMesh:!0,copy:function(e){return C.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,r=this.count;if(Ds.geometry=this.geometry,Ds.material=this.material,void 0!==Ds.material)for(var i=0;i<r;i++){this.getMatrixAt(i,Cs),Ps.multiplyMatrices(n,Cs),Ds.matrixWorld=Ps,Ds.raycast(e,Os);for(var a=0,o=Os.length;a<o;a++){var s=Os[a];s.instanceId=i,s.object=this,t.push(s)}Os.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),((b.prototype=Object.create(o.prototype)).constructor=b).prototype.isLineBasicMaterial=!0,b.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var Is=new Ye,ks=new Ye,Bs=new Ee,Fs=new yr,Us=new cr;function zs(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),m.call(this),this.type="Line",this.geometry=void 0!==e?e:new $,this.material=void 0!==t?t:new b,this.updateMorphTargets()}zs.prototype=Object.assign(Object.create(m.prototype),{constructor:zs,isLine:!0,copy:function(e){return m.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)Is.fromBufferAttribute(t,r-1),ks.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Is.distanceTo(ks);e.setAttribute("lineDistance",new K(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices,o=e.lineDistances;o[0]=0;for(var s=1,l=a.length;s<l;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Us.copy(n.boundingSphere),Us.applyMatrix4(r),Us.radius+=i,!1!==e.ray.intersectsSphere(Us)){Bs.getInverse(r),Fs.copy(e.ray).applyMatrix4(Bs);var r=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=r*r,o=new Ye,s=new Ye,l=new Ye,u=new Ye,c=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var i=n.index,h=n.attributes.position.array;if(null!==i)for(var d=i.array,f=0,p=d.length-1;f<p;f+=c){var m=d[f],g=d[f+1];o.fromArray(h,3*m),s.fromArray(h,3*g),a<Fs.distanceSqToSegment(o,s,u,l)||(u.applyMatrix4(this.matrixWorld),(m=e.ray.origin.distanceTo(u))<e.near)||m>e.far||t.push({distance:m,point:l.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this})}else for(var v,y=0,_=h.length/3-1;y<_;y+=c)o.fromArray(h,3*y),s.fromArray(h,3*y+3),a<Fs.distanceSqToSegment(o,s,u,l)||(u.applyMatrix4(this.matrixWorld),(v=e.ray.origin.distanceTo(u))<e.near)||v>e.far||t.push({distance:v,point:l.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else if(n.isGeometry)for(var x,b=n.vertices,w=b.length,M=0;M<w-1;M+=c)a<Fs.distanceSqToSegment(b[M],b[M+1],u,l)||(u.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(u))<e.near)||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(0<n.length){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{t=e.morphTargets;void 0!==t&&0<t.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var Hs=new Ye,Gs=new Ye;function w(e,t){zs.call(this,e,t),this.type="LineSegments"}function js(e,t){zs.call(this,e,t),this.type="LineLoop"}function Vs(e){o.call(this),this.type="PointsMaterial",this.color=new x(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}w.prototype=Object.assign(Object.create(zs.prototype),{constructor:w,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Hs.fromBufferAttribute(t,r),Gs.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Hs.distanceTo(Gs);e.setAttribute("lineDistance",new K(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(var a=e.vertices,o=e.lineDistances,s=0,l=a.length;s<l;s+=2)Hs.copy(a[s]),Gs.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+Hs.distanceTo(Gs);return this}}),js.prototype=Object.assign(Object.create(zs.prototype),{constructor:js,isLineLoop:!0}),((Vs.prototype=Object.create(o.prototype)).constructor=Vs).prototype.isPointsMaterial=!0,Vs.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Ws=new Ee,qs=new yr,Xs=new cr,Ys=new Ye;function Zs(e,t){m.call(this),this.type="Points",this.geometry=void 0!==e?e:new $,this.material=void 0!==t?t:new Vs,this.updateMorphTargets()}function Qs(e,t,n,r,i,a,o){var s=qs.distanceSqToPoint(e);s<n&&(n=new Ye,qs.closestPointToPoint(e,n),n.applyMatrix4(r),(e=i.ray.origin.distanceTo(n))<i.near||e>i.far||a.push({distance:e,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:o}))}function Js(e,t,n,r,i,a,o,s,l){d.call(this,e,t,n,r,i,a,o,s,l),this.format=void 0!==o?o:tt,this.minFilter=void 0!==a?a:G,this.magFilter=void 0!==i?i:G,this.generateMipmaps=!1}function Ks(e,t,n,r,i,a,o,s,l,u,c,h){d.call(this,null,a,o,s,l,u,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function $s(e,t,n,r,i,a,o,s,l){d.call(this,e,t,n,r,i,a,o,s,l),this.needsUpdate=!0}function el(e,t,n,r,i,a,o,s,l,u){if((u=void 0!==u?u:ot)!==ot&&u!==st)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");d.call(this,null,r,i,a,o,s,u,n=void 0===(n=void 0===n&&u===ot?qe:n)&&u===st?$e:n,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:z,this.minFilter=void 0!==s?s:z,this.flipY=!1,this.generateMipmaps=!1}function tl(e){$.call(this),this.type="WireframeGeometry";var t=[],n=[0,0],r={},i=["a","b","c"];if(e&&e.isGeometry){for(var a,o=e.faces,s=0,l=o.length;s<l;s++)for(var u=o[s],c=0;c<3;c++){var h=u[i[c]],d=u[i[(c+1)%3]],h=(n[0]=Math.min(h,d),n[1]=Math.max(h,d),n[0]+","+n[1]);void 0===r[h]&&(r[h]={index1:n[0],index2:n[1]})}for(a in r){var f=r[a],p=e.vertices[f.index1];t.push(p.x,p.y,p.z),p=e.vertices[f.index2],t.push(p.x,p.y,p.z)}}else if(e&&e.isBufferGeometry){var m=new Ye;if(null!==e.index){for(var g,v=e.attributes.position,y=e.index,_=e.groups,x=0,b=(_=0===_.length?[{start:0,count:y.count,materialIndex:0}]:_).length;x<b;++x)for(var w=_[x],M=w.start,T=M,S=M+w.count;T<S;T+=3)for(var E=0;E<3;E++){var A=y.getX(T+E),L=y.getX(T+(E+1)%3),A=(n[0]=Math.min(A,L),n[1]=Math.max(A,L),n[0]+","+n[1]);void 0===r[A]&&(r[A]={index1:n[0],index2:n[1]})}for(g in r){var R=r[g];m.fromBufferAttribute(v,R.index1),t.push(m.x,m.y,m.z),m.fromBufferAttribute(v,R.index2),t.push(m.x,m.y,m.z)}}else for(var C=e.attributes.position,P=0,O=C.count/3;P<O;P++)for(var D=0;D<3;D++){m.fromBufferAttribute(C,3*P+D),t.push(m.x,m.y,m.z);var N=3*P+(D+1)%3;m.fromBufferAttribute(C,N),t.push(m.x,m.y,m.z)}}this.setAttribute("position",new K(t,3))}function nl(e,t,n){M.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new rl(e,t,n)),this.mergeVertices()}function rl(e,t,n){$.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};for(var r=[],i=[],a=[],o=[],s=new Ye,l=new Ye,u=new Ye,c=new Ye,h=new Ye,d=(e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter."),t+1),f=0;f<=n;f++)for(var p=f/n,m=0;m<=t;m++){var g=m/t;e(g,p,l),i.push(l.x,l.y,l.z),0<=g-1e-5?(e(g-1e-5,p,u),c.subVectors(l,u)):(e(1e-5+g,p,u),c.subVectors(u,l)),0<=p-1e-5?(e(g,p-1e-5,u),h.subVectors(l,u)):(e(g,1e-5+p,u),h.subVectors(u,l)),s.crossVectors(c,h).normalize(),a.push(s.x,s.y,s.z),o.push(g,p)}for(var v=0;v<n;v++)for(var y=0;y<t;y++){var _=v*d+y+1,x=(v+1)*d+y+1,b=(v+1)*d+y;r.push(v*d+y,_,b),r.push(_,x,b)}this.setIndex(r),this.setAttribute("position",new K(i,3)),this.setAttribute("normal",new K(a,3)),this.setAttribute("uv",new K(o,2))}function il(e,t,n,r){M.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new al(e,t,n,r)),this.mergeVertices()}function al(n,e,t,r){$.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:n,indices:e,radius:t,detail:r},t=t||1;for(var i=[],a=[],k=r=r||0,o=new Ye,s=new Ye,B=new Ye,l=0;l<e.length;l+=3){N(e[l+0],o),N(e[l+1],s),N(e[l+2],B),y=v=g=m=p=H=f=d=h=c=z=u=U=F=void 0;for(var F=o,U=s,u=B,z=k,c=Math.pow(2,z),h=[],d=0;d<=c;d++){h[d]=[];for(var f=F.clone().lerp(u,d/c),H=U.clone().lerp(u,d/c),p=c-d,m=0;m<=p;m++)h[d][m]=0===m&&d===c?f:f.clone().lerp(H,m/p)}for(var g=0;g<c;g++)for(var v=0;v<2*(c-g)-1;v++){var y=Math.floor(v/2);v%2==0?(D(h[g][y+1]),D(h[g+1][y]),D(h[g][y])):(D(h[g][y+1]),D(h[g+1][y+1]),D(h[g+1][y]))}}for(var G=t,_=new Ye,x=0;x<i.length;x+=3)_.x=i[x+0],_.y=i[x+1],_.z=i[x+2],_.normalize().multiplyScalar(G),i[x+0]=_.x,i[x+1]=_.y,i[x+2]=_.z;for(var b=new Ye,w=0;w<i.length;w+=3){b.x=i[w+0],b.y=i[w+1],b.z=i[w+2];var j=J(b)/2/Math.PI+.5,V=(e=>Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z)))(b)/Math.PI+.5;a.push(j,1-V)}for(var M=new Ye,T=new Ye,S=new Ye,W=new Ye,q=new Xe,X=new Xe,Y=new Xe,E=0,A=0;E<i.length;E+=9,A+=6){M.set(i[E+0],i[E+1],i[E+2]),T.set(i[E+3],i[E+4],i[E+5]),S.set(i[E+6],i[E+7],i[E+8]),q.set(a[A+0],a[A+1]),X.set(a[A+2],a[A+3]),Y.set(a[A+4],a[A+5]),W.copy(M).add(T).add(S).divideScalar(3);var L=J(W);I(q,A+0,M,L),I(X,A+2,T,L),I(Y,A+4,S,L)}for(var R=0;R<a.length;R+=6){var C=a[R+0],P=a[R+2],O=a[R+4],Z=Math.max(C,P,O),Q=Math.min(C,P,O);.9<Z&&Q<.1&&(C<.2&&(a[R+0]+=1),P<.2&&(a[R+2]+=1),O<.2)&&(a[R+4]+=1)}function D(e){i.push(e.x,e.y,e.z)}function N(e,t){e*=3;t.x=n[0+e],t.y=n[1+e],t.z=n[2+e]}function I(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function J(e){return Math.atan2(e.z,-e.x)}this.setAttribute("position",new K(i,3)),this.setAttribute("normal",new K(i.slice(),3)),this.setAttribute("uv",new K(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function ol(e,t){M.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new sl(e,t)),this.mergeVertices()}function sl(e,t){al.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ll(e,t){M.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ul(e,t)),this.mergeVertices()}function ul(e,t){al.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function cl(e,t){M.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new hl(e,t)),this.mergeVertices()}function hl(e,t){var n=(1+Math.sqrt(5))/2;al.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function dl(e,t){M.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new fl(e,t)),this.mergeVertices()}function fl(e,t){var n=(1+Math.sqrt(5))/2,r=1/n;al.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function pl(e,t,n,r,i,a){M.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new ml(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function ml(o,s,l,u,e){$.call(this),this.type="TubeBufferGeometry",this.parameters={path:o,tubularSegments:s,radius:l,radialSegments:u,closed:e},s=s||64,l=l||1,u=u||8,e=e||!1;for(var c=o.computeFrenetFrames(s,e),h=(this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals,new Ye),d=new Ye,t=new Xe,f=new Ye,p=[],m=[],n=[],r=[],i=0;i<s;i++)M(i);M(!1===e?s:0);for(var a=0;a<=s;a++)for(var g=0;g<=u;g++)t.x=a/s,t.y=g/u,n.push(t.x,t.y);for(var v=1;v<=s;v++)for(var y=1;y<=u;y++){var _=(u+1)*(v-1)+(y-1),x=(u+1)*v+(y-1),b=(u+1)*v+y,w=(u+1)*(v-1)+y;r.push(_,x,w),r.push(x,b,w)}function M(e){f=o.getPointAt(e/s,f);for(var t=c.normals[e],n=c.binormals[e],r=0;r<=u;r++){var i=r/u*Math.PI*2,a=Math.sin(i),i=-Math.cos(i);d.x=i*t.x+a*n.x,d.y=i*t.y+a*n.y,d.z=i*t.z+a*n.z,d.normalize(),m.push(d.x,d.y,d.z),h.x=f.x+l*d.x,h.y=f.y+l*d.y,h.z=f.z+l*d.z,p.push(h.x,h.y,h.z)}}this.setIndex(r),this.setAttribute("position",new K(p,3)),this.setAttribute("normal",new K(m,3)),this.setAttribute("uv",new K(n,2))}function gl(e,t,n,r,i,a,o){M.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new vl(e,t,n,r,i,a)),this.mergeVertices()}function vl(e,t,n,r,i,a){$.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;for(var o=[],s=[],l=[],u=[],c=new Ye,h=new Ye,d=new Ye,f=new Ye,p=new Ye,m=new Ye,g=new Ye,v=0;v<=n;++v){var y=v/n*i*Math.PI*2;A(y,i,a,e,d),A(.01+y,i,a,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(var _=0;_<=r;++_){var x=_/r*Math.PI*2,b=-t*Math.cos(x),x=t*Math.sin(x);c.x=d.x+(b*g.x+x*p.x),c.y=d.y+(b*g.y+x*p.y),c.z=d.z+(b*g.z+x*p.z),s.push(c.x,c.y,c.z),h.subVectors(c,d).normalize(),l.push(h.x,h.y,h.z),u.push(v/n),u.push(_/r)}}for(var w=1;w<=n;w++)for(var M=1;M<=r;M++){var T=(r+1)*w+(M-1),S=(r+1)*w+M,E=(r+1)*(w-1)+M;o.push((r+1)*(w-1)+(M-1),T,E),o.push(T,S,E)}function A(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),n=n/t*e,t=Math.cos(n);i.x=r*(2+t)*.5*a,i.y=r*(2+t)*o*.5,i.z=r*Math.sin(n)*.5}this.setIndex(o),this.setAttribute("position",new K(s,3)),this.setAttribute("normal",new K(l,3)),this.setAttribute("uv",new K(u,2))}function yl(e,t,n,r,i){M.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new _l(e,t,n,r,i)),this.mergeVertices()}function _l(e,t,n,r,i){$.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;for(var a=[],o=[],s=[],l=[],u=new Ye,c=new Ye,h=new Ye,d=0;d<=n;d++)for(var f=0;f<=r;f++){var p=f/r*i,m=d/n*Math.PI*2;c.x=(e+t*Math.cos(m))*Math.cos(p),c.y=(e+t*Math.cos(m))*Math.sin(p),c.z=t*Math.sin(m),o.push(c.x,c.y,c.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),h.subVectors(c,u).normalize(),s.push(h.x,h.y,h.z),l.push(f/r),l.push(d/n)}for(var g=1;g<=n;g++)for(var v=1;v<=r;v++){var y=(r+1)*(g-1)+v-1,_=(r+1)*(g-1)+v,x=(r+1)*g+v;a.push((r+1)*g+v-1,y,x),a.push(y,_,x)}this.setIndex(a),this.setAttribute("position",new K(o,3)),this.setAttribute("normal",new K(s,3)),this.setAttribute("uv",new K(l,2))}Zs.prototype=Object.assign(Object.create(m.prototype),{constructor:Zs,isPoints:!0,copy:function(e){return m.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Xs.copy(n.boundingSphere),Xs.applyMatrix4(r),Xs.radius+=i,!1!==e.ray.intersectsSphere(Xs)){Ws.getInverse(r),qs.copy(e.ray).applyMatrix4(Ws);var i=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=i*i;if(n.isBufferGeometry){var i=n.index,o=n.attributes.position.array;if(null!==i)for(var s=i.array,l=0,u=s.length;l<u;l++){var c=s[l];Ys.fromArray(o,3*c),Qs(Ys,c,a,r,e,t,this)}else for(var h=0,d=o.length/3;h<d;h++)Ys.fromArray(o,3*h),Qs(Ys,h,a,r,e,t,this)}else for(var f=n.vertices,p=0,m=f.length;p<m;p++)Qs(f[p],p,a,r,e,t,this)}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(0<n.length){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{t=e.morphTargets;void 0!==t&&0<t.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Js.prototype=Object.assign(Object.create(d.prototype),{constructor:Js,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),((Ks.prototype=Object.create(d.prototype)).constructor=Ks).prototype.isCompressedTexture=!0,(($s.prototype=Object.create(d.prototype)).constructor=$s).prototype.isCanvasTexture=!0,((el.prototype=Object.create(d.prototype)).constructor=el).prototype.isDepthTexture=!0,(tl.prototype=Object.create($.prototype)).constructor=tl,(nl.prototype=Object.create(M.prototype)).constructor=nl,(rl.prototype=Object.create($.prototype)).constructor=rl,(il.prototype=Object.create(M.prototype)).constructor=il,(al.prototype=Object.create($.prototype)).constructor=al,(ol.prototype=Object.create(M.prototype)).constructor=ol,(sl.prototype=Object.create(al.prototype)).constructor=sl,(ll.prototype=Object.create(M.prototype)).constructor=ll,(ul.prototype=Object.create(al.prototype)).constructor=ul,(cl.prototype=Object.create(M.prototype)).constructor=cl,(hl.prototype=Object.create(al.prototype)).constructor=hl,(dl.prototype=Object.create(M.prototype)).constructor=dl,(fl.prototype=Object.create(al.prototype)).constructor=fl,(pl.prototype=Object.create(M.prototype)).constructor=pl,((ml.prototype=Object.create($.prototype)).constructor=ml).prototype.toJSON=function(){var e=$.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},(gl.prototype=Object.create(M.prototype)).constructor=gl,(vl.prototype=Object.create($.prototype)).constructor=vl,(yl.prototype=Object.create(M.prototype)).constructor=yl,(_l.prototype=Object.create($.prototype)).constructor=_l;var xl=function(e,t,n){n=n||2;var r,i,a,o,s,l=t&&t.length,u=l?t[0]*n:e.length,c=bl(e,0,u,n,!0),h=[];if(c&&c.next!==c.prev){if(l&&(c=((e,t,n,r)=>{var i,a,o,s,l=[];for(i=0,a=t.length;i<a;i++)s=t[i]*r,o=i<a-1?t[i+1]*r:e.length,(s=bl(e,s,o,r,!1))===s.next&&(s.steiner=!0),l.push((e=>{for(var t=e,n=e;(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),(t=t.next)!==e;);return n})(s));for(l.sort(Tl),i=0;i<l.length;i++){{u=void 0;c=void 0;var u=l[i];var c=n;(c=((e,t)=>{var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&o<s){if((o=s)===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}}while((r=r.next)!==t);if(!n)return null;if(i!==o){var l,u=n,c=n.x,h=n.y,d=1/0;for(r=n;i>=r.x&&r.x>=c&&i!==r.x&&El(a<h?i:o,a,c,h,a<h?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),Pl(r,e))&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&((e,t)=>S(e.prev,e,t.prev)<0&&S(t.next,e,e.next)<0)(n,r)))&&(n=r,d=l),(r=r.next)!==u;);}return n})(u,c))&&(u=Ol(c,u),wl(c,c.next),wl(u,u.next))}n=wl(n,n.next)}return n})(e,t,c,n)),e.length>80*n){for(var d=r=e[0],f=i=e[1],p=n;p<u;p+=n)(a=e[p])<d&&(d=a),(o=e[p+1])<f&&(f=o),r<a&&(r=a),i<o&&(i=o);s=0!==(s=Math.max(r-d,i-f))?1/s:0}Ml(c,h,n,d,f,s)}return h};function bl(e,t,n,r,i){var a,o;if(i===0<((e,t,n,r)=>{for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i})(e,t,n,r))for(a=t;a<n;a+=r)o=Dl(a,e[a],e[a+1],o);else for(a=n-r;t<=a;a-=r)o=Dl(a,e[a],e[a+1],o);return o&&Al(o,o.next)&&(Nl(o),o=o.next),o}function wl(e,t){if(!e)return e;t=t||e;var n,r=e;do{if(n=!1,r.steiner||!Al(r,r.next)&&0!==S(r.prev,r,r.next))r=r.next;else{if(Nl(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Ml(e,t,n,r,i,a,o){if(e){if(!o&&a){for(var s=e,l=r,u=i,c=a,h=s;null===h.z&&(h.z=Sl(h.x,h.y,l,u,c)),h.prevZ=h.prev,h.nextZ=h.next,(h=h.next)!==s;);h.prevZ.nextZ=null,h.prevZ=null;var d,f,p,m,g,v,y,_,x=h,b=1;do{for(f=x,g=x=null,v=0;f;){for(v++,p=f,d=y=0;d<b&&(y++,p=p.nextZ);d++);for(_=b;0<y||0<_&&p;)0!==y&&(0===_||!p||f.z<=p.z)?(f=(m=f).nextZ,y--):(p=(m=p).nextZ,_--),g?g.nextZ=m:x=m,m.prevZ=g,g=m;f=p}}while(g.nextZ=null,b*=2,1<v)}for(var w,M,T=e;e.prev!==e.next;)if(w=e.prev,M=e.next,a?((e,t,n,r)=>{var i=e.prev,a=e,o=e.next;if(!(0<=S(i,a,o))){for(var s=(i.x<a.x?i.x<o.x?i:o:a.x<o.x?a:o).x,l=(i.y<a.y?i.y<o.y?i:o:a.y<o.y?a:o).y,u=(a.x<i.x?i.x>o.x?i:o:a.x>o.x?a:o).x,c=(a.y<i.y?i.y>o.y?i:o:a.y>o.y?a:o).y,h=Sl(s,l,t,n,r),d=Sl(u,c,t,n,r),f=e.prevZ,p=e.nextZ;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&El(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=S(f.prev,f,f.next))return;if(f=f.prevZ,p!==e.prev&&p!==e.next&&El(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&0<=S(p.prev,p,p.next))return;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&El(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=S(f.prev,f,f.next))return;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&El(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&0<=S(p.prev,p,p.next))return;p=p.nextZ}return 1}})(e,r,i,a):(e=>{var t=e.prev,n=e,r=e.next;if(!(0<=S(t,n,r))){for(var i=e.next.next;i!==e.prev;){if(El(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=S(i.prev,i,i.next))return;i=i.next}return 1}})(e))t.push(w.i/n),t.push(e.i/n),t.push(M.i/n),Nl(e),e=M.next,T=M.next;else if((e=M)===T){o?1===o?Ml(e=((e,t,n)=>{var r=e;do{var i=r.prev,a=r.next.next}while(!Al(i,a)&&Ll(i,r,r.next,a)&&Pl(i,a)&&Pl(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Nl(r),Nl(r.next),r=e=a),(r=r.next)!==e);return wl(r)})(wl(e),t,n),t,n,r,i,a,2):2===o&&((e,t,n,r,i,a)=>{var o=e;do{for(var s,l=o.next.next;l!==o.prev;){if(o.i!==l.i&&((e,t)=>e.next.i!==t.i&&e.prev.i!==t.i&&!((e,t)=>{var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ll(n,n.next,e,t))return 1}while((n=n.next)!==e)})(e,t)&&(Pl(e,t)&&Pl(t,e)&&((e,t)=>{for(var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==e;);return r})(e,t)&&(S(e.prev,e,t.prev)||S(e,t.prev,t))||Al(e,t)&&0<S(e.prev,e,e.next)&&0<S(t.prev,t,t.next)))(o,l))return s=Ol(o,l),o=wl(o,o.next),s=wl(s,s.next),Ml(o,t,n,r,i,a),Ml(s,t,n,r,i,a);l=l.next}}while((o=o.next)!==e)})(e,t,n,r,i,a):Ml(wl(e),t,n,r,i,a,1);break}}}function Tl(e,t){return e.x-t.x}function Sl(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function El(e,t,n,r,i,a,o,s){return 0<=(i-o)*(t-s)-(e-o)*(a-s)&&0<=(e-o)*(r-s)-(n-o)*(t-s)&&0<=(n-o)*(a-s)-(i-o)*(r-s)}function S(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Al(e,t){return e.x===t.x&&e.y===t.y}function Ll(e,t,n,r){var i=Cl(S(e,t,n)),a=Cl(S(e,t,r)),o=Cl(S(n,r,e)),s=Cl(S(n,r,t));return i!==a&&o!==s||0===i&&Rl(e,n,t)||0===a&&Rl(e,r,t)||0===o&&Rl(n,e,r)||!(0!==s||!Rl(n,t,r))}function Rl(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Cl(e){return 0<e?1:e<0?-1:0}function Pl(e,t){return S(e.prev,e,e.next)<0?0<=S(e,t,e.next)&&0<=S(e,e.prev,t):S(e,t,e.prev)<0||S(e,e.next,t)<0}function Ol(e,t){var n=new Il(e.i,e.x,e.y),r=new Il(t.i,t.x,t.y),i=e.next,a=t.prev;return(e.next=t).prev=e,(n.next=i).prev=n,r.next=n,(a.next=n.prev=r).prev=a,r}function Dl(e,t,n,r){e=new Il(e,t,n);return r?(e.next=r.next,(e.prev=r).next.prev=e,r.next=e):(e.prev=e).next=e,e}function Nl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Il(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var kl={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return kl.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[],a=(Bl(e),Fl(n,e),e.length);t.forEach(Bl);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,Fl(n,t[o]);for(var s=xl(n,r),l=0;l<s.length;l+=3)i.push(s.slice(l,l+3));return i}};function Bl(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function Fl(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Ul(e,t){M.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new zl(e,t)),this.mergeVertices()}function zl(e,je){$.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:je},e=Array.isArray(e)?e:[e];for(var Ve=this,We=[],qe=[],t=0,n=e.length;t<n;t++)(e=>{var r=[],k=void 0!==je.curveSegments?je.curveSegments:12,f=void 0!==je.steps?je.steps:1,t=void 0!==je.depth?je.depth:100,n=void 0===je.bevelEnabled||je.bevelEnabled,i=void 0!==je.bevelThickness?je.bevelThickness:6,a=void 0!==je.bevelSize?je.bevelSize:i-2,o=void 0!==je.bevelOffset?je.bevelOffset:0,p=void 0!==je.bevelSegments?je.bevelSegments:3,s=je.extrudePath,B=void 0!==je.UVGenerator?je.UVGenerator:Hl;void 0!==je.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),t=je.amount);var l,u,c,h,d,m=!1;s&&(l=s.getSpacedPoints(f),n=!(m=!0),u=s.computeFrenetFrames(f,!1),c=new Ye,h=new Ye,d=new Ye),n||(o=a=i=p=0);var g=(s=e.extractPoints(k)).shape,v=s.holes;if(!kl.isClockWise(g)){g=g.reverse();for(var y=0,F=v.length;y<F;y++){var U=v[y];kl.isClockWise(U)&&(v[y]=U.reverse())}}for(var _=kl.triangulateShape(g,v),x=g,z=0,H=v.length;z<H;z++){var G=v[z];g=g.concat(G)}function b(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var w=g.length,M=_.length;function j(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=n.x-e.x,o=n.y-e.y,s=r*r+i*i;if(Math.abs(r*o-i*a)>Number.EPSILON){var l=Math.sqrt(s),u=Math.sqrt(a*a+o*o),c=t.x-i/l,t=t.y+r/l,l=((n.x-o/u-c)*o-(n.y+a/u-t)*a)/(r*o-i*a),n=(u=c+r*l-e.x)*u+(c=t+i*l-e.y)*c;if(n<=2)return new Xe(u,c);l=Math.sqrt(n/2)}else{t=!1;r>Number.EPSILON?a>Number.EPSILON&&(t=!0):r<-Number.EPSILON?a<-Number.EPSILON&&(t=!0):Math.sign(i)===Math.sign(o)&&(t=!0),l=t?(u=-i,c=r,Math.sqrt(s)):(u=r,c=i,Math.sqrt(s/2))}return new Xe(u/l,c/l)}for(var T=[],S=0,E=x.length,V=E-1,W=S+1;S<E;S++,V++,W++)V===E&&(V=0),W===E&&(W=0),T[S]=j(x[S],x[V],x[W]);for(var A,q=[],X=T.concat(),Y=0,Z=v.length;Y<Z;Y++){var Q=v[Y];A=[];for(var L=0,J=Q.length,K=J-1,$=L+1;L<J;L++,K++,$++)K===J&&(K=0),$===J&&($=0),A[L]=j(Q[L],Q[K],Q[$]);q.push(A),X=X.concat(A)}for(var ee=0;ee<p;ee++){for(var te=ee/p,ne=i*Math.cos(te*Math.PI/2),re=a*Math.sin(te*Math.PI/2)+o,ie=0,ae=x.length;ie<ae;ie++){var oe=b(x[ie],T[ie],re);O(oe.x,oe.y,-ne)}for(var se=0,le=v.length;se<le;se++){var ue=v[se];A=q[se];for(var ce=0,he=ue.length;ce<he;ce++){var de=b(ue[ce],A[ce],re);O(de.x,de.y,-ne)}}}for(var fe=a+o,R=0;R<w;R++){var pe=n?b(g[R],X[R],fe):g[R];m?(h.copy(u.normals[0]).multiplyScalar(pe.x),c.copy(u.binormals[0]).multiplyScalar(pe.y),d.copy(l[0]).add(h).add(c),O(d.x,d.y,d.z)):O(pe.x,pe.y,0)}for(var C=1;C<=f;C++)for(var P=0;P<w;P++){var me=n?b(g[P],X[P],fe):g[P];m?(h.copy(u.normals[C]).multiplyScalar(me.x),c.copy(u.binormals[C]).multiplyScalar(me.y),d.copy(l[C]).add(h).add(c),O(d.x,d.y,d.z)):O(me.x,me.y,t/f*C)}for(var ge=p-1;0<=ge;ge--){for(var ve=ge/p,ye=i*Math.cos(ve*Math.PI/2),_e=a*Math.sin(ve*Math.PI/2)+o,xe=0,be=x.length;xe<be;xe++){var we=b(x[xe],T[xe],_e);O(we.x,we.y,t+ye)}for(var Me=0,Te=v.length;Me<Te;Me++){var Se=v[Me];A=q[Me];for(var Ee=0,Ae=Se.length;Ee<Ae;Ee++){var Le=b(Se[Ee],A[Ee],_e);m?O(Le.x,Le.y+l[f-1].y,l[f-1].x+ye):O(Le.x,Le.y,t+ye)}}}function Re(e,t){for(var n=e.length;0<=--n;){var r=n,i=n-1;i<0&&(i=e.length-1);for(var a=0,o=f+2*p;a<o;a++){var s=w*a,l=w*(a+1),u=(d=h=c=u=void 0,t+r+s),c=t+i+s,h=t+i+l,d=t+r+l;D(u),D(c),D(d),D(c),D(h),D(d),u=We.length/3,N((c=B.generateSideWallUV(Ve,We,u-6,u-3,u-2,u-1))[0]),N(c[1]),N(c[3]),N(c[1]),N(c[2]),N(c[3])}}}function O(e,t,n){r.push(e),r.push(t),r.push(n)}function Ce(e,t,n){D(e),D(t),D(n);e=We.length/3,t=B.generateTopUV(Ve,We,e-3,e-2,e-1);N(t[0]),N(t[1]),N(t[2])}function D(e){We.push(r[3*e+0]),We.push(r[3*e+1]),We.push(r[3*e+2])}function N(e){qe.push(e.x),qe.push(e.y)}e=We.length/3;if(n){for(var I=0*w,Pe=0;Pe<M;Pe++){var Oe=_[Pe];Ce(Oe[2]+I,Oe[1]+I,Oe[0]+I)}for(var I=w*(f+2*p),De=0;De<M;De++){var Ne=_[De];Ce(Ne[0]+I,Ne[1]+I,Ne[2]+I)}}else{for(var Ie=0;Ie<M;Ie++){var ke=_[Ie];Ce(ke[2],ke[1],ke[0])}for(var Be=0;Be<M;Be++){var Fe=_[Be];Ce(Fe[0]+w*f,Fe[1]+w*f,Fe[2]+w*f)}}Ve.addGroup(e,We.length/3-e,0);var k=We.length/3,Ue=0;Re(x,Ue),Ue+=x.length;for(var ze=0,He=v.length;ze<He;ze++){var Ge=v[ze];Re(Ge,Ue),Ue+=Ge.length}Ve.addGroup(k,We.length/3-k,1)})(e[t]);this.setAttribute("position",new K(We,3)),this.setAttribute("uv",new K(qe,2)),this.computeVertexNormals()}((Ul.prototype=Object.create(M.prototype)).constructor=Ul).prototype.toJSON=function(){var e=M.prototype.toJSON.call(this);return Gl(this.parameters.shapes,this.parameters.options,e)},((zl.prototype=Object.create($.prototype)).constructor=zl).prototype.toJSON=function(){var e=$.prototype.toJSON.call(this);return Gl(this.parameters.shapes,this.parameters.options,e)};var Hl={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*r],r=t[3*r+1],s=t[3*i],i=t[3*i+1];return[new Xe(a,t[3*n+1]),new Xe(o,r),new Xe(s,i)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],n=t[3*n+2],l=t[3*r],u=t[3*r+1],r=t[3*r+2],c=t[3*i],h=t[3*i+1],i=t[3*i+2],d=t[3*a],f=t[3*a+1],t=t[3*a+2];return Math.abs(s-u)<.01?[new Xe(o,1-n),new Xe(l,1-r),new Xe(c,1-i),new Xe(d,1-t)]:[new Xe(s,1-n),new Xe(u,1-r),new Xe(h,1-i),new Xe(f,1-t)]}};function Gl(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function jl(e,t){M.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Vl(e,t)),this.mergeVertices()}function Vl(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new M;n=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),zl.call(this,n,t),this.type="TextBufferGeometry"}function Wl(e,t,n,r,i,a,o){M.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new ql(e,t,n,r,i,a,o)),this.mergeVertices()}function ql(e,t,n,r,i,a,o){$.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=Math.min(a+o,Math.PI),l=0,u=[],c=new Ye,h=new Ye,d=[],f=[],p=[],m=[],g=0;g<=n;g++){var v=[],y=g/n,_=0;0==g&&0==a?_=.5/t:g==n&&s==Math.PI&&(_=-.5/t);for(var x=0;x<=t;x++){var b=x/t;c.x=-e*Math.cos(r+b*i)*Math.sin(a+y*o),c.y=e*Math.cos(a+y*o),c.z=e*Math.sin(r+b*i)*Math.sin(a+y*o),f.push(c.x,c.y,c.z),h.copy(c).normalize(),p.push(h.x,h.y,h.z),m.push(b+_,1-y),v.push(l++)}u.push(v)}for(var w=0;w<n;w++)for(var M=0;M<t;M++){var T=u[w][M+1],S=u[w][M],E=u[w+1][M],A=u[w+1][M+1];(0!==w||0<a)&&d.push(T,S,A),(w!==n-1||s<Math.PI)&&d.push(S,E,A)}this.setIndex(d),this.setAttribute("position",new K(f,3)),this.setAttribute("normal",new K(p,3)),this.setAttribute("uv",new K(m,2))}function Xl(e,t,n,r,i,a){M.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new Yl(e,t,n,r,i,a)),this.mergeVertices()}function Yl(e,t,n,r,i,a){$.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;for(var o=[],s=[],l=[],u=[],c=e,h=(t-e)/(r=void 0!==r?Math.max(1,r):1),d=new Ye,f=new Xe,p=0;p<=r;p++){for(var m=0;m<=n;m++){var g=i+m/n*a;d.x=c*Math.cos(g),d.y=c*Math.sin(g),s.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,u.push(f.x,f.y)}c+=h}for(var v=0;v<r;v++)for(var y=v*(n+1),_=0;_<n;_++){var x=_+y,b=x+n+1,w=x+n+2,M=x+1;o.push(x,b,M),o.push(b,w,M)}this.setIndex(o),this.setAttribute("position",new K(s,3)),this.setAttribute("normal",new K(l,3)),this.setAttribute("uv",new K(u,2))}function Zl(e,t,n,r){M.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Ql(e,t,n,r)),this.mergeVertices()}function Ql(e,t,n,r){$.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Te.clamp(r,0,2*Math.PI);for(var i=[],a=[],o=[],s=1/t,l=new Ye,u=new Xe,c=0;c<=t;c++)for(var h=n+c*s*r,d=Math.sin(h),f=Math.cos(h),p=0;p<=e.length-1;p++)l.x=e[p].x*d,l.y=e[p].y,l.z=e[p].x*f,a.push(l.x,l.y,l.z),u.x=c/t,u.y=p/(e.length-1),o.push(u.x,u.y);for(var m=0;m<t;m++)for(var g=0;g<e.length-1;g++){var v=g+m*e.length,y=v+e.length,_=v+e.length+1,x=v+1;i.push(v,y,x),i.push(y,_,x)}if(this.setIndex(i),this.setAttribute("position",new K(a,3)),this.setAttribute("uv",new K(o,2)),this.computeVertexNormals(),r===2*Math.PI)for(var b=this.attributes.normal.array,w=new Ye,M=new Ye,T=new Ye,S=t*e.length*3,E=0,A=0;E<e.length;E++,A+=3)w.x=b[A+0],w.y=b[A+1],w.z=b[A+2],M.x=b[S+A+0],M.y=b[S+A+1],M.z=b[S+A+2],T.addVectors(w,M).normalize(),b[A+0]=b[S+A+0]=T.x,b[A+1]=b[S+A+1]=T.y,b[A+2]=b[S+A+2]=T.z}function Jl(e,t){M.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Kl(e,t)),this.mergeVertices()}function Kl(e,y){$.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:y},y=y||12;var _=[],x=[],b=[],w=[],t=0,M=0;if(!1===Array.isArray(e))r(e);else for(var n=0;n<e.length;n++)r(e[n]),this.addGroup(t,M,n),t+=M,M=0;function r(e){var t=x.length/3,e=e.extractPoints(y),n=e.shape,r=e.holes;!1===kl.isClockWise(n)&&(n=n.reverse());for(var i=0,a=r.length;i<a;i++){var o=r[i];!0===kl.isClockWise(o)&&(r[i]=o.reverse())}for(var s=kl.triangulateShape(n,r),l=0,u=r.length;l<u;l++)var c=r[l],n=n.concat(c);for(var h=0,d=n.length;h<d;h++){var f=n[h];x.push(f.x,f.y,0),b.push(0,0,1),w.push(f.x,f.y)}for(var p=0,m=s.length;p<m;p++){var g=s[p],v=g[0]+t;_.push(v,g[1]+t,g[2]+t),M+=3}}this.setIndex(_),this.setAttribute("position",new K(x,3)),this.setAttribute("normal",new K(b,3)),this.setAttribute("uv",new K(w,2))}function $l(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function eu(e,t){$.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;for(var n,r,i,a,o=[],s=Math.cos(Te.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"],h=(e.isBufferGeometry?(a=new M).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals(),a.vertices),d=a.faces,f=0,p=d.length;f<p;f++)for(var m=d[f],g=0;g<3;g++)n=m[c[g]],r=m[c[(g+1)%3]],l[0]=Math.min(n,r),l[1]=Math.max(n,r),void 0===u[i=l[0]+","+l[1]]?u[i]={index1:l[0],index2:l[1],face1:f,face2:void 0}:u[i].face2=f;for(i in u){var v,y=u[i];(void 0===y.face2||d[y.face1].normal.dot(d[y.face2].normal)<=s)&&(v=h[y.index1],o.push(v.x,v.y,v.z),v=h[y.index2],o.push(v.x,v.y,v.z))}this.setAttribute("position",new K(o,3))}function tu(e,t,n,r,i,a,o,s){M.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new nu(e,t,n,r,i,a,o,s)),this.mergeVertices()}function nu(m,g,e,v,t,n,y,_){$.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:m,radiusBottom:g,height:e,radialSegments:v,heightSegments:t,openEnded:n,thetaStart:y,thetaLength:_};for(var x=this,b=(m=void 0!==m?m:1,g=void 0!==g?g:1,e=e||1,v=Math.floor(v)||8,t=Math.floor(t)||1,n=void 0!==n&&n,y=void 0!==y?y:0,_=void 0!==_?_:2*Math.PI,[]),w=[],M=[],T=[],S=0,r=[],E=e/2,A=0,i=new Ye,a=new Ye,o=0,s=(g-m)/e,l=0;l<=t;l++){for(var u=[],c=l/t,h=c*(g-m)+m,d=0;d<=v;d++){var f=d/v,p=f*_+y,L=Math.sin(p),p=Math.cos(p);a.x=h*L,a.y=-c*e+E,a.z=h*p,w.push(a.x,a.y,a.z),i.set(L,s,p).normalize(),M.push(i.x,i.y,i.z),T.push(f,1-c),u.push(S++)}r.push(u)}for(var R=0;R<v;R++)for(var C=0;C<t;C++){var P=r[C][R],O=r[C+1][R],D=r[C+1][R+1],N=r[C][R+1];b.push(P,O,N),b.push(O,D,N),o+=6}function I(e){for(var t=new Xe,n=new Ye,r=0,i=!0===e?m:g,a=!0===e?1:-1,o=S,s=1;s<=v;s++)w.push(0,E*a,0),M.push(0,a,0),T.push(.5,.5),S++;for(var l=S,u=0;u<=v;u++){var c=u/v*_+y,h=Math.cos(c),c=Math.sin(c);n.x=i*c,n.y=E*a,n.z=i*h,w.push(n.x,n.y,n.z),M.push(0,a,0),t.x=.5*h+.5,t.y=.5*c*a+.5,T.push(t.x,t.y),S++}for(var d=0;d<v;d++){var f=o+d,p=l+d;!0===e?b.push(p,p+1,f):b.push(p+1,p,f),r+=3}x.addGroup(A,r,!0===e?1:2),A+=r}x.addGroup(A,o,0),A+=o,!1===n&&(0<m&&I(!0),0<g)&&I(!1),this.setIndex(b),this.setAttribute("position",new K(w,3)),this.setAttribute("normal",new K(M,3)),this.setAttribute("uv",new K(T,2))}function ru(e,t,n,r,i,a,o){tu.call(this,0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function iu(e,t,n,r,i,a,o){nu.call(this,0,e,t,n,r,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function au(e,t,n,r){M.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ou(e,t,n,r)),this.mergeVertices()}function ou(e,t,n,r){$.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=[],a=[],o=[],s=[],l=new Ye,u=new Xe;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(var c=0,h=3;c<=t;c++,h+=3){var d=n+c/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),a.push(l.x,l.y,l.z),o.push(0,0,1),u.x=(a[h]/e+1)/2,u.y=(a[h+1]/e+1)/2,s.push(u.x,u.y)}for(var f=1;f<=t;f++)i.push(f,f+1,0);this.setIndex(i),this.setAttribute("position",new K(a,3)),this.setAttribute("normal",new K(o,3)),this.setAttribute("uv",new K(s,2))}(jl.prototype=Object.create(M.prototype)).constructor=jl,(Vl.prototype=Object.create(zl.prototype)).constructor=Vl,(Wl.prototype=Object.create(M.prototype)).constructor=Wl,(ql.prototype=Object.create($.prototype)).constructor=ql,(Xl.prototype=Object.create(M.prototype)).constructor=Xl,(Yl.prototype=Object.create($.prototype)).constructor=Yl,(Zl.prototype=Object.create(M.prototype)).constructor=Zl,(Ql.prototype=Object.create($.prototype)).constructor=Ql,((Jl.prototype=Object.create(M.prototype)).constructor=Jl).prototype.toJSON=function(){var e=M.prototype.toJSON.call(this);return $l(this.parameters.shapes,e)},((Kl.prototype=Object.create($.prototype)).constructor=Kl).prototype.toJSON=function(){var e=$.prototype.toJSON.call(this);return $l(this.parameters.shapes,e)},(eu.prototype=Object.create($.prototype)).constructor=eu,(tu.prototype=Object.create(M.prototype)).constructor=tu,(nu.prototype=Object.create($.prototype)).constructor=nu,(ru.prototype=Object.create(tu.prototype)).constructor=ru,(iu.prototype=Object.create(nu.prototype)).constructor=iu,(au.prototype=Object.create(M.prototype)).constructor=au,(ou.prototype=Object.create($.prototype)).constructor=ou;var su=Object.freeze({__proto__:null,WireframeGeometry:tl,ParametricGeometry:nl,ParametricBufferGeometry:rl,TetrahedronGeometry:ol,TetrahedronBufferGeometry:sl,OctahedronGeometry:ll,OctahedronBufferGeometry:ul,IcosahedronGeometry:cl,IcosahedronBufferGeometry:hl,DodecahedronGeometry:dl,DodecahedronBufferGeometry:fl,PolyhedronGeometry:il,PolyhedronBufferGeometry:al,TubeGeometry:pl,TubeBufferGeometry:ml,TorusKnotGeometry:gl,TorusKnotBufferGeometry:vl,TorusGeometry:yl,TorusBufferGeometry:_l,TextGeometry:jl,TextBufferGeometry:Vl,SphereGeometry:Wl,SphereBufferGeometry:ql,RingGeometry:Xl,RingBufferGeometry:Yl,PlaneGeometry:Wi,PlaneBufferGeometry:qi,LatheGeometry:Zl,LatheBufferGeometry:Ql,ShapeGeometry:Jl,ShapeBufferGeometry:Kl,ExtrudeGeometry:Ul,ExtrudeBufferGeometry:zl,EdgesGeometry:eu,ConeGeometry:ru,ConeBufferGeometry:iu,CylinderGeometry:tu,CylinderBufferGeometry:nu,CircleGeometry:au,CircleBufferGeometry:ou,BoxGeometry:Li,BoxBufferGeometry:Ri});function lu(e){o.call(this),this.type="ShadowMaterial",this.color=new x(0),this.transparent=!0,this.setValues(e)}function uu(e){Ii.call(this,e),this.type="RawShaderMaterial"}function cu(e){o.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new x(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new x(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function hu(e){cu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xe(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(e)}function du(e){o.call(this),this.type="MeshPhongMaterial",this.color=new x(16777215),this.specular=new x(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new x(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=A,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function fu(e){o.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new x(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new x(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function pu(e){o.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function mu(e){o.call(this),this.type="MeshLambertMaterial",this.color=new x(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new x(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=A,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function gu(e){o.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new x(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function vu(e){b.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}((lu.prototype=Object.create(o.prototype)).constructor=lu).prototype.isShadowMaterial=!0,lu.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.color.copy(e.color),this},((uu.prototype=Object.create(Ii.prototype)).constructor=uu).prototype.isRawShaderMaterial=!0,((cu.prototype=Object.create(o.prototype)).constructor=cu).prototype.isMeshStandardMaterial=!0,cu.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},((hu.prototype=Object.create(cu.prototype)).constructor=hu).prototype.isMeshPhysicalMaterial=!0,hu.prototype.copy=function(e){return cu.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,this.sheen=e.sheen?(this.sheen||new x).copy(e.sheen):null,this.transparency=e.transparency,this},((du.prototype=Object.create(o.prototype)).constructor=du).prototype.isMeshPhongMaterial=!0,du.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((fu.prototype=Object.create(o.prototype)).constructor=fu).prototype.isMeshToonMaterial=!0,fu.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((pu.prototype=Object.create(o.prototype)).constructor=pu).prototype.isMeshNormalMaterial=!0,pu.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((mu.prototype=Object.create(o.prototype)).constructor=mu).prototype.isMeshLambertMaterial=!0,mu.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((gu.prototype=Object.create(o.prototype)).constructor=gu).prototype.isMeshMatcapMaterial=!0,gu.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((vu.prototype=Object.create(b.prototype)).constructor=vu).prototype.isLineDashedMaterial=!0,vu.prototype.copy=function(e){return b.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var yu=Object.freeze({__proto__:null,ShadowMaterial:lu,SpriteMaterial:ns,RawShaderMaterial:uu,ShaderMaterial:Ii,PointsMaterial:Vs,MeshPhysicalMaterial:hu,MeshStandardMaterial:cu,MeshPhongMaterial:du,MeshToonMaterial:fu,MeshNormalMaterial:pu,MeshLambertMaterial:mu,MeshDepthMaterial:Io,MeshDistanceMaterial:ko,MeshBasicMaterial:Hr,MeshMatcapMaterial:gu,LineDashedMaterial:vu,LineBasicMaterial:b,Material:o}),T={arraySlice:function(e,t,n){return T.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(n){for(var e=n.length,t=new Array(e),r=0;r!==e;++r)t[r]=r;return t.sort(function(e,t){return n[e]-n[t]}),t},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))for(;void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),void 0!==(a=e[i++]););else if(void 0!==o.toArray)for(;void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),void 0!==(a=e[i++]););else for(;void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),void 0!==(a=e[i++]););}},subclip:function(e,t,n,r,i){i=i||30;for(var a=e.clone(),o=(a.name=t,[]),s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],h=[],d=0;d<l.times.length;++d){var f=l.times[d]*i;if(!(f<n||r<=f)){c.push(l.times[d]);for(var p=0;p<u;++p)h.push(l.values[d*u+p])}}0!==c.length&&(l.times=T.convertArray(c,l.times.constructor),l.values=T.convertArray(h,l.values.constructor),o.push(l))}a.tracks=o;for(var m=1/0,g=0;g<a.tracks.length;++g)m>a.tracks[g].times[0]&&(m=a.tracks[g].times[0]);for(var v=0;v<a.tracks.length;++v)a.tracks[v].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(c,e,h,t){void 0===h&&(h=c);for(var n=c.tracks.length,d=(e=void 0===e?0:e)/(t=void 0===t||t<=0?30:t),r=0;r<n;++r)(e=>{var t=h.tracks[e],n=t.ValueTypeName;if("bool"!==n&&"string"!==n){var r=c.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===n});if(void 0!==r)for(var i=t.getValueSize(),e=t.times.length-1,a=void 0,o=(a=d<=t.times[0]?T.arraySlice(t.values,0,t.valueSize):d>=t.times[e]?T.arraySlice(t.values,e*i):((e=t.createInterpolant()).evaluate(d),e.resultBuffer),"quaternion"===n&&new f(a[0],a[1],a[2],a[3]).normalize().conjugate().toArray(a),r.times.length),s=0;s<o;++s){var l=s*i;if("quaternion"===n)f.multiplyQuaternionsFlat(r.values,l,a,0,r.values,l);else for(var u=0;u<i;++u)r.values[l+u]-=a[u]}}})(r);return c.blendMode=2501,c}};function _u(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function xu(e,t,n,r){_u.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function bu(e,t,n,r){_u.call(this,e,t,n,r)}function wu(e,t,n,r){_u.call(this,e,t,n,r)}function s(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=T.convertArray(t,this.TimeBufferType),this.values=T.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Mu(e,t,n){s.call(this,e,t,n)}function Tu(e,t,n,r){s.call(this,e,t,n,r)}function Su(e,t,n,r){s.call(this,e,t,n,r)}function Eu(e,t,n,r){_u.call(this,e,t,n,r)}function Au(e,t,n,r){s.call(this,e,t,n,r)}function Lu(e,t,n,r){s.call(this,e,t,n,r)}function Ru(e,t,n,r){s.call(this,e,t,n,r)}function Cu(e,t,n,r){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==r?r:2500,this.uuid=Te.generateUUID(),this.duration<0&&this.resetDuration()}function Pu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t,n,r=(e=>{switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Su;case"vector":case"vector2":case"vector3":case"vector4":return Ru;case"color":return Tu;case"quaternion":return Au;case"bool":case"boolean":return Mu;case"string":return Lu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)})(e.type);return void 0===e.times&&(T.flattenJSON(e.keys,t=[],n=[],"value"),e.times=t,e.values=n),void 0!==r.parse?r.parse(e):new r(e.name,e.times,e.values,e.interpolation)}Object.assign(_u.prototype,{evaluate:function(e){var t,n=this.parameterPositions,r=this._cachedIndex,i=n[r],a=n[r-1];e:{t:{n:{r:if(!(e<i)){for(var o=r+2;;){if(void 0===i){if(e<a)break r;return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,e,a)}if(r===o)break;if(a=i,e<(i=n[++r]))break t}t=n.length;break n}if(a<=e)break e;var s=n[1];e<s&&(r=2,a=s);for(var l=r-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=a,(a=n[--r-1])<=e)break t}t=r,r=0}for(;r<t;){var u=r+t>>>1;e<n[u]?t=u:r=1+u}if(i=n[r],void 0===(a=n[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,a,e)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(_u.prototype,{beforeStart_:_u.prototype.copySampleValue_,afterEnd_:_u.prototype.copySampleValue_}),xu.prototype=Object.assign(Object.create(_u.prototype),{constructor:xu,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=e,o=2*t-n;break;case 2402:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*n-t;break;case 2402:s=n+r[a=1]-r[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,e=this._weightPrev,h=this._weightNext,n=(n-t)/(r-t),r=n*n,t=r*n,d=-e*t+2*e*r-e*n,f=(1+e)*t+(-1.5-2*e)*r+(-.5+e)*n+1,p=(-1-h)*t+(1.5+h)*r+.5*n,m=h*t-h*r,g=0;g!==o;++g)i[g]=d*a[u+g]+f*a[l+g]+p*a[s+g]+m*a[c+g];return i}}),bu.prototype=Object.assign(Object.create(_u.prototype),{constructor:bu,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u,h=0;h!==o;++h)i[h]=a[l+h]*c+a[s+h]*u;return i}}),wu.prototype=Object.assign(Object.create(_u.prototype),{constructor:wu,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(s,{toJSON:function(e){var t,n=e.constructor;return void 0!==n.toJSON?t=n.toJSON(e):(t={name:e.name,times:T.convertArray(e.times,Array),values:T.convertArray(e.values,Array)},(n=e.getInterpolation())!==e.DefaultInterpolation&&(t.interpolation=n)),t.type=e.ValueTypeName,t}}),Object.assign(s.prototype,{constructor:s,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new wu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new bu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new xu(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}else this.createInterpolant=t;return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n,r=this.times,i=r.length,a=0,o=i-1;a!==i&&r[a]<e;)++a;for(;-1!==o&&r[o]>t;)--o;return++o,0===a&&o===i||(o<=a&&(a=(o=Math.max(o,1))-1),n=this.getValueSize(),this.times=T.arraySlice(r,a,o),this.values=T.arraySlice(this.values,a*n,o*n)),this},validate:function(){for(var e=!0,t=this.getValueSize(),n=(t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1),this.times),r=this.values,i=n.length,a=(0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1),null),o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&s<a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&T.isTypedArray(r))for(var l=0,u=r.length;l!==u;++l){var c=r[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e},optimize:function(){for(var e=T.arraySlice(this.times),t=T.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1,a=1,o=1;o<i;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(r)s=!0;else for(var u=o*n,c=u-n,h=u+n,d=0;d!==n;++d){var f=t[u+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,m=a*n,g=0;g!==n;++g)t[m+g]=t[p+g]}++a}}if(0<i){e[a]=e[i];for(var v=i*n,y=a*n,_=0;_!==n;++_)t[y+_]=t[v+_];++a}return a!==e.length?(this.times=T.arraySlice(e,0,a),this.values=T.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this},clone:function(){var e=T.arraySlice(this.times,0),t=T.arraySlice(this.values,0),e=new this.constructor(this.name,e,t);return e.createInterpolant=this.createInterpolant,e}}),Mu.prototype=Object.assign(Object.create(s.prototype),{constructor:Mu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Tu.prototype=Object.assign(Object.create(s.prototype),{constructor:Tu,ValueTypeName:"color"}),Su.prototype=Object.assign(Object.create(s.prototype),{constructor:Su,ValueTypeName:"number"}),Eu.prototype=Object.assign(Object.create(_u.prototype),{constructor:Eu,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o,u=l+o;l!==u;l+=4)f.slerpFlat(i,0,a,l-o,a,l,s);return i}}),Au.prototype=Object.assign(Object.create(s.prototype),{constructor:Au,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Eu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Lu.prototype=Object.assign(Object.create(s.prototype),{constructor:Lu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ru.prototype=Object.assign(Object.create(s.prototype),{constructor:Ru,ValueTypeName:"vector"}),Object.assign(Cu,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Pu(n[i]).scale(r));return new Cu(e.name,e.duration,t,e.blendMode)},toJSON:function(e){for(var t=[],n=e.tracks,e={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},r=0,i=n.length;r!==i;++r)t.push(s.toJSON(n[r]));return e},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=((u=[]).push((o+i-1)%i,o,(o+1)%i),s.push(0,1,0),T.getKeyframeOrder(u)),u=T.sortedArray(u,1,l),s=T.sortedArray(s,1,l);r||0!==u[0]||(u.push(i),s.push(s[0])),a.push(new Su(".morphTargetInfluences["+t[o].name+"]",u,s).scale(1/n))}return new Cu(e,-1,a)},findByName:function(e,t){var n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s,l=e[a],u=l.name.match(i);u&&1<u.length&&((s=r[u=u[1]])||(r[u]=s=[]),s.push(l))}var c,h=[];for(c in r)h.push(Cu.CreateFromMorphTargetSequence(c,r[c],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){var a;0!==n.length&&(T.flattenJSON(n,n=[],a=[],r),0!==n.length)&&i.push(new e(t,n,a))},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h,d={},f=void 0,f=0;f<c.length;f++)if(c[f].morphTargets)for(var p=0;p<c[f].morphTargets.length;p++)d[c[f].morphTargets[p]]=-1;for(h in d){for(var m=[],g=[],v=0;v!==c[f].morphTargets.length;++v){var y=c[f];m.push(y.time),g.push(y.morphTarget===h?1:0)}r.push(new Su(".morphTargetInfluence["+h+"]",m,g))}s=d.length*(a||1)}else{var _=".bones["+t[u].name+"]";n(Ru,_+".position",c,"pos",r),n(Au,_+".quaternion",c,"rot",r),n(Ru,_+".scale",c,"scl",r)}}return 0===r.length?null:new Cu(i,s,r,o)}}),Object.assign(Cu.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t)var r=this.tracks[t],e=Math.max(e,r.times[r.times.length-1]);return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Cu(this.name,this.duration,e,this.blendMode)}});var Ou={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Du(e,t,n){var r=this,i=!1,a=0,o=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(i=!1,void 0!==r.onLoad)&&r.onLoad()},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){e=l.indexOf(e);return-1!==e&&l.splice(e,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}}var Nu=new Du;function t(e){this.manager=void 0!==e?e:Nu,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(t.prototype,{load:function(){},loadAsync:function(n,r){var i=this;return new Promise(function(e,t){i.load(n,e,r,t)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var Iu={};function ku(e){t.call(this,e)}function Bu(e){t.call(this,e)}function Fu(e){t.call(this,e)}function Uu(e){t.call(this,e)}function zu(e){t.call(this,e)}function Hu(e){t.call(this,e)}function Gu(e){t.call(this,e)}function l(){this.type="Curve",this.arcLengthDivisions=200}function ju(e,t,n,r,i,a,o,s){l.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Vu(e,t,n,r,i,a){ju.call(this,e,t,n,n,r,i,a),this.type="ArcCurve"}function Wu(){var i=0,a=0,o=0,s=0;function l(e,t,n,r){o=-3*(i=e)+3*t-2*(a=n)-r,s=2*e-2*t+n+r}return{initCatmullRom:function(e,t,n,r,i){l(t,n,i*(n-e),i*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,i,a,o){e=(t-e)/i-(n-e)/(i+a)+(n-t)/a,i=(n-t)/a-(r-t)/(a+o)+(r-n)/o;l(t,n,e*=a,i*=a)},calc:function(e){var t=e*e;return i+a*e+o*t+s*(t*e)}}}ku.prototype=Object.assign(Object.create(t.prototype),{constructor:ku,load:function(u,e,t,n){void 0===u&&(u=""),void 0!==this.path&&(u=this.path+u),u=this.manager.resolveURL(u);var c=this,r=Ou.get(u);if(void 0!==r)return c.manager.itemStart(u),setTimeout(function(){e&&e(r),c.manager.itemEnd(u)},0),r;if(void 0===Iu[u]){var i,a=u.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var o=a[1],s=!!a[2],l=a[3],l=decodeURIComponent(l);s&&(l=atob(l));try{var h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),f=0;f<l.length;f++)d[f]=l.charCodeAt(f);p="blob"===h?new Blob([d.buffer],{type:o}):d.buffer;break;case"document":var p=(new DOMParser).parseFromString(l,o);break;case"json":p=JSON.parse(l);break;default:p=l}setTimeout(function(){e&&e(p),c.manager.itemEnd(u)},0)}catch(e){setTimeout(function(){n&&n(e),c.manager.itemError(u),c.manager.itemEnd(u)},0)}}else{for(var m in Iu[u]=[],Iu[u].push({onLoad:e,onProgress:t,onError:n}),(i=new XMLHttpRequest).open("GET",u,!0),i.addEventListener("load",function(e){var t=this.response,n=Iu[u];if(delete Iu[u],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ou.add(u,t);for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onLoad&&a.onLoad(t)}}else{for(var o=0,s=n.length;o<s;o++){var l=n[o];l.onError&&l.onError(e)}c.manager.itemError(u)}c.manager.itemEnd(u)},!1),i.addEventListener("progress",function(e){for(var t=Iu[u],n=0,r=t.length;n<r;n++){var i=t[n];i.onProgress&&i.onProgress(e)}},!1),i.addEventListener("error",function(e){var t=Iu[u];delete Iu[u];for(var n=0,r=t.length;n<r;n++){var i=t[n];i.onError&&i.onError(e)}c.manager.itemError(u),c.manager.itemEnd(u)},!1),i.addEventListener("abort",function(e){var t=Iu[u];delete Iu[u];for(var n=0,r=t.length;n<r;n++){var i=t[n];i.onError&&i.onError(e)}c.manager.itemError(u),c.manager.itemEnd(u)},!1),void 0!==this.responseType&&(i.responseType=this.responseType),void 0!==this.withCredentials&&(i.withCredentials=this.withCredentials),i.overrideMimeType&&i.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)i.setRequestHeader(m,this.requestHeader[m]);i.send(null)}return c.manager.itemStart(u),i}Iu[u].push({onLoad:e,onProgress:t,onError:n})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Bu.prototype=Object.assign(Object.create(t.prototype),{constructor:Bu,load:function(t,n,e,r){var i=this,a=new ku(i.manager);a.setPath(i.path),a.load(t,function(e){try{n(i.parse(JSON.parse(e)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}},e,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=Cu.parse(e[n]);t.push(r)}return t}}),Fu.prototype=Object.assign(Object.create(t.prototype),{constructor:Fu,load:function(e,a,n,r){var o=this,s=[],l=new Ks,i=(l.image=s,new ku(this.manager)),u=(i.setPath(this.path),i.setResponseType("arraybuffer"),0);if(Array.isArray(e))for(var t=0,c=e.length;t<c;++t)(t=>{i.load(e[t],function(e){e=o.parse(e,!0);s[t]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(u+=1)&&(1===e.mipmapCount&&(l.minFilter=G),l.format=e.format,l.needsUpdate=!0,a)&&a(l)},n,r)})(t);else i.load(e,function(e){var t=o.parse(e,!0);if(t.isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,r=0;r<n;r++){s[r]={mipmaps:[]};for(var i=0;i<t.mipmapCount;i++)s[r].mipmaps.push(t.mipmaps[r*t.mipmapCount+i]),s[r].format=t.format,s[r].width=t.width,s[r].height=t.height}else l.image.width=t.width,l.image.height=t.height,l.mipmaps=t.mipmaps;1===t.mipmapCount&&(l.minFilter=G),l.format=t.format,l.needsUpdate=!0,a&&a(l)},n,r);return l}}),Uu.prototype=Object.assign(Object.create(t.prototype),{constructor:Uu,load:function(e,t,n,r){var i=this,a=new Ui,o=new ku(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,function(e){e=i.parse(e);e&&(void 0!==e.image?a.image=e.image:void 0!==e.data&&(a.image.width=e.width,a.image.height=e.height,a.image.data=e.data),a.wrapS=void 0!==e.wrapS?e.wrapS:Ue,a.wrapT=void 0!==e.wrapT?e.wrapT:Ue,a.magFilter=void 0!==e.magFilter?e.magFilter:G,a.minFilter=void 0!==e.minFilter?e.minFilter:G,a.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(a.format=e.format),void 0!==e.type&&(a.type=e.type),void 0!==e.mipmaps&&(a.mipmaps=e.mipmaps,a.minFilter=Ve),1===e.mipmapCount&&(a.minFilter=G),a.needsUpdate=!0,t)&&t(a,e)},n,r),a}}),zu.prototype=Object.assign(Object.create(t.prototype),{constructor:zu,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i,a=this,o=Ou.get(t);return void 0!==o?(a.manager.itemStart(t),setTimeout(function(){e&&e(o),a.manager.itemEnd(t)},0),o):((i=document.createElementNS("http://www.w3.org/1999/xhtml","img")).addEventListener("load",s,!1),i.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin),a.manager.itemStart(t),i.src=t,i);function s(){i.removeEventListener("load",s,!1),i.removeEventListener("error",l,!1),Ou.add(t,this),e&&e(this),a.manager.itemEnd(t)}function l(e){i.removeEventListener("load",s,!1),i.removeEventListener("error",l,!1),r&&r(e),a.manager.itemError(t),a.manager.itemEnd(t)}}}),Hu.prototype=Object.assign(Object.create(t.prototype),{constructor:Hu,load:function(e,n,t,r){var i=new sa,a=new zu(this.manager),o=(a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),0);for(var s=0;s<e.length;++s)(t=>{a.load(e[t],function(e){i.images[t]=e,6===++o&&(i.needsUpdate=!0,n)&&n(i)},void 0,r)})(s);return i}}),Gu.prototype=Object.assign(Object.create(t.prototype),{constructor:Gu,load:function(t,n,e,r){var i=new d,a=new zu(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(e){i.image=e;e=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data\:image\/jpeg/);i.format=e?tt:nt,i.needsUpdate=!0,void 0!==n&&n(i)},e,r),i}}),Object.assign(l.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){e=this.getUtoTmapping(e);return this.getPoint(e,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){for(var n,r=this.getLengths(),i=0,a=r.length,o=t||e*r[a-1],s=0,l=a-1;s<=l;)if((n=r[i=Math.floor(s+(l-s)/2)]-o)<0)s=i+1;else{if(!(0<n)){l=i;break}l=i-1}return r[i=l]===o?i/(a-1):(i+(o-(t=r[i]))/(r[i+1]-t))/(a-1)},getTangent:function(e,t){var n=e-1e-4,e=e+1e-4,n=(1<e&&(e=1),this.getPoint(n=n<0?0:n)),e=this.getPoint(e),t=t||new(n.isVector2?Xe:Ye);return t.copy(e).sub(n).normalize(),t},getTangentAt:function(e,t){e=this.getUtoTmapping(e);return this.getTangent(e,t)},computeFrenetFrames:function(e,t){for(var n=new Ye,r=[],i=[],a=[],o=new Ye,s=new Ee,l=0;l<=e;l++)r[l]=this.getTangentAt(l/e,new Ye),r[l].normalize();i[0]=new Ye,a[0]=new Ye;var u=Number.MAX_VALUE,c=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=u&&(u=c,n.set(1,0,0)),h<=u&&(u=h,n.set(0,1,0)),d<=u&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var f,p=1;p<=e;p++)i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON&&(o.normalize(),f=Math.acos(Te.clamp(r[p-1].dot(r[p]),-1,1)),i[p].applyMatrix4(s.makeRotationAxis(o,f))),a[p].crossVectors(r[p],i[p]);if(!0===t){var m=Math.acos(Te.clamp(i[0].dot(i[e]),-1,1));m/=e,0<r[0].dot(o.crossVectors(i[0],i[e]))&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),((ju.prototype=Object.create(l.prototype)).constructor=ju).prototype.isEllipseCurve=!0,ju.prototype.getPoint=function(e,t){for(var t=t||new Xe,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;n<r;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);var a,o,s,l,i=this.aStartAngle+e*r,e=this.aX+this.xRadius*Math.cos(i),i=this.aY+this.yRadius*Math.sin(i);return 0!==this.aRotation&&(a=Math.cos(this.aRotation),o=Math.sin(this.aRotation),e=(s=e-this.aX)*a-(l=i-this.aY)*o+this.aX,i=s*o+l*a+this.aY),t.set(e,i)},ju.prototype.copy=function(e){return l.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ju.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ju.prototype.fromJSON=function(e){return l.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},((Vu.prototype=Object.create(ju.prototype)).constructor=Vu).prototype.isArcCurve=!0;var qu=new Ye,Xu=new Wu,Yu=new Wu,Zu=new Wu;function Qu(e,t,n,r){l.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Ju(e,t,n,r,i){var t=.5*(r-t),i=.5*(i-n),a=e*e;return(2*n-2*r+t+i)*(e*a)+(-3*n+3*r-2*t-i)*a+t*e+n}function Ku(e,t,n,r){return(i=1-(i=e))*i*t+2*(1-e)*e*n+e*e*r;var i}function $u(e,t,n,r,i){return(a=1-(a=e))*a*a*t+3*(a=1-e)*a*e*n+3*(1-e)*e*e*r+e*e*e*i;var a}function ec(e,t,n,r){l.call(this),this.type="CubicBezierCurve",this.v0=e||new Xe,this.v1=t||new Xe,this.v2=n||new Xe,this.v3=r||new Xe}function tc(e,t,n,r){l.call(this),this.type="CubicBezierCurve3",this.v0=e||new Ye,this.v1=t||new Ye,this.v2=n||new Ye,this.v3=r||new Ye}function nc(e,t){l.call(this),this.type="LineCurve",this.v1=e||new Xe,this.v2=t||new Xe}function rc(e,t){l.call(this),this.type="LineCurve3",this.v1=e||new Ye,this.v2=t||new Ye}function ic(e,t,n){l.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Xe,this.v1=t||new Xe,this.v2=n||new Xe}function ac(e,t,n){l.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Ye,this.v1=t||new Ye,this.v2=n||new Ye}function oc(e){l.call(this),this.type="SplineCurve",this.points=e||[]}((Qu.prototype=Object.create(l.prototype)).constructor=Qu).prototype.isCatmullRomCurve3=!0,Qu.prototype.getPoint=function(e,t){var n,r,i,a,t=t||new Ye,o=this.points,s=o.length,e=(s-(this.closed?0:1))*e,l=Math.floor(e),e=e-l;return this.closed?l+=0<l?0:(Math.floor(Math.abs(l)/s)+1)*s:0===e&&l===s-1&&(l=s-2,e=1),n=this.closed||0<l?o[(l-1)%s]:(qu.subVectors(o[0],o[1]).add(o[0]),qu),r=o[l%s],i=o[(l+1)%s],l=this.closed||l+2<s?o[(l+2)%s]:(qu.subVectors(o[s-1],o[s-2]).add(o[s-1]),qu),"centripetal"===this.curveType||"chordal"===this.curveType?(o="chordal"===this.curveType?.5:.25,s=Math.pow(n.distanceToSquared(r),o),(a=Math.pow(r.distanceToSquared(i),o))<1e-4&&(a=1),s<1e-4&&(s=a),(o=Math.pow(i.distanceToSquared(l),o))<1e-4&&(o=a),Xu.initNonuniformCatmullRom(n.x,r.x,i.x,l.x,s,a,o),Yu.initNonuniformCatmullRom(n.y,r.y,i.y,l.y,s,a,o),Zu.initNonuniformCatmullRom(n.z,r.z,i.z,l.z,s,a,o)):"catmullrom"===this.curveType&&(Xu.initCatmullRom(n.x,r.x,i.x,l.x,this.tension),Yu.initCatmullRom(n.y,r.y,i.y,l.y,this.tension),Zu.initCatmullRom(n.z,r.z,i.z,l.z,this.tension)),t.set(Xu.calc(e),Yu.calc(e),Zu.calc(e)),t},Qu.prototype.copy=function(e){l.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Qu.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Qu.prototype.fromJSON=function(e){l.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Ye).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},((ec.prototype=Object.create(l.prototype)).constructor=ec).prototype.isCubicBezierCurve=!0,ec.prototype.getPoint=function(e,t){var t=t||new Xe,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set($u(e,n.x,r.x,i.x,a.x),$u(e,n.y,r.y,i.y,a.y)),t},ec.prototype.copy=function(e){return l.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ec.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ec.prototype.fromJSON=function(e){return l.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((tc.prototype=Object.create(l.prototype)).constructor=tc).prototype.isCubicBezierCurve3=!0,tc.prototype.getPoint=function(e,t){var t=t||new Ye,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set($u(e,n.x,r.x,i.x,a.x),$u(e,n.y,r.y,i.y,a.y),$u(e,n.z,r.z,i.z,a.z)),t},tc.prototype.copy=function(e){return l.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},tc.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},tc.prototype.fromJSON=function(e){return l.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((nc.prototype=Object.create(l.prototype)).constructor=nc).prototype.isLineCurve=!0,nc.prototype.getPoint=function(e,t){t=t||new Xe;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},nc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},nc.prototype.getTangent=function(e,t){t=t||new Xe;return t.copy(this.v2).sub(this.v1).normalize(),t},nc.prototype.copy=function(e){return l.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},nc.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},nc.prototype.fromJSON=function(e){return l.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((rc.prototype=Object.create(l.prototype)).constructor=rc).prototype.isLineCurve3=!0,rc.prototype.getPoint=function(e,t){t=t||new Ye;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},rc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},rc.prototype.copy=function(e){return l.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},rc.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},rc.prototype.fromJSON=function(e){return l.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((ic.prototype=Object.create(l.prototype)).constructor=ic).prototype.isQuadraticBezierCurve=!0,ic.prototype.getPoint=function(e,t){var t=t||new Xe,n=this.v0,r=this.v1,i=this.v2;return t.set(Ku(e,n.x,r.x,i.x),Ku(e,n.y,r.y,i.y)),t},ic.prototype.copy=function(e){return l.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ic.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ic.prototype.fromJSON=function(e){return l.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((ac.prototype=Object.create(l.prototype)).constructor=ac).prototype.isQuadraticBezierCurve3=!0,ac.prototype.getPoint=function(e,t){var t=t||new Ye,n=this.v0,r=this.v1,i=this.v2;return t.set(Ku(e,n.x,r.x,i.x),Ku(e,n.y,r.y,i.y),Ku(e,n.z,r.z,i.z)),t},ac.prototype.copy=function(e){return l.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ac.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ac.prototype.fromJSON=function(e){return l.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((oc.prototype=Object.create(l.prototype)).constructor=oc).prototype.isSplineCurve=!0,oc.prototype.getPoint=function(e,t){var t=t||new Xe,n=this.points,e=(n.length-1)*e,r=Math.floor(e),e=e-r,i=n[0===r?r:r-1],a=n[r],o=n[r>n.length-2?n.length-1:r+1],n=n[r>n.length-3?n.length-1:r+2];return t.set(Ju(e,i.x,a.x,o.x,n.x),Ju(e,i.y,a.y,o.y,n.y)),t},oc.prototype.copy=function(e){l.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},oc.prototype.toJSON=function(){var e=l.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},oc.prototype.fromJSON=function(e){l.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Xe).fromArray(r))}return this};var sc=Object.freeze({__proto__:null,ArcCurve:Vu,CatmullRomCurve3:Qu,CubicBezierCurve:ec,CubicBezierCurve3:tc,EllipseCurve:ju,LineCurve:nc,LineCurve3:rc,QuadraticBezierCurve:ic,QuadraticBezierCurve3:ac,SplineCurve:oc});function lc(){l.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function uc(e){lc.call(this),this.type="Path",this.currentPoint=new Xe,e&&this.setFromPoints(e)}function cc(e){uc.call(this,e),this.uuid=Te.generateUUID(),this.type="Shape",this.holes=[]}function u(e,t){m.call(this),this.type="Light",this.color=new x(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function hc(e,t,n){u.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(m.DefaultUp),this.updateMatrix(),this.groundColor=new x(t)}function dc(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Xe(512,512),this.map=null,this.mapPass=null,this.matrix=new Ee,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gi,this._frameExtents=new Xe(1,1),this._viewportCount=1,this._viewports=[new Se(0,0,1,1)]}function fc(){dc.call(this,new L(50,1,.5,500))}function pc(e,t,n,r,i,a){u.call(this,e,t),this.type="SpotLight",this.position.copy(m.DefaultUp),this.updateMatrix(),this.target=new m,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new fc}function mc(){dc.call(this,new L(90,1,.5,500)),this._frameExtents=new Xe(4,2),this._viewportCount=6,this._viewports=[new Se(2,1,1,1),new Se(0,1,1,1),new Se(3,1,1,1),new Se(1,1,1,1),new Se(3,0,1,1),new Se(1,0,1,1)],this._cubeDirections=[new Ye(1,0,0),new Ye(-1,0,0),new Ye(0,0,1),new Ye(0,0,-1),new Ye(0,1,0),new Ye(0,-1,0)],this._cubeUps=[new Ye(0,1,0),new Ye(0,1,0),new Ye(0,1,0),new Ye(0,1,0),new Ye(0,0,1),new Ye(0,0,-1)]}function gc(e,t,n,r){u.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new mc}function vc(e,t,n,r,i,a){ki.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function yc(){dc.call(this,new vc(-5,5,5,-5,.5,500))}function _c(e,t){u.call(this,e,t),this.type="DirectionalLight",this.position.copy(m.DefaultUp),this.updateMatrix(),this.target=new m,this.shadow=new yc}function xc(e,t){u.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function bc(e,t,n,r){u.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function wc(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Ye)}function Mc(e,t){u.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new wc}function Tc(e){t.call(this,e),this.textures={}}lc.prototype=Object.assign(Object.create(l.prototype),{constructor:lc,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new nc(t,e))},getPoint:function(e){for(var t,n,r,i=e*this.getLength(),a=this.getCurveLengths(),o=0;o<a.length;){if(a[o]>=i)return t=a[o]-i,r=(n=this.curves[o]).getLength(),n.getPointAt(0===r?0:1-t/r);o++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){l.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=l.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){l.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new sc[r.type]).fromJSON(r))}return this}}),uc.prototype=Object.assign(Object.create(lc.prototype),{constructor:uc,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new nc(this.currentPoint.clone(),new Xe(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){e=new ic(this.currentPoint.clone(),new Xe(e,t),new Xe(n,r));return this.curves.push(e),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,a){e=new ec(this.currentPoint.clone(),new Xe(e,t),new Xe(n,r),new Xe(i,a));return this.curves.push(e),this.currentPoint.set(i,a),this},splineThru:function(e){var t=new oc([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this},absarc:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this},ellipse:function(e,t,n,r,i,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,o,s),this},absellipse:function(e,t,n,r,i,a,o,s){e=new ju(e,t,n,r,i,a,o,s),0<this.curves.length&&((t=e.getPoint(0)).equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),n=e.getPoint(1);return this.currentPoint.copy(n),this},copy:function(e){return lc.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=lc.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return lc.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),cc.prototype=Object.assign(Object.create(uc.prototype),{constructor:cc,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){uc.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=uc.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){uc.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new uc).fromJSON(r))}return this}}),u.prototype=Object.assign(Object.create(m.prototype),{constructor:u,isLight:!0,copy:function(e){return m.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){e=m.prototype.toJSON.call(this,e);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),hc.prototype=Object.assign(Object.create(u.prototype),{constructor:hc,isHemisphereLight:!0,copy:function(e){return u.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(dc.prototype,{_projScreenMatrix:new Ee,_lightPositionWorld:new Ye,_lookTarget:new Ye,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),fc.prototype=Object.assign(Object.create(dc.prototype),{constructor:fc,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Te.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),dc.prototype.updateMatrices.call(this,e)}}),pc.prototype=Object.assign(Object.create(u.prototype),{constructor:pc,isSpotLight:!0,copy:function(e){return u.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),mc.prototype=Object.assign(Object.create(dc.prototype),{constructor:mc,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),a.copy(n.position),a.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(a),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),gc.prototype=Object.assign(Object.create(u.prototype),{constructor:gc,isPointLight:!0,copy:function(e){return u.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),vc.prototype=Object.assign(Object.create(ki.prototype),{constructor:vc,isOrthographicCamera:!0,copy:function(e,t){return ki.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e,t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,a=r-t,r=r+t,t=i+n,i=i-n;null!==this.view&&this.view.enabled&&(n=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,r=(a+=n*this.view.offsetX)+n*this.view.width,i=(t-=e*this.view.offsetY)-e*this.view.height),this.projectionMatrix.makeOrthographic(a,r,t,i,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){e=m.prototype.toJSON.call(this,e);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),yc.prototype=Object.assign(Object.create(dc.prototype),{constructor:yc,isDirectionalLightShadow:!0,updateMatrices:function(e){dc.prototype.updateMatrices.call(this,e)}}),_c.prototype=Object.assign(Object.create(u.prototype),{constructor:_c,isDirectionalLight:!0,copy:function(e){return u.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),xc.prototype=Object.assign(Object.create(u.prototype),{constructor:xc,isAmbientLight:!0}),bc.prototype=Object.assign(Object.create(u.prototype),{constructor:bc,isRectAreaLight:!0,copy:function(e){return u.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){e=u.prototype.toJSON.call(this,e);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(wc.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,e=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*r),t.addScaledVector(i[2],.488603*e),t.addScaledVector(i[3],.488603*n),t.addScaledVector(i[4],n*r*1.092548),t.addScaledVector(i[5],r*e*1.092548),t.addScaledVector(i[6],.315392*(3*e*e-1)),t.addScaledVector(i[7],n*e*1.092548),t.addScaledVector(i[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,e=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],1.023328*r),t.addScaledVector(i[2],1.023328*e),t.addScaledVector(i[3],1.023328*n),t.addScaledVector(i[4],.858086*n*r),t.addScaledVector(i[5],.858086*r*e),t.addScaledVector(i[6],.743125*e*e-.247708),t.addScaledVector(i[7],.858086*n*e),t.addScaledVector(i[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}),Object.assign(wc,{getBasisAt:function(e,t){var n=e.x,r=e.y,e=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*e,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*e,t[6]=.315392*(3*e*e-1),t[7]=1.092548*n*e,t[8]=.546274*(n*n-r*r)}}),Mc.prototype=Object.assign(Object.create(u.prototype),{constructor:Mc,isLightProbe:!0,copy:function(e){return u.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){e=u.prototype.toJSON.call(this,e);return e.object.sh=this.sh.toArray(),e}}),Tc.prototype=Object.assign(Object.create(t.prototype),{constructor:Tc,load:function(t,n,e,r){var i=this,a=new ku(i.manager);a.setPath(i.path),a.load(t,function(e){try{n(i.parse(JSON.parse(e)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}},e,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r,i=new yu[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new x).setHex(e.sheen)),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.vertexTangents&&(i.vertexTangents=e.vertexTangents),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=0<e.vertexColors:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(i.uniforms[a]={},o.type){case"t":i.uniforms[a].value=n(o.value);break;case"c":i.uniforms[a].value=(new x).setHex(o.value);break;case"v2":i.uniforms[a].value=(new Xe).fromArray(o.value);break;case"v3":i.uniforms[a].value=(new Ye).fromArray(o.value);break;case"v4":i.uniforms[a].value=(new Se).fromArray(o.value);break;case"m3":i.uniforms[a].value=(new gn).fromArray(o.value);case"m4":i.uniforms[a].value=(new Ee).fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var s in e.extensions)i.extensions[s]=e.extensions[s];return void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale&&(r=e.normalScale,!1===Array.isArray(r)&&(r=[r,r]),i.normalScale=(new Xe).fromArray(r)),void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Xe).fromArray(e.clearcoatNormalScale)),i},setTextures:function(e){return this.textures=e,this}});var Sc={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Ec(){$.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Ac(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),R.call(this,e,t,n),this.meshPerAttribute=r||1}function Lc(e){t.call(this,e)}Ec.prototype=Object.assign(Object.create($.prototype),{constructor:Ec,isInstancedBufferGeometry:!0,copy:function(e){return $.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=$.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),Ac.prototype=Object.assign(Object.create(R.prototype),{constructor:Ac,isInstancedBufferAttribute:!0,copy:function(e){return R.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=R.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Lc.prototype=Object.assign(Object.create(t.prototype),{constructor:Lc,load:function(t,n,e,r){var i=this,a=new ku(i.manager);a.setPath(i.path),a.load(t,function(e){try{n(i.parse(JSON.parse(e)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}},e,r)},parse:function(e){var r={},i={};function t(e,t){var n;return void 0!==r[t]?r[t]:(n=((e,t)=>void 0!==i[t]?i[t]:(e=e.arrayBuffers[t],e=new Uint32Array(e).buffer,i[t]=e))(e,(e=e.interleavedBuffers[t]).buffer),(n=new Ko(new Rc[e.type](n),e.stride)).uuid=e.uuid,r[t]=n)}var n,a=new(e.isInstancedBufferGeometry?Ec:$),o=e.data.index,s=(void 0!==o&&(o=new Rc[o.type](o.array),a.setIndex(new R(o,1))),e.data.attributes);for(n in s){var l,u=s[n],c=void 0;c=u.isInterleavedBufferAttribute?new ts(t(e.data,u.data),u.itemSize,u.offset,u.normalized):(l=new Rc[u.type](u.array),new(u.isInstancedBufferAttribute?Ac:R)(l,u.itemSize,u.normalized)),void 0!==u.name&&(c.name=u.name),a.setAttribute(n,c)}var h=e.data.morphAttributes;if(h)for(var d in h){for(var f=h[d],p=[],m=0,g=f.length;m<g;m++){var v=f[m],y=void 0;y=v.isInterleavedBufferAttribute?new ts(t(e.data,v.data),v.itemSize,v.offset,v.normalized):new R(new Rc[v.type](v.array),v.itemSize,v.normalized),void 0!==v.name&&(y.name=v.name),p.push(y)}a.morphAttributes[d]=p}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);var _=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==_)for(var x=0,b=_.length;x!==b;++x){var w=_[x];a.addGroup(w.start,w.count,w.materialIndex)}var M,o=e.data.boundingSphere;return void 0!==o&&(M=new Ye,void 0!==o.center&&M.fromArray(o.center),a.boundingSphere=new cr(M,o.radius)),e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}});var Rc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Cc(e){t.call(this,e)}Cc.prototype=Object.assign(Object.create(t.prototype),{constructor:Cc,load:function(n,r,e,i){var a=this,t=""===this.path?Sc.extractUrlBase(n):this.path,t=(this.resourcePath=this.resourcePath||t,new ku(a.manager));t.setPath(this.path),t.load(n,function(e){var t=null;try{t=JSON.parse(e)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+n+".",e.message)}e=t.metadata;void 0===e||void 0===e.type||"geometry"===e.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+n):a.parse(t,r)},e,i)},parse:function(e,t){var n=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(i)}),r=this.parseTextures(e.textures,r),r=this.parseMaterials(e.materials,r),i=this.parseObject(e.object,n,r);return e.animations&&(i.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(i),i},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new cc).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Lc,i=0,a=e.length;i<a;i++){var o=void 0,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new su[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new su[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new su[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new su[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new su[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new su[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new su[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new su[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new su[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new su[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new su[s.type]((new sc[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new su[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new su[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=s.shapes.length;u<c;u++){var h=t[s.shapes[u]];l.push(h)}o=new su[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":l=[];for(var d=0,f=s.shapes.length;d<f;d++){var p=t[s.shapes[d]];l.push(p)}var m=s.options.extrudePath;void 0!==m&&(s.options.extrudePath=(new sc[m.type]).fromJSON(m)),o=new su[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new Tc;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),l.push(n[c.uuid])}r[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Cu.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}if(void 0!==e&&0<e.length){var a,t=new Du(t);(a=new zu(t)).setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var l=e[o],u=l.url;if(Array.isArray(u)){r[l.uuid]=[];for(var c=0,h=u.length;c<h;c++){var d=u[c],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;r[l.uuid].push(i(d))}}else{var f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;r[l.uuid]=i(f)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i],s=(void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image),void 0);(s=new(Array.isArray(t[o.image])?sa:d)(t[o.image])).needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,Oc)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Dc),s.wrapT=n(o.wrap[1],Dc)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,Nc)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,Nc)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r},parseObject:function(e,t,a){function n(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function r(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];void 0===a[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(a[i])}return t}return void 0===a[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),a[e]}}switch(e.type){case"Scene":i=new Xn,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new x(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Jo(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Qo(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new L(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new vc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new xc(e.color,e.intensity);break;case"DirectionalLight":i=new _c(e.color,e.intensity);break;case"PointLight":i=new gc(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new bc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new pc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new hc(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new Mc).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":i=new C(o=n(e.geometry),s=r(e.material));break;case"InstancedMesh":var i,o=n(e.geometry),s=r(e.material),l=e.instanceMatrix;(i=new Ns(o,s,e.count)).instanceMatrix=new R(new Float32Array(l.array),16);break;case"LOD":i=new Ts;break;case"Line":i=new zs(n(e.geometry),r(e.material),e.mode);break;case"LineLoop":i=new js(n(e.geometry),r(e.material));break;case"LineSegments":i=new w(n(e.geometry),r(e.material));break;case"PointCloud":case"Points":i=new Zs(n(e.geometry),r(e.material));break;case"Sprite":i=new ms(r(e.material));break;case"Group":i=new Vo;break;default:i=new m}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera)&&(i.shadow.camera=this.parseObject(e.shadow.camera)),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,c=0;c<u.length;c++)i.add(this.parseObject(u[c],t,a));if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);for(var h=e.levels,d=0;d<h.length;d++){var f=h[d],p=i.getObjectByProperty("uuid",f.object);void 0!==p&&i.addLevel(p,f.distance)}}return i}});var Pc,Oc={UVMapping:300,CubeReflectionMapping:Oe,CubeRefractionMapping:De,EquirectangularReflectionMapping:Ne,EquirectangularRefractionMapping:Ie,CubeUVReflectionMapping:ke,CubeUVRefractionMapping:Be},Dc={RepeatWrapping:Fe,ClampToEdgeWrapping:Ue,MirroredRepeatWrapping:ze},Nc={NearestFilter:z,NearestMipmapNearestFilter:He,NearestMipmapLinearFilter:Ge,LinearFilter:G,LinearMipmapNearestFilter:je,LinearMipmapLinearFilter:Ve};function Ic(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),t.call(this,e),this.options={premultiplyAlpha:"none"}}function kc(){this.type="ShapePath",this.color=new x,this.subPaths=[],this.currentPath=null}function Bc(e){this.type="Font",this.data=e}function Fc(e){t.call(this,e)}Ic.prototype=Object.assign(Object.create(t.prototype),{constructor:Ic,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(t,n,e,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=Ou.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout(function(){n&&n(a),i.manager.itemEnd(t)},0),a;fetch(t).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(e){Ou.add(t,e),n&&n(e),i.manager.itemEnd(t)}).catch(function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),i.manager.itemStart(t)}}),Object.assign(kc.prototype,{moveTo:function(e,t){return this.currentPath=new uc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new cc;a.curves=i.curves,t.push(a)}return t}var r=kl.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return n(i);var a,o,s,l=[];if(1===i.length)o=i[0],(s=new cc).curves=o.curves,l.push(s);else{var u,c=!r(i[0].getPoints()),c=e?!c:c,h=[],d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var m=0,g=i.length;m<g;m++)a=r(u=(o=i[m]).getPoints()),(e?!a:a)?(!c&&d[p]&&p++,d[p]={s:new cc,p:u},d[p].s.curves=o.curves,c&&p++,f[p]=[]):f[p].push({h:o,p:u[0]});if(!d[0])return n(i);if(1<d.length){for(var v=!1,y=[],_=0,x=d.length;_<x;_++)h[_]=[];for(var b=0,w=d.length;b<w;b++)for(var M=f[b],T=0;T<M.length;T++){for(var S=M[T],E=!0,A=0;A<d.length;A++)((e,t)=>{for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[i],u=-u),!(e.y<o.y||e.y>s.y))if(e.y===o.y){if(e.x===o.x)return 1}else{u=u*(e.x-o.x)-l*(e.y-o.y);if(0==u)return 1;u<0||(r=!r)}}else if(e.y===o.y&&(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x))return 1}return r})(S.p,d[A].p)&&(b!==A&&y.push({froms:b,tos:A,hole:T}),E?(E=!1,h[A].push(S)):v=!0);E&&h[b].push(S)}0<y.length&&(v||(f=h))}for(var L=0,R=d.length;L<R;L++){s=d[L].s,l.push(s);for(var C,P=0,O=(C=f[L]).length;P<O;P++)s.holes.push(C[P].h)}}return l}}),Object.assign(Bc.prototype,{isFont:!0,generateShapes:function(e,t){for(var n=[],r=((e,t,n)=>{for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,l=0,u=0;u<r.length;u++){var c=r[u];"\n"===c?(s=0,l-=a):(c=((e,t,n,r,i)=>{var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,l,u,c,h,d,f,p=new kc;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,v=m.length;g<v;)switch(m[g++]){case"m":o=m[g++]*t+n,s=m[g++]*t+r,p.moveTo(o,s);break;case"l":o=m[g++]*t+n,s=m[g++]*t+r,p.lineTo(o,s);break;case"q":l=m[g++]*t+n,u=m[g++]*t+r,c=m[g++]*t+n,h=m[g++]*t+r,p.quadraticCurveTo(c,h,l,u);break;case"b":l=m[g++]*t+n,u=m[g++]*t+r,c=m[g++]*t+n,h=m[g++]*t+r,d=m[g++]*t+n,f=m[g++]*t+r,p.bezierCurveTo(c,h,d,f,l,u)}return{offsetX:a.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")})(c,i,s,l,n),s+=c.offsetX,o.push(c.path))}return o})(e,t=void 0===t?100:t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Fc.prototype=Object.assign(Object.create(t.prototype),{constructor:Fc,load:function(e,r,t,n){var i=this,a=new ku(this.manager);a.setPath(this.path),a.load(e,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}t=i.parse(n);r&&r(t)},t,n)},parse:function(e){return new Bc(e)}});var Uc={getContext:function(){return Pc=void 0===Pc?new(window.AudioContext||window.webkitAudioContext):Pc},setContext:function(e){Pc=e}};function zc(e){t.call(this,e)}function Hc(e,t,n){Mc.call(this,void 0,n);var n=(new x).set(e),e=(new x).set(t),t=new Ye(n.r,n.g,n.b),n=new Ye(e.r,e.g,e.b),e=Math.sqrt(Math.PI),r=e*Math.sqrt(.75);this.sh.coefficients[0].copy(t).add(n).multiplyScalar(e),this.sh.coefficients[1].copy(t).sub(n).multiplyScalar(r)}function Gc(e,t){Mc.call(this,void 0,t);t=(new x).set(e);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}zc.prototype=Object.assign(Object.create(t.prototype),{constructor:zc,load:function(n,r,e,i){var a=this,t=new ku(a.manager);t.setResponseType("arraybuffer"),t.setPath(a.path),t.load(n,function(e){try{var t=e.slice(0);Uc.getContext().decodeAudioData(t,function(e){r(e)})}catch(e){i?i(e):console.error(e),a.manager.itemError(n)}},e,i)}}),Hc.prototype=Object.assign(Object.create(Mc.prototype),{constructor:Hc,isHemisphereLightProbe:!0,copy:function(e){return Mc.prototype.copy.call(this,e),this},toJSON:function(e){return Mc.prototype.toJSON.call(this,e)}}),Gc.prototype=Object.assign(Object.create(Mc.prototype),{constructor:Gc,isAmbientLightProbe:!0,copy:function(e){return Mc.prototype.copy.call(this,e),this},toJSON:function(e){return Mc.prototype.toJSON.call(this,e)}});var jc=new Ee,Vc=new Ee;function Wc(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new L,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new L,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function qc(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Wc.prototype,{update:function(e){var t,n,r,i,a,o=this._cache;o.focus===e.focus&&o.fov===e.fov&&o.aspect===e.aspect*this.aspect&&o.near===e.near&&o.far===e.far&&o.zoom===e.zoom&&o.eyeSep===this.eyeSep||(o.focus=e.focus,o.fov=e.fov,o.aspect=e.aspect*this.aspect,o.near=e.near,o.far=e.far,o.zoom=e.zoom,o.eyeSep=this.eyeSep,t=e.projectionMatrix.clone(),n=(i=o.eyeSep/2)*o.near/o.focus,r=o.near*Math.tan(Te.DEG2RAD*o.fov*.5)/o.zoom,Vc.elements[12]=-i,jc.elements[12]=i,i=-r*o.aspect+n,a=r*o.aspect+n,t.elements[0]=2*o.near/(a-i),t.elements[8]=(a+i)/(a-i),this.cameraL.projectionMatrix.copy(t),i=-r*o.aspect-n,a=r*o.aspect-n,t.elements[0]=2*o.near/(a-i),t.elements[8]=(a+i)/(a-i),this.cameraR.projectionMatrix.copy(t)),this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Vc),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(jc)}}),Object.assign(qc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e,t=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(t=((e=("undefined"==typeof performance?Date:performance).now())-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t),t)}});var Xc=new Ye,Yc=new f,Zc=new Ye,Qc=new Ye;function Jc(){m.call(this),this.type="AudioListener",this.context=Uc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new qc}function Kc(e){m.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Jc.prototype=Object.assign(Object.create(m.prototype),{constructor:Jc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return(null!==this.filter?(this.gain.disconnect(this.filter),this.filter):this.gain).disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){m.prototype.updateMatrixWorld.call(this,e);var t,e=this.context.listener,n=this.up;this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xc,Yc,Zc),Qc.set(0,0,-1).applyQuaternion(Yc),e.positionX?(t=this.context.currentTime+this.timeDelta,e.positionX.linearRampToValueAtTime(Xc.x,t),e.positionY.linearRampToValueAtTime(Xc.y,t),e.positionZ.linearRampToValueAtTime(Xc.z,t),e.forwardX.linearRampToValueAtTime(Qc.x,t),e.forwardY.linearRampToValueAtTime(Qc.y,t),e.forwardZ.linearRampToValueAtTime(Qc.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)):(e.setPosition(Xc.x,Xc.y,Xc.z),e.setOrientation(Qc.x,Qc.y,Qc.z,n.x,n.y,n.z))}}),Kc.prototype=Object.assign(Object.create(m.prototype),{constructor:Kc,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl)return this._startedAt=this.context.currentTime+e,(e=this.context.createBufferSource()).buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect();console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e=e||[],!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var $c=new Ye,eh=new f,th=new Ye,nh=new Ye;function rh(e){Kc.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function ih(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function ah(e,t,n){var r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}rh.prototype=Object.assign(Object.create(Kc.prototype),{constructor:rh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){var t;m.prototype.updateMatrixWorld.call(this,e),!0===this.hasPlaybackControl&&!1===this.isPlaying||(this.matrixWorld.decompose($c,eh,th),nh.set(0,0,1).applyQuaternion(eh),(e=this.panner).positionX?(t=this.context.currentTime+this.listener.timeDelta,e.positionX.linearRampToValueAtTime($c.x,t),e.positionY.linearRampToValueAtTime($c.y,t),e.positionZ.linearRampToValueAtTime($c.z,t),e.orientationX.linearRampToValueAtTime(nh.x,t),e.orientationY.linearRampToValueAtTime(nh.y,t),e.orientationZ.linearRampToValueAtTime(nh.z,t)):(e.setPosition($c.x,$c.y,$c.z),e.setOrientation(nh.x,nh.y,nh.z)))}}),Object.assign(ih.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(ah.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,e=this.cumulativeWeight;if(0===e){for(var a=0;a!==r;++a)n[i+a]=n[a];e=t}else this._mixBufferRegion(n,i,0,t/(e+=t),r);this.cumulativeWeight=e},accumulateAdditive:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){var t,n=this.valueSize,r=this.buffer,i=e*n+n,e=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,e<1&&(t=n*this._origIndex,this._mixBufferRegion(r,i,t,1-e,n)),0<a&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(var s=n,l=n+n;s!==l;++s)if(r[s]!==r[s+n]){o.setValue(r,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,r,i){if(.5<=r)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){f.slerpFlat(e,t,e,t,e,n,r)},_slerpAdditive:function(e,t,n,r,i){i=this._workIndex*i;f.multiplyQuaternionsFlat(e,i,e,t,e,n),f.slerpFlat(e,t,e,t,e,i,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}},_lerpAdditive:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}});var oh="\\[\\]\\.:\\/",sh=new RegExp("["+oh+"]","g"),lh="[^"+oh+"]",oh="[^"+oh.replace("\\.","")+"]",uh=/((?:WC+[\/:])*)/.source.replace("WC",lh),oh=/(WCOD+)?/.source.replace("WCOD",oh),ch=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lh),lh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lh),hh=new RegExp("^"+uh+oh+ch+lh+"$"),dh=["material","materials","bones"];function fh(e,t,n){n=n||ph.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function ph(e,t,n){this.path=t,this.parsedPath=n||ph.parseTrackName(t),this.node=ph.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function mh(){this.uuid=Te.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function gh(e,t,n,r){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=r||t.blendMode;for(var i=t.tracks,a=i.length,o=new Array(a),s={endingStart:2400,endingEnd:2400},l=0;l!==a;++l){var u=i[l].createInterpolant(null);(o[l]=u).settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function vh(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function yh(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function _h(e,t,n){Ko.call(this,e,t),this.meshPerAttribute=n||1}function xh(e,t,n,r){this.ray=new yr(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Dn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function bh(e,t){return e.distance-t.distance}function wh(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)wh(i[a],t,n,!0)}function Mh(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Th(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}Object.assign(fh.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,n=this._bindings[n];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(ph,{Composite:fh,create:function(e,t,n){return new(e&&e.isAnimationObjectGroup?ph.Composite:ph)(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(sh,"")},parseTrackName:function(e){var t=hh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n,t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=t.nodeName&&t.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r&&(n=t.nodeName.substring(r+1),-1!==dh.indexOf(n))&&(t.nodeName=t.nodeName.substring(0,r),t.objectName=n),null===t.propertyName||0===t.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t},findNode:function(e,r){if(!r||""===r||"."===r||-1===r||r===e.name||r===e.uuid)return e;if(e.skeleton){var t=e.skeleton.getBoneByName(r);if(void 0!==t)return t}if(e.children){var i=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.name===r||n.uuid===r)return n;n=i(n.children);if(n)return n}return null},t=i(e.children);if(t)return t}return null}}),Object.assign(ph.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=ph.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(var e=e.skeleton.bones,o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[r];if(void 0===s)t=t.nodeName,console.error("THREE.PropertyBinding: Trying to update property for track: "+t+"."+r+" but it wasn't found.",e);else{var t=this.Versioning.None,l=(void 0!==(this.targetObject=e).needsUpdate?t=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate),this.BindingType.Direct);if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][t]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(ph.prototype,{_getValue_unbound:ph.prototype.getValue,_setValue_unbound:ph.prototype.setValue}),Object.assign(mh.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,l=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,f=t[d];if(void 0===f){f=s++,t[d]=f,e.push(h);for(var p=0,m=a;p!==m;++p)i[p].push(new ph(h,n[p],r[p]))}else if(f<l){var o=e[f],g=--l,v=e[g];e[t[v.uuid]=f]=v,e[t[d]=g]=h;for(var y=0,_=a;y!==_;++y){var x=i[y],b=x[g],w=x[f];x[f]=b,void 0===w&&(w=new ph(h,n[y],r[y])),x[g]=w}}else e[f]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=t[l];if(void 0!==u&&i<=u){var c=i++,h=e[c];e[t[h.uuid]=u]=h,e[t[l]=c]=s;for(var d=0,f=r;d!==f;++d){var p=n[d],m=p[c],g=p[u];p[u]=m,p[c]=g}}}this.nCachedObjects_=i},uncache:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,u=t[l];if(void 0!==u)if(delete t[l],u<i){var c=--i,l=e[c],h=--a,d=e[h];e[t[l.uuid]=u]=l,e[t[d.uuid]=c]=d,e.pop();for(var f=0,p=r;f!==p;++f){var m=n[f],g=m[c],v=m[h];m[u]=g,m[c]=v,m.pop()}}else{var y=--a,l=e[y];e[t[l.uuid]=u]=l,e.pop();for(var _=0,x=r;_!==x;++_){var b=n[_];b[u]=b[y],b.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l),r=i.length;n[e]=r,a.push(e),o.push(t),i.push(c);for(var h=u,d=s.length;h!==d;++h){var f=s[h];c[h]=new ph(f,e,t)}return c},unsubscribe_:function(e){var t,n,r,i,a,o=this._bindingsIndicesByPath,s=o[e];void 0!==s&&(t=this._paths,n=this._parsedPaths,a=(r=this._bindings)[i=r.length-1],r[o[e[i]]=s]=a,r.pop(),n[s]=n[i],n.pop(),t[s]=t[i],t.pop())}}),Object.assign(gh.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){var r,i;return e.fadeOut(t),this.fadeIn(t),n&&(i=(n=this._clip.duration)/(r=e._clip.duration),e.warp(1,r/n,t),this.warp(i,1,t)),this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant,r=(null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o),o.parameterPositions),o=o.sampleValues;return r[0]=i,r[1]=i+n,o[0]=e/a,o[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){i=(e-i)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);var a=this._updateTime(t),o=this._updateWeight(e);if(0<o){var s=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(var u=0,c=s.length;u!==c;++u)s[u].evaluate(a),l[u].accumulateAdditive(o);else for(var h=0,d=s.length;h!==d;++h)s[h].evaluate(a),l[h].accumulate(r,o)}}else this._updateWeight(e)},_updateWeight:function(e){var t,n,r=0;return this.enabled&&(r=this.weight,null!==(t=this._weightInterpolant))&&(r*=n=t.evaluate(e)[0],e>t.parameterPositions[1])&&(this.stopFading(),0===n)&&(this.enabled=!1),this._effectiveWeight=r},_updateTimeScale:function(e){var t,n=0;return this.paused||(n=this.timeScale,null!==(t=this._timeScaleInterpolant)&&(n*=t.evaluate(e)[0],e>t.parameterPositions[1])&&(this.stopWarping(),0===n?this.paused=!0:this.timeScale=n)),this._effectiveTimeScale=n},_updateTime:function(e){var t,n=this._clip.duration,r=this.loop,i=this.time+e,a=this._loopCount,o=2202===r;if(0===e)return-1!==a&&o&&1==(1&a)?n-i:i;if(2200===r){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n<=i)i=n;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else if(-1===a&&(0<=e?this._setEndings(!(a=0),0===this.repetitions,o):this._setEndings(0===this.repetitions,!0,o)),n<=i||i<0?(i-=n*(r=Math.floor(i/n)),a+=Math.abs(r),(t=this.repetitions-a)<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i=0<e?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(1==t?this._setEndings(t=e<0,!t,o):this._setEndings(!1,!1,o),this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r}))):this.time=i,o&&1==(1&a))return n-i;return i},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant,r=(null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a),a.parameterPositions),a=a.sampleValues;return r[0]=i,a[0]=t,r[1]=i+e,a[1]=n,this}}),vh.prototype=Object.assign(Object.create(fn.prototype),{constructor:vh,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,e=this._bindingsByRootAndName,l=e[s];void 0===l&&(e[s]=l={});for(var u=0;u!==i;++u){var c=r[u],h=c.name,d=l[h];if(void 0===d){if(void 0!==(d=a[u])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,h));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(d=new ah(ph.create(n,h,f),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(d,s,h)}a[u]=d,o[u].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){null===e._cacheIndex&&(t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n],this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t));for(var t,n,r,i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){e=e._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];void 0===a?(a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a):(i=a.knownActions,e._byClipCacheIndex=i.length,i.push(e)),e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex,r=(t[n._cacheIndex=r]=n,t.pop(),e._cacheIndex=null,e._clip.uuid),n=this._actionsByClip,t=n[r],i=t.knownActions,a=i[i.length-1],o=e._byClipCacheIndex;i[a._byClipCacheIndex=o]=a,i.pop(),e._byClipCacheIndex=null,delete t.actionByRoot[(e._localRoot||this._root).uuid],0===i.length&&delete n[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];t[e._cacheIndex=r]=e,t[i._cacheIndex=n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];t[e._cacheIndex=r]=e,t[i._cacheIndex=n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(r[t]=a={}),(a[n]=e)._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,n=n.path,i=this._bindingsByRootAndName,a=i[r],o=t[t.length-1],e=e._cacheIndex;t[o._cacheIndex=e]=o,t.pop(),delete a[n],0===Object.keys(a).length&&delete i[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];t[e._cacheIndex=r]=e,t[i._cacheIndex=n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];t[e._cacheIndex=r]=e,t[i._cacheIndex=n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(e[(n=new bu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];t[e.__cacheIndex=r]=e,t[i.__cacheIndex=n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){var r=t||this._root,i=r.uuid,r="string"==typeof e?Cu.findByName(r,e):e,e=null!==r?r.uuid:e,a=this._actionsByClip[e],o=null;if(void 0===n&&(n=null!==r?r.blendMode:2500),void 0!==a){var s=a.actionByRoot[i];if(void 0!==s&&s.blendMode===n)return s;o=a.knownActions[0],null===r&&(r=o._clip)}return null===r?null:(s=new gh(this,r,t,n),this._bindAction(s,o),this._addInactiveAction(s,e,i),s)},existingAction:function(e,t){var t=t||this._root,n=t.uuid,t="string"==typeof e?Cu.findByName(t,e):e,t=t?t.uuid:e,e=this._actionsByClip[t];return void 0!==e&&e.actionByRoot[n]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions-1;0<=t;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,i,a);for(var s=this._bindings,l=this._nActiveBindings,u=0;u!==l;++u)s[u].apply(a);return this},setTime:function(e){for(var t=this.time=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,e=e.uuid,n=this._actionsByClip,r=n[e];if(void 0!==r){for(var i=r.knownActions,a=0,o=i.length;a!==o;++a){var s=i[a],l=(this._deactivateAction(s),s._cacheIndex),u=t[t.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,t[u._cacheIndex=l]=u,t.pop(),this._removeInactiveBindingsForAction(s)}delete n[e]}},uncacheRoot:function(e){var t,n=e.uuid,r=this._actionsByClip;for(t in r){var i=r[t].actionByRoot[n];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[n];if(void 0!==a)for(var o in a){o=a[o];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(e,t){e=this.existingAction(e,t);null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),yh.prototype.clone=function(){return new yh(void 0===this.value.clone?this.value:this.value.clone())},_h.prototype=Object.assign(Object.create(Ko.prototype),{constructor:_h,isInstancedInterleavedBuffer:!0,copy:function(e){return Ko.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){e=Ko.prototype.clone.call(this,e);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(e){e=Ko.prototype.toJSON.call(this,e);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.assign(xh.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){n=n||[];return wh(e,this,n,t),n.sort(bh),n},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))console.warn("THREE.Raycaster.intersectObjects: objects is not an Array.");else{for(var i=0,a=e.length;i<a;i++)wh(e[i],this,r,t);r.sort(bh)}return r}}),Object.assign(Mh.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Te.clamp(t/this.radius,-1,1))),this}}),Object.assign(Th.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var Sh=new Xe;function Eh(e,t){this.min=void 0!==e?e:new Xe(1/0,1/0),this.max=void 0!==t?t:new Xe(-1/0,-1/0)}Object.assign(Eh.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){t=Sh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Xe),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Xe),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Xe),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Xe),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Sh.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Ah=new Ye,Lh=new Ye;function Rh(e,t){this.start=void 0!==e?e:new Ye,this.end=void 0!==t?t:new Ye}function Ch(e){m.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Object.assign(Rh.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Ye),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Ye),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Ye),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){Ah.subVectors(e,this.start),Lh.subVectors(this.end,this.start);e=Lh.dot(Lh),e=Lh.dot(Ah)/e;return e=t?Te.clamp(e,0,1):e},closestPointToPoint:function(e,t,n){e=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Ye),this.delta(n).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),((Ch.prototype=Object.create(m.prototype)).constructor=Ch).prototype.isImmediateRenderObject=!0;var Ph=new Ye;function Oh(e,t){m.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var e=new $,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1;r<32;r++,i++){var a=r/32*Math.PI*2,o=i/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}e.setAttribute("position",new K(n,3));t=new b({fog:!1,toneMapped:!1});this.cone=new w(e,t),this.add(this.cone),this.update()}((Oh.prototype=Object.create(m.prototype)).constructor=Oh).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Oh.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance||1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Ph.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ph),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Dh=new Ye,Nh=new Ee,Ih=new Ee;function kh(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new $,r=[],i=[],a=new x(0,0,1),o=new x(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new K(r,3)),n.setAttribute("color",new K(i,3));var u=new b({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});w.call(this,n,u),this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Bh(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;e=new ql(t,4,2),n=new Hr({wireframe:!0,fog:!1,toneMapped:!1});C.call(this,e,n),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}((kh.prototype=Object.create(w.prototype)).constructor=kh).prototype.isSkeletonHelper=!0,kh.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");Ih.getInverse(this.root.matrixWorld);for(var i=0,a=0;i<t.length;i++){var o=t[i];o.parent&&o.parent.isBone&&(Nh.multiplyMatrices(Ih,o.matrixWorld),Dh.setFromMatrixPosition(Nh),r.setXYZ(a,Dh.x,Dh.y,Dh.z),Nh.multiplyMatrices(Ih,o.parent.matrixWorld),Dh.setFromMatrixPosition(Nh),r.setXYZ(a+1,Dh.x,Dh.y,Dh.z),a+=2)}n.getAttribute("position").needsUpdate=!0,m.prototype.updateMatrixWorld.call(this,e)},((Bh.prototype=Object.create(C.prototype)).constructor=Bh).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Bh.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Fh=new Ye,Uh=new x,zh=new x;function Hh(e,t,n){m.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;e=new ul(t),e.rotateY(.5*Math.PI),this.material=new Hr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0),n=e.getAttribute("position"),t=new Float32Array(3*n.count);e.setAttribute("color",new R(t,3)),this.add(new C(e,this.material)),this.update()}function Gh(e,t,n,r){e=e||10,t=t||10,n=new x(void 0!==n?n:4473924),r=new x(void 0!==r?r:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],l=[],u=0,c=0,h=-o;u<=t;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var d=u===i?n:r;d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3}var e=new $,f=(e.setAttribute("position",new K(s,3)),e.setAttribute("color",new K(l,3)),new b({vertexColors:!0,toneMapped:!1}));w.call(this,e,f),this.type="GridHelper"}function jh(e,t,n,r,i,a){e=e||10,t=t||16,n=n||8,r=r||64,i=new x(void 0!==i?i:4473924),a=new x(void 0!==a?a:8947848);for(var o=[],s=[],l=0;l<=t;l++){var u=l/t*(2*Math.PI),c=Math.sin(u)*e,u=Math.cos(u)*e,c=(o.push(0,0,0),o.push(c,0,u),1&l?i:a);s.push(c.r,c.g,c.b),s.push(c.r,c.g,c.b)}for(var h=0;h<=n;h++)for(var d=1&h?i:a,f=e-e/n*h,p=0;p<r;p++){var m=p/r*(2*Math.PI),g=Math.sin(m)*f,v=Math.cos(m)*f;o.push(g,0,v),s.push(d.r,d.g,d.b),m=(p+1)/r*(2*Math.PI),g=Math.sin(m)*f,v=Math.cos(m)*f,o.push(g,0,v),s.push(d.r,d.g,d.b)}var y=new $,_=(y.setAttribute("position",new K(o,3)),y.setAttribute("color",new K(s,3)),new b({vertexColors:!0,toneMapped:!1}));w.call(this,y,_),this.type="PolarGridHelper"}((Hh.prototype=Object.create(m.prototype)).constructor=Hh).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Hh.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Uh.copy(this.light.color),zh.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Uh:zh;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Fh.setFromMatrixPosition(this.light.matrixWorld).negate())},Gh.prototype=Object.assign(Object.create(w.prototype),{constructor:Gh,copy:function(e){return w.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),(jh.prototype=Object.create(w.prototype)).constructor=jh;var Vh=new Ye,Wh=new Ye,qh=new Ye;function Xh(e,t,n){m.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);e=new $,e.setAttribute("position",new K([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),n=new b({fog:!1,toneMapped:!1});this.lightPlane=new zs(e,n),this.add(this.lightPlane),(e=new $).setAttribute("position",new K([0,0,0,0,0,1],3)),this.targetLine=new zs(e,n),this.add(this.targetLine),this.update()}((Xh.prototype=Object.create(m.prototype)).constructor=Xh).prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Xh.prototype.update=function(){Vh.setFromMatrixPosition(this.light.matrixWorld),Wh.setFromMatrixPosition(this.light.target.matrixWorld),qh.subVectors(Wh,Vh),this.lightPlane.lookAt(Wh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Wh),this.targetLine.scale.z=qh.length()};var Yh=new Ye,n=new ki;function Zh(e){var t=new $,n=new b({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={},o=new x(16755200),s=new x(16711680),l=new x(43775),u=new x(16777215),c=new x(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.setAttribute("position",new K(r,3)),t.setAttribute("color",new K(i,3)),w.call(this,t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function r(e,t,n,r,i,a,o){Yh.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],Yh.x,Yh.y,Yh.z)}((Zh.prototype=Object.create(w.prototype)).constructor=Zh).prototype.update=function(){var e=this.geometry,t=this.pointMap;n.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),r("c",t,e,n,0,0,-1),r("t",t,e,n,0,0,1),r("n1",t,e,n,-1,-1,-1),r("n2",t,e,n,1,-1,-1),r("n3",t,e,n,-1,1,-1),r("n4",t,e,n,1,1,-1),r("f1",t,e,n,-1,-1,1),r("f2",t,e,n,1,-1,1),r("f3",t,e,n,-1,1,1),r("f4",t,e,n,1,1,1),r("u1",t,e,n,.7,1.1,-1),r("u2",t,e,n,-.7,1.1,-1),r("u3",t,e,n,0,2,-1),r("cf1",t,e,n,-1,0,1),r("cf2",t,e,n,1,0,1),r("cf3",t,e,n,0,-1,1),r("cf4",t,e,n,0,1,1),r("cn1",t,e,n,-1,0,-1),r("cn2",t,e,n,1,0,-1),r("cn3",t,e,n,0,-1,-1),r("cn4",t,e,n,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Qh=new sr;function Jh(e,t){this.object=e,void 0===t&&(t=16776960);var e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new $;r.setIndex(new R(e,1)),r.setAttribute("position",new R(n,3)),w.call(this,r,new b({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Kh(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new $;n.setIndex(new R(e,1)),n.setAttribute("position",new K([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),w.call(this,n,new b({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function $h(e,t,n){this.plane=e,this.size=void 0===t?1:t;e=void 0!==n?n:16776960,t=new $,t.setAttribute("position",new K([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),zs.call(this,t,new b({color:e,toneMapped:!1})),this.type="PlaneHelper",n=new $;n.setAttribute("position",new K([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),n.computeBoundingSphere(),this.add(new C(n,new Hr({color:e,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}((Jh.prototype=Object.create(w.prototype)).constructor=Jh).prototype.update=function(e){var t,n,r;void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Qh.setFromObject(this.object),Qh.isEmpty()||(e=Qh.min,t=Qh.max,(r=(n=this.geometry.attributes.position).array)[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere())},Jh.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Jh.prototype.copy=function(e){return w.prototype.copy.call(this,e),this.object=e.object,this},Jh.prototype.clone=function(){return(new this.constructor).copy(this)},((Kh.prototype=Object.create(w.prototype)).constructor=Kh).prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),m.prototype.updateMatrixWorld.call(this,e))},(($h.prototype=Object.create(zs.prototype)).constructor=$h).prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?H:D,this.lookAt(this.plane.normal),m.prototype.updateMatrixWorld.call(this,e)};var ed,td,nd=new Ye;function rd(e,t,n,r,i,a){m.call(this),this.type="ArrowHelper",void 0===e&&(e=new Ye(0,0,1)),void 0===t&&(t=new Ye(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===a&&(a=.2*i),void 0===ed&&((ed=new $).setAttribute("position",new K([0,0,0,0,1,0],3)),(td=new nu(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new zs(ed,new b({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new C(td,new Hr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}function id(e){var e=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],t=new $,e=(t.setAttribute("position",new K(e,3)),t.setAttribute("color",new K([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),new b({vertexColors:!0,toneMapped:!1}));w.call(this,t,e),this.type="AxesHelper"}((rd.prototype=Object.create(m.prototype)).constructor=rd).prototype.setDirection=function(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(nd.set(e.z,0,-e.x).normalize(),e=Math.acos(e.y),this.quaternion.setFromAxisAngle(nd,e))},rd.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},rd.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},rd.prototype.copy=function(e){return m.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},rd.prototype.clone=function(){return(new this.constructor).copy(this)},(id.prototype=Object.create(w.prototype)).constructor=id;var ad=Math.pow(2,8),od=[.125,.215,.35,.446,.526,.582],sd=5+od.length,ld={},ud=(ld[en]=0,ld[tn]=1,ld[rn]=2,ld[on]=3,ld[sn]=4,ld[ln]=5,ld[nn]=6,new vc),uh=(()=>{for(var e=[],t=[],n=[],r=8,i=0;i<sd;i++){for(var a=Math.pow(2,r),o=(t.push(a),1/a),o=(4<i?o=od[i-8+4-1]:0==i&&(o=0),n.push(o),1/(a-1)),a=-o/2,o=1+o/2,s=[a,a,o,a,o,o,a,a,o,o,a,o],l=new Float32Array(108),u=new Float32Array(72),c=new Float32Array(36),h=0;h<6;h++){var d=h%3*2/3-1,f=2<h?0:-1,d=[d,f,0,d+2/3,f,0,d+2/3,1+f,0,d,f,0,d+2/3,1+f,0,d,1+f,0],f=(l.set(d,18*h),u.set(s,12*h),[h,h,h,h,h,h]);c.set(f,6*h)}a=new $;a.setAttribute("position",new R(l,3)),a.setAttribute("uv",new R(u,2)),a.setAttribute("faceIndex",new R(c,1)),e.push(a),4<r&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}})(),cd=uh._lodPlanes,hd=uh._sizeLods,dd=uh._sigmas,fd=null,oh=(1+Math.sqrt(5))/2,ch=1/oh,pd=[new Ye(1,1,1),new Ye(-1,1,1),new Ye(1,1,-1),new Ye(-1,1,-1),new Ye(0,oh,ch),new Ye(0,oh,-ch),new Ye(ch,0,oh),new Ye(-ch,0,oh),new Ye(oh,ch,0),new Ye(-oh,ch,0)];function md(e){var t,n;this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=(e=20,t=new Float32Array(e),n=new Ye(0,1,0),new uu({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:ld[en]},outputEncoding:{value:ld[en]}},vertexShader:xd(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n"+bd()+"\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:Y,depthTest:!1,depthWrite:!1})),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function gd(e){e=new _n(3*ad,3*ad,e);return e.texture.mapping=ke,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function vd(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function yd(){return new uu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Xe(1,1)},inputEncoding:{value:ld[en]},outputEncoding:{value:ld[en]}},vertexShader:xd(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n"+bd()+"\n\n#include <common>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv = equirectUv( outputDirection );\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:Y,depthTest:!1,depthWrite:!1})}function _d(){return new uu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ld[en]},outputEncoding:{value:ld[en]}},vertexShader:xd(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n"+bd()+"\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:Y,depthTest:!1,depthWrite:!1})}function xd(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\t} else if (face == 2.0) {\n\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\t} else if (face == 5.0) {\n\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\t}\n\treturn direction;\n}\n\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"}function bd(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"}md.prototype={constructor:md,fromScene:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=.1),void 0===r&&(r=100),fd=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),0<t&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i},fromEquirectangular:function(e){return this._fromTexture(e)},fromCubemap:function(e){return this._fromTexture(e)},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=_d(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=yd(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<cd.length;e++)cd[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(fd),e.scissorTest=!1,vd(e,0,0,e.width,e.height)},_fromTexture:function(e){fd=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t},_allocateTargets:function(e){var t={magFilter:z,minFilter:z,generateMipmaps:!1,type:We,format:at,encoding:void 0===(t=e)||t.type!==We||t.encoding!==en&&t.encoding!==tn&&t.encoding!==nn?rn:e.encoding,depthBuffer:!1,stencilBuffer:!1},n=gd(t);return n.depthBuffer=!e,this._pingPongRenderTarget=gd(t),n},_compileMaterial:function(e){e=new C(cd[0],e);this._renderer.compile(e,ud)},_sceneToCubeUV:function(e,t,n,r){var i,a=new L(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],l=this._renderer,t=l.outputEncoding,n=l.toneMapping,u=l.getClearColor(),c=l.getClearAlpha(),h=(l.toneMapping=Ce,l.outputEncoding=en,e.background);h&&h.isColor&&(h.convertSRGBToLinear(),i=Math.max(h.r,h.g,h.b),i=Math.min(Math.max(Math.ceil(Math.log2(i)),-128),127),h=h.multiplyScalar(Math.pow(2,-i)),l.setClearColor(h,(i+128)/255),e.background=null);for(var d=0;d<6;d++){var f=d%3;0==f?(a.up.set(0,o[d],0),a.lookAt(s[d],0,0)):1==f?(a.up.set(0,0,o[d]),a.lookAt(0,s[d],0)):(a.up.set(0,o[d],0),a.lookAt(0,0,s[d])),vd(r,f*ad,2<d?ad:0,ad,ad),l.setRenderTarget(r),l.render(e,a)}l.toneMapping=n,l.outputEncoding=t,l.setClearColor(u,c)},_textureToCubeUV:function(e,t){var n=this._renderer,r=(e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=_d()):null==this._equirectShader&&(this._equirectShader=yd()),e.isCubeTexture?this._cubemapShader:this._equirectShader),i=new C(cd[0],r),r=r.uniforms;(r.envMap.value=e).isCubeTexture||r.texelSize.value.set(1/e.image.width,1/e.image.height),r.inputEncoding.value=ld[e.encoding],r.outputEncoding.value=ld[t.texture.encoding],vd(t,0,0,3*ad,2*ad),n.setRenderTarget(t),n.render(i,ud)},_applyPMREM:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<sd;r++){var i=Math.sqrt(dd[r]*dd[r]-dd[r-1]*dd[r-1]);this._blur(e,r-1,r,i,pd[(r-1)%pd.length])}t.autoClear=n},_blur:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)},_halfBlur:function(e,t,n,r,i,a,o){for(var s=this._renderer,l=this._blurMaterial,u=("latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!"),new C(cd[r],l)),l=l.uniforms,c=hd[n]-1,c=isFinite(i)?Math.PI/(2*c):2*Math.PI/39,h=i/c,d=isFinite(i)?1+Math.floor(3*h):20,f=(20<d&&console.warn("sigmaRadians, "+i+", is too large and will clip, as it requested "+d+" samples when the maximum is set to 20"),[]),p=0,m=0;m<20;++m){var g=m/h,g=Math.exp(-g*g/2);f.push(g),0==m?p+=g:m<d&&(p+=2*g)}for(var v=0;v<f.length;v++)f[v]=f[v]/p;l.envMap.value=e.texture,l.samples.value=d,l.weights.value=f,l.latitudinal.value="latitudinal"===a,o&&(l.poleAxis.value=o),l.dTheta.value=c,l.mipInt.value=8-n,l.inputEncoding.value=ld[e.texture.encoding],l.outputEncoding.value=ld[e.texture.encoding];i=hd[r];vd(t,3*Math.max(0,ad-2*i),(0===r?0:2*ad)+2*i*(4<r?r-8+4:0),3*i,2*i),s.setRenderTarget(t),s.render(u,ud)}};function wd(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Qu.call(this,e),this.type="catmullrom",this.closed=!0}function Md(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Qu.call(this,e),this.type="catmullrom"}function Td(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Qu.call(this,e),this.type="catmullrom"}l.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(l.prototype),(e.prototype.constructor=e).prototype.getPoint=t,e},Object.assign(lc.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");e=this.getPoints(e);return this.createGeometry(e)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");e=this.getSpacedPoints(e);return this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new M,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Ye(i.x,i.y,i.z||0))}return t}}),Object.assign(uc.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),wd.prototype=Object.create(Qu.prototype),Md.prototype=Object.create(Qu.prototype),Td.prototype=Object.create(Qu.prototype),Object.assign(Td.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Gh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},kh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(t.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Sc.extractUrlBase(e)}}),t.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Cc.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Eh.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(sr.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(cr.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Gi.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Rh.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Te,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Te.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Te.ceilPowerOfTwo(e)}}),Object.assign(gn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ee.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ye).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)}}),wr.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},f.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(yr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(X.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(X,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),X.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),X.getNormal(e,t,n,r)}}),Object.assign(cc.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ul(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Jl(this,e)}}),Object.assign(Xe.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ye.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Se.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(M.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(m.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(m.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(C.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(C.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Ts.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ls.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ss.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(l.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),L.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(u.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(R.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===dn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(dn)}}}),Object.assign(R.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?dn:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign($.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new R(t,arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties($.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ec.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(xh.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Ko.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===dn},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Ko.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?dn:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(zl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(yh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(o.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new x}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(du.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ii.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Yo.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Yo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?tn:en}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Uo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(_n.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Kc.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new zc).load(e,function(e){t.setBuffer(e)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),ih.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Bi.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};lh={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};vn.crossOrigin=void 0,vn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Gu,i=(i.setCrossOrigin(this.crossOrigin),i.load(e,n,void 0,r));return t&&(i.mapping=t),i},vn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Hu,i=(i.setCrossOrigin(this.crossOrigin),i.load(e,n,void 0,r));return t&&(i.mapping=t),i},vn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},vn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};uh={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"118"}})),e.ACESFilmicToneMapping=U,e.AddEquation=ne,e.AddOperation=I,e.AdditiveAnimationBlendMode=2501,e.AdditiveBlending=Q,e.AlphaFormat=et,e.AlwaysDepth=_e,e.AlwaysStencilFunc=519,e.AmbientLight=xc,e.AmbientLightProbe=Gc,e.AnimationClip=Cu,e.AnimationLoader=Bu,e.AnimationMixer=vh,e.AnimationObjectGroup=mh,e.AnimationUtils=T,e.ArcCurve=Vu,e.ArrayCamera=jo,e.ArrowHelper=rd,e.Audio=Kc,e.AudioAnalyser=ih,e.AudioContext=Uc,e.AudioListener=Jc,e.AudioLoader=zc,e.AxesHelper=id,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new id(e)},e.BackSide=H,e.BasicDepthPacking=3200,e.BasicShadowMap=0,e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Uu(e)},e.Bone=Rs,e.BooleanKeyframeTrack=Mu,e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Jh(e,t)},e.Box2=Eh,e.Box3=sr,e.Box3Helper=Kh,e.BoxBufferGeometry=Ri,e.BoxGeometry=Li,e.BoxHelper=Jh,e.BufferAttribute=R,e.BufferGeometry=$,e.BufferGeometryLoader=Lc,e.ByteType=c,e.Cache=Ou,e.Camera=ki,e.CameraHelper=Zh,e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.CanvasTexture=$s,e.CatmullRomCurve3=Qu,e.CineonToneMapping=F,e.CircleBufferGeometry=ou,e.CircleGeometry=au,e.ClampToEdgeWrapping=Ue,e.Clock=qc,e.ClosedSplineCurve3=wd,e.Color=x,e.ColorKeyframeTrack=Tu,e.CompressedTexture=Ks,e.CompressedTextureLoader=Fu,e.ConeBufferGeometry=iu,e.ConeGeometry=ru,e.CubeCamera=Bi,e.CubeGeometry=Li,e.CubeReflectionMapping=Oe,e.CubeRefractionMapping=De,e.CubeTexture=sa,e.CubeTextureLoader=Hu,e.CubeUVReflectionMapping=ke,e.CubeUVRefractionMapping=Be,e.CubicBezierCurve=ec,e.CubicBezierCurve3=tc,e.CubicInterpolant=xu,e.CullFaceBack=V,e.CullFaceFront=W,e.CullFaceFrontBack=3,e.CullFaceNone=j,e.Curve=l,e.CurvePath=lc,e.CustomBlending=te,e.CustomToneMapping=Pe,e.CylinderBufferGeometry=nu,e.CylinderGeometry=tu,e.Cylindrical=Th,e.DataTexture=Ui,e.DataTexture2DArray=la,e.DataTexture3D=ua,e.DataTextureLoader=Uu,e.DecrementStencilOp=7683,e.DecrementWrapStencilOp=34056,e.DefaultLoadingManager=Nu,e.DepthFormat=ot,e.DepthStencilFormat=st,e.DepthTexture=el,e.DirectionalLight=_c,e.DirectionalLightHelper=Xh,e.DirectionalLightShadow=yc,e.DiscreteInterpolant=wu,e.DodecahedronBufferGeometry=fl,e.DodecahedronGeometry=dl,e.DoubleSide=q,e.DstAlphaFactor=fe,e.DstColorFactor=me,e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new R(e,t).setUsage(dn)},e.DynamicCopyUsage=35050,e.DynamicDrawUsage=dn,e.DynamicReadUsage=35049,e.EdgesGeometry=eu,e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new w(new eu(e.geometry),new b({color:void 0!==t?t:16777215}))},e.EllipseCurve=ju,e.EqualDepth=we,e.EqualStencilFunc=514,e.EquirectangularReflectionMapping=Ne,e.EquirectangularRefractionMapping=Ie,e.Euler=On,e.EventDispatcher=fn,e.ExtrudeBufferGeometry=zl,e.ExtrudeGeometry=Ul,e.Face3=Ur,e.Face4=function(e,t,n,r,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Ur(e,t,n,i,a,o)},e.FaceColors=1,e.FileLoader=ku,e.FlatShading=1,e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new K(e,t)},e.Float32BufferAttribute=K,e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Qr(e,t)},e.Float64BufferAttribute=Qr,e.FloatType=Qe,e.Fog=Jo,e.FogExp2=Qo,e.Font=Bc,e.FontLoader=Fc,e.FrontFaceDirectionCCW=1,e.FrontFaceDirectionCW=0,e.FrontSide=D,e.Frustum=Gi,e.GammaEncoding=nn,e.Geometry=M,e.GeometryUtils=lh,e.GreaterDepth=Le,e.GreaterEqualDepth=Me,e.GreaterEqualStencilFunc=518,e.GreaterStencilFunc=516,e.GridHelper=Gh,e.Group=Vo,e.HalfFloatType=Je,e.HemisphereLight=hc,e.HemisphereLightHelper=Hh,e.HemisphereLightProbe=Hc,e.IcosahedronBufferGeometry=hl,e.IcosahedronGeometry=cl,e.ImageBitmapLoader=Ic,e.ImageLoader=zu,e.ImageUtils=vn,e.ImmediateRenderObject=Ch,e.IncrementStencilOp=7682,e.IncrementWrapStencilOp=34055,e.InstancedBufferAttribute=Ac,e.InstancedBufferGeometry=Ec,e.InstancedInterleavedBuffer=_h,e.InstancedMesh=Ns,e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new qr(e,t)},e.Int16BufferAttribute=qr,e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Yr(e,t)},e.Int32BufferAttribute=Yr,e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new jr(e,t)},e.Int8BufferAttribute=jr,e.IntType=p,e.InterleavedBuffer=Ko,e.InterleavedBufferAttribute=ts,e.Interpolant=_u,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.InvertStencilOp=5386,e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.KeepStencilOp=7680,e.KeyframeTrack=s,e.LOD=Ts,e.LatheBufferGeometry=Ql,e.LatheGeometry=Zl,e.Layers=Dn,e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},e.LessDepth=xe,e.LessEqualDepth=be,e.LessEqualStencilFunc=515,e.LessStencilFunc=513,e.Light=u,e.LightProbe=Mc,e.LightShadow=dc,e.Line=zs,e.Line3=Rh,e.LineBasicMaterial=b,e.LineCurve=nc,e.LineCurve3=rc,e.LineDashedMaterial=vu,e.LineLoop=js,e.LinePieces=1,e.LineSegments=w,e.LineStrip=0,e.LinearEncoding=en,e.LinearFilter=G,e.LinearInterpolant=bu,e.LinearMipMapLinearFilter=1008,e.LinearMipMapNearestFilter=1007,e.LinearMipmapLinearFilter=Ve,e.LinearMipmapNearestFilter=je,e.LinearToneMapping=k,e.Loader=t,e.LoaderUtils=Sc,e.LoadingManager=Du,e.LogLuvEncoding=an,e.LoopOnce=2200,e.LoopPingPong=2202,e.LoopRepeat=2201,e.LuminanceAlphaFormat=it,e.LuminanceFormat=rt,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},e.Material=o,e.MaterialLoader=Tc,e.Math=Te,e.MathUtils=Te,e.Matrix3=gn,e.Matrix4=Ee,e.MaxEquation=oe,e.Mesh=C,e.MeshBasicMaterial=Hr,e.MeshDepthMaterial=Io,e.MeshDistanceMaterial=ko,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MeshLambertMaterial=mu,e.MeshMatcapMaterial=gu,e.MeshNormalMaterial=pu,e.MeshPhongMaterial=du,e.MeshPhysicalMaterial=hu,e.MeshStandardMaterial=cu,e.MeshToonMaterial=fu,e.MinEquation=ae,e.MirroredRepeatWrapping=ze,e.MixOperation=N,e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,(e.materials=e).clone=function(){return e.slice()},e},e.MultiplyBlending=ee,e.MultiplyOperation=A,e.NearestFilter=z,e.NearestMipMapLinearFilter=1005,e.NearestMipMapNearestFilter=1004,e.NearestMipmapLinearFilter=Ge,e.NearestMipmapNearestFilter=He,e.NeverDepth=ye,e.NeverStencilFunc=512,e.NoBlending=Y,e.NoColors=0,e.NoToneMapping=Ce,e.NormalAnimationBlendMode=2500,e.NormalBlending=Z,e.NotEqualDepth=Re,e.NotEqualStencilFunc=517,e.NumberKeyframeTrack=Su,e.Object3D=m,e.ObjectLoader=Cc,e.ObjectSpaceNormalMap=hn,e.OctahedronBufferGeometry=ul,e.OctahedronGeometry=ll,e.OneFactor=le,e.OneMinusDstAlphaFactor=pe,e.OneMinusDstColorFactor=ge,e.OneMinusSrcAlphaFactor=de,e.OneMinusSrcColorFactor=ce,e.OrthographicCamera=vc,e.PCFShadowMap=P,e.PCFSoftShadowMap=E,e.PMREMGenerator=md,e.ParametricBufferGeometry=rl,e.ParametricGeometry=nl,e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ms(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Vs(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Zs(e,t)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Vs(e)},e.Path=uc,e.PerspectiveCamera=L,e.Plane=wr,e.PlaneBufferGeometry=qi,e.PlaneGeometry=Wi,e.PlaneHelper=$h,e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Zs(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Vs(e)},e.PointLight=gc,e.PointLightHelper=Bh,e.Points=Zs,e.PointsMaterial=Vs,e.PolarGridHelper=jh,e.PolyhedronBufferGeometry=al,e.PolyhedronGeometry=il,e.PositionalAudio=rh,e.PropertyBinding=ph,e.PropertyMixer=ah,e.QuadraticBezierCurve=ic,e.QuadraticBezierCurve3=ac,e.Quaternion=f,e.QuaternionKeyframeTrack=Au,e.QuaternionLinearInterpolant=Eu,e.REVISION="118",e.RGBADepthPacking=un,e.RGBAFormat=nt,e.RGBAIntegerFormat=ft,e.RGBA_ASTC_10x10_Format=kt,e.RGBA_ASTC_10x5_Format=Dt,e.RGBA_ASTC_10x6_Format=Nt,e.RGBA_ASTC_10x8_Format=It,e.RGBA_ASTC_12x10_Format=Bt,e.RGBA_ASTC_12x12_Format=Ft,e.RGBA_ASTC_4x4_Format=St,e.RGBA_ASTC_5x4_Format=Et,e.RGBA_ASTC_5x5_Format=At,e.RGBA_ASTC_6x5_Format=Lt,e.RGBA_ASTC_6x6_Format=Rt,e.RGBA_ASTC_8x5_Format=Ct,e.RGBA_ASTC_8x6_Format=Pt,e.RGBA_ASTC_8x8_Format=Ot,e.RGBA_BPTC_Format=Ut,e.RGBA_ETC2_EAC_Format=Tt,e.RGBA_PVRTC_2BPPV1_Format=bt,e.RGBA_PVRTC_4BPPV1_Format=xt,e.RGBA_S3TC_DXT1_Format=mt,e.RGBA_S3TC_DXT3_Format=gt,e.RGBA_S3TC_DXT5_Format=vt,e.RGBDEncoding=ln,e.RGBEEncoding=rn,e.RGBEFormat=at,e.RGBFormat=tt,e.RGBIntegerFormat=dt,e.RGBM16Encoding=sn,e.RGBM7Encoding=on,e.RGB_ETC1_Format=wt,e.RGB_ETC2_Format=Mt,e.RGB_PVRTC_2BPPV1_Format=_t,e.RGB_PVRTC_4BPPV1_Format=yt,e.RGB_S3TC_DXT1_Format=pt,e.RGFormat=ct,e.RGIntegerFormat=ht,e.RawShaderMaterial=uu,e.Ray=yr,e.Raycaster=xh,e.RectAreaLight=bc,e.RedFormat=lt,e.RedIntegerFormat=ut,e.ReinhardToneMapping=B,e.RepeatWrapping=Fe,e.ReplaceStencilOp=7681,e.ReverseSubtractEquation=ie,e.RingBufferGeometry=Yl,e.RingGeometry=Xl,e.SRGB8_ALPHA8_ASTC_10x10_Format=Jt,e.SRGB8_ALPHA8_ASTC_10x5_Format=Yt,e.SRGB8_ALPHA8_ASTC_10x6_Format=Zt,e.SRGB8_ALPHA8_ASTC_10x8_Format=Qt,e.SRGB8_ALPHA8_ASTC_12x10_Format=Kt,e.SRGB8_ALPHA8_ASTC_12x12_Format=$t,e.SRGB8_ALPHA8_ASTC_4x4_Format=zt,e.SRGB8_ALPHA8_ASTC_5x4_Format=Ht,e.SRGB8_ALPHA8_ASTC_5x5_Format=Gt,e.SRGB8_ALPHA8_ASTC_6x5_Format=jt,e.SRGB8_ALPHA8_ASTC_6x6_Format=Vt,e.SRGB8_ALPHA8_ASTC_8x5_Format=Wt,e.SRGB8_ALPHA8_ASTC_8x6_Format=qt,e.SRGB8_ALPHA8_ASTC_8x8_Format=Xt,e.Scene=Xn,e.SceneUtils=uh,e.ShaderChunk=_,e.ShaderLib=Xi,e.ShaderMaterial=Ii,e.ShadowMaterial=lu,e.Shape=cc,e.ShapeBufferGeometry=Kl,e.ShapeGeometry=Jl,e.ShapePath=kc,e.ShapeUtils=kl,e.ShortType=h,e.Skeleton=Ls,e.SkeletonHelper=kh,e.SkinnedMesh=Ss,e.SmoothShading=2,e.Sphere=cr,e.SphereBufferGeometry=ql,e.SphereGeometry=Wl,e.Spherical=Mh,e.SphericalHarmonics3=wc,e.Spline=Td,e.SplineCurve=oc,e.SplineCurve3=Md,e.SpotLight=pc,e.SpotLightHelper=Oh,e.SpotLightShadow=fc,e.Sprite=ms,e.SpriteMaterial=ns,e.SrcAlphaFactor=he,e.SrcAlphaSaturateFactor=ve,e.SrcColorFactor=ue,e.StaticCopyUsage=35046,e.StaticDrawUsage=35044,e.StaticReadUsage=35045,e.StereoCamera=Wc,e.StreamCopyUsage=35042,e.StreamDrawUsage=35040,e.StreamReadUsage=35041,e.StringKeyframeTrack=Lu,e.SubtractEquation=re,e.SubtractiveBlending=J,e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},e.TangentSpaceNormalMap=cn,e.TetrahedronBufferGeometry=sl,e.TetrahedronGeometry=ol,e.TextBufferGeometry=Vl,e.TextGeometry=jl,e.Texture=d,e.TextureLoader=Gu,e.TorusBufferGeometry=_l,e.TorusGeometry=yl,e.TorusKnotBufferGeometry=vl,e.TorusKnotGeometry=gl,e.Triangle=X,e.TriangleFanDrawMode=2,e.TriangleStripDrawMode=1,e.TrianglesDrawMode=0,e.TubeBufferGeometry=ml,e.TubeGeometry=pl,e.UVMapping=300,e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Xr(e,t)},e.Uint16BufferAttribute=Xr,e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Zr(e,t)},e.Uint32BufferAttribute=Zr,e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Vr(e,t)},e.Uint8BufferAttribute=Vr,e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Wr(e,t)},e.Uint8ClampedBufferAttribute=Wr,e.Uniform=yh,e.UniformsLib=Ae,e.UniformsUtils=Oi,e.UnsignedByteType=We,e.UnsignedInt248Type=$e,e.UnsignedIntType=Ze,e.UnsignedShort4444Type=v,e.UnsignedShort5551Type=y,e.UnsignedShort565Type=Ke,e.UnsignedShortType=qe,e.VSMShadowMap=O,e.Vector2=Xe,e.Vector3=Ye,e.Vector4=Se,e.VectorKeyframeTrack=Ru,e.Vertex=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Ye(e,t,n)},e.VertexColors=2,e.VideoTexture=Js,e.WebGL1Renderer=Zo,e.WebGLCubeRenderTarget=Fi,e.WebGLMultisampleRenderTarget=xn,e.WebGLRenderTarget=_n,e.WebGLRenderTargetCube=function(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Fi(e,n)},e.WebGLRenderer=Yo,e.WebGLUtils=Go,e.WireframeGeometry=tl,e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new w(new tl(e.geometry),new b({color:void 0!==t?t:16777215}))},e.WrapAroundEnding=2402,e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ku(e)},e.ZeroCurvatureEnding=2400,e.ZeroFactor=se,e.ZeroSlopeEnding=2401,e.ZeroStencilOp=0,e.sRGBEncoding=tn,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).THREE={})},{}]},{},[2]);